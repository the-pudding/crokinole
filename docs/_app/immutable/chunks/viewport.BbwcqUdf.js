import{K as qn,ab as $n,ac as ei,ad as rn,aa as ti,a8 as ni,s as ht,u as Fe,i as me,d as Y,a1 as ct,h as Ht,Y as ze,a2 as an,m as rt,C as Gt,e as ae,c as oe,a as fe,ae as dt,a7 as on,D as Ut,E as Xt,F as Yt,n as Qe,a4 as Pt,r as Gn,t as Le,q as Me,b as He,v as Ce,j as he,f as j,g as tt,af as Qt,X as wt,a6 as Wt,a5 as We,y as ue,x as ii,ag as ri,k as ai}from"./scheduler.CMTgM8h0.js";import{S as vt,i as mt,g as Ze,a as ge,c as Ke,t as ce,f as Zt,b as gt,d as _t,m as yt,e as xt,h as hn}from"./index.Yj-hjQkw.js";import{w as at,b as Kt,d as zt,r as ut}from"./paths.CKOcAnm0.js";function Ue(m){return(m==null?void 0:m.length)!==void 0?m:Array.from(m)}function sn(m,h){const r={},v={},f={$$scope:1};let n=m.length;for(;n--;){const a=m[n],c=h[n];if(c){for(const o in a)o in c||(v[o]=1);for(const o in c)f[o]||(r[o]=c[o],f[o]=1);m[n]=c}else for(const o in a)f[o]=1}for(const a in v)a in r||(r[a]=void 0);return r}function na(m){return typeof m=="object"&&m!==null?m:{}}function bt(m,h,r){this.k=m,this.x=h,this.y=r}bt.prototype={constructor:bt,scale:function(m){return m===1?this:new bt(this.k*m,this.x,this.y)},translate:function(m,h){return m===0&h===0?this:new bt(this.k,this.x+this.k*m,this.y+this.k*h)},apply:function(m){return[m[0]*this.k+this.x,m[1]*this.k+this.y]},applyX:function(m){return m*this.k+this.x},applyY:function(m){return m*this.k+this.y},invert:function(m){return[(m[0]-this.x)/this.k,(m[1]-this.y)/this.k]},invertX:function(m){return(m-this.x)/this.k},invertY:function(m){return(m-this.y)/this.k},rescaleX:function(m){return m.copy().domain(m.range().map(this.invertX,this).map(m.invert,m))},rescaleY:function(m){return m.copy().domain(m.range().map(this.invertY,this).map(m.invert,m))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};bt.prototype;function vn(m,{delay:h=0,duration:r=400,easing:v=qn}={}){const f=+getComputedStyle(m).opacity;return{delay:h,duration:r,easing:v,css:n=>`opacity: ${n*f}`}}var Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Un(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var Xn={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(m,h){(function(v,f){m.exports=f()})(Ne,function(){return function(r){var v={};function f(n){if(v[n])return v[n].exports;var a=v[n]={i:n,l:!1,exports:{}};return r[n].call(a.exports,a,a.exports,f),a.l=!0,a.exports}return f.m=r,f.c=v,f.d=function(n,a,c){f.o(n,a)||Object.defineProperty(n,a,{enumerable:!0,get:c})},f.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},f.t=function(n,a){if(a&1&&(n=f(n)),a&8||a&4&&typeof n=="object"&&n&&n.__esModule)return n;var c=Object.create(null);if(f.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:n}),a&2&&typeof n!="string")for(var o in n)f.d(c,o,(function(d){return n[d]}).bind(null,o));return c},f.n=function(n){var a=n&&n.__esModule?function(){return n.default}:function(){return n};return f.d(a,"a",a),a},f.o=function(n,a){return Object.prototype.hasOwnProperty.call(n,a)},f.p="",f(f.s=20)}([function(r,v){var f={};r.exports=f,function(){f._baseDelta=1e3/60,f._nextId=0,f._seed=0,f._nowStartTime=+new Date,f._warnedOnce={},f._decomp=null,f.extend=function(a,c){var o,d;typeof c=="boolean"?(o=2,d=c):(o=1,d=!0);for(var u=o;u<arguments.length;u++){var e=arguments[u];if(e)for(var i in e)d&&e[i]&&e[i].constructor===Object&&(!a[i]||a[i].constructor===Object)?(a[i]=a[i]||{},f.extend(a[i],d,e[i])):a[i]=e[i]}return a},f.clone=function(a,c){return f.extend({},c,a)},f.keys=function(a){if(Object.keys)return Object.keys(a);var c=[];for(var o in a)c.push(o);return c},f.values=function(a){var c=[];if(Object.keys){for(var o=Object.keys(a),d=0;d<o.length;d++)c.push(a[o[d]]);return c}for(var u in a)c.push(a[u]);return c},f.get=function(a,c,o,d){c=c.split(".").slice(o,d);for(var u=0;u<c.length;u+=1)a=a[c[u]];return a},f.set=function(a,c,o,d,u){var e=c.split(".").slice(d,u);return f.get(a,c,0,-1)[e[e.length-1]]=o,o},f.shuffle=function(a){for(var c=a.length-1;c>0;c--){var o=Math.floor(f.random()*(c+1)),d=a[c];a[c]=a[o],a[o]=d}return a},f.choose=function(a){return a[Math.floor(f.random()*a.length)]},f.isElement=function(a){return typeof HTMLElement<"u"?a instanceof HTMLElement:!!(a&&a.nodeType&&a.nodeName)},f.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},f.isFunction=function(a){return typeof a=="function"},f.isPlainObject=function(a){return typeof a=="object"&&a.constructor===Object},f.isString=function(a){return toString.call(a)==="[object String]"},f.clamp=function(a,c,o){return a<c?c:a>o?o:a},f.sign=function(a){return a<0?-1:1},f.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-f._nowStartTime},f.random=function(a,c){return a=typeof a<"u"?a:0,c=typeof c<"u"?c:1,a+n()*(c-a)};var n=function(){return f._seed=(f._seed*9301+49297)%233280,f._seed/233280};f.colorToNumber=function(a){return a=a.replace("#",""),a.length==3&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},f.logLevel=1,f.log=function(){console&&f.logLevel>0&&f.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.info=function(){console&&f.logLevel>0&&f.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.warn=function(){console&&f.logLevel>0&&f.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.warnOnce=function(){var a=Array.prototype.slice.call(arguments).join(" ");f._warnedOnce[a]||(f.warn(a),f._warnedOnce[a]=!0)},f.deprecated=function(a,c,o){a[c]=f.chain(function(){f.warnOnce("🔅 deprecated 🔅",o)},a[c])},f.nextId=function(){return f._nextId++},f.indexOf=function(a,c){if(a.indexOf)return a.indexOf(c);for(var o=0;o<a.length;o++)if(a[o]===c)return o;return-1},f.map=function(a,c){if(a.map)return a.map(c);for(var o=[],d=0;d<a.length;d+=1)o.push(c(a[d]));return o},f.topologicalSort=function(a){var c=[],o=[],d=[];for(var u in a)!o[u]&&!d[u]&&f._topologicalSort(u,o,d,a,c);return c},f._topologicalSort=function(a,c,o,d,u){var e=d[a]||[];o[a]=!0;for(var i=0;i<e.length;i+=1){var t=e[i];o[t]||c[t]||f._topologicalSort(t,c,o,d,u)}o[a]=!1,c[a]=!0,u.push(a)},f.chain=function(){for(var a=[],c=0;c<arguments.length;c+=1){var o=arguments[c];o._chained?a.push.apply(a,o._chained):a.push(o)}var d=function(){for(var u,e=new Array(arguments.length),i=0,t=arguments.length;i<t;i++)e[i]=arguments[i];for(i=0;i<a.length;i+=1){var l=a[i].apply(u,e);typeof l<"u"&&(u=l)}return u};return d._chained=a,d},f.chainPathBefore=function(a,c,o){return f.set(a,c,f.chain(o,f.get(a,c)))},f.chainPathAfter=function(a,c,o){return f.set(a,c,f.chain(f.get(a,c),o))},f.setDecomp=function(a){f._decomp=a},f.getDecomp=function(){var a=f._decomp;try{!a&&typeof window<"u"&&(a=window.decomp),!a&&typeof Ne<"u"&&(a=Ne.decomp)}catch{a=null}return a}}()},function(r,v){var f={};r.exports=f,function(){f.create=function(n){var a={min:{x:0,y:0},max:{x:0,y:0}};return n&&f.update(a,n),a},f.update=function(n,a,c){n.min.x=1/0,n.max.x=-1/0,n.min.y=1/0,n.max.y=-1/0;for(var o=0;o<a.length;o++){var d=a[o];d.x>n.max.x&&(n.max.x=d.x),d.x<n.min.x&&(n.min.x=d.x),d.y>n.max.y&&(n.max.y=d.y),d.y<n.min.y&&(n.min.y=d.y)}c&&(c.x>0?n.max.x+=c.x:n.min.x+=c.x,c.y>0?n.max.y+=c.y:n.min.y+=c.y)},f.contains=function(n,a){return a.x>=n.min.x&&a.x<=n.max.x&&a.y>=n.min.y&&a.y<=n.max.y},f.overlaps=function(n,a){return n.min.x<=a.max.x&&n.max.x>=a.min.x&&n.max.y>=a.min.y&&n.min.y<=a.max.y},f.translate=function(n,a){n.min.x+=a.x,n.max.x+=a.x,n.min.y+=a.y,n.max.y+=a.y},f.shift=function(n,a){var c=n.max.x-n.min.x,o=n.max.y-n.min.y;n.min.x=a.x,n.max.x=a.x+c,n.min.y=a.y,n.max.y=a.y+o}}()},function(r,v){var f={};r.exports=f,function(){f.create=function(n,a){return{x:n||0,y:a||0}},f.clone=function(n){return{x:n.x,y:n.y}},f.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},f.magnitudeSquared=function(n){return n.x*n.x+n.y*n.y},f.rotate=function(n,a,c){var o=Math.cos(a),d=Math.sin(a);c||(c={});var u=n.x*o-n.y*d;return c.y=n.x*d+n.y*o,c.x=u,c},f.rotateAbout=function(n,a,c,o){var d=Math.cos(a),u=Math.sin(a);o||(o={});var e=c.x+((n.x-c.x)*d-(n.y-c.y)*u);return o.y=c.y+((n.x-c.x)*u+(n.y-c.y)*d),o.x=e,o},f.normalise=function(n){var a=f.magnitude(n);return a===0?{x:0,y:0}:{x:n.x/a,y:n.y/a}},f.dot=function(n,a){return n.x*a.x+n.y*a.y},f.cross=function(n,a){return n.x*a.y-n.y*a.x},f.cross3=function(n,a,c){return(a.x-n.x)*(c.y-n.y)-(a.y-n.y)*(c.x-n.x)},f.add=function(n,a,c){return c||(c={}),c.x=n.x+a.x,c.y=n.y+a.y,c},f.sub=function(n,a,c){return c||(c={}),c.x=n.x-a.x,c.y=n.y-a.y,c},f.mult=function(n,a){return{x:n.x*a,y:n.y*a}},f.div=function(n,a){return{x:n.x/a,y:n.y/a}},f.perp=function(n,a){return a=a===!0?-1:1,{x:a*-n.y,y:a*n.x}},f.neg=function(n){return{x:-n.x,y:-n.y}},f.angle=function(n,a){return Math.atan2(a.y-n.y,a.x-n.x)},f._temp=[f.create(),f.create(),f.create(),f.create(),f.create(),f.create()]}()},function(r,v,f){var n={};r.exports=n;var a=f(2),c=f(0);(function(){n.create=function(o,d){for(var u=[],e=0;e<o.length;e++){var i=o[e],t={x:i.x,y:i.y,index:e,body:d,isInternal:!1};u.push(t)}return u},n.fromPath=function(o,d){var u=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,e=[];return o.replace(u,function(i,t,l){e.push({x:parseFloat(t),y:parseFloat(l)})}),n.create(e,d)},n.centre=function(o){for(var d=n.area(o,!0),u={x:0,y:0},e,i,t,l=0;l<o.length;l++)t=(l+1)%o.length,e=a.cross(o[l],o[t]),i=a.mult(a.add(o[l],o[t]),e),u=a.add(u,i);return a.div(u,6*d)},n.mean=function(o){for(var d={x:0,y:0},u=0;u<o.length;u++)d.x+=o[u].x,d.y+=o[u].y;return a.div(d,o.length)},n.area=function(o,d){for(var u=0,e=o.length-1,i=0;i<o.length;i++)u+=(o[e].x-o[i].x)*(o[e].y+o[i].y),e=i;return d?u/2:Math.abs(u)/2},n.inertia=function(o,d){for(var u=0,e=0,i=o,t,l,s=0;s<i.length;s++)l=(s+1)%i.length,t=Math.abs(a.cross(i[l],i[s])),u+=t*(a.dot(i[l],i[l])+a.dot(i[l],i[s])+a.dot(i[s],i[s])),e+=t;return d/6*(u/e)},n.translate=function(o,d,u){u=typeof u<"u"?u:1;var e=o.length,i=d.x*u,t=d.y*u,l;for(l=0;l<e;l++)o[l].x+=i,o[l].y+=t;return o},n.rotate=function(o,d,u){if(d!==0){var e=Math.cos(d),i=Math.sin(d),t=u.x,l=u.y,s=o.length,p,g,w,T;for(T=0;T<s;T++)p=o[T],g=p.x-t,w=p.y-l,p.x=t+(g*e-w*i),p.y=l+(g*i+w*e);return o}},n.contains=function(o,d){for(var u=d.x,e=d.y,i=o.length,t=o[i-1],l,s=0;s<i;s++){if(l=o[s],(u-t.x)*(l.y-t.y)+(e-t.y)*(t.x-l.x)>0)return!1;t=l}return!0},n.scale=function(o,d,u,e){if(d===1&&u===1)return o;e=e||n.centre(o);for(var i,t,l=0;l<o.length;l++)i=o[l],t=a.sub(i,e),o[l].x=e.x+t.x*d,o[l].y=e.y+t.y*u;return o},n.chamfer=function(o,d,u,e,i){typeof d=="number"?d=[d]:d=d||[8],u=typeof u<"u"?u:-1,e=e||2,i=i||14;for(var t=[],l=0;l<o.length;l++){var s=o[l-1>=0?l-1:o.length-1],p=o[l],g=o[(l+1)%o.length],w=d[l<d.length?l:d.length-1];if(w===0){t.push(p);continue}var T=a.normalise({x:p.y-s.y,y:s.x-p.x}),C=a.normalise({x:g.y-p.y,y:p.x-g.x}),_=Math.sqrt(2*Math.pow(w,2)),S=a.mult(c.clone(T),w),x=a.normalise(a.mult(a.add(T,C),.5)),y=a.sub(p,a.mult(x,_)),b=u;u===-1&&(b=Math.pow(w,.32)*1.75),b=c.clamp(b,e,i),b%2===1&&(b+=1);for(var A=Math.acos(a.dot(T,C)),M=A/b,P=0;P<b;P++)t.push(a.add(a.rotate(S,M*P),y))}return t},n.clockwiseSort=function(o){var d=n.mean(o);return o.sort(function(u,e){return a.angle(d,u)-a.angle(d,e)}),o},n.isConvex=function(o){var d=0,u=o.length,e,i,t,l;if(u<3)return null;for(e=0;e<u;e++)if(i=(e+1)%u,t=(e+2)%u,l=(o[i].x-o[e].x)*(o[t].y-o[i].y),l-=(o[i].y-o[e].y)*(o[t].x-o[i].x),l<0?d|=1:l>0&&(d|=2),d===3)return!1;return d!==0?!0:null},n.hull=function(o){var d=[],u=[],e,i;for(o=o.slice(0),o.sort(function(t,l){var s=t.x-l.x;return s!==0?s:t.y-l.y}),i=0;i<o.length;i+=1){for(e=o[i];u.length>=2&&a.cross3(u[u.length-2],u[u.length-1],e)<=0;)u.pop();u.push(e)}for(i=o.length-1;i>=0;i-=1){for(e=o[i];d.length>=2&&a.cross3(d[d.length-2],d[d.length-1],e)<=0;)d.pop();d.push(e)}return d.pop(),u.pop(),d.concat(u)}})()},function(r,v,f){var n={};r.exports=n;var a=f(3),c=f(2),o=f(7),d=f(0),u=f(1),e=f(11);(function(){n._timeCorrection=!0,n._inertiaScale=4,n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,n._baseDelta=1e3/60,n.create=function(t){var l={id:d.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:a.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},s=d.extend(l,t);return i(s,t),s},n.nextGroup=function(t){return t?n._nextNonCollidingGroupId--:n._nextCollidingGroupId++},n.nextCategory=function(){return n._nextCategory=n._nextCategory<<1,n._nextCategory};var i=function(t,l){l=l||{},n.set(t,{bounds:t.bounds||u.create(t.vertices),positionPrev:t.positionPrev||c.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),a.rotate(t.vertices,t.angle,t.position),e.rotate(t.axes,t.angle),u.update(t.bounds,t.vertices,t.velocity),n.set(t,{axes:l.axes||t.axes,area:l.area||t.area,mass:l.mass||t.mass,inertia:l.inertia||t.inertia});var s=t.isStatic?"#14151f":d.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),p=t.isStatic?"#555":"#ccc",g=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||s,t.render.strokeStyle=t.render.strokeStyle||p,t.render.lineWidth=t.render.lineWidth||g,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};n.set=function(t,l,s){var p;typeof l=="string"&&(p=l,l={},l[p]=s);for(p in l)if(Object.prototype.hasOwnProperty.call(l,p))switch(s=l[p],p){case"isStatic":n.setStatic(t,s);break;case"isSleeping":o.set(t,s);break;case"mass":n.setMass(t,s);break;case"density":n.setDensity(t,s);break;case"inertia":n.setInertia(t,s);break;case"vertices":n.setVertices(t,s);break;case"position":n.setPosition(t,s);break;case"angle":n.setAngle(t,s);break;case"velocity":n.setVelocity(t,s);break;case"angularVelocity":n.setAngularVelocity(t,s);break;case"speed":n.setSpeed(t,s);break;case"angularSpeed":n.setAngularSpeed(t,s);break;case"parts":n.setParts(t,s);break;case"centre":n.setCentre(t,s);break;default:t[p]=s}},n.setStatic=function(t,l){for(var s=0;s<t.parts.length;s++){var p=t.parts[s];l?(p.isStatic||(p._original={restitution:p.restitution,friction:p.friction,mass:p.mass,inertia:p.inertia,density:p.density,inverseMass:p.inverseMass,inverseInertia:p.inverseInertia}),p.restitution=0,p.friction=1,p.mass=p.inertia=p.density=1/0,p.inverseMass=p.inverseInertia=0,p.positionPrev.x=p.position.x,p.positionPrev.y=p.position.y,p.anglePrev=p.angle,p.angularVelocity=0,p.speed=0,p.angularSpeed=0,p.motion=0):p._original&&(p.restitution=p._original.restitution,p.friction=p._original.friction,p.mass=p._original.mass,p.inertia=p._original.inertia,p.density=p._original.density,p.inverseMass=p._original.inverseMass,p.inverseInertia=p._original.inverseInertia,p._original=null),p.isStatic=l}},n.setMass=function(t,l){var s=t.inertia/(t.mass/6);t.inertia=s*(l/6),t.inverseInertia=1/t.inertia,t.mass=l,t.inverseMass=1/t.mass,t.density=t.mass/t.area},n.setDensity=function(t,l){n.setMass(t,l*t.area),t.density=l},n.setInertia=function(t,l){t.inertia=l,t.inverseInertia=1/t.inertia},n.setVertices=function(t,l){l[0].body===t?t.vertices=l:t.vertices=a.create(l,t),t.axes=e.fromVertices(t.vertices),t.area=a.area(t.vertices),n.setMass(t,t.density*t.area);var s=a.centre(t.vertices);a.translate(t.vertices,s,-1),n.setInertia(t,n._inertiaScale*a.inertia(t.vertices,t.mass)),a.translate(t.vertices,t.position),u.update(t.bounds,t.vertices,t.velocity)},n.setParts=function(t,l,s){var p;for(l=l.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,p=0;p<l.length;p++){var g=l[p];g!==t&&(g.parent=t,t.parts.push(g))}if(t.parts.length!==1){if(s=typeof s<"u"?s:!0,s){var w=[];for(p=0;p<l.length;p++)w=w.concat(l[p].vertices);a.clockwiseSort(w);var T=a.hull(w),C=a.centre(T);n.setVertices(t,T),a.translate(t.vertices,C)}var _=n._totalProperties(t);t.area=_.area,t.parent=t,t.position.x=_.centre.x,t.position.y=_.centre.y,t.positionPrev.x=_.centre.x,t.positionPrev.y=_.centre.y,n.setMass(t,_.mass),n.setInertia(t,_.inertia),n.setPosition(t,_.centre)}},n.setCentre=function(t,l,s){s?(t.positionPrev.x+=l.x,t.positionPrev.y+=l.y,t.position.x+=l.x,t.position.y+=l.y):(t.positionPrev.x=l.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=l.y-(t.position.y-t.positionPrev.y),t.position.x=l.x,t.position.y=l.y)},n.setPosition=function(t,l,s){var p=c.sub(l,t.position);s?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=p.x,t.velocity.y=p.y,t.speed=c.magnitude(p)):(t.positionPrev.x+=p.x,t.positionPrev.y+=p.y);for(var g=0;g<t.parts.length;g++){var w=t.parts[g];w.position.x+=p.x,w.position.y+=p.y,a.translate(w.vertices,p),u.update(w.bounds,w.vertices,t.velocity)}},n.setAngle=function(t,l,s){var p=l-t.angle;s?(t.anglePrev=t.angle,t.angularVelocity=p,t.angularSpeed=Math.abs(p)):t.anglePrev+=p;for(var g=0;g<t.parts.length;g++){var w=t.parts[g];w.angle+=p,a.rotate(w.vertices,p,t.position),e.rotate(w.axes,p),u.update(w.bounds,w.vertices,t.velocity),g>0&&c.rotateAbout(w.position,p,t.position,w.position)}},n.setVelocity=function(t,l){var s=t.deltaTime/n._baseDelta;t.positionPrev.x=t.position.x-l.x*s,t.positionPrev.y=t.position.y-l.y*s,t.velocity.x=(t.position.x-t.positionPrev.x)/s,t.velocity.y=(t.position.y-t.positionPrev.y)/s,t.speed=c.magnitude(t.velocity)},n.getVelocity=function(t){var l=n._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*l,y:(t.position.y-t.positionPrev.y)*l}},n.getSpeed=function(t){return c.magnitude(n.getVelocity(t))},n.setSpeed=function(t,l){n.setVelocity(t,c.mult(c.normalise(n.getVelocity(t)),l))},n.setAngularVelocity=function(t,l){var s=t.deltaTime/n._baseDelta;t.anglePrev=t.angle-l*s,t.angularVelocity=(t.angle-t.anglePrev)/s,t.angularSpeed=Math.abs(t.angularVelocity)},n.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*n._baseDelta/t.deltaTime},n.getAngularSpeed=function(t){return Math.abs(n.getAngularVelocity(t))},n.setAngularSpeed=function(t,l){n.setAngularVelocity(t,d.sign(n.getAngularVelocity(t))*l)},n.translate=function(t,l,s){n.setPosition(t,c.add(t.position,l),s)},n.rotate=function(t,l,s,p){if(!s)n.setAngle(t,t.angle+l,p);else{var g=Math.cos(l),w=Math.sin(l),T=t.position.x-s.x,C=t.position.y-s.y;n.setPosition(t,{x:s.x+(T*g-C*w),y:s.y+(T*w+C*g)},p),n.setAngle(t,t.angle+l,p)}},n.scale=function(t,l,s,p){var g=0,w=0;p=p||t.position;for(var T=0;T<t.parts.length;T++){var C=t.parts[T];a.scale(C.vertices,l,s,p),C.axes=e.fromVertices(C.vertices),C.area=a.area(C.vertices),n.setMass(C,t.density*C.area),a.translate(C.vertices,{x:-C.position.x,y:-C.position.y}),n.setInertia(C,n._inertiaScale*a.inertia(C.vertices,C.mass)),a.translate(C.vertices,{x:C.position.x,y:C.position.y}),T>0&&(g+=C.area,w+=C.inertia),C.position.x=p.x+(C.position.x-p.x)*l,C.position.y=p.y+(C.position.y-p.y)*s,u.update(C.bounds,C.vertices,t.velocity)}t.parts.length>1&&(t.area=g,t.isStatic||(n.setMass(t,t.density*g),n.setInertia(t,w))),t.circleRadius&&(l===s?t.circleRadius*=l:t.circleRadius=null)},n.update=function(t,l){l=(typeof l<"u"?l:1e3/60)*t.timeScale;var s=l*l,p=n._timeCorrection?l/(t.deltaTime||l):1,g=1-t.frictionAir*(l/d._baseDelta),w=(t.position.x-t.positionPrev.x)*p,T=(t.position.y-t.positionPrev.y)*p;t.velocity.x=w*g+t.force.x/t.mass*s,t.velocity.y=T*g+t.force.y/t.mass*s,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=l,t.angularVelocity=(t.angle-t.anglePrev)*g*p+t.torque/t.inertia*s,t.anglePrev=t.angle,t.angle+=t.angularVelocity;for(var C=0;C<t.parts.length;C++){var _=t.parts[C];a.translate(_.vertices,t.velocity),C>0&&(_.position.x+=t.velocity.x,_.position.y+=t.velocity.y),t.angularVelocity!==0&&(a.rotate(_.vertices,t.angularVelocity,t.position),e.rotate(_.axes,t.angularVelocity),C>0&&c.rotateAbout(_.position,t.angularVelocity,t.position,_.position)),u.update(_.bounds,_.vertices,t.velocity)}},n.updateVelocities=function(t){var l=n._baseDelta/t.deltaTime,s=t.velocity;s.x=(t.position.x-t.positionPrev.x)*l,s.y=(t.position.y-t.positionPrev.y)*l,t.speed=Math.sqrt(s.x*s.x+s.y*s.y),t.angularVelocity=(t.angle-t.anglePrev)*l,t.angularSpeed=Math.abs(t.angularVelocity)},n.applyForce=function(t,l,s){var p={x:l.x-t.position.x,y:l.y-t.position.y};t.force.x+=s.x,t.force.y+=s.y,t.torque+=p.x*s.y-p.y*s.x},n._totalProperties=function(t){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},s=t.parts.length===1?0:1;s<t.parts.length;s++){var p=t.parts[s],g=p.mass!==1/0?p.mass:1;l.mass+=g,l.area+=p.area,l.inertia+=p.inertia,l.centre=c.add(l.centre,c.mult(p.position,g))}return l.centre=c.div(l.centre,l.mass),l}})()},function(r,v,f){var n={};r.exports=n;var a=f(0);(function(){n.on=function(c,o,d){for(var u=o.split(" "),e,i=0;i<u.length;i++)e=u[i],c.events=c.events||{},c.events[e]=c.events[e]||[],c.events[e].push(d);return d},n.off=function(c,o,d){if(!o){c.events={};return}typeof o=="function"&&(d=o,o=a.keys(c.events).join(" "));for(var u=o.split(" "),e=0;e<u.length;e++){var i=c.events[u[e]],t=[];if(d&&i)for(var l=0;l<i.length;l++)i[l]!==d&&t.push(i[l]);c.events[u[e]]=t}},n.trigger=function(c,o,d){var u,e,i,t,l=c.events;if(l&&a.keys(l).length>0){d||(d={}),u=o.split(" ");for(var s=0;s<u.length;s++)if(e=u[s],i=l[e],i){t=a.clone(d,!1),t.name=e,t.source=c;for(var p=0;p<i.length;p++)i[p].apply(c,[t])}}}})()},function(r,v,f){var n={};r.exports=n;var a=f(5),c=f(0),o=f(1),d=f(4);(function(){n.create=function(u){return c.extend({id:c.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},u)},n.setModified=function(u,e,i,t){if(u.isModified=e,e&&u.cache&&(u.cache.allBodies=null,u.cache.allConstraints=null,u.cache.allComposites=null),i&&u.parent&&n.setModified(u.parent,e,i,t),t)for(var l=0;l<u.composites.length;l++){var s=u.composites[l];n.setModified(s,e,i,t)}},n.add=function(u,e){var i=[].concat(e);a.trigger(u,"beforeAdd",{object:e});for(var t=0;t<i.length;t++){var l=i[t];switch(l.type){case"body":if(l.parent!==l){c.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}n.addBody(u,l);break;case"constraint":n.addConstraint(u,l);break;case"composite":n.addComposite(u,l);break;case"mouseConstraint":n.addConstraint(u,l.constraint);break}}return a.trigger(u,"afterAdd",{object:e}),u},n.remove=function(u,e,i){var t=[].concat(e);a.trigger(u,"beforeRemove",{object:e});for(var l=0;l<t.length;l++){var s=t[l];switch(s.type){case"body":n.removeBody(u,s,i);break;case"constraint":n.removeConstraint(u,s,i);break;case"composite":n.removeComposite(u,s,i);break;case"mouseConstraint":n.removeConstraint(u,s.constraint);break}}return a.trigger(u,"afterRemove",{object:e}),u},n.addComposite=function(u,e){return u.composites.push(e),e.parent=u,n.setModified(u,!0,!0,!1),u},n.removeComposite=function(u,e,i){var t=c.indexOf(u.composites,e);if(t!==-1){var l=n.allBodies(e);n.removeCompositeAt(u,t);for(var s=0;s<l.length;s++)l[s].sleepCounter=0}if(i)for(var s=0;s<u.composites.length;s++)n.removeComposite(u.composites[s],e,!0);return u},n.removeCompositeAt=function(u,e){return u.composites.splice(e,1),n.setModified(u,!0,!0,!1),u},n.addBody=function(u,e){return u.bodies.push(e),n.setModified(u,!0,!0,!1),u},n.removeBody=function(u,e,i){var t=c.indexOf(u.bodies,e);if(t!==-1&&(n.removeBodyAt(u,t),e.sleepCounter=0),i)for(var l=0;l<u.composites.length;l++)n.removeBody(u.composites[l],e,!0);return u},n.removeBodyAt=function(u,e){return u.bodies.splice(e,1),n.setModified(u,!0,!0,!1),u},n.addConstraint=function(u,e){return u.constraints.push(e),n.setModified(u,!0,!0,!1),u},n.removeConstraint=function(u,e,i){var t=c.indexOf(u.constraints,e);if(t!==-1&&n.removeConstraintAt(u,t),i)for(var l=0;l<u.composites.length;l++)n.removeConstraint(u.composites[l],e,!0);return u},n.removeConstraintAt=function(u,e){return u.constraints.splice(e,1),n.setModified(u,!0,!0,!1),u},n.clear=function(u,e,i){if(i)for(var t=0;t<u.composites.length;t++)n.clear(u.composites[t],e,!0);return e?u.bodies=u.bodies.filter(function(l){return l.isStatic}):u.bodies.length=0,u.constraints.length=0,u.composites.length=0,n.setModified(u,!0,!0,!1),u},n.allBodies=function(u){if(u.cache&&u.cache.allBodies)return u.cache.allBodies;for(var e=[].concat(u.bodies),i=0;i<u.composites.length;i++)e=e.concat(n.allBodies(u.composites[i]));return u.cache&&(u.cache.allBodies=e),e},n.allConstraints=function(u){if(u.cache&&u.cache.allConstraints)return u.cache.allConstraints;for(var e=[].concat(u.constraints),i=0;i<u.composites.length;i++)e=e.concat(n.allConstraints(u.composites[i]));return u.cache&&(u.cache.allConstraints=e),e},n.allComposites=function(u){if(u.cache&&u.cache.allComposites)return u.cache.allComposites;for(var e=[].concat(u.composites),i=0;i<u.composites.length;i++)e=e.concat(n.allComposites(u.composites[i]));return u.cache&&(u.cache.allComposites=e),e},n.get=function(u,e,i){var t,l;switch(i){case"body":t=n.allBodies(u);break;case"constraint":t=n.allConstraints(u);break;case"composite":t=n.allComposites(u).concat(u);break}return t?(l=t.filter(function(s){return s.id.toString()===e.toString()}),l.length===0?null:l[0]):null},n.move=function(u,e,i){return n.remove(u,e),n.add(i,e),u},n.rebase=function(u){for(var e=n.allBodies(u).concat(n.allConstraints(u)).concat(n.allComposites(u)),i=0;i<e.length;i++)e[i].id=c.nextId();return u},n.translate=function(u,e,i){for(var t=i?n.allBodies(u):u.bodies,l=0;l<t.length;l++)d.translate(t[l],e);return u},n.rotate=function(u,e,i,t){for(var l=Math.cos(e),s=Math.sin(e),p=t?n.allBodies(u):u.bodies,g=0;g<p.length;g++){var w=p[g],T=w.position.x-i.x,C=w.position.y-i.y;d.setPosition(w,{x:i.x+(T*l-C*s),y:i.y+(T*s+C*l)}),d.rotate(w,e)}return u},n.scale=function(u,e,i,t,l){for(var s=l?n.allBodies(u):u.bodies,p=0;p<s.length;p++){var g=s[p],w=g.position.x-t.x,T=g.position.y-t.y;d.setPosition(g,{x:t.x+w*e,y:t.y+T*i}),d.scale(g,e,i)}return u},n.bounds=function(u){for(var e=n.allBodies(u),i=[],t=0;t<e.length;t+=1){var l=e[t];i.push(l.bounds.min,l.bounds.max)}return o.create(i)}})()},function(r,v,f){var n={};r.exports=n;var a=f(4),c=f(5),o=f(0);(function(){n._motionWakeThreshold=.18,n._motionSleepThreshold=.08,n._minBias=.9,n.update=function(d,u){for(var e=u/o._baseDelta,i=n._motionSleepThreshold,t=0;t<d.length;t++){var l=d[t],s=a.getSpeed(l),p=a.getAngularSpeed(l),g=s*s+p*p;if(l.force.x!==0||l.force.y!==0){n.set(l,!1);continue}var w=Math.min(l.motion,g),T=Math.max(l.motion,g);l.motion=n._minBias*w+(1-n._minBias)*T,l.sleepThreshold>0&&l.motion<i?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold/e&&n.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},n.afterCollisions=function(d){for(var u=n._motionSleepThreshold,e=0;e<d.length;e++){var i=d[e];if(i.isActive){var t=i.collision,l=t.bodyA.parent,s=t.bodyB.parent;if(!(l.isSleeping&&s.isSleeping||l.isStatic||s.isStatic)&&(l.isSleeping||s.isSleeping)){var p=l.isSleeping&&!l.isStatic?l:s,g=p===l?s:l;!p.isStatic&&g.motion>u&&n.set(p,!1)}}}},n.set=function(d,u){var e=d.isSleeping;u?(d.isSleeping=!0,d.sleepCounter=d.sleepThreshold,d.positionImpulse.x=0,d.positionImpulse.y=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.speed=0,d.angularSpeed=0,d.motion=0,e||c.trigger(d,"sleepStart")):(d.isSleeping=!1,d.sleepCounter=0,e&&c.trigger(d,"sleepEnd"))}})()},function(r,v,f){var n={};r.exports=n;var a=f(3),c=f(9);(function(){var o=[],d={overlap:0,axis:null},u={overlap:0,axis:null};n.create=function(e,i){return{pair:null,collided:!1,bodyA:e,bodyB:i,parentA:e.parent,parentB:i.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},n.collides=function(e,i,t){if(n._overlapAxes(d,e.vertices,i.vertices,e.axes),d.overlap<=0||(n._overlapAxes(u,i.vertices,e.vertices,i.axes),u.overlap<=0))return null;var l=t&&t.table[c.id(e,i)],s;l?s=l.collision:(s=n.create(e,i),s.collided=!0,s.bodyA=e.id<i.id?e:i,s.bodyB=e.id<i.id?i:e,s.parentA=s.bodyA.parent,s.parentB=s.bodyB.parent),e=s.bodyA,i=s.bodyB;var p;d.overlap<u.overlap?p=d:p=u;var g=s.normal,w=s.tangent,T=s.penetration,C=s.supports,_=p.overlap,S=p.axis,x=S.x,y=S.y,b=i.position.x-e.position.x,A=i.position.y-e.position.y;x*b+y*A>=0&&(x=-x,y=-y),g.x=x,g.y=y,w.x=-y,w.y=x,T.x=x*_,T.y=y*_,s.depth=_;var M=n._findSupports(e,i,g,1),P=0;if(a.contains(e.vertices,M[0])&&(C[P++]=M[0]),a.contains(e.vertices,M[1])&&(C[P++]=M[1]),P<2){var k=n._findSupports(i,e,g,-1);a.contains(i.vertices,k[0])&&(C[P++]=k[0]),P<2&&a.contains(i.vertices,k[1])&&(C[P++]=k[1])}return P===0&&(C[P++]=M[0]),s.supportCount=P,s},n._overlapAxes=function(e,i,t,l){var s=i.length,p=t.length,g=i[0].x,w=i[0].y,T=t[0].x,C=t[0].y,_=l.length,S=Number.MAX_VALUE,x=0,y,b,A,M,P,k;for(P=0;P<_;P++){var I=l[P],D=I.x,V=I.y,B=g*D+w*V,W=T*D+C*V,X=B,G=W;for(k=1;k<s;k+=1)M=i[k].x*D+i[k].y*V,M>X?X=M:M<B&&(B=M);for(k=1;k<p;k+=1)M=t[k].x*D+t[k].y*V,M>G?G=M:M<W&&(W=M);if(b=X-W,A=G-B,y=b<A?b:A,y<S&&(S=y,x=P,y<=0))break}e.axis=l[x],e.overlap=S},n._findSupports=function(e,i,t,l){var s=i.vertices,p=s.length,g=e.position.x,w=e.position.y,T=t.x*l,C=t.y*l,_=s[0],S=_,x=T*(g-S.x)+C*(w-S.y),y,b,A;for(A=1;A<p;A+=1)S=s[A],b=T*(g-S.x)+C*(w-S.y),b<x&&(x=b,_=S);return y=s[(p+_.index-1)%p],x=T*(g-y.x)+C*(w-y.y),S=s[(_.index+1)%p],T*(g-S.x)+C*(w-S.y)<x?(o[0]=_,o[1]=S,o):(o[0]=_,o[1]=y,o)}})()},function(r,v,f){var n={};r.exports=n;var a=f(16);(function(){n.create=function(c,o){var d=c.bodyA,u=c.bodyB,e={id:n.id(d,u),bodyA:d,bodyB:u,collision:c,contacts:[a.create(),a.create()],contactCount:0,separation:0,isActive:!0,isSensor:d.isSensor||u.isSensor,timeCreated:o,timeUpdated:o,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return n.update(e,c,o),e},n.update=function(c,o,d){var u=o.supports,e=o.supportCount,i=c.contacts,t=o.parentA,l=o.parentB;c.isActive=!0,c.timeUpdated=d,c.collision=o,c.separation=o.depth,c.inverseMass=t.inverseMass+l.inverseMass,c.friction=t.friction<l.friction?t.friction:l.friction,c.frictionStatic=t.frictionStatic>l.frictionStatic?t.frictionStatic:l.frictionStatic,c.restitution=t.restitution>l.restitution?t.restitution:l.restitution,c.slop=t.slop>l.slop?t.slop:l.slop,c.contactCount=e,o.pair=c;var s=u[0],p=i[0],g=u[1],w=i[1];(w.vertex===s||p.vertex===g)&&(i[1]=p,i[0]=p=w,w=i[1]),p.vertex=s,w.vertex=g},n.setActive=function(c,o,d){o?(c.isActive=!0,c.timeUpdated=d):(c.isActive=!1,c.contactCount=0)},n.id=function(c,o){return c.id<o.id?c.id.toString(36)+":"+o.id.toString(36):o.id.toString(36)+":"+c.id.toString(36)}})()},function(r,v,f){var n={};r.exports=n;var a=f(3),c=f(2),o=f(7),d=f(1),u=f(11),e=f(0);(function(){n._warming=.4,n._torqueDampen=1,n._minLength=1e-6,n.create=function(i){var t=i;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var l=t.bodyA?c.add(t.bodyA.position,t.pointA):t.pointA,s=t.bodyB?c.add(t.bodyB.position,t.pointB):t.pointB,p=c.magnitude(c.sub(l,s));t.length=typeof t.length<"u"?t.length:p,t.id=t.id||e.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var g={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(g.type="pin",g.anchors=!1):t.stiffness<.9&&(g.type="spring"),t.render=e.extend(g,t.render),t},n.preSolveAll=function(i){for(var t=0;t<i.length;t+=1){var l=i[t],s=l.constraintImpulse;l.isStatic||s.x===0&&s.y===0&&s.angle===0||(l.position.x+=s.x,l.position.y+=s.y,l.angle+=s.angle)}},n.solveAll=function(i,t){for(var l=e.clamp(t/e._baseDelta,0,1),s=0;s<i.length;s+=1){var p=i[s],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,w=!p.bodyB||p.bodyB&&p.bodyB.isStatic;(g||w)&&n.solve(i[s],l)}for(s=0;s<i.length;s+=1)p=i[s],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,w=!p.bodyB||p.bodyB&&p.bodyB.isStatic,!g&&!w&&n.solve(i[s],l)},n.solve=function(i,t){var l=i.bodyA,s=i.bodyB,p=i.pointA,g=i.pointB;if(!(!l&&!s)){l&&!l.isStatic&&(c.rotate(p,l.angle-i.angleA,p),i.angleA=l.angle),s&&!s.isStatic&&(c.rotate(g,s.angle-i.angleB,g),i.angleB=s.angle);var w=p,T=g;if(l&&(w=c.add(l.position,p)),s&&(T=c.add(s.position,g)),!(!w||!T)){var C=c.sub(w,T),_=c.magnitude(C);_<n._minLength&&(_=n._minLength);var S=(_-i.length)/_,x=i.stiffness>=1||i.length===0,y=x?i.stiffness*t:i.stiffness*t*t,b=i.damping*t,A=c.mult(C,S*y),M=(l?l.inverseMass:0)+(s?s.inverseMass:0),P=(l?l.inverseInertia:0)+(s?s.inverseInertia:0),k=M+P,I,D,V,B,W;if(b>0){var X=c.create();V=c.div(C,_),W=c.sub(s&&c.sub(s.position,s.positionPrev)||X,l&&c.sub(l.position,l.positionPrev)||X),B=c.dot(V,W)}l&&!l.isStatic&&(D=l.inverseMass/M,l.constraintImpulse.x-=A.x*D,l.constraintImpulse.y-=A.y*D,l.position.x-=A.x*D,l.position.y-=A.y*D,b>0&&(l.positionPrev.x-=b*V.x*B*D,l.positionPrev.y-=b*V.y*B*D),I=c.cross(p,A)/k*n._torqueDampen*l.inverseInertia*(1-i.angularStiffness),l.constraintImpulse.angle-=I,l.angle-=I),s&&!s.isStatic&&(D=s.inverseMass/M,s.constraintImpulse.x+=A.x*D,s.constraintImpulse.y+=A.y*D,s.position.x+=A.x*D,s.position.y+=A.y*D,b>0&&(s.positionPrev.x+=b*V.x*B*D,s.positionPrev.y+=b*V.y*B*D),I=c.cross(g,A)/k*n._torqueDampen*s.inverseInertia*(1-i.angularStiffness),s.constraintImpulse.angle+=I,s.angle+=I)}}},n.postSolveAll=function(i){for(var t=0;t<i.length;t++){var l=i[t],s=l.constraintImpulse;if(!(l.isStatic||s.x===0&&s.y===0&&s.angle===0)){o.set(l,!1);for(var p=0;p<l.parts.length;p++){var g=l.parts[p];a.translate(g.vertices,s),p>0&&(g.position.x+=s.x,g.position.y+=s.y),s.angle!==0&&(a.rotate(g.vertices,s.angle,l.position),u.rotate(g.axes,s.angle),p>0&&c.rotateAbout(g.position,s.angle,l.position,g.position)),d.update(g.bounds,g.vertices,l.velocity)}s.angle*=n._warming,s.x*=n._warming,s.y*=n._warming}}},n.pointAWorld=function(i){return{x:(i.bodyA?i.bodyA.position.x:0)+(i.pointA?i.pointA.x:0),y:(i.bodyA?i.bodyA.position.y:0)+(i.pointA?i.pointA.y:0)}},n.pointBWorld=function(i){return{x:(i.bodyB?i.bodyB.position.x:0)+(i.pointB?i.pointB.x:0),y:(i.bodyB?i.bodyB.position.y:0)+(i.pointB?i.pointB.y:0)}},n.currentLength=function(i){var t=(i.bodyA?i.bodyA.position.x:0)+(i.pointA?i.pointA.x:0),l=(i.bodyA?i.bodyA.position.y:0)+(i.pointA?i.pointA.y:0),s=(i.bodyB?i.bodyB.position.x:0)+(i.pointB?i.pointB.x:0),p=(i.bodyB?i.bodyB.position.y:0)+(i.pointB?i.pointB.y:0),g=t-s,w=l-p;return Math.sqrt(g*g+w*w)}})()},function(r,v,f){var n={};r.exports=n;var a=f(2),c=f(0);(function(){n.fromVertices=function(o){for(var d={},u=0;u<o.length;u++){var e=(u+1)%o.length,i=a.normalise({x:o[e].y-o[u].y,y:o[u].x-o[e].x}),t=i.y===0?1/0:i.x/i.y;t=t.toFixed(3).toString(),d[t]=i}return c.values(d)},n.rotate=function(o,d){if(d!==0)for(var u=Math.cos(d),e=Math.sin(d),i=0;i<o.length;i++){var t=o[i],l;l=t.x*u-t.y*e,t.y=t.x*e+t.y*u,t.x=l}}})()},function(r,v,f){var n={};r.exports=n;var a=f(3),c=f(0),o=f(4),d=f(1),u=f(2);(function(){n.rectangle=function(e,i,t,l,s){s=s||{};var p={label:"Rectangle Body",position:{x:e,y:i},vertices:a.fromPath("L 0 0 L "+t+" 0 L "+t+" "+l+" L 0 "+l)};if(s.chamfer){var g=s.chamfer;p.vertices=a.chamfer(p.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete s.chamfer}return o.create(c.extend({},p,s))},n.trapezoid=function(e,i,t,l,s,p){p=p||{},s>=1&&c.warn("Bodies.trapezoid: slope parameter must be < 1."),s*=.5;var g=(1-s*2)*t,w=t*s,T=w+g,C=T+w,_;s<.5?_="L 0 0 L "+w+" "+-l+" L "+T+" "+-l+" L "+C+" 0":_="L 0 0 L "+T+" "+-l+" L "+C+" 0";var S={label:"Trapezoid Body",position:{x:e,y:i},vertices:a.fromPath(_)};if(p.chamfer){var x=p.chamfer;S.vertices=a.chamfer(S.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete p.chamfer}return o.create(c.extend({},S,p))},n.circle=function(e,i,t,l,s){l=l||{};var p={label:"Circle Body",circleRadius:t};s=s||25;var g=Math.ceil(Math.max(10,Math.min(s,t)));return g%2===1&&(g+=1),n.polygon(e,i,g,t,c.extend({},p,l))},n.polygon=function(e,i,t,l,s){if(s=s||{},t<3)return n.circle(e,i,l,s);for(var p=2*Math.PI/t,g="",w=p*.5,T=0;T<t;T+=1){var C=w+T*p,_=Math.cos(C)*l,S=Math.sin(C)*l;g+="L "+_.toFixed(3)+" "+S.toFixed(3)+" "}var x={label:"Polygon Body",position:{x:e,y:i},vertices:a.fromPath(g)};if(s.chamfer){var y=s.chamfer;x.vertices=a.chamfer(x.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete s.chamfer}return o.create(c.extend({},x,s))},n.fromVertices=function(e,i,t,l,s,p,g,w){var T=c.getDecomp(),C,_,S,x,y,b,A,M,P,k,I;for(C=!!(T&&T.quickDecomp),l=l||{},S=[],s=typeof s<"u"?s:!1,p=typeof p<"u"?p:.01,g=typeof g<"u"?g:10,w=typeof w<"u"?w:.01,c.isArray(t[0])||(t=[t]),k=0;k<t.length;k+=1)if(b=t[k],x=a.isConvex(b),y=!x,y&&!C&&c.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),x||!C)x?b=a.clockwiseSort(b):b=a.hull(b),S.push({position:{x:e,y:i},vertices:b});else{var D=b.map(function(Z){return[Z.x,Z.y]});T.makeCCW(D),p!==!1&&T.removeCollinearPoints(D,p),w!==!1&&T.removeDuplicatePoints&&T.removeDuplicatePoints(D,w);var V=T.quickDecomp(D);for(A=0;A<V.length;A++){var B=V[A],W=B.map(function(Z){return{x:Z[0],y:Z[1]}});g>0&&a.area(W)<g||S.push({position:a.centre(W),vertices:W})}}for(A=0;A<S.length;A++)S[A]=o.create(c.extend(S[A],l));if(s){var X=5;for(A=0;A<S.length;A++){var G=S[A];for(M=A+1;M<S.length;M++){var q=S[M];if(d.overlaps(G.bounds,q.bounds)){var $=G.vertices,ie=q.vertices;for(P=0;P<G.vertices.length;P++)for(I=0;I<q.vertices.length;I++){var _e=u.magnitudeSquared(u.sub($[(P+1)%$.length],ie[I])),se=u.magnitudeSquared(u.sub($[P],ie[(I+1)%ie.length]));_e<X&&se<X&&($[P].isInternal=!0,ie[I].isInternal=!0)}}}}}return S.length>1?(_=o.create(c.extend({parts:S.slice(0)},l)),o.setPosition(_,{x:e,y:i}),_):S[0]}})()},function(r,v,f){var n={};r.exports=n;var a=f(0),c=f(8);(function(){n.create=function(o){var d={bodies:[],collisions:[],pairs:null};return a.extend(d,o)},n.setBodies=function(o,d){o.bodies=d.slice(0)},n.clear=function(o){o.bodies=[],o.collisions=[]},n.collisions=function(o){var d=o.pairs,u=o.bodies,e=u.length,i=n.canCollide,t=c.collides,l=o.collisions,s=0,p,g;for(u.sort(n._compareBoundsX),p=0;p<e;p++){var w=u[p],T=w.bounds,C=w.bounds.max.x,_=w.bounds.max.y,S=w.bounds.min.y,x=w.isStatic||w.isSleeping,y=w.parts.length,b=y===1;for(g=p+1;g<e;g++){var A=u[g],M=A.bounds;if(M.min.x>C)break;if(!(_<M.min.y||S>M.max.y)&&!(x&&(A.isStatic||A.isSleeping))&&i(w.collisionFilter,A.collisionFilter)){var P=A.parts.length;if(b&&P===1){var k=t(w,A,d);k&&(l[s++]=k)}else for(var I=y>1?1:0,D=P>1?1:0,V=I;V<y;V++)for(var B=w.parts[V],T=B.bounds,W=D;W<P;W++){var X=A.parts[W],M=X.bounds;if(!(T.min.x>M.max.x||T.max.x<M.min.x||T.max.y<M.min.y||T.min.y>M.max.y)){var k=t(B,X,d);k&&(l[s++]=k)}}}}}return l.length!==s&&(l.length=s),l},n.canCollide=function(o,d){return o.group===d.group&&o.group!==0?o.group>0:(o.mask&d.category)!==0&&(d.mask&o.category)!==0},n._compareBoundsX=function(o,d){return o.bounds.min.x-d.bounds.min.x}})()},function(r,v,f){var n={};r.exports=n;var a=f(0);(function(){n.create=function(c){var o={};return c||a.log("Mouse.create: element was undefined, defaulting to document.body","warn"),o.element=c||document.body,o.absolute={x:0,y:0},o.position={x:0,y:0},o.mousedownPosition={x:0,y:0},o.mouseupPosition={x:0,y:0},o.offset={x:0,y:0},o.scale={x:1,y:1},o.wheelDelta=0,o.button=-1,o.pixelRatio=parseInt(o.element.getAttribute("data-pixel-ratio"),10)||1,o.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},o.mousemove=function(d){var u=n._getRelativeMousePosition(d,o.element,o.pixelRatio),e=d.changedTouches;e&&(o.button=0,d.preventDefault()),o.absolute.x=u.x,o.absolute.y=u.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y,o.sourceEvents.mousemove=d},o.mousedown=function(d){var u=n._getRelativeMousePosition(d,o.element,o.pixelRatio),e=d.changedTouches;e?(o.button=0,d.preventDefault()):o.button=d.button,o.absolute.x=u.x,o.absolute.y=u.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y,o.mousedownPosition.x=o.position.x,o.mousedownPosition.y=o.position.y,o.sourceEvents.mousedown=d},o.mouseup=function(d){var u=n._getRelativeMousePosition(d,o.element,o.pixelRatio),e=d.changedTouches;e&&d.preventDefault(),o.button=-1,o.absolute.x=u.x,o.absolute.y=u.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y,o.mouseupPosition.x=o.position.x,o.mouseupPosition.y=o.position.y,o.sourceEvents.mouseup=d},o.mousewheel=function(d){o.wheelDelta=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail)),d.preventDefault(),o.sourceEvents.mousewheel=d},n.setElement(o,o.element),o},n.setElement=function(c,o){c.element=o,o.addEventListener("mousemove",c.mousemove,{passive:!0}),o.addEventListener("mousedown",c.mousedown,{passive:!0}),o.addEventListener("mouseup",c.mouseup,{passive:!0}),o.addEventListener("wheel",c.mousewheel,{passive:!1}),o.addEventListener("touchmove",c.mousemove,{passive:!1}),o.addEventListener("touchstart",c.mousedown,{passive:!1}),o.addEventListener("touchend",c.mouseup,{passive:!1})},n.clearSourceEvents=function(c){c.sourceEvents.mousemove=null,c.sourceEvents.mousedown=null,c.sourceEvents.mouseup=null,c.sourceEvents.mousewheel=null,c.wheelDelta=0},n.setOffset=function(c,o){c.offset.x=o.x,c.offset.y=o.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y},n.setScale=function(c,o){c.scale.x=o.x,c.scale.y=o.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y},n._getRelativeMousePosition=function(c,o,d){var u=o.getBoundingClientRect(),e=document.documentElement||document.body.parentNode||document.body,i=window.pageXOffset!==void 0?window.pageXOffset:e.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:e.scrollTop,l=c.changedTouches,s,p;return l?(s=l[0].pageX-u.left-i,p=l[0].pageY-u.top-t):(s=c.pageX-u.left-i,p=c.pageY-u.top-t),{x:s/(o.clientWidth/(o.width||o.clientWidth)*d),y:p/(o.clientHeight/(o.height||o.clientHeight)*d)}}})()},function(r,v,f){var n={};r.exports=n;var a=f(0);(function(){n._registry={},n.register=function(c){if(n.isPlugin(c)||a.warn("Plugin.register:",n.toString(c),"does not implement all required fields."),c.name in n._registry){var o=n._registry[c.name],d=n.versionParse(c.version).number,u=n.versionParse(o.version).number;d>u?(a.warn("Plugin.register:",n.toString(o),"was upgraded to",n.toString(c)),n._registry[c.name]=c):d<u?a.warn("Plugin.register:",n.toString(o),"can not be downgraded to",n.toString(c)):c!==o&&a.warn("Plugin.register:",n.toString(c),"is already registered to different plugin object")}else n._registry[c.name]=c;return c},n.resolve=function(c){return n._registry[n.dependencyParse(c).name]},n.toString=function(c){return typeof c=="string"?c:(c.name||"anonymous")+"@"+(c.version||c.range||"0.0.0")},n.isPlugin=function(c){return c&&c.name&&c.version&&c.install},n.isUsed=function(c,o){return c.used.indexOf(o)>-1},n.isFor=function(c,o){var d=c.for&&n.dependencyParse(c.for);return!c.for||o.name===d.name&&n.versionSatisfies(o.version,d.range)},n.use=function(c,o){if(c.uses=(c.uses||[]).concat(o||[]),c.uses.length===0){a.warn("Plugin.use:",n.toString(c),"does not specify any dependencies to install.");return}for(var d=n.dependencies(c),u=a.topologicalSort(d),e=[],i=0;i<u.length;i+=1)if(u[i]!==c.name){var t=n.resolve(u[i]);if(!t){e.push("❌ "+u[i]);continue}n.isUsed(c,t.name)||(n.isFor(t,c)||(a.warn("Plugin.use:",n.toString(t),"is for",t.for,"but installed on",n.toString(c)+"."),t._warned=!0),t.install?t.install(c):(a.warn("Plugin.use:",n.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(e.push("🔶 "+n.toString(t)),delete t._warned):e.push("✅ "+n.toString(t)),c.used.push(t.name))}e.length>0&&a.info(e.join("  "))},n.dependencies=function(c,o){var d=n.dependencyParse(c),u=d.name;if(o=o||{},!(u in o)){c=n.resolve(c)||c,o[u]=a.map(c.uses||[],function(i){n.isPlugin(i)&&n.register(i);var t=n.dependencyParse(i),l=n.resolve(i);return l&&!n.versionSatisfies(l.version,t.range)?(a.warn("Plugin.dependencies:",n.toString(l),"does not satisfy",n.toString(t),"used by",n.toString(d)+"."),l._warned=!0,c._warned=!0):l||(a.warn("Plugin.dependencies:",n.toString(i),"used by",n.toString(d),"could not be resolved."),c._warned=!0),t.name});for(var e=0;e<o[u].length;e+=1)n.dependencies(o[u][e],o);return o}},n.dependencyParse=function(c){if(a.isString(c)){var o=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return o.test(c)||a.warn("Plugin.dependencyParse:",c,"is not a valid dependency string."),{name:c.split("@")[0],range:c.split("@")[1]||"*"}}return{name:c.name,range:c.range||c.version}},n.versionParse=function(c){var o=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;o.test(c)||a.warn("Plugin.versionParse:",c,"is not a valid version or range.");var d=o.exec(c),u=Number(d[4]),e=Number(d[5]),i=Number(d[6]);return{isRange:!!(d[1]||d[2]),version:d[3],range:c,operator:d[1]||d[2]||"",major:u,minor:e,patch:i,parts:[u,e,i],prerelease:d[7],number:u*1e8+e*1e4+i}},n.versionSatisfies=function(c,o){o=o||"*";var d=n.versionParse(o),u=n.versionParse(c);if(d.isRange){if(d.operator==="*"||c==="*")return!0;if(d.operator===">")return u.number>d.number;if(d.operator===">=")return u.number>=d.number;if(d.operator==="~")return u.major===d.major&&u.minor===d.minor&&u.patch>=d.patch;if(d.operator==="^")return d.major>0?u.major===d.major&&u.number>=d.number:d.minor>0?u.minor===d.minor&&u.patch>=d.patch:u.patch===d.patch}return c===o||c==="*"}})()},function(r,v){var f={};r.exports=f,function(){f.create=function(n){return{vertex:n,normalImpulse:0,tangentImpulse:0}}}()},function(r,v,f){var n={};r.exports=n;var a=f(7),c=f(18),o=f(13),d=f(19),u=f(5),e=f(6),i=f(10),t=f(0),l=f(4);(function(){n._deltaMax=1e3/60,n.create=function(s){s=s||{};var p={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},g=t.extend(p,s);return g.world=s.world||e.create({label:"World"}),g.pairs=s.pairs||d.create(),g.detector=s.detector||o.create(),g.detector.pairs=g.pairs,g.grid={buckets:[]},g.world.gravity=g.gravity,g.broadphase=g.grid,g.metrics={},g},n.update=function(s,p){var g=t.now(),w=s.world,T=s.detector,C=s.pairs,_=s.timing,S=_.timestamp,x;p>n._deltaMax&&t.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",n._deltaMax.toFixed(3),"ms."),p=typeof p<"u"?p:t._baseDelta,p*=_.timeScale,_.timestamp+=p,_.lastDelta=p;var y={timestamp:_.timestamp,delta:p};u.trigger(s,"beforeUpdate",y);var b=e.allBodies(w),A=e.allConstraints(w);for(w.isModified&&(o.setBodies(T,b),e.setModified(w,!1,!1,!0)),s.enableSleeping&&a.update(b,p),n._bodiesApplyGravity(b,s.gravity),p>0&&n._bodiesUpdate(b,p),u.trigger(s,"beforeSolve",y),i.preSolveAll(b),x=0;x<s.constraintIterations;x++)i.solveAll(A,p);i.postSolveAll(b);var M=o.collisions(T);d.update(C,M,S),s.enableSleeping&&a.afterCollisions(C.list),C.collisionStart.length>0&&u.trigger(s,"collisionStart",{pairs:C.collisionStart,timestamp:_.timestamp,delta:p});var P=t.clamp(20/s.positionIterations,0,1);for(c.preSolvePosition(C.list),x=0;x<s.positionIterations;x++)c.solvePosition(C.list,p,P);for(c.postSolvePosition(b),i.preSolveAll(b),x=0;x<s.constraintIterations;x++)i.solveAll(A,p);for(i.postSolveAll(b),c.preSolveVelocity(C.list),x=0;x<s.velocityIterations;x++)c.solveVelocity(C.list,p);return n._bodiesUpdateVelocities(b),C.collisionActive.length>0&&u.trigger(s,"collisionActive",{pairs:C.collisionActive,timestamp:_.timestamp,delta:p}),C.collisionEnd.length>0&&u.trigger(s,"collisionEnd",{pairs:C.collisionEnd,timestamp:_.timestamp,delta:p}),n._bodiesClearForces(b),u.trigger(s,"afterUpdate",y),s.timing.lastElapsed=t.now()-g,s},n.merge=function(s,p){if(t.extend(s,p),p.world){s.world=p.world,n.clear(s);for(var g=e.allBodies(s.world),w=0;w<g.length;w++){var T=g[w];a.set(T,!1),T.id=t.nextId()}}},n.clear=function(s){d.clear(s.pairs),o.clear(s.detector)},n._bodiesClearForces=function(s){for(var p=s.length,g=0;g<p;g++){var w=s[g];w.force.x=0,w.force.y=0,w.torque=0}},n._bodiesApplyGravity=function(s,p){var g=typeof p.scale<"u"?p.scale:.001,w=s.length;if(!(p.x===0&&p.y===0||g===0))for(var T=0;T<w;T++){var C=s[T];C.isStatic||C.isSleeping||(C.force.y+=C.mass*p.y*g,C.force.x+=C.mass*p.x*g)}},n._bodiesUpdate=function(s,p){for(var g=s.length,w=0;w<g;w++){var T=s[w];T.isStatic||T.isSleeping||l.update(T,p)}},n._bodiesUpdateVelocities=function(s){for(var p=s.length,g=0;g<p;g++)l.updateVelocities(s[g])}})()},function(r,v,f){var n={};r.exports=n;var a=f(3),c=f(0),o=f(1);(function(){n._restingThresh=2,n._restingThreshTangent=Math.sqrt(6),n._positionDampen=.9,n._positionWarming=.8,n._frictionNormalMultiplier=5,n._frictionMaxStatic=Number.MAX_VALUE,n.preSolvePosition=function(d){var u,e,i,t=d.length;for(u=0;u<t;u++)e=d[u],e.isActive&&(i=e.contactCount,e.collision.parentA.totalContacts+=i,e.collision.parentB.totalContacts+=i)},n.solvePosition=function(d,u,e){var i,t,l,s,p,g,w,T,C=n._positionDampen*(e||1),_=c.clamp(u/c._baseDelta,0,1),S=d.length;for(i=0;i<S;i++)t=d[i],!(!t.isActive||t.isSensor)&&(l=t.collision,s=l.parentA,p=l.parentB,g=l.normal,t.separation=l.depth+g.x*(p.positionImpulse.x-s.positionImpulse.x)+g.y*(p.positionImpulse.y-s.positionImpulse.y));for(i=0;i<S;i++)t=d[i],!(!t.isActive||t.isSensor)&&(l=t.collision,s=l.parentA,p=l.parentB,g=l.normal,T=t.separation-t.slop*_,(s.isStatic||p.isStatic)&&(T*=2),s.isStatic||s.isSleeping||(w=C/s.totalContacts,s.positionImpulse.x+=g.x*T*w,s.positionImpulse.y+=g.y*T*w),p.isStatic||p.isSleeping||(w=C/p.totalContacts,p.positionImpulse.x-=g.x*T*w,p.positionImpulse.y-=g.y*T*w))},n.postSolvePosition=function(d){for(var u=n._positionWarming,e=d.length,i=a.translate,t=o.update,l=0;l<e;l++){var s=d[l],p=s.positionImpulse,g=p.x,w=p.y,T=s.velocity;if(s.totalContacts=0,g!==0||w!==0){for(var C=0;C<s.parts.length;C++){var _=s.parts[C];i(_.vertices,p),t(_.bounds,_.vertices,T),_.position.x+=g,_.position.y+=w}s.positionPrev.x+=g,s.positionPrev.y+=w,g*T.x+w*T.y<0?(p.x=0,p.y=0):(p.x*=u,p.y*=u)}}},n.preSolveVelocity=function(d){var u=d.length,e,i;for(e=0;e<u;e++){var t=d[e];if(!(!t.isActive||t.isSensor)){var l=t.contacts,s=t.contactCount,p=t.collision,g=p.parentA,w=p.parentB,T=p.normal,C=p.tangent;for(i=0;i<s;i++){var _=l[i],S=_.vertex,x=_.normalImpulse,y=_.tangentImpulse;if(x!==0||y!==0){var b=T.x*x+C.x*y,A=T.y*x+C.y*y;g.isStatic||g.isSleeping||(g.positionPrev.x+=b*g.inverseMass,g.positionPrev.y+=A*g.inverseMass,g.anglePrev+=g.inverseInertia*((S.x-g.position.x)*A-(S.y-g.position.y)*b)),w.isStatic||w.isSleeping||(w.positionPrev.x-=b*w.inverseMass,w.positionPrev.y-=A*w.inverseMass,w.anglePrev-=w.inverseInertia*((S.x-w.position.x)*A-(S.y-w.position.y)*b))}}}}},n.solveVelocity=function(d,u){var e=u/c._baseDelta,i=e*e,t=i*e,l=-n._restingThresh*e,s=n._restingThreshTangent,p=n._frictionNormalMultiplier*e,g=n._frictionMaxStatic,w=d.length,T,C,_,S;for(_=0;_<w;_++){var x=d[_];if(!(!x.isActive||x.isSensor)){var y=x.collision,b=y.parentA,A=y.parentB,M=y.normal.x,P=y.normal.y,k=y.tangent.x,I=y.tangent.y,D=x.inverseMass,V=x.friction*x.frictionStatic*p,B=x.contacts,W=x.contactCount,X=1/W,G=b.position.x-b.positionPrev.x,q=b.position.y-b.positionPrev.y,$=b.angle-b.anglePrev,ie=A.position.x-A.positionPrev.x,_e=A.position.y-A.positionPrev.y,se=A.angle-A.anglePrev;for(S=0;S<W;S++){var Z=B[S],E=Z.vertex,F=E.x-b.position.x,H=E.y-b.position.y,L=E.x-A.position.x,U=E.y-A.position.y,R=G-H*$,Q=q+F*$,te=ie-U*se,re=_e+L*se,le=R-te,K=Q-re,ee=M*le+P*K,pe=k*le+I*K,Ie=x.separation+ee,we=Math.min(Ie,1);we=Ie<0?0:we;var ve=we*V;pe<-ve||pe>ve?(C=pe>0?pe:-pe,T=x.friction*(pe>0?1:-1)*t,T<-C?T=-C:T>C&&(T=C)):(T=pe,C=g);var Se=F*P-H*M,be=L*P-U*M,Ye=X/(D+b.inverseInertia*Se*Se+A.inverseInertia*be*be),ye=(1+x.restitution)*ee*Ye;if(T*=Ye,ee<l)Z.normalImpulse=0;else{var Je=Z.normalImpulse;Z.normalImpulse+=ye,Z.normalImpulse>0&&(Z.normalImpulse=0),ye=Z.normalImpulse-Je}if(pe<-s||pe>s)Z.tangentImpulse=0;else{var ke=Z.tangentImpulse;Z.tangentImpulse+=T,Z.tangentImpulse<-C&&(Z.tangentImpulse=-C),Z.tangentImpulse>C&&(Z.tangentImpulse=C),T=Z.tangentImpulse-ke}var Ge=M*ye+k*T,xe=P*ye+I*T;b.isStatic||b.isSleeping||(b.positionPrev.x+=Ge*b.inverseMass,b.positionPrev.y+=xe*b.inverseMass,b.anglePrev+=(F*xe-H*Ge)*b.inverseInertia),A.isStatic||A.isSleeping||(A.positionPrev.x-=Ge*A.inverseMass,A.positionPrev.y-=xe*A.inverseMass,A.anglePrev-=(L*xe-U*Ge)*A.inverseInertia)}}}}})()},function(r,v,f){var n={};r.exports=n;var a=f(9),c=f(0);(function(){n.create=function(o){return c.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},o)},n.update=function(o,d,u){var e=a.update,i=a.create,t=a.setActive,l=o.table,s=o.list,p=s.length,g=p,w=o.collisionStart,T=o.collisionEnd,C=o.collisionActive,_=d.length,S=0,x=0,y=0,b,A,M;for(M=0;M<_;M++)b=d[M],A=b.pair,A?(A.isActive&&(C[y++]=A),e(A,b,u)):(A=i(b,u),l[A.id]=A,w[S++]=A,s[g++]=A);for(g=0,p=s.length,M=0;M<p;M++)A=s[M],A.timeUpdated>=u?s[g++]=A:(t(A,!1,u),A.collision.bodyA.sleepCounter>0&&A.collision.bodyB.sleepCounter>0?s[g++]=A:(T[x++]=A,delete l[A.id]));s.length!==g&&(s.length=g),w.length!==S&&(w.length=S),T.length!==x&&(T.length=x),C.length!==y&&(C.length=y)},n.clear=function(o){return o.table={},o.list.length=0,o.collisionStart.length=0,o.collisionActive.length=0,o.collisionEnd.length=0,o}})()},function(r,v,f){var n=r.exports=f(21);n.Axes=f(11),n.Bodies=f(12),n.Body=f(4),n.Bounds=f(1),n.Collision=f(8),n.Common=f(0),n.Composite=f(6),n.Composites=f(22),n.Constraint=f(10),n.Contact=f(16),n.Detector=f(13),n.Engine=f(17),n.Events=f(5),n.Grid=f(23),n.Mouse=f(14),n.MouseConstraint=f(24),n.Pair=f(9),n.Pairs=f(19),n.Plugin=f(15),n.Query=f(25),n.Render=f(26),n.Resolver=f(18),n.Runner=f(27),n.SAT=f(28),n.Sleeping=f(7),n.Svg=f(29),n.Vector=f(2),n.Vertices=f(3),n.World=f(30),n.Engine.run=n.Runner.run,n.Common.deprecated(n.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(r,v,f){var n={};r.exports=n;var a=f(15),c=f(0);(function(){n.name="matter-js",n.version="0.20.0",n.uses=[],n.used=[],n.use=function(){a.use(n,Array.prototype.slice.call(arguments))},n.before=function(o,d){return o=o.replace(/^Matter./,""),c.chainPathBefore(n,o,d)},n.after=function(o,d){return o=o.replace(/^Matter./,""),c.chainPathAfter(n,o,d)}})()},function(r,v,f){var n={};r.exports=n;var a=f(6),c=f(10),o=f(0),d=f(4),u=f(12),e=o.deprecated;(function(){n.stack=function(i,t,l,s,p,g,w){for(var T=a.create({label:"Stack"}),C=i,_=t,S,x=0,y=0;y<s;y++){for(var b=0,A=0;A<l;A++){var M=w(C,_,A,y,S,x);if(M){var P=M.bounds.max.y-M.bounds.min.y,k=M.bounds.max.x-M.bounds.min.x;P>b&&(b=P),d.translate(M,{x:k*.5,y:P*.5}),C=M.bounds.max.x+p,a.addBody(T,M),S=M,x+=1}else C+=p}_+=b+g,C=i}return T},n.chain=function(i,t,l,s,p,g){for(var w=i.bodies,T=1;T<w.length;T++){var C=w[T-1],_=w[T],S=C.bounds.max.y-C.bounds.min.y,x=C.bounds.max.x-C.bounds.min.x,y=_.bounds.max.y-_.bounds.min.y,b=_.bounds.max.x-_.bounds.min.x,A={bodyA:C,pointA:{x:x*t,y:S*l},bodyB:_,pointB:{x:b*s,y:y*p}},M=o.extend(A,g);a.addConstraint(i,c.create(M))}return i.label+=" Chain",i},n.mesh=function(i,t,l,s,p){var g=i.bodies,w,T,C,_,S;for(w=0;w<l;w++){for(T=1;T<t;T++)C=g[T-1+w*t],_=g[T+w*t],a.addConstraint(i,c.create(o.extend({bodyA:C,bodyB:_},p)));if(w>0)for(T=0;T<t;T++)C=g[T+(w-1)*t],_=g[T+w*t],a.addConstraint(i,c.create(o.extend({bodyA:C,bodyB:_},p))),s&&T>0&&(S=g[T-1+(w-1)*t],a.addConstraint(i,c.create(o.extend({bodyA:S,bodyB:_},p)))),s&&T<t-1&&(S=g[T+1+(w-1)*t],a.addConstraint(i,c.create(o.extend({bodyA:S,bodyB:_},p))))}return i.label+=" Mesh",i},n.pyramid=function(i,t,l,s,p,g,w){return n.stack(i,t,l,s,p,g,function(T,C,_,S,x,y){var b=Math.min(s,Math.ceil(l/2)),A=x?x.bounds.max.x-x.bounds.min.x:0;if(!(S>b)){S=b-S;var M=S,P=l-1-S;if(!(_<M||_>P)){y===1&&d.translate(x,{x:(_+(l%2===1?1:-1))*A,y:0});var k=x?_*A:0;return w(i+k+_*p,C,_,S,x,y)}}})},n.newtonsCradle=function(i,t,l,s,p){for(var g=a.create({label:"Newtons Cradle"}),w=0;w<l;w++){var T=1.9,C=u.circle(i+w*(s*T),t+p,s,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),_=c.create({pointA:{x:i+w*(s*T),y:t},bodyB:C});a.addBody(g,C),a.addConstraint(g,_)}return g},e(n,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),n.car=function(i,t,l,s,p){var g=d.nextGroup(!0),w=20,T=-l*.5+w,C=l*.5-w,_=0,S=a.create({label:"Car"}),x=u.rectangle(i,t,l,s,{collisionFilter:{group:g},chamfer:{radius:s*.5},density:2e-4}),y=u.circle(i+T,t+_,p,{collisionFilter:{group:g},friction:.8}),b=u.circle(i+C,t+_,p,{collisionFilter:{group:g},friction:.8}),A=c.create({bodyB:x,pointB:{x:T,y:_},bodyA:y,stiffness:1,length:0}),M=c.create({bodyB:x,pointB:{x:C,y:_},bodyA:b,stiffness:1,length:0});return a.addBody(S,x),a.addBody(S,y),a.addBody(S,b),a.addConstraint(S,A),a.addConstraint(S,M),S},e(n,"car","Composites.car ➤ moved to car example"),n.softBody=function(i,t,l,s,p,g,w,T,C,_){C=o.extend({inertia:1/0},C),_=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},_);var S=n.stack(i,t,l,s,p,g,function(x,y){return u.circle(x,y,T,C)});return n.mesh(S,l,s,w,_),S.label="Soft Body",S},e(n,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")})()},function(r,v,f){var n={};r.exports=n;var a=f(9),c=f(0),o=c.deprecated;(function(){n.create=function(d){var u={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return c.extend(u,d)},n.update=function(d,u,e,i){var t,l,s,p=e.world,g=d.buckets,w,T,C=!1;for(t=0;t<u.length;t++){var _=u[t];if(!(_.isSleeping&&!i)&&!(p.bounds&&(_.bounds.max.x<p.bounds.min.x||_.bounds.min.x>p.bounds.max.x||_.bounds.max.y<p.bounds.min.y||_.bounds.min.y>p.bounds.max.y))){var S=n._getRegion(d,_);if(!_.region||S.id!==_.region.id||i){(!_.region||i)&&(_.region=S);var x=n._regionUnion(S,_.region);for(l=x.startCol;l<=x.endCol;l++)for(s=x.startRow;s<=x.endRow;s++){T=n._getBucketId(l,s),w=g[T];var y=l>=S.startCol&&l<=S.endCol&&s>=S.startRow&&s<=S.endRow,b=l>=_.region.startCol&&l<=_.region.endCol&&s>=_.region.startRow&&s<=_.region.endRow;!y&&b&&b&&w&&n._bucketRemoveBody(d,w,_),(_.region===S||y&&!b||i)&&(w||(w=n._createBucket(g,T)),n._bucketAddBody(d,w,_))}_.region=S,C=!0}}}C&&(d.pairsList=n._createActivePairsList(d))},o(n,"update","Grid.update ➤ replaced by Matter.Detector"),n.clear=function(d){d.buckets={},d.pairs={},d.pairsList=[]},o(n,"clear","Grid.clear ➤ replaced by Matter.Detector"),n._regionUnion=function(d,u){var e=Math.min(d.startCol,u.startCol),i=Math.max(d.endCol,u.endCol),t=Math.min(d.startRow,u.startRow),l=Math.max(d.endRow,u.endRow);return n._createRegion(e,i,t,l)},n._getRegion=function(d,u){var e=u.bounds,i=Math.floor(e.min.x/d.bucketWidth),t=Math.floor(e.max.x/d.bucketWidth),l=Math.floor(e.min.y/d.bucketHeight),s=Math.floor(e.max.y/d.bucketHeight);return n._createRegion(i,t,l,s)},n._createRegion=function(d,u,e,i){return{id:d+","+u+","+e+","+i,startCol:d,endCol:u,startRow:e,endRow:i}},n._getBucketId=function(d,u){return"C"+d+"R"+u},n._createBucket=function(d,u){var e=d[u]=[];return e},n._bucketAddBody=function(d,u,e){var i=d.pairs,t=a.id,l=u.length,s;for(s=0;s<l;s++){var p=u[s];if(!(e.id===p.id||e.isStatic&&p.isStatic)){var g=t(e,p),w=i[g];w?w[2]+=1:i[g]=[e,p,1]}}u.push(e)},n._bucketRemoveBody=function(d,u,e){var i=d.pairs,t=a.id,l;u.splice(c.indexOf(u,e),1);var s=u.length;for(l=0;l<s;l++){var p=i[t(e,u[l])];p&&(p[2]-=1)}},n._createActivePairsList=function(d){var u,e=d.pairs,i=c.keys(e),t=i.length,l=[],s;for(s=0;s<t;s++)u=e[i[s]],u[2]>0?l.push(u):delete e[i[s]];return l}})()},function(r,v,f){var n={};r.exports=n;var a=f(3),c=f(7),o=f(14),d=f(5),u=f(13),e=f(10),i=f(6),t=f(0),l=f(1);(function(){n.create=function(s,p){var g=(s?s.mouse:null)||(p?p.mouse:null);g||(s&&s.render&&s.render.canvas?g=o.create(s.render.canvas):p&&p.element?g=o.create(p.element):(g=o.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var w=e.create({label:"Mouse Constraint",pointA:g.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),T={type:"mouseConstraint",mouse:g,element:null,body:null,constraint:w,collisionFilter:{category:1,mask:4294967295,group:0}},C=t.extend(T,p);return d.on(s,"beforeUpdate",function(){var _=i.allBodies(s.world);n.update(C,_),n._triggerEvents(C)}),C},n.update=function(s,p){var g=s.mouse,w=s.constraint,T=s.body;if(g.button===0){if(w.bodyB)c.set(w.bodyB,!1),w.pointA=g.position;else for(var C=0;C<p.length;C++)if(T=p[C],l.contains(T.bounds,g.position)&&u.canCollide(T.collisionFilter,s.collisionFilter))for(var _=T.parts.length>1?1:0;_<T.parts.length;_++){var S=T.parts[_];if(a.contains(S.vertices,g.position)){w.pointA=g.position,w.bodyB=s.body=T,w.pointB={x:g.position.x-T.position.x,y:g.position.y-T.position.y},w.angleB=T.angle,c.set(T,!1),d.trigger(s,"startdrag",{mouse:g,body:T});break}}}else w.bodyB=s.body=null,w.pointB=null,T&&d.trigger(s,"enddrag",{mouse:g,body:T})},n._triggerEvents=function(s){var p=s.mouse,g=p.sourceEvents;g.mousemove&&d.trigger(s,"mousemove",{mouse:p}),g.mousedown&&d.trigger(s,"mousedown",{mouse:p}),g.mouseup&&d.trigger(s,"mouseup",{mouse:p}),o.clearSourceEvents(p)}})()},function(r,v,f){var n={};r.exports=n;var a=f(2),c=f(8),o=f(1),d=f(12),u=f(3);(function(){n.collides=function(e,i){for(var t=[],l=i.length,s=e.bounds,p=c.collides,g=o.overlaps,w=0;w<l;w++){var T=i[w],C=T.parts.length,_=C===1?0:1;if(g(T.bounds,s))for(var S=_;S<C;S++){var x=T.parts[S];if(g(x.bounds,s)){var y=p(x,e);if(y){t.push(y);break}}}}return t},n.ray=function(e,i,t,l){l=l||1e-100;for(var s=a.angle(i,t),p=a.magnitude(a.sub(i,t)),g=(t.x+i.x)*.5,w=(t.y+i.y)*.5,T=d.rectangle(g,w,p,l,{angle:s}),C=n.collides(T,e),_=0;_<C.length;_+=1){var S=C[_];S.body=S.bodyB=S.bodyA}return C},n.region=function(e,i,t){for(var l=[],s=0;s<e.length;s++){var p=e[s],g=o.overlaps(p.bounds,i);(g&&!t||!g&&t)&&l.push(p)}return l},n.point=function(e,i){for(var t=[],l=0;l<e.length;l++){var s=e[l];if(o.contains(s.bounds,i))for(var p=s.parts.length===1?0:1;p<s.parts.length;p++){var g=s.parts[p];if(o.contains(g.bounds,i)&&u.contains(g.vertices,i)){t.push(s);break}}}return t}})()},function(r,v,f){var n={};r.exports=n;var a=f(4),c=f(0),o=f(6),d=f(1),u=f(5),e=f(2),i=f(14);(function(){var t,l;typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(_){window.setTimeout(function(){_(c.now())},1e3/60)},l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),n._goodFps=30,n._goodDelta=1e3/60,n.create=function(_){var S={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!_.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},x=c.extend(S,_);return x.canvas&&(x.canvas.width=x.options.width||x.canvas.width,x.canvas.height=x.options.height||x.canvas.height),x.mouse=_.mouse,x.engine=_.engine,x.canvas=x.canvas||g(x.options.width,x.options.height),x.context=x.canvas.getContext("2d"),x.textures={},x.bounds=x.bounds||{min:{x:0,y:0},max:{x:x.canvas.width,y:x.canvas.height}},x.controller=n,x.options.showBroadphase=!1,x.options.pixelRatio!==1&&n.setPixelRatio(x,x.options.pixelRatio),c.isElement(x.element)&&x.element.appendChild(x.canvas),x},n.run=function(_){(function S(x){_.frameRequestId=t(S),s(_,x),n.world(_,x),_.context.setTransform(_.options.pixelRatio,0,0,_.options.pixelRatio,0,0),(_.options.showStats||_.options.showDebug)&&n.stats(_,_.context,x),(_.options.showPerformance||_.options.showDebug)&&n.performance(_,_.context,x),_.context.setTransform(1,0,0,1,0,0)})()},n.stop=function(_){l(_.frameRequestId)},n.setPixelRatio=function(_,S){var x=_.options,y=_.canvas;S==="auto"&&(S=w(y)),x.pixelRatio=S,y.setAttribute("data-pixel-ratio",S),y.width=x.width*S,y.height=x.height*S,y.style.width=x.width+"px",y.style.height=x.height+"px"},n.setSize=function(_,S,x){_.options.width=S,_.options.height=x,_.bounds.max.x=_.bounds.min.x+S,_.bounds.max.y=_.bounds.min.y+x,_.options.pixelRatio!==1?n.setPixelRatio(_,_.options.pixelRatio):(_.canvas.width=S,_.canvas.height=x)},n.lookAt=function(_,S,x,y){y=typeof y<"u"?y:!0,S=c.isArray(S)?S:[S],x=x||{x:0,y:0};for(var b={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},A=0;A<S.length;A+=1){var M=S[A],P=M.bounds?M.bounds.min:M.min||M.position||M,k=M.bounds?M.bounds.max:M.max||M.position||M;P&&k&&(P.x<b.min.x&&(b.min.x=P.x),k.x>b.max.x&&(b.max.x=k.x),P.y<b.min.y&&(b.min.y=P.y),k.y>b.max.y&&(b.max.y=k.y))}var I=b.max.x-b.min.x+2*x.x,D=b.max.y-b.min.y+2*x.y,V=_.canvas.height,B=_.canvas.width,W=B/V,X=I/D,G=1,q=1;X>W?q=X/W:G=W/X,_.options.hasBounds=!0,_.bounds.min.x=b.min.x,_.bounds.max.x=b.min.x+I*G,_.bounds.min.y=b.min.y,_.bounds.max.y=b.min.y+D*q,y&&(_.bounds.min.x+=I*.5-I*G*.5,_.bounds.max.x+=I*.5-I*G*.5,_.bounds.min.y+=D*.5-D*q*.5,_.bounds.max.y+=D*.5-D*q*.5),_.bounds.min.x-=x.x,_.bounds.max.x-=x.x,_.bounds.min.y-=x.y,_.bounds.max.y-=x.y,_.mouse&&(i.setScale(_.mouse,{x:(_.bounds.max.x-_.bounds.min.x)/_.canvas.width,y:(_.bounds.max.y-_.bounds.min.y)/_.canvas.height}),i.setOffset(_.mouse,_.bounds.min))},n.startViewTransform=function(_){var S=_.bounds.max.x-_.bounds.min.x,x=_.bounds.max.y-_.bounds.min.y,y=S/_.options.width,b=x/_.options.height;_.context.setTransform(_.options.pixelRatio/y,0,0,_.options.pixelRatio/b,0,0),_.context.translate(-_.bounds.min.x,-_.bounds.min.y)},n.endViewTransform=function(_){_.context.setTransform(_.options.pixelRatio,0,0,_.options.pixelRatio,0,0)},n.world=function(_,S){var x=c.now(),y=_.engine,b=y.world,A=_.canvas,M=_.context,P=_.options,k=_.timing,I=o.allBodies(b),D=o.allConstraints(b),V=P.wireframes?P.wireframeBackground:P.background,B=[],W=[],X,G={timestamp:y.timing.timestamp};if(u.trigger(_,"beforeRender",G),_.currentBackground!==V&&C(_,V),M.globalCompositeOperation="source-in",M.fillStyle="transparent",M.fillRect(0,0,A.width,A.height),M.globalCompositeOperation="source-over",P.hasBounds){for(X=0;X<I.length;X++){var q=I[X];d.overlaps(q.bounds,_.bounds)&&B.push(q)}for(X=0;X<D.length;X++){var $=D[X],ie=$.bodyA,_e=$.bodyB,se=$.pointA,Z=$.pointB;ie&&(se=e.add(ie.position,$.pointA)),_e&&(Z=e.add(_e.position,$.pointB)),!(!se||!Z)&&(d.contains(_.bounds,se)||d.contains(_.bounds,Z))&&W.push($)}n.startViewTransform(_),_.mouse&&(i.setScale(_.mouse,{x:(_.bounds.max.x-_.bounds.min.x)/_.options.width,y:(_.bounds.max.y-_.bounds.min.y)/_.options.height}),i.setOffset(_.mouse,_.bounds.min))}else W=D,B=I,_.options.pixelRatio!==1&&_.context.setTransform(_.options.pixelRatio,0,0,_.options.pixelRatio,0,0);!P.wireframes||y.enableSleeping&&P.showSleeping?n.bodies(_,B,M):(P.showConvexHulls&&n.bodyConvexHulls(_,B,M),n.bodyWireframes(_,B,M)),P.showBounds&&n.bodyBounds(_,B,M),(P.showAxes||P.showAngleIndicator)&&n.bodyAxes(_,B,M),P.showPositions&&n.bodyPositions(_,B,M),P.showVelocity&&n.bodyVelocity(_,B,M),P.showIds&&n.bodyIds(_,B,M),P.showSeparations&&n.separations(_,y.pairs.list,M),P.showCollisions&&n.collisions(_,y.pairs.list,M),P.showVertexNumbers&&n.vertexNumbers(_,B,M),P.showMousePosition&&n.mousePosition(_,_.mouse,M),n.constraints(W,M),P.hasBounds&&n.endViewTransform(_),u.trigger(_,"afterRender",G),k.lastElapsed=c.now()-x},n.stats=function(_,S,x){for(var y=_.engine,b=y.world,A=o.allBodies(b),M=0,P=55,k=44,I=0,D=0,V=0;V<A.length;V+=1)M+=A[V].parts.length;var B={Part:M,Body:A.length,Cons:o.allConstraints(b).length,Comp:o.allComposites(b).length,Pair:y.pairs.list.length};S.fillStyle="#0e0f19",S.fillRect(I,D,P*5.5,k),S.font="12px Arial",S.textBaseline="top",S.textAlign="right";for(var W in B){var X=B[W];S.fillStyle="#aaa",S.fillText(W,I+P,D+8),S.fillStyle="#eee",S.fillText(X,I+P,D+26),I+=P}},n.performance=function(_,S){var x=_.engine,y=_.timing,b=y.deltaHistory,A=y.elapsedHistory,M=y.timestampElapsedHistory,P=y.engineDeltaHistory,k=y.engineUpdatesHistory,I=y.engineElapsedHistory,D=x.timing.lastUpdatesPerFrame,V=x.timing.lastDelta,B=p(b),W=p(A),X=p(P),G=p(k),q=p(I),$=p(M),ie=$/B||0,_e=Math.round(B/V),se=1e3/B||0,Z=4,E=12,F=60,H=34,L=10,U=69;S.fillStyle="#0e0f19",S.fillRect(0,50,E*5+F*6+22,H),n.status(S,L,U,F,Z,b.length,Math.round(se)+" fps",se/n._goodFps,function(R){return b[R]/B-1}),n.status(S,L+E+F,U,F,Z,P.length,V.toFixed(2)+" dt",n._goodDelta/V,function(R){return P[R]/X-1}),n.status(S,L+(E+F)*2,U,F,Z,k.length,D+" upf",Math.pow(c.clamp(G/_e||1,0,1),4),function(R){return k[R]/G-1}),n.status(S,L+(E+F)*3,U,F,Z,I.length,q.toFixed(2)+" ut",1-D*q/n._goodFps,function(R){return I[R]/q-1}),n.status(S,L+(E+F)*4,U,F,Z,A.length,W.toFixed(2)+" rt",1-W/n._goodFps,function(R){return A[R]/W-1}),n.status(S,L+(E+F)*5,U,F,Z,M.length,ie.toFixed(2)+" x",ie*ie*ie,function(R){return(M[R]/b[R]/ie||0)-1})},n.status=function(_,S,x,y,b,A,M,P,k){_.strokeStyle="#888",_.fillStyle="#444",_.lineWidth=1,_.fillRect(S,x+7,y,1),_.beginPath(),_.moveTo(S,x+7-b*c.clamp(.4*k(0),-2,2));for(var I=0;I<y;I+=1)_.lineTo(S+I,x+7-(I<A?b*c.clamp(.4*k(I),-2,2):0));_.stroke(),_.fillStyle="hsl("+c.clamp(25+95*P,0,120)+",100%,60%)",_.fillRect(S,x-7,4,4),_.font="12px Arial",_.textBaseline="middle",_.textAlign="right",_.fillStyle="#eee",_.fillText(M,S+y,x-5)},n.constraints=function(_,S){for(var x=S,y=0;y<_.length;y++){var b=_[y];if(!(!b.render.visible||!b.pointA||!b.pointB)){var A=b.bodyA,M=b.bodyB,P,k;if(A?P=e.add(A.position,b.pointA):P=b.pointA,b.render.type==="pin")x.beginPath(),x.arc(P.x,P.y,3,0,2*Math.PI),x.closePath();else{if(M?k=e.add(M.position,b.pointB):k=b.pointB,x.beginPath(),x.moveTo(P.x,P.y),b.render.type==="spring")for(var I=e.sub(k,P),D=e.perp(e.normalise(I)),V=Math.ceil(c.clamp(b.length/5,12,20)),B,W=1;W<V;W+=1)B=W%2===0?1:-1,x.lineTo(P.x+I.x*(W/V)+D.x*B*4,P.y+I.y*(W/V)+D.y*B*4);x.lineTo(k.x,k.y)}b.render.lineWidth&&(x.lineWidth=b.render.lineWidth,x.strokeStyle=b.render.strokeStyle,x.stroke()),b.render.anchors&&(x.fillStyle=b.render.strokeStyle,x.beginPath(),x.arc(P.x,P.y,3,0,2*Math.PI),x.arc(k.x,k.y,3,0,2*Math.PI),x.closePath(),x.fill())}}},n.bodies=function(_,S,x){var y=x;_.engine;var b=_.options,A=b.showInternalEdges||!b.wireframes,M,P,k,I;for(k=0;k<S.length;k++)if(M=S[k],!!M.render.visible){for(I=M.parts.length>1?1:0;I<M.parts.length;I++)if(P=M.parts[I],!!P.render.visible){if(b.showSleeping&&M.isSleeping?y.globalAlpha=.5*P.render.opacity:P.render.opacity!==1&&(y.globalAlpha=P.render.opacity),P.render.sprite&&P.render.sprite.texture&&!b.wireframes){var D=P.render.sprite,V=T(_,D.texture);y.translate(P.position.x,P.position.y),y.rotate(P.angle),y.drawImage(V,V.width*-D.xOffset*D.xScale,V.height*-D.yOffset*D.yScale,V.width*D.xScale,V.height*D.yScale),y.rotate(-P.angle),y.translate(-P.position.x,-P.position.y)}else{if(P.circleRadius)y.beginPath(),y.arc(P.position.x,P.position.y,P.circleRadius,0,2*Math.PI);else{y.beginPath(),y.moveTo(P.vertices[0].x,P.vertices[0].y);for(var B=1;B<P.vertices.length;B++)!P.vertices[B-1].isInternal||A?y.lineTo(P.vertices[B].x,P.vertices[B].y):y.moveTo(P.vertices[B].x,P.vertices[B].y),P.vertices[B].isInternal&&!A&&y.moveTo(P.vertices[(B+1)%P.vertices.length].x,P.vertices[(B+1)%P.vertices.length].y);y.lineTo(P.vertices[0].x,P.vertices[0].y),y.closePath()}b.wireframes?(y.lineWidth=1,y.strokeStyle=_.options.wireframeStrokeStyle,y.stroke()):(y.fillStyle=P.render.fillStyle,P.render.lineWidth&&(y.lineWidth=P.render.lineWidth,y.strokeStyle=P.render.strokeStyle,y.stroke()),y.fill())}y.globalAlpha=1}}},n.bodyWireframes=function(_,S,x){var y=x,b=_.options.showInternalEdges,A,M,P,k,I;for(y.beginPath(),P=0;P<S.length;P++)if(A=S[P],!!A.render.visible)for(I=A.parts.length>1?1:0;I<A.parts.length;I++){for(M=A.parts[I],y.moveTo(M.vertices[0].x,M.vertices[0].y),k=1;k<M.vertices.length;k++)!M.vertices[k-1].isInternal||b?y.lineTo(M.vertices[k].x,M.vertices[k].y):y.moveTo(M.vertices[k].x,M.vertices[k].y),M.vertices[k].isInternal&&!b&&y.moveTo(M.vertices[(k+1)%M.vertices.length].x,M.vertices[(k+1)%M.vertices.length].y);y.lineTo(M.vertices[0].x,M.vertices[0].y)}y.lineWidth=1,y.strokeStyle=_.options.wireframeStrokeStyle,y.stroke()},n.bodyConvexHulls=function(_,S,x){var y=x,b,A,M;for(y.beginPath(),A=0;A<S.length;A++)if(b=S[A],!(!b.render.visible||b.parts.length===1)){for(y.moveTo(b.vertices[0].x,b.vertices[0].y),M=1;M<b.vertices.length;M++)y.lineTo(b.vertices[M].x,b.vertices[M].y);y.lineTo(b.vertices[0].x,b.vertices[0].y)}y.lineWidth=1,y.strokeStyle="rgba(255,255,255,0.2)",y.stroke()},n.vertexNumbers=function(_,S,x){var y=x,b,A,M;for(b=0;b<S.length;b++){var P=S[b].parts;for(M=P.length>1?1:0;M<P.length;M++){var k=P[M];for(A=0;A<k.vertices.length;A++)y.fillStyle="rgba(255,255,255,0.2)",y.fillText(b+"_"+A,k.position.x+(k.vertices[A].x-k.position.x)*.8,k.position.y+(k.vertices[A].y-k.position.y)*.8)}}},n.mousePosition=function(_,S,x){var y=x;y.fillStyle="rgba(255,255,255,0.8)",y.fillText(S.position.x+"  "+S.position.y,S.position.x+5,S.position.y-5)},n.bodyBounds=function(_,S,x){var y=x;_.engine;var b=_.options;y.beginPath();for(var A=0;A<S.length;A++){var M=S[A];if(M.render.visible)for(var P=S[A].parts,k=P.length>1?1:0;k<P.length;k++){var I=P[k];y.rect(I.bounds.min.x,I.bounds.min.y,I.bounds.max.x-I.bounds.min.x,I.bounds.max.y-I.bounds.min.y)}}b.wireframes?y.strokeStyle="rgba(255,255,255,0.08)":y.strokeStyle="rgba(0,0,0,0.1)",y.lineWidth=1,y.stroke()},n.bodyAxes=function(_,S,x){var y=x;_.engine;var b=_.options,A,M,P,k;for(y.beginPath(),M=0;M<S.length;M++){var I=S[M],D=I.parts;if(I.render.visible)if(b.showAxes)for(P=D.length>1?1:0;P<D.length;P++)for(A=D[P],k=0;k<A.axes.length;k++){var V=A.axes[k];y.moveTo(A.position.x,A.position.y),y.lineTo(A.position.x+V.x*20,A.position.y+V.y*20)}else for(P=D.length>1?1:0;P<D.length;P++)for(A=D[P],k=0;k<A.axes.length;k++)y.moveTo(A.position.x,A.position.y),y.lineTo((A.vertices[0].x+A.vertices[A.vertices.length-1].x)/2,(A.vertices[0].y+A.vertices[A.vertices.length-1].y)/2)}b.wireframes?(y.strokeStyle="indianred",y.lineWidth=1):(y.strokeStyle="rgba(255, 255, 255, 0.4)",y.globalCompositeOperation="overlay",y.lineWidth=2),y.stroke(),y.globalCompositeOperation="source-over"},n.bodyPositions=function(_,S,x){var y=x;_.engine;var b=_.options,A,M,P,k;for(y.beginPath(),P=0;P<S.length;P++)if(A=S[P],!!A.render.visible)for(k=0;k<A.parts.length;k++)M=A.parts[k],y.arc(M.position.x,M.position.y,3,0,2*Math.PI,!1),y.closePath();for(b.wireframes?y.fillStyle="indianred":y.fillStyle="rgba(0,0,0,0.5)",y.fill(),y.beginPath(),P=0;P<S.length;P++)A=S[P],A.render.visible&&(y.arc(A.positionPrev.x,A.positionPrev.y,2,0,2*Math.PI,!1),y.closePath());y.fillStyle="rgba(255,165,0,0.8)",y.fill()},n.bodyVelocity=function(_,S,x){var y=x;y.beginPath();for(var b=0;b<S.length;b++){var A=S[b];if(A.render.visible){var M=a.getVelocity(A);y.moveTo(A.position.x,A.position.y),y.lineTo(A.position.x+M.x,A.position.y+M.y)}}y.lineWidth=3,y.strokeStyle="cornflowerblue",y.stroke()},n.bodyIds=function(_,S,x){var y=x,b,A;for(b=0;b<S.length;b++)if(S[b].render.visible){var M=S[b].parts;for(A=M.length>1?1:0;A<M.length;A++){var P=M[A];y.font="12px Arial",y.fillStyle="rgba(255,255,255,0.5)",y.fillText(P.id,P.position.x+10,P.position.y-10)}}},n.collisions=function(_,S,x){var y=x,b=_.options,A,M,P,k;for(y.beginPath(),P=0;P<S.length;P++)if(A=S[P],!!A.isActive)for(M=A.collision,k=0;k<A.contactCount;k++){var I=A.contacts[k],D=I.vertex;y.rect(D.x-1.5,D.y-1.5,3.5,3.5)}for(b.wireframes?y.fillStyle="rgba(255,255,255,0.7)":y.fillStyle="orange",y.fill(),y.beginPath(),P=0;P<S.length;P++)if(A=S[P],!!A.isActive&&(M=A.collision,A.contactCount>0)){var V=A.contacts[0].vertex.x,B=A.contacts[0].vertex.y;A.contactCount===2&&(V=(A.contacts[0].vertex.x+A.contacts[1].vertex.x)/2,B=(A.contacts[0].vertex.y+A.contacts[1].vertex.y)/2),M.bodyB===M.supports[0].body||M.bodyA.isStatic===!0?y.moveTo(V-M.normal.x*8,B-M.normal.y*8):y.moveTo(V+M.normal.x*8,B+M.normal.y*8),y.lineTo(V,B)}b.wireframes?y.strokeStyle="rgba(255,165,0,0.7)":y.strokeStyle="orange",y.lineWidth=1,y.stroke()},n.separations=function(_,S,x){var y=x,b=_.options,A,M,P,k,I;for(y.beginPath(),I=0;I<S.length;I++)if(A=S[I],!!A.isActive){M=A.collision,P=M.bodyA,k=M.bodyB;var D=1;!k.isStatic&&!P.isStatic&&(D=.5),k.isStatic&&(D=0),y.moveTo(k.position.x,k.position.y),y.lineTo(k.position.x-M.penetration.x*D,k.position.y-M.penetration.y*D),D=1,!k.isStatic&&!P.isStatic&&(D=.5),P.isStatic&&(D=0),y.moveTo(P.position.x,P.position.y),y.lineTo(P.position.x+M.penetration.x*D,P.position.y+M.penetration.y*D)}b.wireframes?y.strokeStyle="rgba(255,165,0,0.5)":y.strokeStyle="orange",y.stroke()},n.inspector=function(_,S){_.engine;var x=_.selected,y=_.render,b=y.options,A;if(b.hasBounds){var M=y.bounds.max.x-y.bounds.min.x,P=y.bounds.max.y-y.bounds.min.y,k=M/y.options.width,I=P/y.options.height;S.scale(1/k,1/I),S.translate(-y.bounds.min.x,-y.bounds.min.y)}for(var D=0;D<x.length;D++){var V=x[D].data;switch(S.translate(.5,.5),S.lineWidth=1,S.strokeStyle="rgba(255,165,0,0.9)",S.setLineDash([1,2]),V.type){case"body":A=V.bounds,S.beginPath(),S.rect(Math.floor(A.min.x-3),Math.floor(A.min.y-3),Math.floor(A.max.x-A.min.x+6),Math.floor(A.max.y-A.min.y+6)),S.closePath(),S.stroke();break;case"constraint":var B=V.pointA;V.bodyA&&(B=V.pointB),S.beginPath(),S.arc(B.x,B.y,10,0,2*Math.PI),S.closePath(),S.stroke();break}S.setLineDash([]),S.translate(-.5,-.5)}_.selectStart!==null&&(S.translate(.5,.5),S.lineWidth=1,S.strokeStyle="rgba(255,165,0,0.6)",S.fillStyle="rgba(255,165,0,0.1)",A=_.selectBounds,S.beginPath(),S.rect(Math.floor(A.min.x),Math.floor(A.min.y),Math.floor(A.max.x-A.min.x),Math.floor(A.max.y-A.min.y)),S.closePath(),S.stroke(),S.fill(),S.translate(-.5,-.5)),b.hasBounds&&S.setTransform(1,0,0,1,0,0)};var s=function(_,S){var x=_.engine,y=_.timing,b=y.historySize,A=x.timing.timestamp;y.delta=S-y.lastTime||n._goodDelta,y.lastTime=S,y.timestampElapsed=A-y.lastTimestamp||0,y.lastTimestamp=A,y.deltaHistory.unshift(y.delta),y.deltaHistory.length=Math.min(y.deltaHistory.length,b),y.engineDeltaHistory.unshift(x.timing.lastDelta),y.engineDeltaHistory.length=Math.min(y.engineDeltaHistory.length,b),y.timestampElapsedHistory.unshift(y.timestampElapsed),y.timestampElapsedHistory.length=Math.min(y.timestampElapsedHistory.length,b),y.engineUpdatesHistory.unshift(x.timing.lastUpdatesPerFrame),y.engineUpdatesHistory.length=Math.min(y.engineUpdatesHistory.length,b),y.engineElapsedHistory.unshift(x.timing.lastElapsed),y.engineElapsedHistory.length=Math.min(y.engineElapsedHistory.length,b),y.elapsedHistory.unshift(y.lastElapsed),y.elapsedHistory.length=Math.min(y.elapsedHistory.length,b)},p=function(_){for(var S=0,x=0;x<_.length;x+=1)S+=_[x];return S/_.length||0},g=function(_,S){var x=document.createElement("canvas");return x.width=_,x.height=S,x.oncontextmenu=function(){return!1},x.onselectstart=function(){return!1},x},w=function(_){var S=_.getContext("2d"),x=window.devicePixelRatio||1,y=S.webkitBackingStorePixelRatio||S.mozBackingStorePixelRatio||S.msBackingStorePixelRatio||S.oBackingStorePixelRatio||S.backingStorePixelRatio||1;return x/y},T=function(_,S){var x=_.textures[S];return x||(x=_.textures[S]=new Image,x.src=S,x)},C=function(_,S){var x=S;/(jpg|gif|png)$/.test(S)&&(x="url("+S+")"),_.canvas.style.background=x,_.canvas.style.backgroundSize="contain",_.currentBackground=S}})()},function(r,v,f){var n={};r.exports=n;var a=f(5),c=f(17),o=f(0);(function(){n._maxFrameDelta=1e3/15,n._frameDeltaFallback=1e3/60,n._timeBufferMargin=1.5,n._elapsedNextEstimate=1,n._smoothingLowerBound=.1,n._smoothingUpperBound=.9,n.create=function(u){var e={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},i=o.extend(e,u);return i.fps=0,i},n.run=function(u,e){return u.timeBuffer=n._frameDeltaFallback,function i(t){u.frameRequestId=n._onNextFrame(u,i),t&&u.enabled&&n.tick(u,e,t)}(),u},n.tick=function(u,e,i){var t=o.now(),l=u.delta,s=0,p=i-u.timeLastTick;if((!p||!u.timeLastTick||p>Math.max(n._maxFrameDelta,u.maxFrameTime))&&(p=u.frameDelta||n._frameDeltaFallback),u.frameDeltaSmoothing){u.frameDeltaHistory.push(p),u.frameDeltaHistory=u.frameDeltaHistory.slice(-u.frameDeltaHistorySize);var g=u.frameDeltaHistory.slice(0).sort(),w=u.frameDeltaHistory.slice(g.length*n._smoothingLowerBound,g.length*n._smoothingUpperBound),T=d(w);p=T||p}u.frameDeltaSnapping&&(p=1e3/Math.round(1e3/p)),u.frameDelta=p,u.timeLastTick=i,u.timeBuffer+=u.frameDelta,u.timeBuffer=o.clamp(u.timeBuffer,0,u.frameDelta+l*n._timeBufferMargin),u.lastUpdatesDeferred=0;var C=u.maxUpdates||Math.ceil(u.maxFrameTime/l),_={timestamp:e.timing.timestamp};a.trigger(u,"beforeTick",_),a.trigger(u,"tick",_);for(var S=o.now();l>0&&u.timeBuffer>=l*n._timeBufferMargin;){a.trigger(u,"beforeUpdate",_),c.update(e,l),a.trigger(u,"afterUpdate",_),u.timeBuffer-=l,s+=1;var x=o.now()-t,y=o.now()-S,b=x+n._elapsedNextEstimate*y/s;if(s>=C||b>u.maxFrameTime){u.lastUpdatesDeferred=Math.round(Math.max(0,u.timeBuffer/l-n._timeBufferMargin));break}}e.timing.lastUpdatesPerFrame=s,a.trigger(u,"afterTick",_),u.frameDeltaHistory.length>=100&&(u.lastUpdatesDeferred&&Math.round(u.frameDelta/l)>C?o.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):u.lastUpdatesDeferred&&o.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof u.isFixed<"u"&&o.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(u.deltaMin||u.deltaMax)&&o.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),u.fps!==0&&o.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},n.stop=function(u){n._cancelNextFrame(u)},n._onNextFrame=function(u,e){if(typeof window<"u"&&window.requestAnimationFrame)u.frameRequestId=window.requestAnimationFrame(e);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return u.frameRequestId},n._cancelNextFrame=function(u){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(u.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var d=function(u){for(var e=0,i=u.length,t=0;t<i;t+=1)e+=u[t];return e/i||0}})()},function(r,v,f){var n={};r.exports=n;var a=f(8),c=f(0),o=c.deprecated;(function(){n.collides=function(d,u){return a.collides(d,u)},o(n,"collides","SAT.collides ➤ replaced by Collision.collides")})()},function(r,v,f){var n={};r.exports=n,f(1);var a=f(0);(function(){n.pathToVertices=function(c,o){typeof window<"u"&&!("SVGPathSeg"in window)&&a.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var d,u,e,i,t,l,s,p,g,w,T=[],C,_,S=0,x=0,y=0;o=o||15;var b=function(M,P,k){var I=k%2===1&&k>1;if(!g||M!=g.x||P!=g.y){g&&I?(C=g.x,_=g.y):(C=0,_=0);var D={x:C+M,y:_+P};(I||!g)&&(g=D),T.push(D),x=C+M,y=_+P}},A=function(M){var P=M.pathSegTypeAsLetter.toUpperCase();if(P!=="Z"){switch(P){case"M":case"L":case"T":case"C":case"S":case"Q":x=M.x,y=M.y;break;case"H":x=M.x;break;case"V":y=M.y;break}b(x,y,M.pathSegType)}};for(n._svgPathToAbsolute(c),e=c.getTotalLength(),l=[],d=0;d<c.pathSegList.numberOfItems;d+=1)l.push(c.pathSegList.getItem(d));for(s=l.concat();S<e;){if(w=c.getPathSegAtLength(S),t=l[w],t!=p){for(;s.length&&s[0]!=t;)A(s.shift());p=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":i=c.getPointAtLength(S),b(i.x,i.y,0);break}S+=o}for(d=0,u=s.length;d<u;++d)A(s[d]);return T},n._svgPathToAbsolute=function(c){for(var o,d,u,e,i,t,l=c.pathSegList,s=0,p=0,g=l.numberOfItems,w=0;w<g;++w){var T=l.getItem(w),C=T.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(C))"x"in T&&(s=T.x),"y"in T&&(p=T.y);else switch("x1"in T&&(u=s+T.x1),"x2"in T&&(i=s+T.x2),"y1"in T&&(e=p+T.y1),"y2"in T&&(t=p+T.y2),"x"in T&&(s+=T.x),"y"in T&&(p+=T.y),C){case"m":l.replaceItem(c.createSVGPathSegMovetoAbs(s,p),w);break;case"l":l.replaceItem(c.createSVGPathSegLinetoAbs(s,p),w);break;case"h":l.replaceItem(c.createSVGPathSegLinetoHorizontalAbs(s),w);break;case"v":l.replaceItem(c.createSVGPathSegLinetoVerticalAbs(p),w);break;case"c":l.replaceItem(c.createSVGPathSegCurvetoCubicAbs(s,p,u,e,i,t),w);break;case"s":l.replaceItem(c.createSVGPathSegCurvetoCubicSmoothAbs(s,p,i,t),w);break;case"q":l.replaceItem(c.createSVGPathSegCurvetoQuadraticAbs(s,p,u,e),w);break;case"t":l.replaceItem(c.createSVGPathSegCurvetoQuadraticSmoothAbs(s,p),w);break;case"a":l.replaceItem(c.createSVGPathSegArcAbs(s,p,T.r1,T.r2,T.angle,T.largeArcFlag,T.sweepFlag),w);break;case"z":case"Z":s=o,p=d;break}(C=="M"||C=="m")&&(o=s,d=p)}}})()},function(r,v,f){var n={};r.exports=n;var a=f(6);f(0),function(){n.create=a.create,n.add=a.add,n.remove=a.remove,n.clear=a.clear,n.addComposite=a.addComposite,n.addBody=a.addBody,n.addConstraint=a.addConstraint}()}])})})(Xn);var oi=Xn.exports;const J=Un(oi),nt=6,pt=330,Yn=51,lt=4.7625,Xe=17.5,et=102,ot=203,Oe=305,Qn=15,Ct=pt+Yn,de=Ct+nt,ne=de,si=88,li=39,fi=32,ui=32,ci=0,en=Object.freeze(Object.defineProperty({__proto__:null,baseR:Ct,boardR:de,center:ne,discR:Qn,ditchW:Yn,fifteenR:et,fiveR:Oe,marginBottom:fi,marginSide:ci,pegR:lt,rimW:nt,scoreHeight:li,stepperPadding:ui,surfaceR:pt,tenR:ot,twentyR:Xe,uiHeight:si},Symbol.toStringTag,{value:"Module"})),di={blue:"#4477AA",red:"#EE6677",green:"#228833",yellow:"#CCBB44",cyan:"#66CCEE",purple:"#AA3377",gray:"#BBBBBB"},pi={black:"#000000",white:"#ffffff","gray-50":"rgb(247, 247, 247)","gray-100":"rgb(239, 239, 239)","gray-200":"rgb(223, 223, 223)","gray-300":"rgb(202, 202, 202)","gray-400":"rgb(168, 168, 168)","gray-500":"rgb(135, 135, 135)","gray-600":"rgb(109, 109, 109)","gray-700":"rgb(78, 78, 78)","gray-800":"rgb(55, 55, 55)","gray-900":"rgb(38, 38, 38)","gray-1000":"rgb(25, 25, 25)","pink-aa":"#FF24FF","pink-aaa":"#D100D1","teal-aa":"#00A3A3","teal-aaa":"#008080","red-aa":"#FE5F55","red-aaa":"#E91101","purple-aaa":"#564592"},Bt={category:di,color:pi,"":{"11px":"0.7rem","12px":"0.75rem","14px":"0.875rem","16px":"1rem","18px":"1.125rem","20px":"1.25rem","22px":"1.375rem","24px":"1.5rem","28px":"1.75rem","32px":"2rem","36px":"2.25rem","40px":"2.5rem","44px":"2.75rem","48px":"3rem","56px":"3.5rem","64px":"4rem","80px":"5rem","96px":"6rem","112px":"7rem","128px":"8rem"}};var kt={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(m){(function(){var h=function(){this.init()};h.prototype={init:function(){var e=this||r;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var i=this||r;if(e=parseFloat(e),i.ctx||u(),typeof e<"u"&&e>=0&&e<=1){if(i._volume=e,i._muted)return i;i.usingWebAudio&&i.masterGain.gain.setValueAtTime(e,r.ctx.currentTime);for(var t=0;t<i._howls.length;t++)if(!i._howls[t]._webAudio)for(var l=i._howls[t]._getSoundIds(),s=0;s<l.length;s++){var p=i._howls[t]._soundById(l[s]);p&&p._node&&(p._node.volume=p._volume*e)}return i}return i._volume},mute:function(e){var i=this||r;i.ctx||u(),i._muted=e,i.usingWebAudio&&i.masterGain.gain.setValueAtTime(e?0:i._volume,r.ctx.currentTime);for(var t=0;t<i._howls.length;t++)if(!i._howls[t]._webAudio)for(var l=i._howls[t]._getSoundIds(),s=0;s<l.length;s++){var p=i._howls[t]._soundById(l[s]);p&&p._node&&(p._node.muted=e?!0:p._muted)}return i},stop:function(){for(var e=this||r,i=0;i<e._howls.length;i++)e._howls[i].stop();return e},unload:function(){for(var e=this||r,i=e._howls.length-1;i>=0;i--)e._howls[i].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,u()),e},codecs:function(e){return(this||r)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||r;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var i=new Audio;typeof i.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var i=new Audio;i.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||r,i=null;try{i=typeof Audio<"u"?new Audio:null}catch{return e}if(!i||typeof i.canPlayType!="function")return e;var t=i.canPlayType("audio/mpeg;").replace(/^no$/,""),l=e._navigator?e._navigator.userAgent:"",s=l.match(/OPR\/(\d+)/g),p=s&&parseInt(s[0].split("/")[1],10)<33,g=l.indexOf("Safari")!==-1&&l.indexOf("Chrome")===-1,w=l.match(/Version\/(.*?) /),T=g&&w&&parseInt(w[1],10)<15;return e._codecs={mp3:!!(!p&&(t||i.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!t,opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(i.canPlayType('audio/wav; codecs="1"')||i.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!i.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!i.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(i.canPlayType("audio/x-m4b;")||i.canPlayType("audio/m4b;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(i.canPlayType("audio/x-mp4;")||i.canPlayType("audio/mp4;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!T&&i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!T&&i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!i.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(i.canPlayType("audio/x-flac;")||i.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||r;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var i=function(t){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var l=new Audio;l._unlocked=!0,e._releaseHtml5Audio(l)}catch{e.noAudio=!0;break}for(var s=0;s<e._howls.length;s++)if(!e._howls[s]._webAudio)for(var p=e._howls[s]._getSoundIds(),g=0;g<p.length;g++){var w=e._howls[s]._soundById(p[g]);w&&w._node&&!w._node._unlocked&&(w._node._unlocked=!0,w._node.load())}e._autoResume();var T=e.ctx.createBufferSource();T.buffer=e._scratchBuffer,T.connect(e.ctx.destination),typeof T.start>"u"?T.noteOn(0):T.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),T.onended=function(){T.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",i,!0),document.removeEventListener("touchend",i,!0),document.removeEventListener("click",i,!0),document.removeEventListener("keydown",i,!0);for(var C=0;C<e._howls.length;C++)e._howls[C]._emit("unlock")}};return document.addEventListener("touchstart",i,!0),document.addEventListener("touchend",i,!0),document.addEventListener("click",i,!0),document.addEventListener("keydown",i,!0),e}},_obtainHtml5Audio:function(){var e=this||r;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var i=new Audio().play();return i&&typeof Promise<"u"&&(i instanceof Promise||typeof i.then=="function")&&i.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var i=this||r;return e._unlocked&&i._html5AudioPool.push(e),i},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!r.usingWebAudio)){for(var i=0;i<e._howls.length;i++)if(e._howls[i]._webAudio){for(var t=0;t<e._howls[i]._sounds.length;t++)if(!e._howls[i]._sounds[t]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var l=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(l,l)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!r.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var i=0;i<e._howls.length;i++)e._howls[i]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var r=new h,v=function(e){var i=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}i.init(e)};v.prototype={init:function(e){var i=this;return r.ctx||u(),i._autoplay=e.autoplay||!1,i._format=typeof e.format!="string"?e.format:[e.format],i._html5=e.html5||!1,i._muted=e.mute||!1,i._loop=e.loop||!1,i._pool=e.pool||5,i._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,i._rate=e.rate||1,i._sprite=e.sprite||{},i._src=typeof e.src!="string"?e.src:[e.src],i._volume=e.volume!==void 0?e.volume:1,i._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},i._duration=0,i._state="unloaded",i._sounds=[],i._endTimers={},i._queue=[],i._playLock=!1,i._onend=e.onend?[{fn:e.onend}]:[],i._onfade=e.onfade?[{fn:e.onfade}]:[],i._onload=e.onload?[{fn:e.onload}]:[],i._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],i._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],i._onpause=e.onpause?[{fn:e.onpause}]:[],i._onplay=e.onplay?[{fn:e.onplay}]:[],i._onstop=e.onstop?[{fn:e.onstop}]:[],i._onmute=e.onmute?[{fn:e.onmute}]:[],i._onvolume=e.onvolume?[{fn:e.onvolume}]:[],i._onrate=e.onrate?[{fn:e.onrate}]:[],i._onseek=e.onseek?[{fn:e.onseek}]:[],i._onunlock=e.onunlock?[{fn:e.onunlock}]:[],i._onresume=[],i._webAudio=r.usingWebAudio&&!i._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(i),i._autoplay&&i._queue.push({event:"play",action:function(){i.play()}}),i._preload&&i._preload!=="none"&&i.load(),i},load:function(){var e=this,i=null;if(r.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var t=0;t<e._src.length;t++){var l,s;if(e._format&&e._format[t])l=e._format[t];else{if(s=e._src[t],typeof s!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}l=/^data:audio\/([^;,]+);/i.exec(s),l||(l=/\.([^.]+)$/.exec(s.split("?",1)[0])),l&&(l=l[1].toLowerCase())}if(l||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),l&&r.codecs(l)){i=e._src[t];break}}if(!i){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=i,e._state="loading",window.location.protocol==="https:"&&i.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new f(e),e._webAudio&&a(e),e},play:function(e,i){var t=this,l=null;if(typeof e=="number")l=e,e=null;else{if(typeof e=="string"&&t._state==="loaded"&&!t._sprite[e])return null;if(typeof e>"u"&&(e="__default",!t._playLock)){for(var s=0,p=0;p<t._sounds.length;p++)t._sounds[p]._paused&&!t._sounds[p]._ended&&(s++,l=t._sounds[p]._id);s===1?e=null:l=null}}var g=l?t._soundById(l):t._inactiveSound();if(!g)return null;if(l&&!e&&(e=g._sprite||"__default"),t._state!=="loaded"){g._sprite=e,g._ended=!1;var w=g._id;return t._queue.push({event:"play",action:function(){t.play(w)}}),w}if(l&&!g._paused)return i||t._loadQueue("play"),g._id;t._webAudio&&r._autoResume();var T=Math.max(0,g._seek>0?g._seek:t._sprite[e][0]/1e3),C=Math.max(0,(t._sprite[e][0]+t._sprite[e][1])/1e3-T),_=C*1e3/Math.abs(g._rate),S=t._sprite[e][0]/1e3,x=(t._sprite[e][0]+t._sprite[e][1])/1e3;g._sprite=e,g._ended=!1;var y=function(){g._paused=!1,g._seek=T,g._start=S,g._stop=x,g._loop=!!(g._loop||t._sprite[e][2])};if(T>=x){t._ended(g);return}var b=g._node;if(t._webAudio){var A=function(){t._playLock=!1,y(),t._refreshBuffer(g);var I=g._muted||t._muted?0:g._volume;b.gain.setValueAtTime(I,r.ctx.currentTime),g._playStart=r.ctx.currentTime,typeof b.bufferSource.start>"u"?g._loop?b.bufferSource.noteGrainOn(0,T,86400):b.bufferSource.noteGrainOn(0,T,C):g._loop?b.bufferSource.start(0,T,86400):b.bufferSource.start(0,T,C),_!==1/0&&(t._endTimers[g._id]=setTimeout(t._ended.bind(t,g),_)),i||setTimeout(function(){t._emit("play",g._id),t._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?A():(t._playLock=!0,t.once("resume",A),t._clearTimer(g._id))}else{var M=function(){b.currentTime=T,b.muted=g._muted||t._muted||r._muted||b.muted,b.volume=g._volume*r.volume(),b.playbackRate=g._rate;try{var I=b.play();if(I&&typeof Promise<"u"&&(I instanceof Promise||typeof I.then=="function")?(t._playLock=!0,y(),I.then(function(){t._playLock=!1,b._unlocked=!0,i?t._loadQueue():t._emit("play",g._id)}).catch(function(){t._playLock=!1,t._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),g._ended=!0,g._paused=!0})):i||(t._playLock=!1,y(),t._emit("play",g._id)),b.playbackRate=g._rate,b.paused){t._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||g._loop?t._endTimers[g._id]=setTimeout(t._ended.bind(t,g),_):(t._endTimers[g._id]=function(){t._ended(g),b.removeEventListener("ended",t._endTimers[g._id],!1)},b.addEventListener("ended",t._endTimers[g._id],!1))}catch(D){t._emit("playerror",g._id,D)}};b.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(b.src=t._src,b.load());var P=window&&window.ejecta||!b.readyState&&r._navigator.isCocoonJS;if(b.readyState>=3||P)M();else{t._playLock=!0,t._state="loading";var k=function(){t._state="loaded",M(),b.removeEventListener(r._canPlayEvent,k,!1)};b.addEventListener(r._canPlayEvent,k,!1),t._clearTimer(g._id)}}return g._id},pause:function(e){var i=this;if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"pause",action:function(){i.pause(e)}}),i;for(var t=i._getSoundIds(e),l=0;l<t.length;l++){i._clearTimer(t[l]);var s=i._soundById(t[l]);if(s&&!s._paused&&(s._seek=i.seek(t[l]),s._rateSeek=0,s._paused=!0,i._stopFade(t[l]),s._node))if(i._webAudio){if(!s._node.bufferSource)continue;typeof s._node.bufferSource.stop>"u"?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),i._cleanBuffer(s._node)}else(!isNaN(s._node.duration)||s._node.duration===1/0)&&s._node.pause();arguments[1]||i._emit("pause",s?s._id:null)}return i},stop:function(e,i){var t=this;if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"stop",action:function(){t.stop(e)}}),t;for(var l=t._getSoundIds(e),s=0;s<l.length;s++){t._clearTimer(l[s]);var p=t._soundById(l[s]);p&&(p._seek=p._start||0,p._rateSeek=0,p._paused=!0,p._ended=!0,t._stopFade(l[s]),p._node&&(t._webAudio?p._node.bufferSource&&(typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),t._cleanBuffer(p._node)):(!isNaN(p._node.duration)||p._node.duration===1/0)&&(p._node.currentTime=p._start||0,p._node.pause(),p._node.duration===1/0&&t._clearSound(p._node))),i||t._emit("stop",p._id))}return t},mute:function(e,i){var t=this;if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"mute",action:function(){t.mute(e,i)}}),t;if(typeof i>"u")if(typeof e=="boolean")t._muted=e;else return t._muted;for(var l=t._getSoundIds(i),s=0;s<l.length;s++){var p=t._soundById(l[s]);p&&(p._muted=e,p._interval&&t._stopFade(p._id),t._webAudio&&p._node?p._node.gain.setValueAtTime(e?0:p._volume,r.ctx.currentTime):p._node&&(p._node.muted=r._muted?!0:e),t._emit("mute",p._id))}return t},volume:function(){var e=this,i=arguments,t,l;if(i.length===0)return e._volume;if(i.length===1||i.length===2&&typeof i[1]>"u"){var s=e._getSoundIds(),p=s.indexOf(i[0]);p>=0?l=parseInt(i[0],10):t=parseFloat(i[0])}else i.length>=2&&(t=parseFloat(i[0]),l=parseInt(i[1],10));var g;if(typeof t<"u"&&t>=0&&t<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,i)}}),e;typeof l>"u"&&(e._volume=t),l=e._getSoundIds(l);for(var w=0;w<l.length;w++)g=e._soundById(l[w]),g&&(g._volume=t,i[2]||e._stopFade(l[w]),e._webAudio&&g._node&&!g._muted?g._node.gain.setValueAtTime(t,r.ctx.currentTime):g._node&&!g._muted&&(g._node.volume=t*r.volume()),e._emit("volume",g._id))}else return g=l?e._soundById(l):e._sounds[0],g?g._volume:0;return e},fade:function(e,i,t,l){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"fade",action:function(){s.fade(e,i,t,l)}}),s;e=Math.min(Math.max(0,parseFloat(e)),1),i=Math.min(Math.max(0,parseFloat(i)),1),t=parseFloat(t),s.volume(e,l);for(var p=s._getSoundIds(l),g=0;g<p.length;g++){var w=s._soundById(p[g]);if(w){if(l||s._stopFade(p[g]),s._webAudio&&!w._muted){var T=r.ctx.currentTime,C=T+t/1e3;w._volume=e,w._node.gain.setValueAtTime(e,T),w._node.gain.linearRampToValueAtTime(i,C)}s._startFadeInterval(w,e,i,t,p[g],typeof l>"u")}}return s},_startFadeInterval:function(e,i,t,l,s,p){var g=this,w=i,T=t-i,C=Math.abs(T/.01),_=Math.max(4,C>0?l/C:l),S=Date.now();e._fadeTo=t,e._interval=setInterval(function(){var x=(Date.now()-S)/l;S=Date.now(),w+=T*x,w=Math.round(w*100)/100,T<0?w=Math.max(t,w):w=Math.min(t,w),g._webAudio?e._volume=w:g.volume(w,e._id,!0),p&&(g._volume=w),(t<i&&w<=t||t>i&&w>=t)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,g.volume(t,e._id),g._emit("fade",e._id))},_)},_stopFade:function(e){var i=this,t=i._soundById(e);return t&&t._interval&&(i._webAudio&&t._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(t._interval),t._interval=null,i.volume(t._fadeTo,e),t._fadeTo=null,i._emit("fade",e)),i},loop:function(){var e=this,i=arguments,t,l,s;if(i.length===0)return e._loop;if(i.length===1)if(typeof i[0]=="boolean")t=i[0],e._loop=t;else return s=e._soundById(parseInt(i[0],10)),s?s._loop:!1;else i.length===2&&(t=i[0],l=parseInt(i[1],10));for(var p=e._getSoundIds(l),g=0;g<p.length;g++)s=e._soundById(p[g]),s&&(s._loop=t,e._webAudio&&s._node&&s._node.bufferSource&&(s._node.bufferSource.loop=t,t&&(s._node.bufferSource.loopStart=s._start||0,s._node.bufferSource.loopEnd=s._stop,e.playing(p[g])&&(e.pause(p[g],!0),e.play(p[g],!0)))));return e},rate:function(){var e=this,i=arguments,t,l;if(i.length===0)l=e._sounds[0]._id;else if(i.length===1){var s=e._getSoundIds(),p=s.indexOf(i[0]);p>=0?l=parseInt(i[0],10):t=parseFloat(i[0])}else i.length===2&&(t=parseFloat(i[0]),l=parseInt(i[1],10));var g;if(typeof t=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,i)}}),e;typeof l>"u"&&(e._rate=t),l=e._getSoundIds(l);for(var w=0;w<l.length;w++)if(g=e._soundById(l[w]),g){e.playing(l[w])&&(g._rateSeek=e.seek(l[w]),g._playStart=e._webAudio?r.ctx.currentTime:g._playStart),g._rate=t,e._webAudio&&g._node&&g._node.bufferSource?g._node.bufferSource.playbackRate.setValueAtTime(t,r.ctx.currentTime):g._node&&(g._node.playbackRate=t);var T=e.seek(l[w]),C=(e._sprite[g._sprite][0]+e._sprite[g._sprite][1])/1e3-T,_=C*1e3/Math.abs(g._rate);(e._endTimers[l[w]]||!g._paused)&&(e._clearTimer(l[w]),e._endTimers[l[w]]=setTimeout(e._ended.bind(e,g),_)),e._emit("rate",g._id)}}else return g=e._soundById(l),g?g._rate:e._rate;return e},seek:function(){var e=this,i=arguments,t,l;if(i.length===0)e._sounds.length&&(l=e._sounds[0]._id);else if(i.length===1){var s=e._getSoundIds(),p=s.indexOf(i[0]);p>=0?l=parseInt(i[0],10):e._sounds.length&&(l=e._sounds[0]._id,t=parseFloat(i[0]))}else i.length===2&&(t=parseFloat(i[0]),l=parseInt(i[1],10));if(typeof l>"u")return 0;if(typeof t=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,i)}}),e;var g=e._soundById(l);if(g)if(typeof t=="number"&&t>=0){var w=e.playing(l);w&&e.pause(l,!0),g._seek=t,g._ended=!1,e._clearTimer(l),!e._webAudio&&g._node&&!isNaN(g._node.duration)&&(g._node.currentTime=t);var T=function(){w&&e.play(l,!0),e._emit("seek",l)};if(w&&!e._webAudio){var C=function(){e._playLock?setTimeout(C,0):T()};setTimeout(C,0)}else T()}else if(e._webAudio){var _=e.playing(l)?r.ctx.currentTime-g._playStart:0,S=g._rateSeek?g._rateSeek-g._seek:0;return g._seek+(S+_*Math.abs(g._rate))}else return g._node.currentTime;return e},playing:function(e){var i=this;if(typeof e=="number"){var t=i._soundById(e);return t?!t._paused:!1}for(var l=0;l<i._sounds.length;l++)if(!i._sounds[l]._paused)return!0;return!1},duration:function(e){var i=this,t=i._duration,l=i._soundById(e);return l&&(t=i._sprite[l._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,i=e._sounds,t=0;t<i.length;t++)i[t]._paused||e.stop(i[t]._id),e._webAudio||(e._clearSound(i[t]._node),i[t]._node.removeEventListener("error",i[t]._errorFn,!1),i[t]._node.removeEventListener(r._canPlayEvent,i[t]._loadFn,!1),i[t]._node.removeEventListener("ended",i[t]._endFn,!1),r._releaseHtml5Audio(i[t]._node)),delete i[t]._node,e._clearTimer(i[t]._id);var l=r._howls.indexOf(e);l>=0&&r._howls.splice(l,1);var s=!0;for(t=0;t<r._howls.length;t++)if(r._howls[t]._src===e._src||e._src.indexOf(r._howls[t]._src)>=0){s=!1;break}return n&&s&&delete n[e._src],r.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,i,t,l){var s=this,p=s["_on"+e];return typeof i=="function"&&p.push(l?{id:t,fn:i,once:l}:{id:t,fn:i}),s},off:function(e,i,t){var l=this,s=l["_on"+e],p=0;if(typeof i=="number"&&(t=i,i=null),i||t)for(p=0;p<s.length;p++){var g=t===s[p].id;if(i===s[p].fn&&g||!i&&g){s.splice(p,1);break}}else if(e)l["_on"+e]=[];else{var w=Object.keys(l);for(p=0;p<w.length;p++)w[p].indexOf("_on")===0&&Array.isArray(l[w[p]])&&(l[w[p]]=[])}return l},once:function(e,i,t){var l=this;return l.on(e,i,t,1),l},_emit:function(e,i,t){for(var l=this,s=l["_on"+e],p=s.length-1;p>=0;p--)(!s[p].id||s[p].id===i||e==="load")&&(setTimeout((function(g){g.call(this,i,t)}).bind(l,s[p].fn),0),s[p].once&&l.off(e,s[p].fn,s[p].id));return l._loadQueue(e),l},_loadQueue:function(e){var i=this;if(i._queue.length>0){var t=i._queue[0];t.event===e&&(i._queue.shift(),i._loadQueue()),e||t.action()}return i},_ended:function(e){var i=this,t=e._sprite;if(!i._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(i._ended.bind(i,e),100),i;var l=!!(e._loop||i._sprite[t][2]);if(i._emit("end",e._id),!i._webAudio&&l&&i.stop(e._id,!0).play(e._id),i._webAudio&&l){i._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=r.ctx.currentTime;var s=(e._stop-e._start)*1e3/Math.abs(e._rate);i._endTimers[e._id]=setTimeout(i._ended.bind(i,e),s)}return i._webAudio&&!l&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,i._clearTimer(e._id),i._cleanBuffer(e._node),r._autoSuspend()),!i._webAudio&&!l&&i.stop(e._id,!0),i},_clearTimer:function(e){var i=this;if(i._endTimers[e]){if(typeof i._endTimers[e]!="function")clearTimeout(i._endTimers[e]);else{var t=i._soundById(e);t&&t._node&&t._node.removeEventListener("ended",i._endTimers[e],!1)}delete i._endTimers[e]}return i},_soundById:function(e){for(var i=this,t=0;t<i._sounds.length;t++)if(e===i._sounds[t]._id)return i._sounds[t];return null},_inactiveSound:function(){var e=this;e._drain();for(var i=0;i<e._sounds.length;i++)if(e._sounds[i]._ended)return e._sounds[i].reset();return new f(e)},_drain:function(){var e=this,i=e._pool,t=0,l=0;if(!(e._sounds.length<i)){for(l=0;l<e._sounds.length;l++)e._sounds[l]._ended&&t++;for(l=e._sounds.length-1;l>=0;l--){if(t<=i)return;e._sounds[l]._ended&&(e._webAudio&&e._sounds[l]._node&&e._sounds[l]._node.disconnect(0),e._sounds.splice(l,1),t--)}}},_getSoundIds:function(e){var i=this;if(typeof e>"u"){for(var t=[],l=0;l<i._sounds.length;l++)t.push(i._sounds[l]._id);return t}else return[e]},_refreshBuffer:function(e){var i=this;return e._node.bufferSource=r.ctx.createBufferSource(),e._node.bufferSource.buffer=n[i._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,r.ctx.currentTime),i},_cleanBuffer:function(e){var i=this,t=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return i;if(r._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=r._scratchBuffer}catch{}return e.bufferSource=null,i},_clearSound:function(e){var i=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);i||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var f=function(e){this._parent=e,this.init()};f.prototype={init:function(){var e=this,i=e._parent;return e._muted=i._muted,e._loop=i._loop,e._volume=i._volume,e._rate=i._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,i._sounds.push(e),e.create(),e},create:function(){var e=this,i=e._parent,t=r._muted||e._muted||e._parent._muted?0:e._volume;return i._webAudio?(e._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),e._node.gain.setValueAtTime(t,r.ctx.currentTime),e._node.paused=!0,e._node.connect(r.masterGain)):r.noAudio||(e._node=r._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(r._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=i._src,e._node.preload=i._preload===!0?"auto":i._preload,e._node.volume=t*r.volume(),e._node.load()),e},reset:function(){var e=this,i=e._parent;return e._muted=i._muted,e._loop=i._loop,e._volume=i._volume,e._rate=i._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,i=e._parent;i._duration=Math.ceil(e._node.duration*10)/10,Object.keys(i._sprite).length===0&&(i._sprite={__default:[0,i._duration*1e3]}),i._state!=="loaded"&&(i._state="loaded",i._emit("load"),i._loadQueue()),e._node.removeEventListener(r._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,i=e._parent;i._duration===1/0&&(i._duration=Math.ceil(e._node.duration*10)/10,i._sprite.__default[1]===1/0&&(i._sprite.__default[1]=i._duration*1e3),i._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var n={},a=function(e){var i=e._src;if(n[i]){e._duration=n[i].duration,d(e);return}if(/^data:[^;]+;base64,/.test(i)){for(var t=atob(i.split(",")[1]),l=new Uint8Array(t.length),s=0;s<t.length;++s)l[s]=t.charCodeAt(s);o(l.buffer,e)}else{var p=new XMLHttpRequest;p.open(e._xhr.method,i,!0),p.withCredentials=e._xhr.withCredentials,p.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(g){p.setRequestHeader(g,e._xhr.headers[g])}),p.onload=function(){var g=(p.status+"")[0];if(g!=="0"&&g!=="2"&&g!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+p.status+".");return}o(p.response,e)},p.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete n[i],e.load())},c(p)}},c=function(e){try{e.send()}catch{e.onerror()}},o=function(e,i){var t=function(){i._emit("loaderror",null,"Decoding audio data failed.")},l=function(s){s&&i._sounds.length>0?(n[i._src]=s,d(i,s)):t()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(e).then(l).catch(t):r.ctx.decodeAudioData(e,l,t)},d=function(e,i){i&&!e._duration&&(e._duration=i.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},u=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),i=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),t=i?parseInt(i[1],10):null;if(e&&t&&t<9){var l=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!l&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};m.Howler=r,m.Howl=v,typeof Ne<"u"?(Ne.HowlerGlobal=h,Ne.Howler=r,Ne.Howl=v,Ne.Sound=f):typeof window<"u"&&(window.HowlerGlobal=h,window.Howler=r,window.Howl=v,window.Sound=f)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var v=this;if(!v.ctx||!v.ctx.listener)return v;for(var f=v._howls.length-1;f>=0;f--)v._howls[f].stereo(r);return v},HowlerGlobal.prototype.pos=function(r,v,f){var n=this;if(!n.ctx||!n.ctx.listener)return n;if(v=typeof v!="number"?n._pos[1]:v,f=typeof f!="number"?n._pos[2]:f,typeof r=="number")n._pos=[r,v,f],typeof n.ctx.listener.positionX<"u"?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]);else return n._pos;return n},HowlerGlobal.prototype.orientation=function(r,v,f,n,a,c){var o=this;if(!o.ctx||!o.ctx.listener)return o;var d=o._orientation;if(v=typeof v!="number"?d[1]:v,f=typeof f!="number"?d[2]:f,n=typeof n!="number"?d[3]:n,a=typeof a!="number"?d[4]:a,c=typeof c!="number"?d[5]:c,typeof r=="number")o._orientation=[r,v,f,n,a,c],typeof o.ctx.listener.forwardX<"u"?(o.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),o.ctx.listener.forwardY.setTargetAtTime(v,Howler.ctx.currentTime,.1),o.ctx.listener.forwardZ.setTargetAtTime(f,Howler.ctx.currentTime,.1),o.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),o.ctx.listener.upY.setTargetAtTime(a,Howler.ctx.currentTime,.1),o.ctx.listener.upZ.setTargetAtTime(c,Howler.ctx.currentTime,.1)):o.ctx.listener.setOrientation(r,v,f,n,a,c);else return d;return o},Howl.prototype.init=function(r){return function(v){var f=this;return f._orientation=v.orientation||[1,0,0],f._stereo=v.stereo||null,f._pos=v.pos||null,f._pannerAttr={coneInnerAngle:typeof v.coneInnerAngle<"u"?v.coneInnerAngle:360,coneOuterAngle:typeof v.coneOuterAngle<"u"?v.coneOuterAngle:360,coneOuterGain:typeof v.coneOuterGain<"u"?v.coneOuterGain:0,distanceModel:typeof v.distanceModel<"u"?v.distanceModel:"inverse",maxDistance:typeof v.maxDistance<"u"?v.maxDistance:1e4,panningModel:typeof v.panningModel<"u"?v.panningModel:"HRTF",refDistance:typeof v.refDistance<"u"?v.refDistance:1,rolloffFactor:typeof v.rolloffFactor<"u"?v.rolloffFactor:1},f._onstereo=v.onstereo?[{fn:v.onstereo}]:[],f._onpos=v.onpos?[{fn:v.onpos}]:[],f._onorientation=v.onorientation?[{fn:v.onorientation}]:[],r.call(this,v)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,v){var f=this;if(!f._webAudio)return f;if(f._state!=="loaded")return f._queue.push({event:"stereo",action:function(){f.stereo(r,v)}}),f;var n=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof v>"u")if(typeof r=="number")f._stereo=r,f._pos=[r,0,0];else return f._stereo;for(var a=f._getSoundIds(v),c=0;c<a.length;c++){var o=f._soundById(a[c]);if(o)if(typeof r=="number")o._stereo=r,o._pos=[r,0,0],o._node&&(o._pannerAttr.panningModel="equalpower",(!o._panner||!o._panner.pan)&&h(o,n),n==="spatial"?typeof o._panner.positionX<"u"?(o._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):o._panner.setPosition(r,0,0):o._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),f._emit("stereo",o._id);else return o._stereo}return f},Howl.prototype.pos=function(r,v,f,n){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"pos",action:function(){a.pos(r,v,f,n)}}),a;if(v=typeof v!="number"?0:v,f=typeof f!="number"?-.5:f,typeof n>"u")if(typeof r=="number")a._pos=[r,v,f];else return a._pos;for(var c=a._getSoundIds(n),o=0;o<c.length;o++){var d=a._soundById(c[o]);if(d)if(typeof r=="number")d._pos=[r,v,f],d._node&&((!d._panner||d._panner.pan)&&h(d,"spatial"),typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(v,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(f,Howler.ctx.currentTime)):d._panner.setPosition(r,v,f)),a._emit("pos",d._id);else return d._pos}return a},Howl.prototype.orientation=function(r,v,f,n){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"orientation",action:function(){a.orientation(r,v,f,n)}}),a;if(v=typeof v!="number"?a._orientation[1]:v,f=typeof f!="number"?a._orientation[2]:f,typeof n>"u")if(typeof r=="number")a._orientation=[r,v,f];else return a._orientation;for(var c=a._getSoundIds(n),o=0;o<c.length;o++){var d=a._soundById(c[o]);if(d)if(typeof r=="number")d._orientation=[r,v,f],d._node&&(d._panner||(d._pos||(d._pos=a._pos||[0,0,-.5]),h(d,"spatial")),typeof d._panner.orientationX<"u"?(d._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),d._panner.orientationY.setValueAtTime(v,Howler.ctx.currentTime),d._panner.orientationZ.setValueAtTime(f,Howler.ctx.currentTime)):d._panner.setOrientation(r,v,f)),a._emit("orientation",d._id);else return d._orientation}return a},Howl.prototype.pannerAttr=function(){var r=this,v=arguments,f,n,a;if(!r._webAudio)return r;if(v.length===0)return r._pannerAttr;if(v.length===1)if(typeof v[0]=="object")f=v[0],typeof n>"u"&&(f.pannerAttr||(f.pannerAttr={coneInnerAngle:f.coneInnerAngle,coneOuterAngle:f.coneOuterAngle,coneOuterGain:f.coneOuterGain,distanceModel:f.distanceModel,maxDistance:f.maxDistance,refDistance:f.refDistance,rolloffFactor:f.rolloffFactor,panningModel:f.panningModel}),r._pannerAttr={coneInnerAngle:typeof f.pannerAttr.coneInnerAngle<"u"?f.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof f.pannerAttr.coneOuterAngle<"u"?f.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof f.pannerAttr.coneOuterGain<"u"?f.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof f.pannerAttr.distanceModel<"u"?f.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof f.pannerAttr.maxDistance<"u"?f.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof f.pannerAttr.refDistance<"u"?f.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof f.pannerAttr.rolloffFactor<"u"?f.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof f.pannerAttr.panningModel<"u"?f.pannerAttr.panningModel:r._panningModel});else return a=r._soundById(parseInt(v[0],10)),a?a._pannerAttr:r._pannerAttr;else v.length===2&&(f=v[0],n=parseInt(v[1],10));for(var c=r._getSoundIds(n),o=0;o<c.length;o++)if(a=r._soundById(c[o]),a){var d=a._pannerAttr;d={coneInnerAngle:typeof f.coneInnerAngle<"u"?f.coneInnerAngle:d.coneInnerAngle,coneOuterAngle:typeof f.coneOuterAngle<"u"?f.coneOuterAngle:d.coneOuterAngle,coneOuterGain:typeof f.coneOuterGain<"u"?f.coneOuterGain:d.coneOuterGain,distanceModel:typeof f.distanceModel<"u"?f.distanceModel:d.distanceModel,maxDistance:typeof f.maxDistance<"u"?f.maxDistance:d.maxDistance,refDistance:typeof f.refDistance<"u"?f.refDistance:d.refDistance,rolloffFactor:typeof f.rolloffFactor<"u"?f.rolloffFactor:d.rolloffFactor,panningModel:typeof f.panningModel<"u"?f.panningModel:d.panningModel};var u=a._panner;u||(a._pos||(a._pos=r._pos||[0,0,-.5]),h(a,"spatial"),u=a._panner),u.coneInnerAngle=d.coneInnerAngle,u.coneOuterAngle=d.coneOuterAngle,u.coneOuterGain=d.coneOuterGain,u.distanceModel=d.distanceModel,u.maxDistance=d.maxDistance,u.refDistance=d.refDistance,u.rolloffFactor=d.rolloffFactor,u.panningModel=d.panningModel}return r},Sound.prototype.init=function(r){return function(){var v=this,f=v._parent;v._orientation=f._orientation,v._stereo=f._stereo,v._pos=f._pos,v._pannerAttr=f._pannerAttr,r.call(this),v._stereo?f.stereo(v._stereo):v._pos&&f.pos(v._pos[0],v._pos[1],v._pos[2],v._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var v=this,f=v._parent;return v._orientation=f._orientation,v._stereo=f._stereo,v._pos=f._pos,v._pannerAttr=f._pannerAttr,v._stereo?f.stereo(v._stereo):v._pos?f.pos(v._pos[0],v._pos[1],v._pos[2],v._id):v._panner&&(v._panner.disconnect(0),v._panner=void 0,f._refreshBuffer(v)),r.call(this)}}(Sound.prototype.reset);var h=function(r,v){v=v||"spatial",v==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}})()})(kt);const hi=at(!1),je=1,Ot=2,mn=4,Ft=8,gn=16,vi=1,mi=.05,gi=.05,_i=1,yi=.2,Vt={player1:Bt.color["pink-aa"],player2:Bt.color["teal-aa"],active:Bt.color.black,vector:Bt.color.black};let qe=!1,At;const xi=new kt.Howl({src:[`${Kt}/assets/audio/disc.mp3`]}),Si=new kt.Howl({src:[`${Kt}/assets/audio/rim.mp3`]}),wi=new kt.Howl({src:[`${Kt}/assets/audio/flick.mp3`]}),bi=new kt.Howl({src:[`${Kt}/assets/audio/hole.mp3`]});hi.subscribe(m=>{At=m});class Ai{constructor(){this.events={}}on(h,r){this.events[h]||(this.events[h]=[]),this.events[h].push(r)}emit(h,r){this.events[h]&&this.events[h].forEach(v=>v(r))}}function Ti(){const m=new Ai;let h,r,v,f,n,a,c,o,d,u,e,i,t=[],l,s;function p(E){const F=i/(de*2);return E*F}function g(){const E=J.Bodies.circle(ne,ne,de,{isStatic:!0,isSensor:!0,render:{visible:qe,fillStyle:"rgba(0,0,0,0)",lineWidth:1},label:"surface"},64),F=J.Bodies.circle(ne,ne,de-nt,{isStatic:!0,isSensor:!0,render:{visible:qe,fillStyle:"rgba(0,0,0,0)",lineWidth:1},label:"surface"},64),H=J.Bodies.circle(ne,ne,pt,{isStatic:!0,isSensor:!0,render:{visible:qe,fillStyle:"rgba(0,0,0,0)",lineWidth:1},label:"surface"},64),L=J.Bodies.circle(ne,ne,Xe,{isStatic:!0,isSensor:!0,render:{visible:qe,fillStyle:"rgba(0,0,0,0)",lineWidth:1},label:"20"},64),U=J.Bodies.circle(ne,ne,et,{isStatic:!0,isSensor:!0,render:{visible:qe,fillStyle:"rgba(0,0,0,0)",lineWidth:1},label:"15"},64),R=J.Bodies.circle(ne,ne,ot,{isStatic:!0,isSensor:!0,render:{visible:qe,fillStyle:"rgba(0,0,0,0)",lineWidth:1},label:"10"},64),Q=J.Bodies.circle(ne,ne,Oe,{isStatic:!0,isSensor:!0,render:{visible:qe,fillStyle:"rgba(0,0,0,0)",lineWidth:1},label:"5"},64);J.Composite.add(r,[F,E,H,L,U,R,Q])}function w(){const F=Math.max(2,Xe),H=Xe+F/2-1,L=[];for(let U=0;U<16;U++){const R=U/16*2*Math.PI,Q=ne+Math.cos(R)*H,te=ne+Math.sin(R)*H,re=2*Math.PI*H/16,le=J.Bodies.rectangle(Q,te,F,re,{isStatic:!0,isSensor:!1,angle:R,render:{visible:!1},label:"trap 20",collisionFilter:{category:mn,mask:je}});L.push(le)}J.Composite.add(r,L)}function T(){const F=Xe*4,H=Ct-nt+F/2-1,L=[];for(let U=0;U<32;U++){const R=U/32*2*Math.PI,Q=ne+Math.cos(R)*H,te=ne+Math.sin(R)*H,re=2*Math.PI*H/32,le=J.Bodies.rectangle(Q,te,F,re,{isStatic:!0,isSensor:!1,angle:R,render:{visible:!1},label:"trap rim",collisionFilter:{category:Ft,mask:je}});L.push(le)}J.Composite.add(r,L)}function C(){const F=Xe,H=pt-F/2+1,L=[];for(let U=0;U<32;U++){const R=U/32*2*Math.PI,Q=ne+Math.cos(R)*H,te=ne+Math.sin(R)*H,re=2*Math.PI*H/32,le=J.Bodies.rectangle(Q,te,F,re,{isStatic:!0,isSensor:!1,angle:R,render:{visible:!1},label:"trap surface",collisionFilter:{category:gn,mask:je}});L.push(le)}J.Composite.add(r,L)}function _(){const E=[],F=lt;for(let H=0;H<8;H++){const L=.375+H/8*Math.PI*2,U=ne+Math.cos(L)*et,R=ne+Math.sin(L)*et,Q=J.Bodies.circle(U,R,F,{isStatic:!0,restitution:_i,render:{visible:qe},collisionFilter:{category:Ot,mask:je}},32);E.push(Q)}J.Composite.add(r,E)}function S(E,F,H,L,U,R){const Q=Math.atan2(U-H,L-F),te=L-R*Math.cos(Q-Math.PI/4),re=U-R*Math.sin(Q-Math.PI/4),le=L-R*Math.cos(Q+Math.PI/4),K=U-R*Math.sin(Q+Math.PI/4);E.moveTo(L,U),E.lineTo(te,re),E.moveTo(L,U),E.lineTo(le,K)}function x(E){if(!s)return;const F=s.circleRadius,H=s.position;if(l==="shoot"&&o&&d){const L=J.Vector.normalise(o),U=p(H.x+L.x*F*1.25),R=p(H.y+L.y*F*1.25),Q=p(H.x+L.x*F*1.5+o.x),te=p(H.y+L.y*F*1.5+o.y);E.beginPath(),E.strokeStyle=Vt.vector,E.lineWidth=i<480?1:2,E.moveTo(U,R),E.lineTo(Q,te),E.stroke();const re=p(F*.75),le=Math.PI/4,K=Math.atan2(o.y,o.x),ee=Q-re*Math.cos(K-le),pe=te-re*Math.sin(K-le),Ie=Q-re*Math.cos(K+le),we=te-re*Math.sin(K+le);E.beginPath(),E.moveTo(Q,te),E.lineTo(ee,pe),E.moveTo(Q,te),E.lineTo(Ie,we),E.stroke(),E.closePath()}else if(l==="position"){E.beginPath(),E.strokeStyle=Vt.vector,E.stroke(),E.beginPath(),E.strokeStyle=Vt.vector,E.lineWidth=i<480?1:2;const L=p(H.x-F*2.5),U=p(H.x-F*1.25),R=p(H.x+F*2.5),Q=p(H.x+F*1.25),te=p(H.y),re=p(F*.75);E.moveTo(L,te),E.lineTo(U,te),E.moveTo(R,te),E.lineTo(Q,te),E.stroke(),E.closePath(),E.beginPath(),S(E,U,te,L,te,re),S(E,Q,te,R,te,re),E.stroke(),E.closePath()}}function y(){const E=f.context;x(E)}function b(E){E.pairs.forEach(({bodyA:F,bodyB:H})=>{const L=F.label==="disc"?F:H.label==="disc"?H:null,U=F.label==="20"?F:H.label==="20"?H:null;if(L&&U&&!L.in20){const R=J.Vector.magnitude(J.Vector.sub(L.position,U.position)),te=L.circleRadius*.75,re=10,le=R<te,K=L.speed<re;le&&K&&(!At&&!e&&bi.play(),L.in20=!0,L.collisionFilter.mask=je|Ot|Ft|mn,L.restitution=.4)}})}function A(E){E.pairs.forEach(({bodyA:F,bodyB:H})=>{const L=F.label==="disc"?F:H.label==="disc"?H:null,U=F.label==="disc"&&F.id!==L.id?F:H.label==="disc"&&H.id!==L.id?H:null,R=F.label==="trap rim"?F:H.label==="trap rim"?H:null;if(L&&R)!At&&!e&&Si.play(),L.frictionAir=.3,L.collisionFilter.mask=je|Ot|Ft|gn;else if(L&&U){!At&&!e&&xi.play(),L.collided=!0,U.collided=!0;const Q=L.player!==U.player;L.collidedOpp=Q,U.collidedOpp=Q}})}function M(E){if(!s)return;const F={x:E.x-s.position.x,y:E.y-s.position.y},H=J.Vector.normalise(F),L=J.Vector.magnitude(F),U=Math.min(L,a),R=U/a*n;c=J.Vector.mult(H,R),o=J.Vector.mult(H,U)}function P(E){const F=E.circleRadius,H=E.position,L=Math.sqrt(Math.pow(H.x-ne,2)+Math.pow(H.y-ne,2)),R=[{r:Xe,score:20},{r:et,score:15},{r:ot,score:10},{r:Oe,score:5}].find(Q=>L+F<Q.r);return(R==null?void 0:R.score)||0}function k(E){const F=E.circleRadius,H=E.position,L=Math.sqrt(Math.pow(H.x-ne,2)+Math.pow(H.y-ne,2)),U=et;if(L-F<U)return!0}function I(){if(t.every(F=>F.isSleeping)){t.forEach(R=>{R.score=P(R),R.intersect15=k(R)});const F=t.some(R=>R.player!==s.player),H=t.some(R=>R.collidedOpp),L=t.filter(R=>R.player===s.player).some(R=>R.intersect15);t.forEach(R=>{F?R.player===s.player?R.id===s.id?R.valid=H:R.valid=R.collided?H:!0:R.valid=!0:R.id===s.id?R.valid=R.collided?L:R.intersect15:R.valid=R.collided?L:!0,(!R.valid||!R.score)&&J.Composite.remove(r,R)});const U=t.find(R=>R.id===s.id).valid;if(t=t.filter(R=>R.score>0&&R.valid),u)m.emit("shotCompleteManual",{discs:t,valid:U});else{const R=t.map(Q=>({id:Q.id,player:Q.player,score:Q.score}));t.forEach(Q=>{Q.score===20&&J.Composite.remove(r,Q)}),t=t.filter(Q=>Q.score!==20),m.emit("shotComplete",{discs:R,valid:U}),t.forEach(Q=>{Q.valid=void 0,Q.collided=void 0,Q.collidedOpp=void 0,Q.intersect15=void 0,Q.in20=void 0})}s=null,$("idle")}}function D(){J.Matter.Composite.clear(r,!1),J.Events.off(h),J.Render.stop(f),f.canvas.remove(),f.context=null,f.textures={},J.Runner.stop(v)}function V(){t.forEach(E=>{J.Composite.remove(r,E)}),t=[],s=null,d=!1,o=void 0,c=void 0}function B(E={}){const F=E.player||"player1",H=E.state||"position",L=E.x?E.x:ne,U=E.y?E.y:F==="player1"?ne+Oe:ne-Oe,R=Qn,Q=mi,te=vi,re=gi,le=J.Bodies.circle(L,U,R,{density:Q,restitution:te,frictionAir:re,render:{fillStyle:Vt[F]},label:"disc",collisionFilter:{category:je,mask:je|Ot|Ft},sleepThreshold:60,isSleeping:!0},64);le.player=F,t.push(le),s=le,J.Events.on(le,"sleepStart",I),J.Composite.add(r,le),n=s.mass*yi,$(H)}function W(E){if(!s||l!=="position")return;const F=2,H=[45-F,135+F],L=Math.max(-Oe,Math.min(Oe,E-ne)),U=s.player==="player1",R=U?-1:1,Q=H[U?0:1]*R*-1,te=H[U?1:0]*R*-1,re=ne-Math.sqrt(Math.max(0,Math.pow(Oe,2)-Math.pow(L,2)))*R,le={x:ne+L,y:re},ee=J.Vector.angle({x:ne,y:ne},le)*180/Math.PI;if(ee>Q&&ee<te)J.Body.setPosition(s,le);else if(ee<=Q){const pe=Q*Math.PI/180,Ie=Math.cos(pe)*Oe,we=Math.sin(pe)*Oe,ve=ne+Ie,Se=ne+we;J.Body.setPosition(s,{x:ve,y:Se})}else if(ee>=te){const pe=te*Math.PI/180,Ie=Math.cos(pe)*Oe,we=Math.sin(pe)*Oe,ve=ne+Ie,Se=ne+we;J.Body.setPosition(s,{x:ve,y:Se})}}function X({degrees:E,speed:F}){const H=(E-90)*Math.PI/180,L=s.position.x+Math.cos(H),U=s.position.y+Math.sin(H);return{x:s.position.x+(L-s.position.x)*F,y:s.position.y+(U-s.position.y)*F}}function G({degrees:E,power:F,visible:H}){if(!s||l!=="shoot")return;_e(H===void 0?!0:H);const U=Math.max(.01,F)*a,R=X({degrees:E,speed:U});M(R)}function q(){!s||l!=="shoot"||($("play"),_e(!1),J.Body.applyForce(s,s.position,c),!At&&!e&&wi.play())}function $(E){l=E}function ie(E){e=E}function _e(E){d=E}function se(E){f&&(i=E,f.canvas.width=E,f.canvas.height=E,J.Render.setSize(f,E,E),J.Render,J.Render.lookAt(f,{min:{x:0,y:0},max:{x:de*2,y:de*2}}))}function Z({element:E,width:F,tutorial:H}){u=!!H,h?D():$("idle"),a=ne*.2,h=J.Engine.create({enableSleeping:!0}),r=h.world,h.gravity.y=0,v=J.Runner.create(),f=J.Render.create({element:E,engine:h,options:{width:de*2,height:de*2,wireframes:!1,pixelRatio:"auto",background:"transparent",showSleeping:!1,hasBounds:!0}}),g(),_(),w(),T(),C(),J.Runner.run(v,h),J.Render.run(f),se(F),J.Events.on(f,"afterRender",y),J.Events.on(h,"collisionActive",b),J.Events.on(h,"collisionStart",A),m.emit("ready")}return{removeDiscs:V,addDisc:B,positionDisc:W,aimDisc:G,flickDisc:q,setState:$,setIndicatorVisible:_e,autoMute:ie,resize:se,init:Z,on:(E,F)=>m.on(E,F)}}function Nt(m){return Object.keys(m).reduce((h,r)=>m[r]===void 0?h:h+`${r}:${m[r]};`,"")}function Jt(m){return m?!0:void 0}Nt({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function _n(m){function h(r){return r(m),()=>{}}return{subscribe:h}}function jt(m){if(!Zn)return null;const h=document.querySelector(`[data-melt-id="${m}"]`);return Mt(h)?h:null}const Tt=m=>new Proxy(m,{get(h,r,v){return Reflect.get(h,r,v)},ownKeys(h){return Reflect.ownKeys(h).filter(r=>r!=="action")}}),yn=m=>typeof m=="function";tn("empty");function tn(m,h){const{stores:r,action:v,returned:f}=h??{},n=(()=>{if(r&&f)return zt(r,c=>{const o=f(c);if(yn(o)){const d=(...u)=>Tt({...o(...u),[`data-melt-${m}`]:"",action:v??$e});return d.action=v??$e,d}return Tt({...o,[`data-melt-${m}`]:"",action:v??$e})});{const c=f,o=c==null?void 0:c();if(yn(o)){const d=(...u)=>Tt({...o(...u),[`data-melt-${m}`]:"",action:v??$e});return d.action=v??$e,_n(d)}return _n(Tt({...o,[`data-melt-${m}`]:"",action:v??$e}))}})(),a=v??(()=>{});return a.subscribe=n.subscribe,a}function xn(m,h){const{stores:r,returned:v,action:f}=h,{subscribe:n}=zt(r,c=>v(c).map(o=>Tt({...o,[`data-melt-${m}`]:"",action:f??$e}))),a=f??(()=>{});return a.subscribe=n,a}function Pi(m){const h=n=>n?`${m}-${n}`:m,r=n=>`data-melt-${m}${n?`-${n}`:""}`,v=n=>`[data-melt-${m}${n?`-${n}`:""}]`;return{name:h,attribute:r,selector:v,getEl:n=>document.querySelector(v(n))}}const Zn=typeof document<"u";function Mt(m){return m instanceof HTMLElement}function Mi(...m){return(...h)=>{for(const r of m)typeof r=="function"&&r(...h)}}function $e(){}function ft(m,h,r,v){const f=Array.isArray(h)?h:[h];return f.forEach(n=>m.addEventListener(n,r,v)),()=>{f.forEach(n=>m.removeEventListener(n,r,v))}}function Ci(m,h,r,v){const f=Array.isArray(h)?h:[h];if(typeof r=="function"){const n=Ii(a=>r(a));return f.forEach(a=>m.addEventListener(a,n,v)),()=>{f.forEach(a=>m.removeEventListener(a,n,v))}}return()=>void 0}function ki(m){const h=m.currentTarget;if(!Mt(h))return null;const r=new CustomEvent(`m-${m.type}`,{detail:{originalEvent:m},cancelable:!0});return h.dispatchEvent(r),r}function Ii(m){return h=>{const r=ki(h);if(!(r!=null&&r.defaultPrevented))return m(h)}}const Ei=m=>{try{$n(m)}catch{return m}};function Kn(m,...h){const r={};for(const v of Object.keys(m))h.includes(v)||(r[v]=m[v]);return r}function it(m){return{...m,get:()=>ei(m)}}it.writable=function(m){const h=at(m);let r=m;return{subscribe:h.subscribe,set(v){h.set(v),r=v},update(v){const f=v(r);h.set(f),r=f},get(){return r}}};it.derived=function(m,h){const r=new Map,v=()=>{const n=Array.isArray(m)?m.map(a=>a.get()):m.get();return h(n)};return{get:v,subscribe:n=>{const a=[];return(Array.isArray(m)?m:[m]).forEach(o=>{a.push(o.subscribe(()=>{n(v())}))}),n(v()),r.set(n,a),()=>{const o=r.get(n);if(o)for(const d of o)d();r.delete(n)}}}};const Di=(m,h)=>{const r=it(m),v=(n,a)=>{r.update(c=>{const o=n(c);let d=o;return h&&(d=h({curr:c,next:o})),a==null||a(d),d})};return{...r,update:v,set:n=>{v(()=>n)}}};let Ri="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Bi=(m=21)=>{let h="",r=m;for(;r--;)h+=Ri[Math.random()*64|0];return h};function Oi(){return Bi(10)}function Fi(m){return m.reduce((h,r)=>(h[r]=Oi(),h),{})}const Ve={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};function Sn(m,h){let r;const v=zt(m,n=>{r==null||r(),r=h(n)}).subscribe($e),f=()=>{v(),r==null||r()};return Ei(f),f}function Vi(m){const h={};return Object.keys(m).forEach(r=>{const v=r,f=m[v];h[v]=it(at(f))}),h}function qt(m,h,r,v){const f=(m-(isNaN(h)?0:h))%v;let n=Math.abs(f)*2>=v?m+Math.sign(f)*(v-Math.abs(f)):m-f;isNaN(h)?!isNaN(r)&&n>r&&(n=Math.floor(r/v)*v):n<h?n=h:!isNaN(r)&&n>r&&(n=h+Math.floor((r-h)/v)*v);const a=v.toString(),c=a.indexOf("."),o=c>=0?a.length-c:0;if(o>0){const d=Math.pow(10,o);n=Math.round(n*d)/d}return n}ut(void 0,m=>{function h(v){m(v),m(void 0)}return ft(document,"pointerup",h,{passive:!1,capture:!0})});ut(void 0,m=>{function h(v){v&&v.key===Ve.ESCAPE&&m(v),m(void 0)}return ft(document,"keydown",h,{passive:!1})});ut(!1),ut(!1),ut(void 0);const Li={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...Kn(Li,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const Hi={defaultValue:[],min:0,max:100,step:1,orientation:"horizontal",dir:"ltr",disabled:!1},{name:Lt}=Pi("slider"),Wi=m=>{const h={...Hi,...m},r=Vi(Kn(h,"value","onValueChange","defaultValue")),{min:v,max:f,step:n,orientation:a,dir:c,disabled:o}=r,d=h.value??at(h.defaultValue),u=Di(d,h==null?void 0:h.onValueChange),e=it(at(!1)),i=it(at(0)),t=it(at(null)),l=Fi(["root"]),s=(x,y)=>{u.update(b=>{if(!b)return[x];if(b[y]===x)return b;const A=[...b],M=A[y]>x?-1:1;function P(){A[y]=A[y+M],A[y+M]=x;const V=p();V&&(V[y+M].focus(),t.set({thumb:V[y+M],index:y+M}))}if(M===-1&&x<A[y-1])return P(),A;if(M===1&&x>A[y+1])return P(),A;const k=v.get(),I=f.get(),D=n.get();return A[y]=qt(x,k,I,D),A})},p=()=>{const x=jt(l.root);return x?Array.from(x.querySelectorAll('[data-melt-part="thumb"]')).filter(y=>Mt(y)):null},g=zt([v,f],([x,y])=>b=>(b-x)/(y-x)*100),w=it.derived([a,c],([x,y])=>x==="horizontal"?y==="rtl"?"rl":"lr":y==="rtl"?"tb":"bt"),T=tn(Lt(),{stores:[o,a,c],returned:([x,y,b])=>({dir:b,disabled:Jt(x),"data-disabled":Jt(x),"data-orientation":y,style:x?void 0:`touch-action: ${y==="horizontal"?"pan-y":"pan-x"}`,"data-melt-id":l.root})}),C=tn(Lt("range"),{stores:[u,w,g],returned:([x,y,b])=>{const A=x.length>1?b(Math.min(...x)??0):0,M=100-b(Math.max(...x)??0),P={position:"absolute"};switch(y){case"lr":{P.left=`${A}%`,P.right=`${M}%`;break}case"rl":{P.right=`${A}%`,P.left=`${M}%`;break}case"bt":{P.bottom=`${A}%`,P.top=`${M}%`;break}case"tb":{P.top=`${A}%`,P.bottom=`${M}%`;break}}return{style:Nt(P)}}}),_=xn(Lt("thumb"),{stores:[u,g,v,f,o,a,w],returned:([x,y,b,A,M,P,k])=>Array.from({length:x.length||1},(D,V)=>{i.get()<x.length&&i.update(q=>q+1);const W=x[V],X=`${y(W)}%`,G={position:"absolute"};switch(k){case"lr":{G.left=X,G.translate="-50% 0";break}case"rl":{G.right=X,G.translate="50% 0";break}case"bt":{G.bottom=X,G.translate="0 50%";break}case"tb":{G.top=X,G.translate="0 -50%";break}}return{role:"slider","aria-valuemin":b,"aria-valuemax":A,"aria-valuenow":W,"aria-disabled":Jt(M),"aria-orientation":P,"data-melt-part":"thumb","data-value":W,style:Nt(G),tabindex:M?-1:0}}),action:x=>({destroy:Ci(x,"keydown",b=>{if(o.get())return;const A=b.currentTarget;if(!Mt(A))return;const M=p();if(!(M!=null&&M.length))return;const P=M.indexOf(A);if(i.set(P),![Ve.ARROW_LEFT,Ve.ARROW_RIGHT,Ve.ARROW_UP,Ve.ARROW_DOWN,Ve.HOME,Ve.END].includes(b.key))return;b.preventDefault();const k=v.get(),I=f.get(),D=n.get(),V=u.get(),B=a.get(),W=w.get(),X=V[P];switch(b.key){case Ve.HOME:{s(k,P);break}case Ve.END:{s(I,P);break}case Ve.ARROW_LEFT:{if(B!=="horizontal")break;b.metaKey?s(W==="rl"?I:k,P):W==="rl"&&X<I?s(X+D,P):W==="lr"&&X>k&&s(X-D,P);break}case Ve.ARROW_RIGHT:{if(B!=="horizontal")break;b.metaKey?s(W==="rl"?k:I,P):W==="rl"&&X>k?s(X-D,P):W==="lr"&&X<I&&s(X+D,P);break}case Ve.ARROW_UP:{b.metaKey?s(W==="tb"?k:I,P):W==="tb"&&X>k?s(X-D,P):W!=="tb"&&X<I&&s(X+D,P);break}case Ve.ARROW_DOWN:{b.metaKey?s(W==="tb"?I:k,P):W==="tb"&&X<I?s(X+D,P):W!=="tb"&&X>k&&s(X-D,P);break}}})})}),S=xn(Lt("tick"),{stores:[u,v,f,n,w],returned:([x,y,b,A,M])=>{const P=b-y;let k=Math.ceil(P/A);return P%A==0&&k++,Array.from({length:k},(I,D)=>{const V=`${D*(A/(b-y))*100}%`,B=D===0,W=D===k-1,X=B?0:W?-100:-50,G={position:"absolute"};switch(M){case"lr":{G.left=V,G.translate=`${X}% 0`;break}case"rl":{G.right=V,G.translate=`${-X}% 0`;break}case"bt":{G.bottom=V,G.translate=`0 ${-X}%`;break}case"tb":{G.top=V,G.translate=`0 ${X}%`;break}}const q=y+D*A;return{"data-bounded":(x.length===1?q<=x[0]:x[0]<=q&&q<=x[x.length-1])?!0:void 0,"data-value":q,style:Nt(G)}})}});return Sn([T,v,f,o,a,w,n],([x,y,b,A,M,P,k])=>{if(!Zn||A)return;const I=(G,q,$,ie)=>{const se=(G-$)/(ie-$)*(b-y)+y;if(se<y)s(y,q);else if(se>b)s(b,q);else{const Z=k,E=y,F=Math.floor((se-E)/Z),H=E+F*Z+Z/2,L=E+(F+1)*Z+Z/2,U=se>=H&&se<L?(F+1)*Z+E:F*Z+E;U<=b&&s(U,q)}},D=G=>{const q=p();if(!q)return;q.forEach(se=>se.blur());const $=q.map(se=>{if(M==="horizontal"){const{left:Z,right:E}=se.getBoundingClientRect();return Math.abs(G.clientX-(Z+E)/2)}else{const{top:Z,bottom:E}=se.getBoundingClientRect();return Math.abs(G.clientY-(Z+E)/2)}}),ie=q[$.indexOf(Math.min(...$))],_e=q.indexOf(ie);return{thumb:ie,index:_e}},V=G=>{if(!e.get())return;G.preventDefault(),G.stopPropagation();const q=jt(x["data-melt-id"]),$=t.get();if(!q||!$)return;$.thumb.focus();const{left:ie,right:_e,top:se,bottom:Z}=q.getBoundingClientRect();switch(P){case"lr":{I(G.clientX,$.index,ie,_e);break}case"rl":{I(G.clientX,$.index,_e,ie);break}case"bt":{I(G.clientY,$.index,Z,se);break}case"tb":{I(G.clientY,$.index,se,Z);break}}},B=G=>{if(G.button!==0)return;const q=jt(x["data-melt-id"]),$=D(G);if(!$||!q)return;const ie=G.target;!Mt(ie)||!q.contains(ie)||(G.preventDefault(),t.set($),$.thumb.focus(),e.set(!0),V(G))},W=()=>{e.set(!1)},X=Mi(ft(document,"pointerdown",B),ft(document,"pointerup",W),ft(document,"pointerleave",W),ft(document,"pointermove",V));return()=>{X()}}),Sn([n,v,f,u],function([y,b,A,M]){const P=I=>qt(I,b,A,y)===I,k=I=>qt(I,b,A,y);M.some(I=>!P(I))&&u.update(I=>I.map(k))}),{elements:{root:T,thumbs:_,range:C,ticks:S},states:{value:u},options:r}};function Ni(m,h){const r={};return h.forEach(v=>{r[v]={[`data-${m}-${v}`]:""}}),v=>r[v]}function Gi(){const m=rn();return h=>{const{originalEvent:r}=h.detail,{cancelable:v}=h,f=r.type;m(f,{originalEvent:r,currentTarget:r.currentTarget},{cancelable:v})||h.preventDefault()}}function Ui(m){const h={};for(const r in m){const v=m[r];v!==void 0&&(h[r]=v)}return h}function Xi(m){return function(h,r){if(r===void 0)return;const v=m[h];v&&v.set(r)}}function zn(){return{NAME:"slider",PARTS:["root","input","range","thumb","tick"]}}function Yi(m){const{NAME:h,PARTS:r}=zn(),v=Ni(h,r),f={...Wi(Ui(m)),getAttrs:v};return ti(h,f),{...f,updateOption:Xi(f.options)}}function Jn(){const{NAME:m}=zn();return ni(m)}const Qi=m=>({builder:m&4,ticks:m&8,thumbs:m&16}),wn=m=>({builder:m[2],ticks:m[3],thumbs:m[4]}),Zi=m=>({builder:m&4,ticks:m&8,thumbs:m&16}),bn=m=>({builder:m[2],ticks:m[3],thumbs:m[4]});function Ki(m){let h,r,v,f;const n=m[19].default,a=Gt(n,m,m[18],wn);let c=[m[2],m[8]],o={};for(let d=0;d<c.length;d+=1)o=ze(o,c[d]);return{c(){h=ae("span"),a&&a.c(),this.h()},l(d){h=oe(d,"SPAN",{});var u=fe(h);a&&a.l(u),u.forEach(Y),this.h()},h(){dt(h,o)},m(d,u){me(d,h,u),a&&a.m(h,null),m[20](h),r=!0,v||(f=on(m[2].action(h)),v=!0)},p(d,u){a&&a.p&&(!r||u&262172)&&Ut(a,n,d,d[18],r?Yt(n,d[18],u,Qi):Xt(d[18]),wn),dt(h,o=sn(c,[u&4&&d[2],u&256&&d[8]]))},i(d){r||(ce(a,d),r=!0)},o(d){ge(a,d),r=!1},d(d){d&&Y(h),a&&a.d(d),m[20](null),v=!1,f()}}}function zi(m){let h;const r=m[19].default,v=Gt(r,m,m[18],bn);return{c(){v&&v.c()},l(f){v&&v.l(f)},m(f,n){v&&v.m(f,n),h=!0},p(f,n){v&&v.p&&(!h||n&262172)&&Ut(v,r,f,f[18],h?Yt(r,f[18],n,Zi):Xt(f[18]),bn)},i(f){h||(ce(v,f),h=!0)},o(f){ge(v,f),h=!1},d(f){v&&v.d(f)}}}function Ji(m){let h,r,v,f;const n=[zi,Ki],a=[];function c(o,d){return o[1]?0:1}return h=c(m),r=a[h]=n[h](m),{c(){r.c(),v=Fe()},l(o){r.l(o),v=Fe()},m(o,d){a[h].m(o,d),me(o,v,d),f=!0},p(o,[d]){let u=h;h=c(o),h===u?a[h].p(o,d):(Ze(),ge(a[u],1,1,()=>{a[u]=null}),Ke(),r=a[h],r?r.p(o,d):(r=a[h]=n[h](o),r.c()),ce(r,1),r.m(v.parentNode,v))},i(o){f||(ce(r),f=!0)},o(o){ge(r),f=!1},d(o){o&&Y(v),a[h].d(o)}}}function ji(m,h,r){let v;const f=["disabled","min","max","step","orientation","dir","value","onValueChange","asChild","el"];let n=ct(h,f),a,c,o,{$$slots:d={},$$scope:u}=h,{disabled:e=void 0}=h,{min:i=void 0}=h,{max:t=void 0}=h,{step:l=void 0}=h,{orientation:s=void 0}=h,{dir:p=void 0}=h,{value:g=void 0}=h,{onValueChange:w=void 0}=h,{asChild:T=!1}=h,{el:C=void 0}=h;const{elements:{root:_,ticks:S,thumbs:x},states:{value:y},updateOption:b,getAttrs:A}=Yi({disabled:e,dir:p,min:i,max:t,step:l,orientation:s,defaultValue:g,onValueChange:({next:k})=>(g!==k&&(w==null||w(k),r(9,g=k)),k)});Ht(m,_,k=>r(17,a=k)),Ht(m,S,k=>r(3,c=k)),Ht(m,x,k=>r(4,o=k));const M=A("root");function P(k){rt[k?"unshift":"push"](()=>{C=k,r(0,C)})}return m.$$set=k=>{h=ze(ze({},h),an(k)),r(8,n=ct(h,f)),"disabled"in k&&r(10,e=k.disabled),"min"in k&&r(11,i=k.min),"max"in k&&r(12,t=k.max),"step"in k&&r(13,l=k.step),"orientation"in k&&r(14,s=k.orientation),"dir"in k&&r(15,p=k.dir),"value"in k&&r(9,g=k.value),"onValueChange"in k&&r(16,w=k.onValueChange),"asChild"in k&&r(1,T=k.asChild),"el"in k&&r(0,C=k.el),"$$scope"in k&&r(18,u=k.$$scope)},m.$$.update=()=>{m.$$.dirty&512&&g!==void 0&&y.set(g),m.$$.dirty&1024&&b("disabled",e),m.$$.dirty&2048&&b("min",i),m.$$.dirty&4096&&b("max",t),m.$$.dirty&8192&&b("step",l),m.$$.dirty&16384&&b("orientation",s),m.$$.dirty&32768&&b("dir",p),m.$$.dirty&131072&&r(2,v=a),m.$$.dirty&4&&Object.assign(v,M)},[C,T,v,c,o,_,S,x,n,g,e,i,t,l,s,p,w,a,u,d,P]}class qi extends vt{constructor(h){super(),mt(this,h,ji,Ji,ht,{disabled:10,min:11,max:12,step:13,orientation:14,dir:15,value:9,onValueChange:16,asChild:1,el:0})}}const $i=m=>({builder:m&4}),An=m=>({builder:m[2]});function er(m){let h,r,v,f=[m[2],m[4]],n={};for(let a=0;a<f.length;a+=1)n=ze(n,f[a]);return{c(){h=ae("span"),this.h()},l(a){h=oe(a,"SPAN",{}),fe(h).forEach(Y),this.h()},h(){dt(h,n)},m(a,c){me(a,h,c),m[8](h),r||(v=on(m[2].action(h)),r=!0)},p(a,c){dt(h,n=sn(f,[c&4&&a[2],c&16&&a[4]]))},i:Qe,o:Qe,d(a){a&&Y(h),m[8](null),r=!1,v()}}}function tr(m){let h;const r=m[7].default,v=Gt(r,m,m[6],An);return{c(){v&&v.c()},l(f){v&&v.l(f)},m(f,n){v&&v.m(f,n),h=!0},p(f,n){v&&v.p&&(!h||n&68)&&Ut(v,r,f,f[6],h?Yt(r,f[6],n,$i):Xt(f[6]),An)},i(f){h||(ce(v,f),h=!0)},o(f){ge(v,f),h=!1},d(f){v&&v.d(f)}}}function nr(m){let h,r,v,f;const n=[tr,er],a=[];function c(o,d){return o[1]?0:1}return h=c(m),r=a[h]=n[h](m),{c(){r.c(),v=Fe()},l(o){r.l(o),v=Fe()},m(o,d){a[h].m(o,d),me(o,v,d),f=!0},p(o,[d]){let u=h;h=c(o),h===u?a[h].p(o,d):(Ze(),ge(a[u],1,1,()=>{a[u]=null}),Ke(),r=a[h],r?r.p(o,d):(r=a[h]=n[h](o),r.c()),ce(r,1),r.m(v.parentNode,v))},i(o){f||(ce(r),f=!0)},o(o){ge(r),f=!1},d(o){o&&Y(v),a[h].d(o)}}}function ir(m,h,r){let v;const f=["asChild","el"];let n=ct(h,f),a,{$$slots:c={},$$scope:o}=h,{asChild:d=!1}=h,{el:u=void 0}=h;const{elements:{range:e},getAttrs:i}=Jn();Ht(m,e,s=>r(5,a=s));const t=i("range");function l(s){rt[s?"unshift":"push"](()=>{u=s,r(0,u)})}return m.$$set=s=>{h=ze(ze({},h),an(s)),r(4,n=ct(h,f)),"asChild"in s&&r(1,d=s.asChild),"el"in s&&r(0,u=s.el),"$$scope"in s&&r(6,o=s.$$scope)},m.$$.update=()=>{m.$$.dirty&32&&r(2,v=a),m.$$.dirty&4&&Object.assign(v,t)},[u,d,v,e,n,a,o,c,l]}class rr extends vt{constructor(h){super(),mt(this,h,ir,nr,ht,{asChild:1,el:0})}}const ar=m=>({builder:m&4}),Tn=m=>({builder:m[2]});function or(m){let h,r,v,f=[m[2],m[4]],n={};for(let a=0;a<f.length;a+=1)n=ze(n,f[a]);return{c(){h=ae("span"),this.h()},l(a){h=oe(a,"SPAN",{}),fe(h).forEach(Y),this.h()},h(){dt(h,n)},m(a,c){me(a,h,c),m[8](h),r||(v=[on(m[2].action(h)),Pt(h,"m-keydown",m[3])],r=!0)},p(a,c){dt(h,n=sn(f,[c&4&&a[2],c&16&&a[4]]))},i:Qe,o:Qe,d(a){a&&Y(h),m[8](null),r=!1,Gn(v)}}}function sr(m){let h;const r=m[7].default,v=Gt(r,m,m[6],Tn);return{c(){v&&v.c()},l(f){v&&v.l(f)},m(f,n){v&&v.m(f,n),h=!0},p(f,n){v&&v.p&&(!h||n&68)&&Ut(v,r,f,f[6],h?Yt(r,f[6],n,ar):Xt(f[6]),Tn)},i(f){h||(ce(v,f),h=!0)},o(f){ge(v,f),h=!1},d(f){v&&v.d(f)}}}function lr(m){let h,r,v,f;const n=[sr,or],a=[];function c(o,d){return o[1]?0:1}return h=c(m),r=a[h]=n[h](m),{c(){r.c(),v=Fe()},l(o){r.l(o),v=Fe()},m(o,d){a[h].m(o,d),me(o,v,d),f=!0},p(o,[d]){let u=h;h=c(o),h===u?a[h].p(o,d):(Ze(),ge(a[u],1,1,()=>{a[u]=null}),Ke(),r=a[h],r?r.p(o,d):(r=a[h]=n[h](o),r.c()),ce(r,1),r.m(v.parentNode,v))},i(o){f||(ce(r),f=!0)},o(o){ge(r),f=!1},d(o){o&&Y(v),a[h].d(o)}}}function fr(m,h,r){let v;const f=["asChild","el","thumb"];let n=ct(h,f),{$$slots:a={},$$scope:c}=h,{asChild:o=!1}=h,{el:d=void 0}=h,{thumb:u}=h;const{getAttrs:e}=Jn(),i=Gi(),t=e("thumb");function l(s){rt[s?"unshift":"push"](()=>{d=s,r(0,d)})}return m.$$set=s=>{h=ze(ze({},h),an(s)),r(4,n=ct(h,f)),"asChild"in s&&r(1,o=s.asChild),"el"in s&&r(0,d=s.el),"thumb"in s&&r(5,u=s.thumb),"$$scope"in s&&r(6,c=s.$$scope)},m.$$.update=()=>{m.$$.dirty&32&&r(2,v=u),m.$$.dirty&4&&Object.assign(v,t)},[d,o,v,i,n,u,c,a,l]}class ur extends vt{constructor(h){super(),mt(this,h,fr,lr,ht,{asChild:1,el:0,thumb:5})}}function Pn(m,h,r){const v=m.slice();return v[12]=h[r],v}function Mn(m){let h,r;return h=new ur({props:{thumb:m[12],class:m[6]}}),{c(){gt(h.$$.fragment)},l(v){_t(h.$$.fragment,v)},m(v,f){yt(h,v,f),r=!0},p(v,f){const n={};f&2048&&(n.thumb=v[12]),f&64&&(n.class=v[6]),h.$set(n)},i(v){r||(ce(h.$$.fragment,v),r=!0)},o(v){ge(h.$$.fragment,v),r=!1},d(v){xt(h,v)}}}function cr(m){let h,r,v,f,n;r=new rr({});let a=Ue(m[11]),c=[];for(let d=0;d<a.length;d+=1)c[d]=Mn(Pn(m,a,d));const o=d=>ge(c[d],1,1,()=>{c[d]=null});return{c(){h=ae("span"),gt(r.$$.fragment),v=Me();for(let d=0;d<c.length;d+=1)c[d].c();f=Fe(),this.h()},l(d){h=oe(d,"SPAN",{class:!0});var u=fe(h);_t(r.$$.fragment,u),u.forEach(Y),v=Ce(d);for(let e=0;e<c.length;e+=1)c[e].l(d);f=Fe(),this.h()},h(){he(h,"class","bg svelte-q9ia7x")},m(d,u){me(d,h,u),yt(r,h,null),me(d,v,u);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(d,u);me(d,f,u),n=!0},p(d,u){if(u&2112){a=Ue(d[11]);let e;for(e=0;e<a.length;e+=1){const i=Pn(d,a,e);c[e]?(c[e].p(i,u),ce(c[e],1)):(c[e]=Mn(i),c[e].c(),ce(c[e],1),c[e].m(f.parentNode,f))}for(Ze(),e=a.length;e<c.length;e+=1)o(e);Ke()}},i(d){if(!n){ce(r.$$.fragment,d);for(let u=0;u<a.length;u+=1)ce(c[u]);n=!0}},o(d){ge(r.$$.fragment,d),c=c.filter(Boolean);for(let u=0;u<c.length;u+=1)ge(c[u]);n=!1},d(d){d&&(Y(h),Y(v),Y(f)),xt(r),wt(c,d)}}}function dr(m){let h,r,v,f,n,a,c;function o(u){m[9](u)}let d={min:m[2],max:m[3],step:m[5],disabled:m[4],onValueChange:m[7],$$slots:{default:[cr,({thumbs:u})=>({11:u}),({thumbs:u})=>u?2048:0]},$$scope:{ctx:m}};return m[0]!==void 0&&(d.value=m[0]),n=new qi({props:d}),rt.push(()=>Zt(n,"value",o)),{c(){h=ae("div"),r=ae("p"),v=Le(m[1]),f=Me(),gt(n.$$.fragment),this.h()},l(u){h=oe(u,"DIV",{class:!0});var e=fe(h);r=oe(e,"P",{class:!0});var i=fe(r);v=He(i,m[1]),i.forEach(Y),f=Ce(e),_t(n.$$.fragment,e),e.forEach(Y),this.h()},h(){he(r,"class","label svelte-q9ia7x"),he(h,"class","c svelte-q9ia7x")},m(u,e){me(u,h,e),j(h,r),j(r,v),j(h,f),yt(n,h,null),c=!0},p(u,[e]){(!c||e&2)&&tt(v,u[1]);const i={};e&4&&(i.min=u[2]),e&8&&(i.max=u[3]),e&32&&(i.step=u[5]),e&16&&(i.disabled=u[4]),e&34880&&(i.$$scope={dirty:e,ctx:u}),!a&&e&1&&(a=!0,i.value=u[0],Qt(()=>a=!1)),n.$set(i)},i(u){c||(ce(n.$$.fragment,u),c=!0)},o(u){ge(n.$$.fragment,u),c=!1},d(u){u&&Y(h),xt(n)}}}function pr(m,h,r){let v,{label:f}=h,{value:n}=h,{min:a}=h,{max:c}=h,{disabled:o}=h,{step:d}=h,{animate:u}=h;const e=rn();function i(){e("change",n)}function t(l){n=l,r(0,n)}return m.$$set=l=>{"label"in l&&r(1,f=l.label),"value"in l&&r(0,n=l.value),"min"in l&&r(2,a=l.min),"max"in l&&r(3,c=l.max),"disabled"in l&&r(4,o=l.disabled),"step"in l&&r(5,d=l.step),"animate"in l&&r(8,u=l.animate)},m.$$.update=()=>{m.$$.dirty&256&&r(6,v=u?"animate":"")},[n,f,a,c,o,d,v,i,u,t]}class jn extends vt{constructor(h){super(),mt(this,h,pr,dr,ht,{label:1,value:0,min:2,max:3,disabled:4,step:5,animate:8})}}function hr(m){let h,r,v,f;return{c(){h=ae("button"),r=Le("Hold to Shoot"),this.h()},l(n){h=oe(n,"BUTTON",{});var a=fe(h);r=He(a,"Hold to Shoot"),a.forEach(Y),this.h()},h(){h.disabled=m[0]},m(n,a){me(n,h,a),j(h,r),v||(f=[Pt(h,"pointerdown",m[1]),Pt(h,"pointerup",m[2]),Pt(h,"pointerleave",m[2])],v=!0)},p(n,[a]){a&1&&(h.disabled=n[0])},i:Qe,o:Qe,d(n){n&&Y(h),v=!1,Gn(f)}}}function vr(m,h,r){let{value:v}=h,{disabled:f}=h;const n=rn();let a,c;function o(){let u=-1;c=!0,a=setInterval(()=>{v>=1?u=-1:v<=0&&(u=1),r(3,v+=.01*u),r(3,v=+v.toFixed(2))},17)}function d(){c&&(clearInterval(a),n("release",v),r(3,v=0),c=!1)}return m.$$set=u=>{"value"in u&&r(3,v=u.value),"disabled"in u&&r(0,f=u.disabled)},[f,o,d,v]}class mr extends vt{constructor(h){super(),mt(this,h,vr,hr,ht,{value:3,disabled:0})}}const gr=[{state:"shoot",player:"player2",power:.32,degrees:176}],_r=[{x:411.7843742508332,y:436.43306454273926,player:"player2",score:15},{x:341.53999999999996,y:688.5930841382143,state:"shoot",player:"player1",power:.38,degrees:15}],yr=[{x:411.7843742508332,y:436.43306454273926,player:"player2",score:15},{state:"position",player:"player1"}],xr=[{x:150,y:300,player:"player2",score:5},{state:"shoot",player:"player1",power:.21,degrees:1}],Sr=[{state:"shoot",player:"player1",random:!0,power:.3,degrees:0}],wr=[{x:480,y:250,player:"player1",score:10},{state:"position",player:"player1"}],br=[{x:350,y:342,player:"player1",score:15,valid:!0},{x:545,y:311,player:"player1",score:10,valid:!0},{x:622,y:310,player:"player2",score:5,valid:!0},{x:150,y:305,player:"player2",score:5,valid:!0},{x:233,y:466,player:"player2",score:10,valid:!0,state:"idle"}],Ar=[{x:420,y:460,player:"player2"},{player:"player1",state:"position"}],Tr={fifteen:gr,opponent:_r,opponenttry:yr,invalid:xr,open:Sr,opentry:wr,score:br,ricochettry:Ar};function Cn(m,h,r){const v=m.slice();return v[52]=h[r],v}function kn(m,h,r){const v=m.slice();return v[55]=h[r],v}function In(m,h,r){const v=m.slice();v[58]=h[r];const f=v[22][v[58]];v[59]=f;const n=(v[0]-en[`${v[58]}R`]/de*v[0])/2;v[60]=n;const a=v[58]==="twenty"?Xe/de*v[0]:0;return v[61]=a,v}function En(m,h,r){const v=m.slice();v[58]=h[r],v[69]=r;const f=en[`${v[58]}R`];v[64]=f;const n=en[`${v[21][v[69]+1]}R`];v[65]=n;const a=v[64]/de*v[0];v[66]=a;const c=v[65]/de*v[0];return v[67]=c,v}function Dn(m){let h;return{c(){h=ae("div"),this.h()},l(r){h=oe(r,"DIV",{class:!0,style:!0}),fe(h).forEach(Y),this.h()},h(){he(h,"class",ri(m[58])+" svelte-fa9ahp"),ue(h,"--w",m[66]+"px"),ue(h,"--b",(m[66]-m[67])/2+"px")},m(r,v){me(r,h,v)},p(r,v){v[0]&1&&ue(h,"--w",r[66]+"px"),v[0]&1&&ue(h,"--b",(r[66]-r[67])/2+"px")},d(r){r&&Y(h)}}}function Rn(m){let h,r=m[59]+"",v;return{c(){h=ae("span"),v=Le(r),this.h()},l(f){h=oe(f,"SPAN",{class:!0,style:!0});var n=fe(h);v=He(n,r),n.forEach(Y),this.h()},h(){he(h,"class","text text-"+m[58]+" svelte-fa9ahp"),ue(h,"--y",m[60]+m[61]+"px")},m(f,n){me(f,h,n),j(h,v)},p(f,n){n[0]&1&&ue(h,"--y",f[60]+f[61]+"px")},d(f){f&&Y(h)}}}function Bn(m){let h;return{c(){h=ae("div"),this.h()},l(r){h=oe(r,"DIV",{class:!0,style:!0}),fe(h).forEach(Y),this.h()},h(){he(h,"class","quadrant-line svelte-fa9ahp"),ue(h,"--w",(Oe-ot)/de*m[0]/2+"px"),ue(h,"--x",ot/de*m[0]/2+"px"),ue(h,"--angle",m[55]+"deg")},m(r,v){me(r,h,v)},p(r,v){v[0]&1&&ue(h,"--w",(Oe-ot)/de*r[0]/2+"px"),v[0]&1&&ue(h,"--x",ot/de*r[0]/2+"px")},d(r){r&&Y(h)}}}function On(m){let h;return{c(){h=ae("div"),this.h()},l(r){h=oe(r,"DIV",{class:!0,style:!0}),fe(h).forEach(Y),this.h()},h(){he(h,"class","peg svelte-fa9ahp"),ue(h,"--w",lt/de*m[0]+"px"),ue(h,"--x",(et-lt)/de*m[0]/2+"px"),ue(h,"--angle",m[52]-1+"deg")},m(r,v){me(r,h,v)},p(r,v){v[0]&1&&ue(h,"--w",lt/de*r[0]+"px"),v[0]&1&&ue(h,"--x",(et-lt)/de*r[0]/2+"px")},d(r){r&&Y(h)}}}function Fn(m){let h,r,v,f,n;return{c(){h=ae("p"),r=ae("strong"),v=Le(m[17]),this.h()},l(a){h=oe(a,"P",{class:!0});var c=fe(h);r=oe(c,"STRONG",{});var o=fe(r);v=He(o,m[17]),o.forEach(Y),c.forEach(Y),this.h()},h(){he(h,"class","text-outline svelte-fa9ahp")},m(a,c){me(a,h,c),j(h,r),j(r,v),n=!0},p(a,c){(!n||c[0]&131072)&&tt(v,a[17])},i(a){n||(a&&ai(()=>{n&&(f||(f=hn(h,vn,{},!0)),f.run(1))}),n=!0)},o(a){a&&(f||(f=hn(h,vn,{},!1)),f.run(0)),n=!1},d(a){a&&Y(h),a&&f&&f.end()}}}function Vn(m){let h,r,v,f;const n=[Mr,Pr],a=[];function c(o,d){return o[10]==="shoot"?0:1}return h=c(m),r=a[h]=n[h](m),{c(){r.c(),v=Fe()},l(o){r.l(o),v=Fe()},m(o,d){a[h].m(o,d),me(o,v,d),f=!0},p(o,d){let u=h;h=c(o),h===u?a[h].p(o,d):(Ze(),ge(a[u],1,1,()=>{a[u]=null}),Ke(),r=a[h],r?r.p(o,d):(r=a[h]=n[h](o),r.c()),ce(r,1),r.m(v.parentNode,v))},i(o){f||(ce(r),f=!0)},o(o){ge(r),f=!1},d(o){o&&Y(v),a[h].d(o)}}}function Pr(m){let h,r="Place Disc",v,f;return{c(){h=ae("button"),h.textContent=r},l(n){h=oe(n,"BUTTON",{"data-svelte-h":!0}),Wt(h)!=="svelte-18imge0"&&(h.textContent=r)},m(n,a){me(n,h,a),v||(f=Pt(h,"click",m[26]),v=!0)},p:Qe,i:Qe,o:Qe,d(n){n&&Y(h),v=!1,f()}}}function Mr(m){let h,r,v;function f(a){m[30](a)}let n={disabled:m[11]};return m[5]!==void 0&&(n.value=m[5]),h=new mr({props:n}),rt.push(()=>Zt(h,"value",f)),h.$on("release",m[25]),{c(){gt(h.$$.fragment)},l(a){_t(h.$$.fragment,a)},m(a,c){yt(h,a,c),v=!0},p(a,c){const o={};c[0]&2048&&(o.disabled=a[11]),!r&&c[0]&32&&(r=!0,o.value=a[5],Qt(()=>r=!1)),h.$set(o)},i(a){v||(ce(h.$$.fragment,a),v=!0)},o(a){ge(h.$$.fragment,a),v=!1},d(a){xt(h,a)}}}function Ln(m){let h,r,v,f;const n=[kr,Cr],a=[];function c(o,d){return o[10]==="position"?0:o[10]==="shoot"?1:-1}return~(h=c(m))&&(r=a[h]=n[h](m)),{c(){r&&r.c(),v=Fe()},l(o){r&&r.l(o),v=Fe()},m(o,d){~h&&a[h].m(o,d),me(o,v,d),f=!0},p(o,d){let u=h;h=c(o),h===u?~h&&a[h].p(o,d):(r&&(Ze(),ge(a[u],1,1,()=>{a[u]=null}),Ke()),~h?(r=a[h],r?r.p(o,d):(r=a[h]=n[h](o),r.c()),ce(r,1),r.m(v.parentNode,v)):r=null)},i(o){f||(ce(r),f=!0)},o(o){ge(r),f=!1},d(o){o&&Y(v),~h&&a[h].d(o)}}}function Cr(m){let h,r,v;function f(a){m[32](a)}let n={label:"aim",min:m[23].shoot.min,max:m[23].shoot.max,step:m[23].shoot.step,disabled:m[11]};return m[4]!==void 0&&(n.value=m[4]),h=new jn({props:n}),rt.push(()=>Zt(h,"value",f)),{c(){gt(h.$$.fragment)},l(a){_t(h.$$.fragment,a)},m(a,c){yt(h,a,c),v=!0},p(a,c){const o={};c[0]&2048&&(o.disabled=a[11]),!r&&c[0]&16&&(r=!0,o.value=a[4],Qt(()=>r=!1)),h.$set(o)},i(a){v||(ce(h.$$.fragment,a),v=!0)},o(a){ge(h.$$.fragment,a),v=!1},d(a){xt(h,a)}}}function kr(m){let h,r,v;function f(a){m[31](a)}let n={label:"position",min:m[23].position.min,max:m[23].position.max,step:m[23].position.step,disabled:m[11],animate:m[16]};return m[3]!==void 0&&(n.value=m[3]),h=new jn({props:n}),rt.push(()=>Zt(h,"value",f)),h.$on("change",m[24]),{c(){gt(h.$$.fragment)},l(a){_t(h.$$.fragment,a)},m(a,c){yt(h,a,c),v=!0},p(a,c){const o={};c[0]&2048&&(o.disabled=a[11]),c[0]&65536&&(o.animate=a[16]),!r&&c[0]&8&&(r=!0,o.value=a[3],Qt(()=>r=!1)),h.$set(o)},i(a){v||(ce(h.$$.fragment,a),v=!0)},o(a){ge(h.$$.fragment,a),v=!1},d(a){xt(h,a)}}}function Hn(m){let h,r,v=m[3][0]+"",f,n,a,c,o=m[4][0]+"",d;return{c(){h=ae("p"),r=Le("sliderPosition: "),f=Le(v),n=Me(),a=ae("p"),c=Le("sliderShoot: "),d=Le(o),this.h()},l(u){h=oe(u,"P",{class:!0});var e=fe(h);r=He(e,"sliderPosition: "),f=He(e,v),e.forEach(Y),n=Ce(u),a=oe(u,"P",{class:!0});var i=fe(a);c=He(i,"sliderShoot: "),d=He(i,o),i.forEach(Y),this.h()},h(){he(h,"class","svelte-fa9ahp"),he(a,"class","svelte-fa9ahp")},m(u,e){me(u,h,e),j(h,r),j(h,f),me(u,n,e),me(u,a,e),j(a,c),j(a,d)},p(u,e){e[0]&8&&v!==(v=u[3][0]+"")&&tt(f,v),e[0]&16&&o!==(o=u[4][0]+"")&&tt(d,o)},d(u){u&&(Y(h),Y(n),Y(a))}}}function Ir(m){let h,r,v,f="20s",n,a,c=m[6].player1+"",o,d,u,e,i="POINTS",t,l,s,p=m[7].player1+"",g,w,T,C=m[7].player2+"",_,S,x,y,b="20s",A,M,P=m[6].player2+"",k,I=`${m[0]}px`,D,V,B,W,X,G,q,$,ie,_e,se,Z,E=`${m[0]}px`,F=`${m[0]}px`,H,L,U,R,Q,te,re,le,K,ee,pe=`${m[0]}px`,Ie,we,ve,Se=Ue(m[21].slice(0,3)),be=[];for(let O=0;O<Se.length;O+=1)be[O]=Dn(En(m,Se,O));let Ye=Ue(m[21]),ye=[];for(let O=0;O<Ye.length;O+=1)ye[O]=Rn(In(m,Ye,O));let Je=Ue(m[19]),ke=[];for(let O=0;O<Je.length;O+=1)ke[O]=Bn(kn(m,Je,O));let Ge=Ue(m[20]),xe=[];for(let O=0;O<Ge.length;O+=1)xe[O]=On(Cn(m,Ge,O));let Ae=m[17]&&Fn(m),Te=!m[12]&&Vn(m),Pe=!m[12]&&Ln(m),Ee=m[1]&&Hn(m);return{c(){h=ae("div"),r=ae("p"),v=ae("span"),v.textContent=f,n=Me(),a=ae("strong"),o=Le(c),d=Me(),u=ae("p"),e=ae("span"),e.textContent=i,t=Me(),l=ae("strong"),s=ae("span"),g=Le(p),w=Le(` -
			`),T=ae("span"),_=Le(C),S=Me(),x=ae("p"),y=ae("span"),y.textContent=b,A=Me(),M=ae("strong"),k=Le(P),D=Me(),V=ae("div"),B=ae("div"),W=ae("div"),X=Me(),G=ae("div"),q=Me();for(let O=0;O<be.length;O+=1)be[O].c();$=Me(),ie=ae("div"),_e=Me();for(let O=0;O<ye.length;O+=1)ye[O].c();se=Me();for(let O=0;O<ke.length;O+=1)ke[O].c();Z=Me();for(let O=0;O<xe.length;O+=1)xe[O].c();H=Me(),L=ae("div"),U=Me(),R=ae("div"),Ae&&Ae.c(),te=Me(),re=ae("div"),le=ae("div"),Te&&Te.c(),K=Me(),ee=ae("div"),Pe&&Pe.c(),Ie=Me(),Ee&&Ee.c(),we=Fe(),this.h()},l(O){h=oe(O,"DIV",{class:!0});var z=fe(h);r=oe(z,"P",{class:!0});var N=fe(r);v=oe(N,"SPAN",{class:!0,"data-svelte-h":!0}),Wt(v)!=="svelte-26pqx6"&&(v.textContent=f),n=Ce(N),a=oe(N,"STRONG",{});var Re=fe(a);o=He(Re,c),Re.forEach(Y),N.forEach(Y),d=Ce(z),u=oe(z,"P",{class:!0});var It=fe(u);e=oe(It,"SPAN",{class:!0,"data-svelte-h":!0}),Wt(e)!=="svelte-8p7j2g"&&(e.textContent=i),t=Ce(It),l=oe(It,"STRONG",{});var Et=fe(l);s=oe(Et,"SPAN",{class:!0});var ln=fe(s);g=He(ln,p),ln.forEach(Y),w=He(Et,` -
			`),T=oe(Et,"SPAN",{class:!0});var fn=fe(T);_=He(fn,C),fn.forEach(Y),Et.forEach(Y),It.forEach(Y),S=Ce(z),x=oe(z,"P",{class:!0});var Dt=fe(x);y=oe(Dt,"SPAN",{class:!0,"data-svelte-h":!0}),Wt(y)!=="svelte-26pqx6"&&(y.textContent=b),A=Ce(Dt),M=oe(Dt,"STRONG",{});var un=fe(M);k=He(un,P),un.forEach(Y),Dt.forEach(Y),z.forEach(Y),D=Ce(O),V=oe(O,"DIV",{class:!0});var st=fe(V);B=oe(st,"DIV",{class:!0});var Be=fe(B);W=oe(Be,"DIV",{class:!0,style:!0}),fe(W).forEach(Y),X=Ce(Be),G=oe(Be,"DIV",{class:!0,style:!0}),fe(G).forEach(Y),q=Ce(Be);for(let De=0;De<be.length;De+=1)be[De].l(Be);$=Ce(Be),ie=oe(Be,"DIV",{class:!0,style:!0}),fe(ie).forEach(Y),_e=Ce(Be);for(let De=0;De<ye.length;De+=1)ye[De].l(Be);se=Ce(Be);for(let De=0;De<ke.length;De+=1)ke[De].l(Be);Z=Ce(Be);for(let De=0;De<xe.length;De+=1)xe[De].l(Be);Be.forEach(Y),H=Ce(st),L=oe(st,"DIV",{class:!0}),fe(L).forEach(Y),U=Ce(st),R=oe(st,"DIV",{class:!0});var cn=fe(R);Ae&&Ae.l(cn),cn.forEach(Y),st.forEach(Y),te=Ce(O),re=oe(O,"DIV",{class:!0});var Rt=fe(re);le=oe(Rt,"DIV",{class:!0});var dn=fe(le);Te&&Te.l(dn),dn.forEach(Y),K=Ce(Rt),ee=oe(Rt,"DIV",{class:!0});var pn=fe(ee);Pe&&Pe.l(pn),pn.forEach(Y),Rt.forEach(Y),Ie=Ce(O),Ee&&Ee.l(O),we=Fe(),this.h()},h(){he(v,"class","label svelte-fa9ahp"),he(r,"class","holder you svelte-fa9ahp"),We(r,"animate",m[8].player1),We(r,"visible",m[15]),he(e,"class","label svelte-fa9ahp"),he(s,"class","you"),he(T,"class","opp"),he(u,"class","points svelte-fa9ahp"),We(u,"visible",m[14]),he(y,"class","label svelte-fa9ahp"),he(x,"class","holder opp svelte-fa9ahp"),We(x,"animate",m[8].player2),We(x,"visible",m[15]),he(h,"class","score svelte-fa9ahp"),ue(h,"width",I),he(W,"class","base svelte-fa9ahp"),ue(W,"--w",(Ct-nt)/de*m[0]+"px"),ue(W,"--b",nt/de*m[0]+"px"),he(G,"class","surface svelte-fa9ahp"),ue(G,"--w",pt/de*m[0]+"px"),he(ie,"class","twenty svelte-fa9ahp"),ue(ie,"--w",Xe/de*m[0]+"px"),he(B,"class","bg svelte-fa9ahp"),ue(B,"width",E),ue(B,"height",F),he(L,"class","fg svelte-fa9ahp"),he(R,"class","message svelte-fa9ahp"),he(V,"class",Q="c "+m[18]+" svelte-fa9ahp"),he(le,"class","top svelte-fa9ahp"),he(ee,"class","bottom svelte-fa9ahp"),he(re,"class","ui svelte-fa9ahp"),We(re,"visible",m[13]||!m[2]),ue(re,"width",pe)},m(O,z){me(O,h,z),j(h,r),j(r,v),j(r,n),j(r,a),j(a,o),j(h,d),j(h,u),j(u,e),j(u,t),j(u,l),j(l,s),j(s,g),j(l,w),j(l,T),j(T,_),j(h,S),j(h,x),j(x,y),j(x,A),j(x,M),j(M,k),me(O,D,z),me(O,V,z),j(V,B),j(B,W),j(B,X),j(B,G),j(B,q);for(let N=0;N<be.length;N+=1)be[N]&&be[N].m(B,null);j(B,$),j(B,ie),j(B,_e);for(let N=0;N<ye.length;N+=1)ye[N]&&ye[N].m(B,null);j(B,se);for(let N=0;N<ke.length;N+=1)ke[N]&&ke[N].m(B,null);j(B,Z);for(let N=0;N<xe.length;N+=1)xe[N]&&xe[N].m(B,null);j(V,H),j(V,L),m[29](L),j(V,U),j(V,R),Ae&&Ae.m(R,null),me(O,te,z),me(O,re,z),j(re,le),Te&&Te.m(le,null),j(re,K),j(re,ee),Pe&&Pe.m(ee,null),me(O,Ie,z),Ee&&Ee.m(O,z),me(O,we,z),ve=!0},p(O,z){if((!ve||z[0]&64)&&c!==(c=O[6].player1+"")&&tt(o,c),(!ve||z[0]&256)&&We(r,"animate",O[8].player1),(!ve||z[0]&32768)&&We(r,"visible",O[15]),(!ve||z[0]&128)&&p!==(p=O[7].player1+"")&&tt(g,p),(!ve||z[0]&128)&&C!==(C=O[7].player2+"")&&tt(_,C),(!ve||z[0]&16384)&&We(u,"visible",O[14]),(!ve||z[0]&64)&&P!==(P=O[6].player2+"")&&tt(k,P),(!ve||z[0]&256)&&We(x,"animate",O[8].player2),(!ve||z[0]&32768)&&We(x,"visible",O[15]),z[0]&1&&I!==(I=`${O[0]}px`)&&ue(h,"width",I),(!ve||z[0]&1)&&ue(W,"--w",(Ct-nt)/de*O[0]+"px"),(!ve||z[0]&1)&&ue(W,"--b",nt/de*O[0]+"px"),(!ve||z[0]&1)&&ue(G,"--w",pt/de*O[0]+"px"),z[0]&2097153){Se=Ue(O[21].slice(0,3));let N;for(N=0;N<Se.length;N+=1){const Re=En(O,Se,N);be[N]?be[N].p(Re,z):(be[N]=Dn(Re),be[N].c(),be[N].m(B,$))}for(;N<be.length;N+=1)be[N].d(1);be.length=Se.length}if((!ve||z[0]&1)&&ue(ie,"--w",Xe/de*O[0]+"px"),z[0]&6291457){Ye=Ue(O[21]);let N;for(N=0;N<Ye.length;N+=1){const Re=In(O,Ye,N);ye[N]?ye[N].p(Re,z):(ye[N]=Rn(Re),ye[N].c(),ye[N].m(B,se))}for(;N<ye.length;N+=1)ye[N].d(1);ye.length=Ye.length}if(z[0]&524289){Je=Ue(O[19]);let N;for(N=0;N<Je.length;N+=1){const Re=kn(O,Je,N);ke[N]?ke[N].p(Re,z):(ke[N]=Bn(Re),ke[N].c(),ke[N].m(B,Z))}for(;N<ke.length;N+=1)ke[N].d(1);ke.length=Je.length}if(z[0]&1048577){Ge=Ue(O[20]);let N;for(N=0;N<Ge.length;N+=1){const Re=Cn(O,Ge,N);xe[N]?xe[N].p(Re,z):(xe[N]=On(Re),xe[N].c(),xe[N].m(B,null))}for(;N<xe.length;N+=1)xe[N].d(1);xe.length=Ge.length}z[0]&1&&E!==(E=`${O[0]}px`)&&ue(B,"width",E),z[0]&1&&F!==(F=`${O[0]}px`)&&ue(B,"height",F),O[17]?Ae?(Ae.p(O,z),z[0]&131072&&ce(Ae,1)):(Ae=Fn(O),Ae.c(),ce(Ae,1),Ae.m(R,null)):Ae&&(Ze(),ge(Ae,1,1,()=>{Ae=null}),Ke()),(!ve||z[0]&262144&&Q!==(Q="c "+O[18]+" svelte-fa9ahp"))&&he(V,"class",Q),O[12]?Te&&(Ze(),ge(Te,1,1,()=>{Te=null}),Ke()):Te?(Te.p(O,z),z[0]&4096&&ce(Te,1)):(Te=Vn(O),Te.c(),ce(Te,1),Te.m(le,null)),O[12]?Pe&&(Ze(),ge(Pe,1,1,()=>{Pe=null}),Ke()):Pe?(Pe.p(O,z),z[0]&4096&&ce(Pe,1)):(Pe=Ln(O),Pe.c(),ce(Pe,1),Pe.m(ee,null)),(!ve||z[0]&8196)&&We(re,"visible",O[13]||!O[2]),z[0]&1&&pe!==(pe=`${O[0]}px`)&&ue(re,"width",pe),O[1]?Ee?Ee.p(O,z):(Ee=Hn(O),Ee.c(),Ee.m(we.parentNode,we)):Ee&&(Ee.d(1),Ee=null)},i(O){ve||(ce(Ae),ce(Te),ce(Pe),ve=!0)},o(O){ge(Ae),ge(Te),ge(Pe),ve=!1},d(O){O&&(Y(h),Y(D),Y(V),Y(te),Y(re),Y(Ie),Y(we)),wt(be,O),wt(ye,O),wt(ke,O),wt(xe,O),m[29](null),Ae&&Ae.d(),Te&&Te.d(),Pe&&Pe.d(),Ee&&Ee.d(O)}}}const St=0;function Er(m,h,r){let v,{width:f}=h,{dev:n}=h,{tutorial:a}=h,{autoMute:c}=h;const o=Ti(),d=[45,135,225,315],u=[15,60,105,150,195,240,285,330],e=["five","ten","fifteen","twenty"],i={five:"5",ten:"10",fifteen:"15",twenty:"20"},t={position:{value:[.5*de*2],min:.21*de*2,max:.79*de*2,step:1},shoot:{value:[0],min:-90,max:90,step:.25}},l={player1:0,player2:0},s={player1:0,player2:0,leader:""},p={player1:!1,player2:!1};let g,w,T=t.position.value,C=t.shoot.value,_=St,S="position",x=0,y,b,A,M,P,k,I=!0,D=!0,V,B,W;function X({detail:K}){B||K[0]!==t.position.value&&(B=!0,r(16,V=!B))}function G({discs:K,valid:ee}){r(5,_=St)}function q({discs:K,valid:ee}){if(ee){const pe=K.some(Se=>Se.score===20);K.filter(Se=>Se.player==="player2").every(Se=>Se.score===0);const Ie=a.includes("open"),we=a.includes("ricochet");r(17,W=`Valid shot. ${Ie||we?pe?"Nice 20!":"But not a 20 :(":"Well done!"}`)}else r(17,W="Invalid shot. Try again.");clearTimeout(k),k=setTimeout(()=>{r(17,W=null),R()},2e3)}function $(){r(10,S="end"),r(17,W=`${s.player1>s.player2?"You":"Opp."} win the round`)}function ie(K){K.forEach(ee=>{ee.valid&&ee.score&&r(7,s[ee.player]+=ee.score,s),ee.valid&&ee.score===20&&(r(8,p[ee.player]=!0,p),r(6,l[ee.player]++,l))})}function _e({discs:K,valid:ee}){U(),ie(K),r(5,_=St),a.includes("try")?q({discs:K,valid:ee}):a&&(P=setTimeout(R,2e3))}function se(){r(8,p.player1=!1,p),r(8,p.player2=!1,p),o.flickDisc(),r(11,y=!0)}function Z(){r(3,T=t.position.value),r(4,C=t.shoot.value)}function E(){S==="position"&&o.positionDisc(T[0])}function F(){if(S!=="shoot")return;const K=a?a.includes("try"):!0;x=C[0],o.aimDisc({degrees:x,power:.25,visible:K})}function H(){const K=a?a.includes("try"):!0;o.aimDisc({degrees:x,power:_,visible:K})}async function L(){S==="position"&&(r(10,S="shoot"),r(5,_=St),Z(),o.setState("shoot"))}function U(){r(6,l.player1=0,l),r(6,l.player2=0,l),r(7,s.player1=0,s),r(7,s.player2=0,s)}async function R(){if(!a)return;U(),clearTimeout(M),clearTimeout(P),clearTimeout(k),r(17,W=null),r(12,b=!a.includes("try")),r(13,A=!["regions","score"].includes(a));const K=a==="score";r(14,I=!["regions","ricochettry"].includes(a)),r(15,D=I),r(16,V=a==="opponenttry"&&!B),r(5,_=St);const ee=Tr[a];if(o.removeDiscs(),ee&&(ee.forEach(o.addDisc),ee.forEach(pe=>pe.valid=!0),ie(ee)),(b||K)&&ee){const pe=ee[ee.length-1],Ie=pe.random?Math.random()*3-1.5:0,we=pe.degrees+Ie,ve=pe.random?Math.random()*.07-.035:0,Se=pe.power+ve;M=setTimeout(()=>{K?$():(r(10,S=ee[ee.length-1].state),o.aimDisc({degrees:we,power:Se}),se())},2e3)}else M=null,ee&&r(10,S=ee[ee.length-1].state),S==="shoot"&&o.setIndicatorVisible(!0);Z(),r(11,y=!1)}ii(async()=>{o.on("shotComplete",G),o.on("shotCompleteManual",_e),o.on("ready",()=>r(28,w=!0)),o.init({element:g,width:f,tutorial:a}),n&&!a&&o.addDisc()});function Q(K){rt[K?"unshift":"push"](()=>{g=K,r(9,g)})}function te(K){_=K,r(5,_)}function re(K){T=K,r(3,T)}function le(K){C=K,r(4,C)}return m.$$set=K=>{"width"in K&&r(0,f=K.width),"dev"in K&&r(1,n=K.dev),"tutorial"in K&&r(2,a=K.tutorial),"autoMute"in K&&r(27,c=K.autoMute)},m.$$.update=()=>{m.$$.dirty[0]&4&&r(18,v=a?`tutorial tutorial-${a}`:""),m.$$.dirty[0]&268435457&&w&&o.resize(f),m.$$.dirty[0]&268435465&&w&&E(),m.$$.dirty[0]&268435473&&w&&F(),m.$$.dirty[0]&268435489&&w&&H(),m.$$.dirty[0]&268435460&&w&&R(),m.$$.dirty[0]&134217728&&o.autoMute(c)},[f,n,a,T,C,_,l,s,p,g,S,y,b,A,I,D,V,W,v,d,u,e,i,t,X,se,L,c,w,Q,te,re,le]}class ia extends vt{constructor(h){super(),mt(this,h,Er,Ir,ht,{width:0,dev:1,tutorial:2,autoMute:27},null,[-1,-1,-1])}}var Dr="Expected a function",Wn=NaN,Rr="[object Symbol]",Br=/^\s+|\s+$/g,Or=/^[-+]0x[0-9a-f]+$/i,Fr=/^0b[01]+$/i,Vr=/^0o[0-7]+$/i,Lr=parseInt,Hr=typeof Ne=="object"&&Ne&&Ne.Object===Object&&Ne,Wr=typeof self=="object"&&self&&self.Object===Object&&self,Nr=Hr||Wr||Function("return this")(),Gr=Object.prototype,Ur=Gr.toString,Xr=Math.max,Yr=Math.min,$t=function(){return Nr.Date.now()};function Qr(m,h,r){var v,f,n,a,c,o,d=0,u=!1,e=!1,i=!0;if(typeof m!="function")throw new TypeError(Dr);h=Nn(h)||0,nn(r)&&(u=!!r.leading,e="maxWait"in r,n=e?Xr(Nn(r.maxWait)||0,h):n,i="trailing"in r?!!r.trailing:i);function t(S){var x=v,y=f;return v=f=void 0,d=S,a=m.apply(y,x),a}function l(S){return d=S,c=setTimeout(g,h),u?t(S):a}function s(S){var x=S-o,y=S-d,b=h-x;return e?Yr(b,n-y):b}function p(S){var x=S-o,y=S-d;return o===void 0||x>=h||x<0||e&&y>=n}function g(){var S=$t();if(p(S))return w(S);c=setTimeout(g,s(S))}function w(S){return c=void 0,i&&v?t(S):(v=f=void 0,a)}function T(){c!==void 0&&clearTimeout(c),d=0,v=o=f=c=void 0}function C(){return c===void 0?a:w($t())}function _(){var S=$t(),x=p(S);if(v=arguments,f=this,o=S,x){if(c===void 0)return l(o);if(e)return c=setTimeout(g,h),t(o)}return c===void 0&&(c=setTimeout(g,h)),a}return _.cancel=T,_.flush=C,_}function nn(m){var h=typeof m;return!!m&&(h=="object"||h=="function")}function Zr(m){return!!m&&typeof m=="object"}function Kr(m){return typeof m=="symbol"||Zr(m)&&Ur.call(m)==Rr}function Nn(m){if(typeof m=="number")return m;if(Kr(m))return Wn;if(nn(m)){var h=typeof m.valueOf=="function"?m.valueOf():m;m=nn(h)?h+"":h}if(typeof m!="string")return m===0?m:+m;m=m.replace(Br,"");var r=Fr.test(m);return r||Vr.test(m)?Lr(m.slice(2),r?2:8):Or.test(m)?Wn:+m}var zr=Qr;const Jr=Un(zr),jr=()=>{var m;return((m=window==null?void 0:window.visualViewport)==null?void 0:m.width)||document.documentElement.clientWidth},qr=()=>{var m;return((m=window==null?void 0:window.visualViewport)==null?void 0:m.height)||document.documentElement.clientHeight},ra=ut({width:0,height:0},m=>{const h=()=>m({width:jr(),height:qr()});return h(),window.addEventListener("resize",Jr(h,250)),()=>{window.removeEventListener("resize",h)}});export{ia as C,ci as a,na as b,ui as c,hi as d,Ue as e,sn as g,fi as m,li as s,si as u,ra as v};
