import{a5 as gn,a6 as pn,a7 as nn,a4 as mn,a3 as xn,a as Ue,m as de,g as ne,f as Q,Z as Ve,k as at,U as pe,_ as wt,w as ke,O as ct,e as $,c as ee,b as te,a8 as Oe,a9 as Ct,P as ut,Q as dt,R as ht,n as he,a0 as Le,r as sn,t as ve,l as le,d as ge,o as fe,u as re,h as q,j as lt,aa as Pt,T as ze,v as j,a1 as Dt,q as yn,ab as Sn,y as wn}from"./scheduler.lxN5xj0T.js";import{S as Ne,i as Ge,g as We,t as se,c as He,a as ie,f as Mt,b as Qe,d as Ze,m as Je,e as je}from"./index.x4oV_jfq.js";import{d as vt,w as Ie,r as Ke}from"./index.Y-8zMvr6.js";function ce(p){return(p==null?void 0:p.length)!==void 0?p:Array.from(p)}function bt(p,h){const d={},x={},f={$$scope:1};let e=p.length;for(;e--;){const s=p[e],r=h[e];if(r){for(const i in s)i in r||(x[i]=1);for(const i in r)f[i]||(d[i]=r[i],f[i]=1);p[e]=r}else for(const i in s)f[i]=1}for(const s in x)s in d||(d[s]=void 0);return d}function Wi(p){return typeof p=="object"&&p!==null?p:{}}var gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cn(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var rn={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(p,h){(function(x,f){p.exports=f()})(gt,function(){return function(d){var x={};function f(e){if(x[e])return x[e].exports;var s=x[e]={i:e,l:!1,exports:{}};return d[e].call(s.exports,s,s.exports,f),s.l=!0,s.exports}return f.m=d,f.c=x,f.d=function(e,s,r){f.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:r})},f.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.t=function(e,s){if(s&1&&(e=f(e)),s&8||s&4&&typeof e=="object"&&e&&e.__esModule)return e;var r=Object.create(null);if(f.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),s&2&&typeof e!="string")for(var i in e)f.d(r,i,(function(o){return e[o]}).bind(null,i));return r},f.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(s,"a",s),s},f.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},f.p="",f(f.s=20)}([function(d,x){var f={};d.exports=f,function(){f._baseDelta=1e3/60,f._nextId=0,f._seed=0,f._nowStartTime=+new Date,f._warnedOnce={},f._decomp=null,f.extend=function(s,r){var i,o;typeof r=="boolean"?(i=2,o=r):(i=1,o=!0);for(var n=i;n<arguments.length;n++){var u=arguments[n];if(u)for(var c in u)o&&u[c]&&u[c].constructor===Object&&(!s[c]||s[c].constructor===Object)?(s[c]=s[c]||{},f.extend(s[c],o,u[c])):s[c]=u[c]}return s},f.clone=function(s,r){return f.extend({},r,s)},f.keys=function(s){if(Object.keys)return Object.keys(s);var r=[];for(var i in s)r.push(i);return r},f.values=function(s){var r=[];if(Object.keys){for(var i=Object.keys(s),o=0;o<i.length;o++)r.push(s[i[o]]);return r}for(var n in s)r.push(s[n]);return r},f.get=function(s,r,i,o){r=r.split(".").slice(i,o);for(var n=0;n<r.length;n+=1)s=s[r[n]];return s},f.set=function(s,r,i,o,n){var u=r.split(".").slice(o,n);return f.get(s,r,0,-1)[u[u.length-1]]=i,i},f.shuffle=function(s){for(var r=s.length-1;r>0;r--){var i=Math.floor(f.random()*(r+1)),o=s[r];s[r]=s[i],s[i]=o}return s},f.choose=function(s){return s[Math.floor(f.random()*s.length)]},f.isElement=function(s){return typeof HTMLElement<"u"?s instanceof HTMLElement:!!(s&&s.nodeType&&s.nodeName)},f.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"},f.isFunction=function(s){return typeof s=="function"},f.isPlainObject=function(s){return typeof s=="object"&&s.constructor===Object},f.isString=function(s){return toString.call(s)==="[object String]"},f.clamp=function(s,r,i){return s<r?r:s>i?i:s},f.sign=function(s){return s<0?-1:1},f.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-f._nowStartTime},f.random=function(s,r){return s=typeof s<"u"?s:0,r=typeof r<"u"?r:1,s+e()*(r-s)};var e=function(){return f._seed=(f._seed*9301+49297)%233280,f._seed/233280};f.colorToNumber=function(s){return s=s.replace("#",""),s.length==3&&(s=s.charAt(0)+s.charAt(0)+s.charAt(1)+s.charAt(1)+s.charAt(2)+s.charAt(2)),parseInt(s,16)},f.logLevel=1,f.log=function(){console&&f.logLevel>0&&f.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.info=function(){console&&f.logLevel>0&&f.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.warn=function(){console&&f.logLevel>0&&f.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.warnOnce=function(){var s=Array.prototype.slice.call(arguments).join(" ");f._warnedOnce[s]||(f.warn(s),f._warnedOnce[s]=!0)},f.deprecated=function(s,r,i){s[r]=f.chain(function(){f.warnOnce("🔅 deprecated 🔅",i)},s[r])},f.nextId=function(){return f._nextId++},f.indexOf=function(s,r){if(s.indexOf)return s.indexOf(r);for(var i=0;i<s.length;i++)if(s[i]===r)return i;return-1},f.map=function(s,r){if(s.map)return s.map(r);for(var i=[],o=0;o<s.length;o+=1)i.push(r(s[o]));return i},f.topologicalSort=function(s){var r=[],i=[],o=[];for(var n in s)!i[n]&&!o[n]&&f._topologicalSort(n,i,o,s,r);return r},f._topologicalSort=function(s,r,i,o,n){var u=o[s]||[];i[s]=!0;for(var c=0;c<u.length;c+=1){var t=u[c];i[t]||r[t]||f._topologicalSort(t,r,i,o,n)}i[s]=!1,r[s]=!0,n.push(s)},f.chain=function(){for(var s=[],r=0;r<arguments.length;r+=1){var i=arguments[r];i._chained?s.push.apply(s,i._chained):s.push(i)}var o=function(){for(var n,u=new Array(arguments.length),c=0,t=arguments.length;c<t;c++)u[c]=arguments[c];for(c=0;c<s.length;c+=1){var l=s[c].apply(n,u);typeof l<"u"&&(n=l)}return n};return o._chained=s,o},f.chainPathBefore=function(s,r,i){return f.set(s,r,f.chain(i,f.get(s,r)))},f.chainPathAfter=function(s,r,i){return f.set(s,r,f.chain(f.get(s,r),i))},f.setDecomp=function(s){f._decomp=s},f.getDecomp=function(){var s=f._decomp;try{!s&&typeof window<"u"&&(s=window.decomp),!s&&typeof gt<"u"&&(s=gt.decomp)}catch{s=null}return s}}()},function(d,x){var f={};d.exports=f,function(){f.create=function(e){var s={min:{x:0,y:0},max:{x:0,y:0}};return e&&f.update(s,e),s},f.update=function(e,s,r){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<s.length;i++){var o=s[i];o.x>e.max.x&&(e.max.x=o.x),o.x<e.min.x&&(e.min.x=o.x),o.y>e.max.y&&(e.max.y=o.y),o.y<e.min.y&&(e.min.y=o.y)}r&&(r.x>0?e.max.x+=r.x:e.min.x+=r.x,r.y>0?e.max.y+=r.y:e.min.y+=r.y)},f.contains=function(e,s){return s.x>=e.min.x&&s.x<=e.max.x&&s.y>=e.min.y&&s.y<=e.max.y},f.overlaps=function(e,s){return e.min.x<=s.max.x&&e.max.x>=s.min.x&&e.max.y>=s.min.y&&e.min.y<=s.max.y},f.translate=function(e,s){e.min.x+=s.x,e.max.x+=s.x,e.min.y+=s.y,e.max.y+=s.y},f.shift=function(e,s){var r=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=s.x,e.max.x=s.x+r,e.min.y=s.y,e.max.y=s.y+i}}()},function(d,x){var f={};d.exports=f,function(){f.create=function(e,s){return{x:e||0,y:s||0}},f.clone=function(e){return{x:e.x,y:e.y}},f.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},f.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},f.rotate=function(e,s,r){var i=Math.cos(s),o=Math.sin(s);r||(r={});var n=e.x*i-e.y*o;return r.y=e.x*o+e.y*i,r.x=n,r},f.rotateAbout=function(e,s,r,i){var o=Math.cos(s),n=Math.sin(s);i||(i={});var u=r.x+((e.x-r.x)*o-(e.y-r.y)*n);return i.y=r.y+((e.x-r.x)*n+(e.y-r.y)*o),i.x=u,i},f.normalise=function(e){var s=f.magnitude(e);return s===0?{x:0,y:0}:{x:e.x/s,y:e.y/s}},f.dot=function(e,s){return e.x*s.x+e.y*s.y},f.cross=function(e,s){return e.x*s.y-e.y*s.x},f.cross3=function(e,s,r){return(s.x-e.x)*(r.y-e.y)-(s.y-e.y)*(r.x-e.x)},f.add=function(e,s,r){return r||(r={}),r.x=e.x+s.x,r.y=e.y+s.y,r},f.sub=function(e,s,r){return r||(r={}),r.x=e.x-s.x,r.y=e.y-s.y,r},f.mult=function(e,s){return{x:e.x*s,y:e.y*s}},f.div=function(e,s){return{x:e.x/s,y:e.y/s}},f.perp=function(e,s){return s=s===!0?-1:1,{x:s*-e.y,y:s*e.x}},f.neg=function(e){return{x:-e.x,y:-e.y}},f.angle=function(e,s){return Math.atan2(s.y-e.y,s.x-e.x)},f._temp=[f.create(),f.create(),f.create(),f.create(),f.create(),f.create()]}()},function(d,x,f){var e={};d.exports=e;var s=f(2),r=f(0);(function(){e.create=function(i,o){for(var n=[],u=0;u<i.length;u++){var c=i[u],t={x:c.x,y:c.y,index:u,body:o,isInternal:!1};n.push(t)}return n},e.fromPath=function(i,o){var n=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return i.replace(n,function(c,t,l){u.push({x:parseFloat(t),y:parseFloat(l)})}),e.create(u,o)},e.centre=function(i){for(var o=e.area(i,!0),n={x:0,y:0},u,c,t,l=0;l<i.length;l++)t=(l+1)%i.length,u=s.cross(i[l],i[t]),c=s.mult(s.add(i[l],i[t]),u),n=s.add(n,c);return s.div(n,6*o)},e.mean=function(i){for(var o={x:0,y:0},n=0;n<i.length;n++)o.x+=i[n].x,o.y+=i[n].y;return s.div(o,i.length)},e.area=function(i,o){for(var n=0,u=i.length-1,c=0;c<i.length;c++)n+=(i[u].x-i[c].x)*(i[u].y+i[c].y),u=c;return o?n/2:Math.abs(n)/2},e.inertia=function(i,o){for(var n=0,u=0,c=i,t,l,a=0;a<c.length;a++)l=(a+1)%c.length,t=Math.abs(s.cross(c[l],c[a])),n+=t*(s.dot(c[l],c[l])+s.dot(c[l],c[a])+s.dot(c[a],c[a])),u+=t;return o/6*(n/u)},e.translate=function(i,o,n){n=typeof n<"u"?n:1;var u=i.length,c=o.x*n,t=o.y*n,l;for(l=0;l<u;l++)i[l].x+=c,i[l].y+=t;return i},e.rotate=function(i,o,n){if(o!==0){var u=Math.cos(o),c=Math.sin(o),t=n.x,l=n.y,a=i.length,v,S,M,k;for(k=0;k<a;k++)v=i[k],S=v.x-t,M=v.y-l,v.x=t+(S*u-M*c),v.y=l+(S*c+M*u);return i}},e.contains=function(i,o){for(var n=o.x,u=o.y,c=i.length,t=i[c-1],l,a=0;a<c;a++){if(l=i[a],(n-t.x)*(l.y-t.y)+(u-t.y)*(t.x-l.x)>0)return!1;t=l}return!0},e.scale=function(i,o,n,u){if(o===1&&n===1)return i;u=u||e.centre(i);for(var c,t,l=0;l<i.length;l++)c=i[l],t=s.sub(c,u),i[l].x=u.x+t.x*o,i[l].y=u.y+t.y*n;return i},e.chamfer=function(i,o,n,u,c){typeof o=="number"?o=[o]:o=o||[8],n=typeof n<"u"?n:-1,u=u||2,c=c||14;for(var t=[],l=0;l<i.length;l++){var a=i[l-1>=0?l-1:i.length-1],v=i[l],S=i[(l+1)%i.length],M=o[l<o.length?l:o.length-1];if(M===0){t.push(v);continue}var k=s.normalise({x:v.y-a.y,y:a.x-v.x}),E=s.normalise({x:S.y-v.y,y:v.x-S.x}),g=Math.sqrt(2*Math.pow(M,2)),w=s.mult(r.clone(k),M),y=s.normalise(s.mult(s.add(k,E),.5)),m=s.sub(v,s.mult(y,g)),P=n;n===-1&&(P=Math.pow(M,.32)*1.75),P=r.clamp(P,u,c),P%2===1&&(P+=1);for(var C=Math.acos(s.dot(k,E)),A=C/P,b=0;b<P;b++)t.push(s.add(s.rotate(w,A*b),m))}return t},e.clockwiseSort=function(i){var o=e.mean(i);return i.sort(function(n,u){return s.angle(o,n)-s.angle(o,u)}),i},e.isConvex=function(i){var o=0,n=i.length,u,c,t,l;if(n<3)return null;for(u=0;u<n;u++)if(c=(u+1)%n,t=(u+2)%n,l=(i[c].x-i[u].x)*(i[t].y-i[c].y),l-=(i[c].y-i[u].y)*(i[t].x-i[c].x),l<0?o|=1:l>0&&(o|=2),o===3)return!1;return o!==0?!0:null},e.hull=function(i){var o=[],n=[],u,c;for(i=i.slice(0),i.sort(function(t,l){var a=t.x-l.x;return a!==0?a:t.y-l.y}),c=0;c<i.length;c+=1){for(u=i[c];n.length>=2&&s.cross3(n[n.length-2],n[n.length-1],u)<=0;)n.pop();n.push(u)}for(c=i.length-1;c>=0;c-=1){for(u=i[c];o.length>=2&&s.cross3(o[o.length-2],o[o.length-1],u)<=0;)o.pop();o.push(u)}return o.pop(),n.pop(),o.concat(n)}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(2),i=f(7),o=f(0),n=f(1),u=f(11);(function(){e._timeCorrection=!0,e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e._baseDelta=1e3/60,e.create=function(t){var l={id:o.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:s.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},a=o.extend(l,t);return c(a,t),a},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var c=function(t,l){l=l||{},e.set(t,{bounds:t.bounds||n.create(t.vertices),positionPrev:t.positionPrev||r.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),s.rotate(t.vertices,t.angle,t.position),u.rotate(t.axes,t.angle),n.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:l.axes||t.axes,area:l.area||t.area,mass:l.mass||t.mass,inertia:l.inertia||t.inertia});var a=t.isStatic?"#14151f":o.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=t.isStatic?"#555":"#ccc",S=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||a,t.render.strokeStyle=t.render.strokeStyle||v,t.render.lineWidth=t.render.lineWidth||S,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,l,a){var v;typeof l=="string"&&(v=l,l={},l[v]=a);for(v in l)if(Object.prototype.hasOwnProperty.call(l,v))switch(a=l[v],v){case"isStatic":e.setStatic(t,a);break;case"isSleeping":i.set(t,a);break;case"mass":e.setMass(t,a);break;case"density":e.setDensity(t,a);break;case"inertia":e.setInertia(t,a);break;case"vertices":e.setVertices(t,a);break;case"position":e.setPosition(t,a);break;case"angle":e.setAngle(t,a);break;case"velocity":e.setVelocity(t,a);break;case"angularVelocity":e.setAngularVelocity(t,a);break;case"speed":e.setSpeed(t,a);break;case"angularSpeed":e.setAngularSpeed(t,a);break;case"parts":e.setParts(t,a);break;case"centre":e.setCentre(t,a);break;default:t[v]=a}},e.setStatic=function(t,l){for(var a=0;a<t.parts.length;a++){var v=t.parts[a];l?(v.isStatic||(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia}),v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null),v.isStatic=l}},e.setMass=function(t,l){var a=t.inertia/(t.mass/6);t.inertia=a*(l/6),t.inverseInertia=1/t.inertia,t.mass=l,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,l){e.setMass(t,l*t.area),t.density=l},e.setInertia=function(t,l){t.inertia=l,t.inverseInertia=1/t.inertia},e.setVertices=function(t,l){l[0].body===t?t.vertices=l:t.vertices=s.create(l,t),t.axes=u.fromVertices(t.vertices),t.area=s.area(t.vertices),e.setMass(t,t.density*t.area);var a=s.centre(t.vertices);s.translate(t.vertices,a,-1),e.setInertia(t,e._inertiaScale*s.inertia(t.vertices,t.mass)),s.translate(t.vertices,t.position),n.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,l,a){var v;for(l=l.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,v=0;v<l.length;v++){var S=l[v];S!==t&&(S.parent=t,t.parts.push(S))}if(t.parts.length!==1){if(a=typeof a<"u"?a:!0,a){var M=[];for(v=0;v<l.length;v++)M=M.concat(l[v].vertices);s.clockwiseSort(M);var k=s.hull(M),E=s.centre(k);e.setVertices(t,k),s.translate(t.vertices,E)}var g=e._totalProperties(t);t.area=g.area,t.parent=t,t.position.x=g.centre.x,t.position.y=g.centre.y,t.positionPrev.x=g.centre.x,t.positionPrev.y=g.centre.y,e.setMass(t,g.mass),e.setInertia(t,g.inertia),e.setPosition(t,g.centre)}},e.setCentre=function(t,l,a){a?(t.positionPrev.x+=l.x,t.positionPrev.y+=l.y,t.position.x+=l.x,t.position.y+=l.y):(t.positionPrev.x=l.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=l.y-(t.position.y-t.positionPrev.y),t.position.x=l.x,t.position.y=l.y)},e.setPosition=function(t,l,a){var v=r.sub(l,t.position);a?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=v.x,t.velocity.y=v.y,t.speed=r.magnitude(v)):(t.positionPrev.x+=v.x,t.positionPrev.y+=v.y);for(var S=0;S<t.parts.length;S++){var M=t.parts[S];M.position.x+=v.x,M.position.y+=v.y,s.translate(M.vertices,v),n.update(M.bounds,M.vertices,t.velocity)}},e.setAngle=function(t,l,a){var v=l-t.angle;a?(t.anglePrev=t.angle,t.angularVelocity=v,t.angularSpeed=Math.abs(v)):t.anglePrev+=v;for(var S=0;S<t.parts.length;S++){var M=t.parts[S];M.angle+=v,s.rotate(M.vertices,v,t.position),u.rotate(M.axes,v),n.update(M.bounds,M.vertices,t.velocity),S>0&&r.rotateAbout(M.position,v,t.position,M.position)}},e.setVelocity=function(t,l){var a=t.deltaTime/e._baseDelta;t.positionPrev.x=t.position.x-l.x*a,t.positionPrev.y=t.position.y-l.y*a,t.velocity.x=(t.position.x-t.positionPrev.x)/a,t.velocity.y=(t.position.y-t.positionPrev.y)/a,t.speed=r.magnitude(t.velocity)},e.getVelocity=function(t){var l=e._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*l,y:(t.position.y-t.positionPrev.y)*l}},e.getSpeed=function(t){return r.magnitude(e.getVelocity(t))},e.setSpeed=function(t,l){e.setVelocity(t,r.mult(r.normalise(e.getVelocity(t)),l))},e.setAngularVelocity=function(t,l){var a=t.deltaTime/e._baseDelta;t.anglePrev=t.angle-l*a,t.angularVelocity=(t.angle-t.anglePrev)/a,t.angularSpeed=Math.abs(t.angularVelocity)},e.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*e._baseDelta/t.deltaTime},e.getAngularSpeed=function(t){return Math.abs(e.getAngularVelocity(t))},e.setAngularSpeed=function(t,l){e.setAngularVelocity(t,o.sign(e.getAngularVelocity(t))*l)},e.translate=function(t,l,a){e.setPosition(t,r.add(t.position,l),a)},e.rotate=function(t,l,a,v){if(!a)e.setAngle(t,t.angle+l,v);else{var S=Math.cos(l),M=Math.sin(l),k=t.position.x-a.x,E=t.position.y-a.y;e.setPosition(t,{x:a.x+(k*S-E*M),y:a.y+(k*M+E*S)},v),e.setAngle(t,t.angle+l,v)}},e.scale=function(t,l,a,v){var S=0,M=0;v=v||t.position;for(var k=0;k<t.parts.length;k++){var E=t.parts[k];s.scale(E.vertices,l,a,v),E.axes=u.fromVertices(E.vertices),E.area=s.area(E.vertices),e.setMass(E,t.density*E.area),s.translate(E.vertices,{x:-E.position.x,y:-E.position.y}),e.setInertia(E,e._inertiaScale*s.inertia(E.vertices,E.mass)),s.translate(E.vertices,{x:E.position.x,y:E.position.y}),k>0&&(S+=E.area,M+=E.inertia),E.position.x=v.x+(E.position.x-v.x)*l,E.position.y=v.y+(E.position.y-v.y)*a,n.update(E.bounds,E.vertices,t.velocity)}t.parts.length>1&&(t.area=S,t.isStatic||(e.setMass(t,t.density*S),e.setInertia(t,M))),t.circleRadius&&(l===a?t.circleRadius*=l:t.circleRadius=null)},e.update=function(t,l){l=(typeof l<"u"?l:1e3/60)*t.timeScale;var a=l*l,v=e._timeCorrection?l/(t.deltaTime||l):1,S=1-t.frictionAir*(l/o._baseDelta),M=(t.position.x-t.positionPrev.x)*v,k=(t.position.y-t.positionPrev.y)*v;t.velocity.x=M*S+t.force.x/t.mass*a,t.velocity.y=k*S+t.force.y/t.mass*a,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=l,t.angularVelocity=(t.angle-t.anglePrev)*S*v+t.torque/t.inertia*a,t.anglePrev=t.angle,t.angle+=t.angularVelocity;for(var E=0;E<t.parts.length;E++){var g=t.parts[E];s.translate(g.vertices,t.velocity),E>0&&(g.position.x+=t.velocity.x,g.position.y+=t.velocity.y),t.angularVelocity!==0&&(s.rotate(g.vertices,t.angularVelocity,t.position),u.rotate(g.axes,t.angularVelocity),E>0&&r.rotateAbout(g.position,t.angularVelocity,t.position,g.position)),n.update(g.bounds,g.vertices,t.velocity)}},e.updateVelocities=function(t){var l=e._baseDelta/t.deltaTime,a=t.velocity;a.x=(t.position.x-t.positionPrev.x)*l,a.y=(t.position.y-t.positionPrev.y)*l,t.speed=Math.sqrt(a.x*a.x+a.y*a.y),t.angularVelocity=(t.angle-t.anglePrev)*l,t.angularSpeed=Math.abs(t.angularVelocity)},e.applyForce=function(t,l,a){var v={x:l.x-t.position.x,y:l.y-t.position.y};t.force.x+=a.x,t.force.y+=a.y,t.torque+=v.x*a.y-v.y*a.x},e._totalProperties=function(t){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},a=t.parts.length===1?0:1;a<t.parts.length;a++){var v=t.parts[a],S=v.mass!==1/0?v.mass:1;l.mass+=S,l.area+=v.area,l.inertia+=v.inertia,l.centre=r.add(l.centre,r.mult(v.position,S))}return l.centre=r.div(l.centre,l.mass),l}})()},function(d,x,f){var e={};d.exports=e;var s=f(0);(function(){e.on=function(r,i,o){for(var n=i.split(" "),u,c=0;c<n.length;c++)u=n[c],r.events=r.events||{},r.events[u]=r.events[u]||[],r.events[u].push(o);return o},e.off=function(r,i,o){if(!i){r.events={};return}typeof i=="function"&&(o=i,i=s.keys(r.events).join(" "));for(var n=i.split(" "),u=0;u<n.length;u++){var c=r.events[n[u]],t=[];if(o&&c)for(var l=0;l<c.length;l++)c[l]!==o&&t.push(c[l]);r.events[n[u]]=t}},e.trigger=function(r,i,o){var n,u,c,t,l=r.events;if(l&&s.keys(l).length>0){o||(o={}),n=i.split(" ");for(var a=0;a<n.length;a++)if(u=n[a],c=l[u],c){t=s.clone(o,!1),t.name=u,t.source=r;for(var v=0;v<c.length;v++)c[v].apply(r,[t])}}}})()},function(d,x,f){var e={};d.exports=e;var s=f(5),r=f(0),i=f(1),o=f(4);(function(){e.create=function(n){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},n)},e.setModified=function(n,u,c,t){if(n.isModified=u,u&&n.cache&&(n.cache.allBodies=null,n.cache.allConstraints=null,n.cache.allComposites=null),c&&n.parent&&e.setModified(n.parent,u,c,t),t)for(var l=0;l<n.composites.length;l++){var a=n.composites[l];e.setModified(a,u,c,t)}},e.add=function(n,u){var c=[].concat(u);s.trigger(n,"beforeAdd",{object:u});for(var t=0;t<c.length;t++){var l=c[t];switch(l.type){case"body":if(l.parent!==l){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(n,l);break;case"constraint":e.addConstraint(n,l);break;case"composite":e.addComposite(n,l);break;case"mouseConstraint":e.addConstraint(n,l.constraint);break}}return s.trigger(n,"afterAdd",{object:u}),n},e.remove=function(n,u,c){var t=[].concat(u);s.trigger(n,"beforeRemove",{object:u});for(var l=0;l<t.length;l++){var a=t[l];switch(a.type){case"body":e.removeBody(n,a,c);break;case"constraint":e.removeConstraint(n,a,c);break;case"composite":e.removeComposite(n,a,c);break;case"mouseConstraint":e.removeConstraint(n,a.constraint);break}}return s.trigger(n,"afterRemove",{object:u}),n},e.addComposite=function(n,u){return n.composites.push(u),u.parent=n,e.setModified(n,!0,!0,!1),n},e.removeComposite=function(n,u,c){var t=r.indexOf(n.composites,u);if(t!==-1){var l=e.allBodies(u);e.removeCompositeAt(n,t);for(var a=0;a<l.length;a++)l[a].sleepCounter=0}if(c)for(var a=0;a<n.composites.length;a++)e.removeComposite(n.composites[a],u,!0);return n},e.removeCompositeAt=function(n,u){return n.composites.splice(u,1),e.setModified(n,!0,!0,!1),n},e.addBody=function(n,u){return n.bodies.push(u),e.setModified(n,!0,!0,!1),n},e.removeBody=function(n,u,c){var t=r.indexOf(n.bodies,u);if(t!==-1&&(e.removeBodyAt(n,t),u.sleepCounter=0),c)for(var l=0;l<n.composites.length;l++)e.removeBody(n.composites[l],u,!0);return n},e.removeBodyAt=function(n,u){return n.bodies.splice(u,1),e.setModified(n,!0,!0,!1),n},e.addConstraint=function(n,u){return n.constraints.push(u),e.setModified(n,!0,!0,!1),n},e.removeConstraint=function(n,u,c){var t=r.indexOf(n.constraints,u);if(t!==-1&&e.removeConstraintAt(n,t),c)for(var l=0;l<n.composites.length;l++)e.removeConstraint(n.composites[l],u,!0);return n},e.removeConstraintAt=function(n,u){return n.constraints.splice(u,1),e.setModified(n,!0,!0,!1),n},e.clear=function(n,u,c){if(c)for(var t=0;t<n.composites.length;t++)e.clear(n.composites[t],u,!0);return u?n.bodies=n.bodies.filter(function(l){return l.isStatic}):n.bodies.length=0,n.constraints.length=0,n.composites.length=0,e.setModified(n,!0,!0,!1),n},e.allBodies=function(n){if(n.cache&&n.cache.allBodies)return n.cache.allBodies;for(var u=[].concat(n.bodies),c=0;c<n.composites.length;c++)u=u.concat(e.allBodies(n.composites[c]));return n.cache&&(n.cache.allBodies=u),u},e.allConstraints=function(n){if(n.cache&&n.cache.allConstraints)return n.cache.allConstraints;for(var u=[].concat(n.constraints),c=0;c<n.composites.length;c++)u=u.concat(e.allConstraints(n.composites[c]));return n.cache&&(n.cache.allConstraints=u),u},e.allComposites=function(n){if(n.cache&&n.cache.allComposites)return n.cache.allComposites;for(var u=[].concat(n.composites),c=0;c<n.composites.length;c++)u=u.concat(e.allComposites(n.composites[c]));return n.cache&&(n.cache.allComposites=u),u},e.get=function(n,u,c){var t,l;switch(c){case"body":t=e.allBodies(n);break;case"constraint":t=e.allConstraints(n);break;case"composite":t=e.allComposites(n).concat(n);break}return t?(l=t.filter(function(a){return a.id.toString()===u.toString()}),l.length===0?null:l[0]):null},e.move=function(n,u,c){return e.remove(n,u),e.add(c,u),n},e.rebase=function(n){for(var u=e.allBodies(n).concat(e.allConstraints(n)).concat(e.allComposites(n)),c=0;c<u.length;c++)u[c].id=r.nextId();return n},e.translate=function(n,u,c){for(var t=c?e.allBodies(n):n.bodies,l=0;l<t.length;l++)o.translate(t[l],u);return n},e.rotate=function(n,u,c,t){for(var l=Math.cos(u),a=Math.sin(u),v=t?e.allBodies(n):n.bodies,S=0;S<v.length;S++){var M=v[S],k=M.position.x-c.x,E=M.position.y-c.y;o.setPosition(M,{x:c.x+(k*l-E*a),y:c.y+(k*a+E*l)}),o.rotate(M,u)}return n},e.scale=function(n,u,c,t,l){for(var a=l?e.allBodies(n):n.bodies,v=0;v<a.length;v++){var S=a[v],M=S.position.x-t.x,k=S.position.y-t.y;o.setPosition(S,{x:t.x+M*u,y:t.y+k*c}),o.scale(S,u,c)}return n},e.bounds=function(n){for(var u=e.allBodies(n),c=[],t=0;t<u.length;t+=1){var l=u[t];c.push(l.bounds.min,l.bounds.max)}return i.create(c)}})()},function(d,x,f){var e={};d.exports=e;var s=f(4),r=f(5),i=f(0);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(o,n){for(var u=n/i._baseDelta,c=e._motionSleepThreshold,t=0;t<o.length;t++){var l=o[t],a=s.getSpeed(l),v=s.getAngularSpeed(l),S=a*a+v*v;if(l.force.x!==0||l.force.y!==0){e.set(l,!1);continue}var M=Math.min(l.motion,S),k=Math.max(l.motion,S);l.motion=e._minBias*M+(1-e._minBias)*k,l.sleepThreshold>0&&l.motion<c?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold/u&&e.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},e.afterCollisions=function(o){for(var n=e._motionSleepThreshold,u=0;u<o.length;u++){var c=o[u];if(c.isActive){var t=c.collision,l=t.bodyA.parent,a=t.bodyB.parent;if(!(l.isSleeping&&a.isSleeping||l.isStatic||a.isStatic)&&(l.isSleeping||a.isSleeping)){var v=l.isSleeping&&!l.isStatic?l:a,S=v===l?a:l;!v.isStatic&&S.motion>n&&e.set(v,!1)}}}},e.set=function(o,n){var u=o.isSleeping;n?(o.isSleeping=!0,o.sleepCounter=o.sleepThreshold,o.positionImpulse.x=0,o.positionImpulse.y=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.speed=0,o.angularSpeed=0,o.motion=0,u||r.trigger(o,"sleepStart")):(o.isSleeping=!1,o.sleepCounter=0,u&&r.trigger(o,"sleepEnd"))}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(9);(function(){var i=[],o={overlap:0,axis:null},n={overlap:0,axis:null};e.create=function(u,c){return{pair:null,collided:!1,bodyA:u,bodyB:c,parentA:u.parent,parentB:c.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},e.collides=function(u,c,t){if(e._overlapAxes(o,u.vertices,c.vertices,u.axes),o.overlap<=0||(e._overlapAxes(n,c.vertices,u.vertices,c.axes),n.overlap<=0))return null;var l=t&&t.table[r.id(u,c)],a;l?a=l.collision:(a=e.create(u,c),a.collided=!0,a.bodyA=u.id<c.id?u:c,a.bodyB=u.id<c.id?c:u,a.parentA=a.bodyA.parent,a.parentB=a.bodyB.parent),u=a.bodyA,c=a.bodyB;var v;o.overlap<n.overlap?v=o:v=n;var S=a.normal,M=a.tangent,k=a.penetration,E=a.supports,g=v.overlap,w=v.axis,y=w.x,m=w.y,P=c.position.x-u.position.x,C=c.position.y-u.position.y;y*P+m*C>=0&&(y=-y,m=-m),S.x=y,S.y=m,M.x=-m,M.y=y,k.x=y*g,k.y=m*g,a.depth=g;var A=e._findSupports(u,c,S,1),b=0;if(s.contains(u.vertices,A[0])&&(E[b++]=A[0]),s.contains(u.vertices,A[1])&&(E[b++]=A[1]),b<2){var I=e._findSupports(c,u,S,-1);s.contains(c.vertices,I[0])&&(E[b++]=I[0]),b<2&&s.contains(c.vertices,I[1])&&(E[b++]=I[1])}return b===0&&(E[b++]=A[0]),a.supportCount=b,a},e._overlapAxes=function(u,c,t,l){var a=c.length,v=t.length,S=c[0].x,M=c[0].y,k=t[0].x,E=t[0].y,g=l.length,w=Number.MAX_VALUE,y=0,m,P,C,A,b,I;for(b=0;b<g;b++){var R=l[b],B=R.x,H=R.y,N=S*B+M*H,G=k*B+E*H,z=N,U=G;for(I=1;I<a;I+=1)A=c[I].x*B+c[I].y*H,A>z?z=A:A<N&&(N=A);for(I=1;I<v;I+=1)A=t[I].x*B+t[I].y*H,A>U?U=A:A<G&&(G=A);if(P=z-G,C=U-N,m=P<C?P:C,m<w&&(w=m,y=b,m<=0))break}u.axis=l[y],u.overlap=w},e._findSupports=function(u,c,t,l){var a=c.vertices,v=a.length,S=u.position.x,M=u.position.y,k=t.x*l,E=t.y*l,g=a[0],w=g,y=k*(S-w.x)+E*(M-w.y),m,P,C;for(C=1;C<v;C+=1)w=a[C],P=k*(S-w.x)+E*(M-w.y),P<y&&(y=P,g=w);return m=a[(v+g.index-1)%v],y=k*(S-m.x)+E*(M-m.y),w=a[(g.index+1)%v],k*(S-w.x)+E*(M-w.y)<y?(i[0]=g,i[1]=w,i):(i[0]=g,i[1]=m,i)}})()},function(d,x,f){var e={};d.exports=e;var s=f(16);(function(){e.create=function(r,i){var o=r.bodyA,n=r.bodyB,u={id:e.id(o,n),bodyA:o,bodyB:n,collision:r,contacts:[s.create(),s.create()],contactCount:0,separation:0,isActive:!0,isSensor:o.isSensor||n.isSensor,timeCreated:i,timeUpdated:i,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(u,r,i),u},e.update=function(r,i,o){var n=i.supports,u=i.supportCount,c=r.contacts,t=i.parentA,l=i.parentB;r.isActive=!0,r.timeUpdated=o,r.collision=i,r.separation=i.depth,r.inverseMass=t.inverseMass+l.inverseMass,r.friction=t.friction<l.friction?t.friction:l.friction,r.frictionStatic=t.frictionStatic>l.frictionStatic?t.frictionStatic:l.frictionStatic,r.restitution=t.restitution>l.restitution?t.restitution:l.restitution,r.slop=t.slop>l.slop?t.slop:l.slop,r.contactCount=u,i.pair=r;var a=n[0],v=c[0],S=n[1],M=c[1];(M.vertex===a||v.vertex===S)&&(c[1]=v,c[0]=v=M,M=c[1]),v.vertex=a,M.vertex=S},e.setActive=function(r,i,o){i?(r.isActive=!0,r.timeUpdated=o):(r.isActive=!1,r.contactCount=0)},e.id=function(r,i){return r.id<i.id?r.id.toString(36)+":"+i.id.toString(36):i.id.toString(36)+":"+r.id.toString(36)}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(2),i=f(7),o=f(1),n=f(11),u=f(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(c){var t=c;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var l=t.bodyA?r.add(t.bodyA.position,t.pointA):t.pointA,a=t.bodyB?r.add(t.bodyB.position,t.pointB):t.pointB,v=r.magnitude(r.sub(l,a));t.length=typeof t.length<"u"?t.length:v,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var S={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(S.type="pin",S.anchors=!1):t.stiffness<.9&&(S.type="spring"),t.render=u.extend(S,t.render),t},e.preSolveAll=function(c){for(var t=0;t<c.length;t+=1){var l=c[t],a=l.constraintImpulse;l.isStatic||a.x===0&&a.y===0&&a.angle===0||(l.position.x+=a.x,l.position.y+=a.y,l.angle+=a.angle)}},e.solveAll=function(c,t){for(var l=u.clamp(t/u._baseDelta,0,1),a=0;a<c.length;a+=1){var v=c[a],S=!v.bodyA||v.bodyA&&v.bodyA.isStatic,M=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(S||M)&&e.solve(c[a],l)}for(a=0;a<c.length;a+=1)v=c[a],S=!v.bodyA||v.bodyA&&v.bodyA.isStatic,M=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!S&&!M&&e.solve(c[a],l)},e.solve=function(c,t){var l=c.bodyA,a=c.bodyB,v=c.pointA,S=c.pointB;if(!(!l&&!a)){l&&!l.isStatic&&(r.rotate(v,l.angle-c.angleA,v),c.angleA=l.angle),a&&!a.isStatic&&(r.rotate(S,a.angle-c.angleB,S),c.angleB=a.angle);var M=v,k=S;if(l&&(M=r.add(l.position,v)),a&&(k=r.add(a.position,S)),!(!M||!k)){var E=r.sub(M,k),g=r.magnitude(E);g<e._minLength&&(g=e._minLength);var w=(g-c.length)/g,y=c.stiffness>=1||c.length===0,m=y?c.stiffness*t:c.stiffness*t*t,P=c.damping*t,C=r.mult(E,w*m),A=(l?l.inverseMass:0)+(a?a.inverseMass:0),b=(l?l.inverseInertia:0)+(a?a.inverseInertia:0),I=A+b,R,B,H,N,G;if(P>0){var z=r.create();H=r.div(E,g),G=r.sub(a&&r.sub(a.position,a.positionPrev)||z,l&&r.sub(l.position,l.positionPrev)||z),N=r.dot(H,G)}l&&!l.isStatic&&(B=l.inverseMass/A,l.constraintImpulse.x-=C.x*B,l.constraintImpulse.y-=C.y*B,l.position.x-=C.x*B,l.position.y-=C.y*B,P>0&&(l.positionPrev.x-=P*H.x*N*B,l.positionPrev.y-=P*H.y*N*B),R=r.cross(v,C)/I*e._torqueDampen*l.inverseInertia*(1-c.angularStiffness),l.constraintImpulse.angle-=R,l.angle-=R),a&&!a.isStatic&&(B=a.inverseMass/A,a.constraintImpulse.x+=C.x*B,a.constraintImpulse.y+=C.y*B,a.position.x+=C.x*B,a.position.y+=C.y*B,P>0&&(a.positionPrev.x+=P*H.x*N*B,a.positionPrev.y+=P*H.y*N*B),R=r.cross(S,C)/I*e._torqueDampen*a.inverseInertia*(1-c.angularStiffness),a.constraintImpulse.angle+=R,a.angle+=R)}}},e.postSolveAll=function(c){for(var t=0;t<c.length;t++){var l=c[t],a=l.constraintImpulse;if(!(l.isStatic||a.x===0&&a.y===0&&a.angle===0)){i.set(l,!1);for(var v=0;v<l.parts.length;v++){var S=l.parts[v];s.translate(S.vertices,a),v>0&&(S.position.x+=a.x,S.position.y+=a.y),a.angle!==0&&(s.rotate(S.vertices,a.angle,l.position),n.rotate(S.axes,a.angle),v>0&&r.rotateAbout(S.position,a.angle,l.position,S.position)),o.update(S.bounds,S.vertices,l.velocity)}a.angle*=e._warming,a.x*=e._warming,a.y*=e._warming}}},e.pointAWorld=function(c){return{x:(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),y:(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0)}},e.pointBWorld=function(c){return{x:(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),y:(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0)}},e.currentLength=function(c){var t=(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),l=(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0),a=(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),v=(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0),S=t-a,M=l-v;return Math.sqrt(S*S+M*M)}})()},function(d,x,f){var e={};d.exports=e;var s=f(2),r=f(0);(function(){e.fromVertices=function(i){for(var o={},n=0;n<i.length;n++){var u=(n+1)%i.length,c=s.normalise({x:i[u].y-i[n].y,y:i[n].x-i[u].x}),t=c.y===0?1/0:c.x/c.y;t=t.toFixed(3).toString(),o[t]=c}return r.values(o)},e.rotate=function(i,o){if(o!==0)for(var n=Math.cos(o),u=Math.sin(o),c=0;c<i.length;c++){var t=i[c],l;l=t.x*n-t.y*u,t.y=t.x*u+t.y*n,t.x=l}}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(0),i=f(4),o=f(1),n=f(2);(function(){e.rectangle=function(u,c,t,l,a){a=a||{};var v={label:"Rectangle Body",position:{x:u,y:c},vertices:s.fromPath("L 0 0 L "+t+" 0 L "+t+" "+l+" L 0 "+l)};if(a.chamfer){var S=a.chamfer;v.vertices=s.chamfer(v.vertices,S.radius,S.quality,S.qualityMin,S.qualityMax),delete a.chamfer}return i.create(r.extend({},v,a))},e.trapezoid=function(u,c,t,l,a,v){v=v||{},a>=1&&r.warn("Bodies.trapezoid: slope parameter must be < 1."),a*=.5;var S=(1-a*2)*t,M=t*a,k=M+S,E=k+M,g;a<.5?g="L 0 0 L "+M+" "+-l+" L "+k+" "+-l+" L "+E+" 0":g="L 0 0 L "+k+" "+-l+" L "+E+" 0";var w={label:"Trapezoid Body",position:{x:u,y:c},vertices:s.fromPath(g)};if(v.chamfer){var y=v.chamfer;w.vertices=s.chamfer(w.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete v.chamfer}return i.create(r.extend({},w,v))},e.circle=function(u,c,t,l,a){l=l||{};var v={label:"Circle Body",circleRadius:t};a=a||25;var S=Math.ceil(Math.max(10,Math.min(a,t)));return S%2===1&&(S+=1),e.polygon(u,c,S,t,r.extend({},v,l))},e.polygon=function(u,c,t,l,a){if(a=a||{},t<3)return e.circle(u,c,l,a);for(var v=2*Math.PI/t,S="",M=v*.5,k=0;k<t;k+=1){var E=M+k*v,g=Math.cos(E)*l,w=Math.sin(E)*l;S+="L "+g.toFixed(3)+" "+w.toFixed(3)+" "}var y={label:"Polygon Body",position:{x:u,y:c},vertices:s.fromPath(S)};if(a.chamfer){var m=a.chamfer;y.vertices=s.chamfer(y.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete a.chamfer}return i.create(r.extend({},y,a))},e.fromVertices=function(u,c,t,l,a,v,S,M){var k=r.getDecomp(),E,g,w,y,m,P,C,A,b,I,R;for(E=!!(k&&k.quickDecomp),l=l||{},w=[],a=typeof a<"u"?a:!1,v=typeof v<"u"?v:.01,S=typeof S<"u"?S:10,M=typeof M<"u"?M:.01,r.isArray(t[0])||(t=[t]),I=0;I<t.length;I+=1)if(P=t[I],y=s.isConvex(P),m=!y,m&&!E&&r.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),y||!E)y?P=s.clockwiseSort(P):P=s.hull(P),w.push({position:{x:u,y:c},vertices:P});else{var B=P.map(function(T){return[T.x,T.y]});k.makeCCW(B),v!==!1&&k.removeCollinearPoints(B,v),M!==!1&&k.removeDuplicatePoints&&k.removeDuplicatePoints(B,M);var H=k.quickDecomp(B);for(C=0;C<H.length;C++){var N=H[C],G=N.map(function(T){return{x:T[0],y:T[1]}});S>0&&s.area(G)<S||w.push({position:s.centre(G),vertices:G})}}for(C=0;C<w.length;C++)w[C]=i.create(r.extend(w[C],l));if(a){var z=5;for(C=0;C<w.length;C++){var U=w[C];for(A=C+1;A<w.length;A++){var _=w[A];if(o.overlaps(U.bounds,_.bounds)){var X=U.vertices,W=_.vertices;for(b=0;b<U.vertices.length;b++)for(R=0;R<_.vertices.length;R++){var V=n.magnitudeSquared(n.sub(X[(b+1)%X.length],W[R])),F=n.magnitudeSquared(n.sub(X[b],W[(R+1)%W.length]));V<z&&F<z&&(X[b].isInternal=!0,W[R].isInternal=!0)}}}}}return w.length>1?(g=i.create(r.extend({parts:w.slice(0)},l)),i.setPosition(g,{x:u,y:c}),g):w[0]}})()},function(d,x,f){var e={};d.exports=e;var s=f(0),r=f(8);(function(){e.create=function(i){var o={bodies:[],collisions:[],pairs:null};return s.extend(o,i)},e.setBodies=function(i,o){i.bodies=o.slice(0)},e.clear=function(i){i.bodies=[],i.collisions=[]},e.collisions=function(i){var o=i.pairs,n=i.bodies,u=n.length,c=e.canCollide,t=r.collides,l=i.collisions,a=0,v,S;for(n.sort(e._compareBoundsX),v=0;v<u;v++){var M=n[v],k=M.bounds,E=M.bounds.max.x,g=M.bounds.max.y,w=M.bounds.min.y,y=M.isStatic||M.isSleeping,m=M.parts.length,P=m===1;for(S=v+1;S<u;S++){var C=n[S],A=C.bounds;if(A.min.x>E)break;if(!(g<A.min.y||w>A.max.y)&&!(y&&(C.isStatic||C.isSleeping))&&c(M.collisionFilter,C.collisionFilter)){var b=C.parts.length;if(P&&b===1){var I=t(M,C,o);I&&(l[a++]=I)}else for(var R=m>1?1:0,B=b>1?1:0,H=R;H<m;H++)for(var N=M.parts[H],k=N.bounds,G=B;G<b;G++){var z=C.parts[G],A=z.bounds;if(!(k.min.x>A.max.x||k.max.x<A.min.x||k.max.y<A.min.y||k.min.y>A.max.y)){var I=t(N,z,o);I&&(l[a++]=I)}}}}}return l.length!==a&&(l.length=a),l},e.canCollide=function(i,o){return i.group===o.group&&i.group!==0?i.group>0:(i.mask&o.category)!==0&&(o.mask&i.category)!==0},e._compareBoundsX=function(i,o){return i.bounds.min.x-o.bounds.min.x}})()},function(d,x,f){var e={};d.exports=e;var s=f(0);(function(){e.create=function(r){var i={};return r||s.log("Mouse.create: element was undefined, defaulting to document.body","warn"),i.element=r||document.body,i.absolute={x:0,y:0},i.position={x:0,y:0},i.mousedownPosition={x:0,y:0},i.mouseupPosition={x:0,y:0},i.offset={x:0,y:0},i.scale={x:1,y:1},i.wheelDelta=0,i.button=-1,i.pixelRatio=parseInt(i.element.getAttribute("data-pixel-ratio"),10)||1,i.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},i.mousemove=function(o){var n=e._getRelativeMousePosition(o,i.element,i.pixelRatio),u=o.changedTouches;u&&(i.button=0,o.preventDefault()),i.absolute.x=n.x,i.absolute.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.sourceEvents.mousemove=o},i.mousedown=function(o){var n=e._getRelativeMousePosition(o,i.element,i.pixelRatio),u=o.changedTouches;u?(i.button=0,o.preventDefault()):i.button=o.button,i.absolute.x=n.x,i.absolute.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mousedownPosition.x=i.position.x,i.mousedownPosition.y=i.position.y,i.sourceEvents.mousedown=o},i.mouseup=function(o){var n=e._getRelativeMousePosition(o,i.element,i.pixelRatio),u=o.changedTouches;u&&o.preventDefault(),i.button=-1,i.absolute.x=n.x,i.absolute.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mouseupPosition.x=i.position.x,i.mouseupPosition.y=i.position.y,i.sourceEvents.mouseup=o},i.mousewheel=function(o){i.wheelDelta=Math.max(-1,Math.min(1,o.wheelDelta||-o.detail)),o.preventDefault(),i.sourceEvents.mousewheel=o},e.setElement(i,i.element),i},e.setElement=function(r,i){r.element=i,i.addEventListener("mousemove",r.mousemove,{passive:!0}),i.addEventListener("mousedown",r.mousedown,{passive:!0}),i.addEventListener("mouseup",r.mouseup,{passive:!0}),i.addEventListener("wheel",r.mousewheel,{passive:!1}),i.addEventListener("touchmove",r.mousemove,{passive:!1}),i.addEventListener("touchstart",r.mousedown,{passive:!1}),i.addEventListener("touchend",r.mouseup,{passive:!1})},e.clearSourceEvents=function(r){r.sourceEvents.mousemove=null,r.sourceEvents.mousedown=null,r.sourceEvents.mouseup=null,r.sourceEvents.mousewheel=null,r.wheelDelta=0},e.setOffset=function(r,i){r.offset.x=i.x,r.offset.y=i.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y},e.setScale=function(r,i){r.scale.x=i.x,r.scale.y=i.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y},e._getRelativeMousePosition=function(r,i,o){var n=i.getBoundingClientRect(),u=document.documentElement||document.body.parentNode||document.body,c=window.pageXOffset!==void 0?window.pageXOffset:u.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:u.scrollTop,l=r.changedTouches,a,v;return l?(a=l[0].pageX-n.left-c,v=l[0].pageY-n.top-t):(a=r.pageX-n.left-c,v=r.pageY-n.top-t),{x:a/(i.clientWidth/(i.width||i.clientWidth)*o),y:v/(i.clientHeight/(i.height||i.clientHeight)*o)}}})()},function(d,x,f){var e={};d.exports=e;var s=f(0);(function(){e._registry={},e.register=function(r){if(e.isPlugin(r)||s.warn("Plugin.register:",e.toString(r),"does not implement all required fields."),r.name in e._registry){var i=e._registry[r.name],o=e.versionParse(r.version).number,n=e.versionParse(i.version).number;o>n?(s.warn("Plugin.register:",e.toString(i),"was upgraded to",e.toString(r)),e._registry[r.name]=r):o<n?s.warn("Plugin.register:",e.toString(i),"can not be downgraded to",e.toString(r)):r!==i&&s.warn("Plugin.register:",e.toString(r),"is already registered to different plugin object")}else e._registry[r.name]=r;return r},e.resolve=function(r){return e._registry[e.dependencyParse(r).name]},e.toString=function(r){return typeof r=="string"?r:(r.name||"anonymous")+"@"+(r.version||r.range||"0.0.0")},e.isPlugin=function(r){return r&&r.name&&r.version&&r.install},e.isUsed=function(r,i){return r.used.indexOf(i)>-1},e.isFor=function(r,i){var o=r.for&&e.dependencyParse(r.for);return!r.for||i.name===o.name&&e.versionSatisfies(i.version,o.range)},e.use=function(r,i){if(r.uses=(r.uses||[]).concat(i||[]),r.uses.length===0){s.warn("Plugin.use:",e.toString(r),"does not specify any dependencies to install.");return}for(var o=e.dependencies(r),n=s.topologicalSort(o),u=[],c=0;c<n.length;c+=1)if(n[c]!==r.name){var t=e.resolve(n[c]);if(!t){u.push("❌ "+n[c]);continue}e.isUsed(r,t.name)||(e.isFor(t,r)||(s.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(r)+"."),t._warned=!0),t.install?t.install(r):(s.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(u.push("🔶 "+e.toString(t)),delete t._warned):u.push("✅ "+e.toString(t)),r.used.push(t.name))}u.length>0&&s.info(u.join("  "))},e.dependencies=function(r,i){var o=e.dependencyParse(r),n=o.name;if(i=i||{},!(n in i)){r=e.resolve(r)||r,i[n]=s.map(r.uses||[],function(c){e.isPlugin(c)&&e.register(c);var t=e.dependencyParse(c),l=e.resolve(c);return l&&!e.versionSatisfies(l.version,t.range)?(s.warn("Plugin.dependencies:",e.toString(l),"does not satisfy",e.toString(t),"used by",e.toString(o)+"."),l._warned=!0,r._warned=!0):l||(s.warn("Plugin.dependencies:",e.toString(c),"used by",e.toString(o),"could not be resolved."),r._warned=!0),t.name});for(var u=0;u<i[n].length;u+=1)e.dependencies(i[n][u],i);return i}},e.dependencyParse=function(r){if(s.isString(r)){var i=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return i.test(r)||s.warn("Plugin.dependencyParse:",r,"is not a valid dependency string."),{name:r.split("@")[0],range:r.split("@")[1]||"*"}}return{name:r.name,range:r.range||r.version}},e.versionParse=function(r){var i=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;i.test(r)||s.warn("Plugin.versionParse:",r,"is not a valid version or range.");var o=i.exec(r),n=Number(o[4]),u=Number(o[5]),c=Number(o[6]);return{isRange:!!(o[1]||o[2]),version:o[3],range:r,operator:o[1]||o[2]||"",major:n,minor:u,patch:c,parts:[n,u,c],prerelease:o[7],number:n*1e8+u*1e4+c}},e.versionSatisfies=function(r,i){i=i||"*";var o=e.versionParse(i),n=e.versionParse(r);if(o.isRange){if(o.operator==="*"||r==="*")return!0;if(o.operator===">")return n.number>o.number;if(o.operator===">=")return n.number>=o.number;if(o.operator==="~")return n.major===o.major&&n.minor===o.minor&&n.patch>=o.patch;if(o.operator==="^")return o.major>0?n.major===o.major&&n.number>=o.number:o.minor>0?n.minor===o.minor&&n.patch>=o.patch:n.patch===o.patch}return r===i||r==="*"}})()},function(d,x){var f={};d.exports=f,function(){f.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(d,x,f){var e={};d.exports=e;var s=f(7),r=f(18),i=f(13),o=f(19),n=f(5),u=f(6),c=f(10),t=f(0),l=f(4);(function(){e._deltaMax=1e3/60,e.create=function(a){a=a||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},S=t.extend(v,a);return S.world=a.world||u.create({label:"World"}),S.pairs=a.pairs||o.create(),S.detector=a.detector||i.create(),S.detector.pairs=S.pairs,S.grid={buckets:[]},S.world.gravity=S.gravity,S.broadphase=S.grid,S.metrics={},S},e.update=function(a,v){var S=t.now(),M=a.world,k=a.detector,E=a.pairs,g=a.timing,w=g.timestamp,y;v>e._deltaMax&&t.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",e._deltaMax.toFixed(3),"ms."),v=typeof v<"u"?v:t._baseDelta,v*=g.timeScale,g.timestamp+=v,g.lastDelta=v;var m={timestamp:g.timestamp,delta:v};n.trigger(a,"beforeUpdate",m);var P=u.allBodies(M),C=u.allConstraints(M);for(M.isModified&&(i.setBodies(k,P),u.setModified(M,!1,!1,!0)),a.enableSleeping&&s.update(P,v),e._bodiesApplyGravity(P,a.gravity),v>0&&e._bodiesUpdate(P,v),n.trigger(a,"beforeSolve",m),c.preSolveAll(P),y=0;y<a.constraintIterations;y++)c.solveAll(C,v);c.postSolveAll(P);var A=i.collisions(k);o.update(E,A,w),a.enableSleeping&&s.afterCollisions(E.list),E.collisionStart.length>0&&n.trigger(a,"collisionStart",{pairs:E.collisionStart,timestamp:g.timestamp,delta:v});var b=t.clamp(20/a.positionIterations,0,1);for(r.preSolvePosition(E.list),y=0;y<a.positionIterations;y++)r.solvePosition(E.list,v,b);for(r.postSolvePosition(P),c.preSolveAll(P),y=0;y<a.constraintIterations;y++)c.solveAll(C,v);for(c.postSolveAll(P),r.preSolveVelocity(E.list),y=0;y<a.velocityIterations;y++)r.solveVelocity(E.list,v);return e._bodiesUpdateVelocities(P),E.collisionActive.length>0&&n.trigger(a,"collisionActive",{pairs:E.collisionActive,timestamp:g.timestamp,delta:v}),E.collisionEnd.length>0&&n.trigger(a,"collisionEnd",{pairs:E.collisionEnd,timestamp:g.timestamp,delta:v}),e._bodiesClearForces(P),n.trigger(a,"afterUpdate",m),a.timing.lastElapsed=t.now()-S,a},e.merge=function(a,v){if(t.extend(a,v),v.world){a.world=v.world,e.clear(a);for(var S=u.allBodies(a.world),M=0;M<S.length;M++){var k=S[M];s.set(k,!1),k.id=t.nextId()}}},e.clear=function(a){o.clear(a.pairs),i.clear(a.detector)},e._bodiesClearForces=function(a){for(var v=a.length,S=0;S<v;S++){var M=a[S];M.force.x=0,M.force.y=0,M.torque=0}},e._bodiesApplyGravity=function(a,v){var S=typeof v.scale<"u"?v.scale:.001,M=a.length;if(!(v.x===0&&v.y===0||S===0))for(var k=0;k<M;k++){var E=a[k];E.isStatic||E.isSleeping||(E.force.y+=E.mass*v.y*S,E.force.x+=E.mass*v.x*S)}},e._bodiesUpdate=function(a,v){for(var S=a.length,M=0;M<S;M++){var k=a[M];k.isStatic||k.isSleeping||l.update(k,v)}},e._bodiesUpdateVelocities=function(a){for(var v=a.length,S=0;S<v;S++)l.updateVelocities(a[S])}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(0),i=f(1);(function(){e._restingThresh=2,e._restingThreshTangent=Math.sqrt(6),e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e._frictionMaxStatic=Number.MAX_VALUE,e.preSolvePosition=function(o){var n,u,c,t=o.length;for(n=0;n<t;n++)u=o[n],u.isActive&&(c=u.contactCount,u.collision.parentA.totalContacts+=c,u.collision.parentB.totalContacts+=c)},e.solvePosition=function(o,n,u){var c,t,l,a,v,S,M,k,E=e._positionDampen*(u||1),g=r.clamp(n/r._baseDelta,0,1),w=o.length;for(c=0;c<w;c++)t=o[c],!(!t.isActive||t.isSensor)&&(l=t.collision,a=l.parentA,v=l.parentB,S=l.normal,t.separation=l.depth+S.x*(v.positionImpulse.x-a.positionImpulse.x)+S.y*(v.positionImpulse.y-a.positionImpulse.y));for(c=0;c<w;c++)t=o[c],!(!t.isActive||t.isSensor)&&(l=t.collision,a=l.parentA,v=l.parentB,S=l.normal,k=t.separation-t.slop*g,(a.isStatic||v.isStatic)&&(k*=2),a.isStatic||a.isSleeping||(M=E/a.totalContacts,a.positionImpulse.x+=S.x*k*M,a.positionImpulse.y+=S.y*k*M),v.isStatic||v.isSleeping||(M=E/v.totalContacts,v.positionImpulse.x-=S.x*k*M,v.positionImpulse.y-=S.y*k*M))},e.postSolvePosition=function(o){for(var n=e._positionWarming,u=o.length,c=s.translate,t=i.update,l=0;l<u;l++){var a=o[l],v=a.positionImpulse,S=v.x,M=v.y,k=a.velocity;if(a.totalContacts=0,S!==0||M!==0){for(var E=0;E<a.parts.length;E++){var g=a.parts[E];c(g.vertices,v),t(g.bounds,g.vertices,k),g.position.x+=S,g.position.y+=M}a.positionPrev.x+=S,a.positionPrev.y+=M,S*k.x+M*k.y<0?(v.x=0,v.y=0):(v.x*=n,v.y*=n)}}},e.preSolveVelocity=function(o){var n=o.length,u,c;for(u=0;u<n;u++){var t=o[u];if(!(!t.isActive||t.isSensor)){var l=t.contacts,a=t.contactCount,v=t.collision,S=v.parentA,M=v.parentB,k=v.normal,E=v.tangent;for(c=0;c<a;c++){var g=l[c],w=g.vertex,y=g.normalImpulse,m=g.tangentImpulse;if(y!==0||m!==0){var P=k.x*y+E.x*m,C=k.y*y+E.y*m;S.isStatic||S.isSleeping||(S.positionPrev.x+=P*S.inverseMass,S.positionPrev.y+=C*S.inverseMass,S.anglePrev+=S.inverseInertia*((w.x-S.position.x)*C-(w.y-S.position.y)*P)),M.isStatic||M.isSleeping||(M.positionPrev.x-=P*M.inverseMass,M.positionPrev.y-=C*M.inverseMass,M.anglePrev-=M.inverseInertia*((w.x-M.position.x)*C-(w.y-M.position.y)*P))}}}}},e.solveVelocity=function(o,n){var u=n/r._baseDelta,c=u*u,t=c*u,l=-e._restingThresh*u,a=e._restingThreshTangent,v=e._frictionNormalMultiplier*u,S=e._frictionMaxStatic,M=o.length,k,E,g,w;for(g=0;g<M;g++){var y=o[g];if(!(!y.isActive||y.isSensor)){var m=y.collision,P=m.parentA,C=m.parentB,A=m.normal.x,b=m.normal.y,I=m.tangent.x,R=m.tangent.y,B=y.inverseMass,H=y.friction*y.frictionStatic*v,N=y.contacts,G=y.contactCount,z=1/G,U=P.position.x-P.positionPrev.x,_=P.position.y-P.positionPrev.y,X=P.angle-P.anglePrev,W=C.position.x-C.positionPrev.x,V=C.position.y-C.positionPrev.y,F=C.angle-C.anglePrev;for(w=0;w<G;w++){var T=N[w],O=T.vertex,L=O.x-P.position.x,D=O.y-P.position.y,Y=O.x-C.position.x,J=O.y-C.position.y,K=U-D*X,Ee=_+L*X,qe=W-J*F,At=V+Y*F,Ce=K-qe,xe=Ee-At,Pe=A*Ce+b*xe,ae=I*Ce+R*xe,Te=y.separation+Pe,Me=Math.min(Te,1);Me=Te<0?0:Me;var kt=Me*H;ae<-kt||ae>kt?(E=ae>0?ae:-ae,k=y.friction*(ae>0?1:-1)*t,k<-E?k=-E:k>E&&(k=E)):(k=ae,E=S);var Et=L*b-D*A,Tt=Y*b-J*A,It=z/(B+P.inverseInertia*Et*Et+C.inverseInertia*Tt*Tt),$e=(1+y.restitution)*Pe*It;if(k*=It,Pe<l)T.normalImpulse=0;else{var hn=T.normalImpulse;T.normalImpulse+=$e,T.normalImpulse>0&&(T.normalImpulse=0),$e=T.normalImpulse-hn}if(ae<-a||ae>a)T.tangentImpulse=0;else{var vn=T.tangentImpulse;T.tangentImpulse+=k,T.tangentImpulse<-E&&(T.tangentImpulse=-E),T.tangentImpulse>E&&(T.tangentImpulse=E),k=T.tangentImpulse-vn}var et=A*$e+I*k,tt=b*$e+R*k;P.isStatic||P.isSleeping||(P.positionPrev.x+=et*P.inverseMass,P.positionPrev.y+=tt*P.inverseMass,P.anglePrev+=(L*tt-D*et)*P.inverseInertia),C.isStatic||C.isSleeping||(C.positionPrev.x-=et*C.inverseMass,C.positionPrev.y-=tt*C.inverseMass,C.anglePrev-=(Y*tt-J*et)*C.inverseInertia)}}}}})()},function(d,x,f){var e={};d.exports=e;var s=f(9),r=f(0);(function(){e.create=function(i){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},i)},e.update=function(i,o,n){var u=s.update,c=s.create,t=s.setActive,l=i.table,a=i.list,v=a.length,S=v,M=i.collisionStart,k=i.collisionEnd,E=i.collisionActive,g=o.length,w=0,y=0,m=0,P,C,A;for(A=0;A<g;A++)P=o[A],C=P.pair,C?(C.isActive&&(E[m++]=C),u(C,P,n)):(C=c(P,n),l[C.id]=C,M[w++]=C,a[S++]=C);for(S=0,v=a.length,A=0;A<v;A++)C=a[A],C.timeUpdated>=n?a[S++]=C:(t(C,!1,n),C.collision.bodyA.sleepCounter>0&&C.collision.bodyB.sleepCounter>0?a[S++]=C:(k[y++]=C,delete l[C.id]));a.length!==S&&(a.length=S),M.length!==w&&(M.length=w),k.length!==y&&(k.length=y),E.length!==m&&(E.length=m)},e.clear=function(i){return i.table={},i.list.length=0,i.collisionStart.length=0,i.collisionActive.length=0,i.collisionEnd.length=0,i}})()},function(d,x,f){var e=d.exports=f(21);e.Axes=f(11),e.Bodies=f(12),e.Body=f(4),e.Bounds=f(1),e.Collision=f(8),e.Common=f(0),e.Composite=f(6),e.Composites=f(22),e.Constraint=f(10),e.Contact=f(16),e.Detector=f(13),e.Engine=f(17),e.Events=f(5),e.Grid=f(23),e.Mouse=f(14),e.MouseConstraint=f(24),e.Pair=f(9),e.Pairs=f(19),e.Plugin=f(15),e.Query=f(25),e.Render=f(26),e.Resolver=f(18),e.Runner=f(27),e.SAT=f(28),e.Sleeping=f(7),e.Svg=f(29),e.Vector=f(2),e.Vertices=f(3),e.World=f(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(d,x,f){var e={};d.exports=e;var s=f(15),r=f(0);(function(){e.name="matter-js",e.version="0.20.0",e.uses=[],e.used=[],e.use=function(){s.use(e,Array.prototype.slice.call(arguments))},e.before=function(i,o){return i=i.replace(/^Matter./,""),r.chainPathBefore(e,i,o)},e.after=function(i,o){return i=i.replace(/^Matter./,""),r.chainPathAfter(e,i,o)}})()},function(d,x,f){var e={};d.exports=e;var s=f(6),r=f(10),i=f(0),o=f(4),n=f(12),u=i.deprecated;(function(){e.stack=function(c,t,l,a,v,S,M){for(var k=s.create({label:"Stack"}),E=c,g=t,w,y=0,m=0;m<a;m++){for(var P=0,C=0;C<l;C++){var A=M(E,g,C,m,w,y);if(A){var b=A.bounds.max.y-A.bounds.min.y,I=A.bounds.max.x-A.bounds.min.x;b>P&&(P=b),o.translate(A,{x:I*.5,y:b*.5}),E=A.bounds.max.x+v,s.addBody(k,A),w=A,y+=1}else E+=v}g+=P+S,E=c}return k},e.chain=function(c,t,l,a,v,S){for(var M=c.bodies,k=1;k<M.length;k++){var E=M[k-1],g=M[k],w=E.bounds.max.y-E.bounds.min.y,y=E.bounds.max.x-E.bounds.min.x,m=g.bounds.max.y-g.bounds.min.y,P=g.bounds.max.x-g.bounds.min.x,C={bodyA:E,pointA:{x:y*t,y:w*l},bodyB:g,pointB:{x:P*a,y:m*v}},A=i.extend(C,S);s.addConstraint(c,r.create(A))}return c.label+=" Chain",c},e.mesh=function(c,t,l,a,v){var S=c.bodies,M,k,E,g,w;for(M=0;M<l;M++){for(k=1;k<t;k++)E=S[k-1+M*t],g=S[k+M*t],s.addConstraint(c,r.create(i.extend({bodyA:E,bodyB:g},v)));if(M>0)for(k=0;k<t;k++)E=S[k+(M-1)*t],g=S[k+M*t],s.addConstraint(c,r.create(i.extend({bodyA:E,bodyB:g},v))),a&&k>0&&(w=S[k-1+(M-1)*t],s.addConstraint(c,r.create(i.extend({bodyA:w,bodyB:g},v)))),a&&k<t-1&&(w=S[k+1+(M-1)*t],s.addConstraint(c,r.create(i.extend({bodyA:w,bodyB:g},v))))}return c.label+=" Mesh",c},e.pyramid=function(c,t,l,a,v,S,M){return e.stack(c,t,l,a,v,S,function(k,E,g,w,y,m){var P=Math.min(a,Math.ceil(l/2)),C=y?y.bounds.max.x-y.bounds.min.x:0;if(!(w>P)){w=P-w;var A=w,b=l-1-w;if(!(g<A||g>b)){m===1&&o.translate(y,{x:(g+(l%2===1?1:-1))*C,y:0});var I=y?g*C:0;return M(c+I+g*v,E,g,w,y,m)}}})},e.newtonsCradle=function(c,t,l,a,v){for(var S=s.create({label:"Newtons Cradle"}),M=0;M<l;M++){var k=1.9,E=n.circle(c+M*(a*k),t+v,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),g=r.create({pointA:{x:c+M*(a*k),y:t},bodyB:E});s.addBody(S,E),s.addConstraint(S,g)}return S},u(e,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),e.car=function(c,t,l,a,v){var S=o.nextGroup(!0),M=20,k=-l*.5+M,E=l*.5-M,g=0,w=s.create({label:"Car"}),y=n.rectangle(c,t,l,a,{collisionFilter:{group:S},chamfer:{radius:a*.5},density:2e-4}),m=n.circle(c+k,t+g,v,{collisionFilter:{group:S},friction:.8}),P=n.circle(c+E,t+g,v,{collisionFilter:{group:S},friction:.8}),C=r.create({bodyB:y,pointB:{x:k,y:g},bodyA:m,stiffness:1,length:0}),A=r.create({bodyB:y,pointB:{x:E,y:g},bodyA:P,stiffness:1,length:0});return s.addBody(w,y),s.addBody(w,m),s.addBody(w,P),s.addConstraint(w,C),s.addConstraint(w,A),w},u(e,"car","Composites.car ➤ moved to car example"),e.softBody=function(c,t,l,a,v,S,M,k,E,g){E=i.extend({inertia:1/0},E),g=i.extend({stiffness:.2,render:{type:"line",anchors:!1}},g);var w=e.stack(c,t,l,a,v,S,function(y,m){return n.circle(y,m,k,E)});return e.mesh(w,l,a,M,g),w.label="Soft Body",w},u(e,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")})()},function(d,x,f){var e={};d.exports=e;var s=f(9),r=f(0),i=r.deprecated;(function(){e.create=function(o){var n={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return r.extend(n,o)},e.update=function(o,n,u,c){var t,l,a,v=u.world,S=o.buckets,M,k,E=!1;for(t=0;t<n.length;t++){var g=n[t];if(!(g.isSleeping&&!c)&&!(v.bounds&&(g.bounds.max.x<v.bounds.min.x||g.bounds.min.x>v.bounds.max.x||g.bounds.max.y<v.bounds.min.y||g.bounds.min.y>v.bounds.max.y))){var w=e._getRegion(o,g);if(!g.region||w.id!==g.region.id||c){(!g.region||c)&&(g.region=w);var y=e._regionUnion(w,g.region);for(l=y.startCol;l<=y.endCol;l++)for(a=y.startRow;a<=y.endRow;a++){k=e._getBucketId(l,a),M=S[k];var m=l>=w.startCol&&l<=w.endCol&&a>=w.startRow&&a<=w.endRow,P=l>=g.region.startCol&&l<=g.region.endCol&&a>=g.region.startRow&&a<=g.region.endRow;!m&&P&&P&&M&&e._bucketRemoveBody(o,M,g),(g.region===w||m&&!P||c)&&(M||(M=e._createBucket(S,k)),e._bucketAddBody(o,M,g))}g.region=w,E=!0}}}E&&(o.pairsList=e._createActivePairsList(o))},i(e,"update","Grid.update ➤ replaced by Matter.Detector"),e.clear=function(o){o.buckets={},o.pairs={},o.pairsList=[]},i(e,"clear","Grid.clear ➤ replaced by Matter.Detector"),e._regionUnion=function(o,n){var u=Math.min(o.startCol,n.startCol),c=Math.max(o.endCol,n.endCol),t=Math.min(o.startRow,n.startRow),l=Math.max(o.endRow,n.endRow);return e._createRegion(u,c,t,l)},e._getRegion=function(o,n){var u=n.bounds,c=Math.floor(u.min.x/o.bucketWidth),t=Math.floor(u.max.x/o.bucketWidth),l=Math.floor(u.min.y/o.bucketHeight),a=Math.floor(u.max.y/o.bucketHeight);return e._createRegion(c,t,l,a)},e._createRegion=function(o,n,u,c){return{id:o+","+n+","+u+","+c,startCol:o,endCol:n,startRow:u,endRow:c}},e._getBucketId=function(o,n){return"C"+o+"R"+n},e._createBucket=function(o,n){var u=o[n]=[];return u},e._bucketAddBody=function(o,n,u){var c=o.pairs,t=s.id,l=n.length,a;for(a=0;a<l;a++){var v=n[a];if(!(u.id===v.id||u.isStatic&&v.isStatic)){var S=t(u,v),M=c[S];M?M[2]+=1:c[S]=[u,v,1]}}n.push(u)},e._bucketRemoveBody=function(o,n,u){var c=o.pairs,t=s.id,l;n.splice(r.indexOf(n,u),1);var a=n.length;for(l=0;l<a;l++){var v=c[t(u,n[l])];v&&(v[2]-=1)}},e._createActivePairsList=function(o){var n,u=o.pairs,c=r.keys(u),t=c.length,l=[],a;for(a=0;a<t;a++)n=u[c[a]],n[2]>0?l.push(n):delete u[c[a]];return l}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(7),i=f(14),o=f(5),n=f(13),u=f(10),c=f(6),t=f(0),l=f(1);(function(){e.create=function(a,v){var S=(a?a.mouse:null)||(v?v.mouse:null);S||(a&&a.render&&a.render.canvas?S=i.create(a.render.canvas):v&&v.element?S=i.create(v.element):(S=i.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var M=u.create({label:"Mouse Constraint",pointA:S.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),k={type:"mouseConstraint",mouse:S,element:null,body:null,constraint:M,collisionFilter:{category:1,mask:4294967295,group:0}},E=t.extend(k,v);return o.on(a,"beforeUpdate",function(){var g=c.allBodies(a.world);e.update(E,g),e._triggerEvents(E)}),E},e.update=function(a,v){var S=a.mouse,M=a.constraint,k=a.body;if(S.button===0){if(M.bodyB)r.set(M.bodyB,!1),M.pointA=S.position;else for(var E=0;E<v.length;E++)if(k=v[E],l.contains(k.bounds,S.position)&&n.canCollide(k.collisionFilter,a.collisionFilter))for(var g=k.parts.length>1?1:0;g<k.parts.length;g++){var w=k.parts[g];if(s.contains(w.vertices,S.position)){M.pointA=S.position,M.bodyB=a.body=k,M.pointB={x:S.position.x-k.position.x,y:S.position.y-k.position.y},M.angleB=k.angle,r.set(k,!1),o.trigger(a,"startdrag",{mouse:S,body:k});break}}}else M.bodyB=a.body=null,M.pointB=null,k&&o.trigger(a,"enddrag",{mouse:S,body:k})},e._triggerEvents=function(a){var v=a.mouse,S=v.sourceEvents;S.mousemove&&o.trigger(a,"mousemove",{mouse:v}),S.mousedown&&o.trigger(a,"mousedown",{mouse:v}),S.mouseup&&o.trigger(a,"mouseup",{mouse:v}),i.clearSourceEvents(v)}})()},function(d,x,f){var e={};d.exports=e;var s=f(2),r=f(8),i=f(1),o=f(12),n=f(3);(function(){e.collides=function(u,c){for(var t=[],l=c.length,a=u.bounds,v=r.collides,S=i.overlaps,M=0;M<l;M++){var k=c[M],E=k.parts.length,g=E===1?0:1;if(S(k.bounds,a))for(var w=g;w<E;w++){var y=k.parts[w];if(S(y.bounds,a)){var m=v(y,u);if(m){t.push(m);break}}}}return t},e.ray=function(u,c,t,l){l=l||1e-100;for(var a=s.angle(c,t),v=s.magnitude(s.sub(c,t)),S=(t.x+c.x)*.5,M=(t.y+c.y)*.5,k=o.rectangle(S,M,v,l,{angle:a}),E=e.collides(k,u),g=0;g<E.length;g+=1){var w=E[g];w.body=w.bodyB=w.bodyA}return E},e.region=function(u,c,t){for(var l=[],a=0;a<u.length;a++){var v=u[a],S=i.overlaps(v.bounds,c);(S&&!t||!S&&t)&&l.push(v)}return l},e.point=function(u,c){for(var t=[],l=0;l<u.length;l++){var a=u[l];if(i.contains(a.bounds,c))for(var v=a.parts.length===1?0:1;v<a.parts.length;v++){var S=a.parts[v];if(i.contains(S.bounds,c)&&n.contains(S.vertices,c)){t.push(a);break}}}return t}})()},function(d,x,f){var e={};d.exports=e;var s=f(4),r=f(0),i=f(6),o=f(1),n=f(5),u=f(2),c=f(14);(function(){var t,l;typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(g){window.setTimeout(function(){g(r.now())},1e3/60)},l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(g){var w={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!g.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},y=r.extend(w,g);return y.canvas&&(y.canvas.width=y.options.width||y.canvas.width,y.canvas.height=y.options.height||y.canvas.height),y.mouse=g.mouse,y.engine=g.engine,y.canvas=y.canvas||S(y.options.width,y.options.height),y.context=y.canvas.getContext("2d"),y.textures={},y.bounds=y.bounds||{min:{x:0,y:0},max:{x:y.canvas.width,y:y.canvas.height}},y.controller=e,y.options.showBroadphase=!1,y.options.pixelRatio!==1&&e.setPixelRatio(y,y.options.pixelRatio),r.isElement(y.element)&&y.element.appendChild(y.canvas),y},e.run=function(g){(function w(y){g.frameRequestId=t(w),a(g,y),e.world(g,y),g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0),(g.options.showStats||g.options.showDebug)&&e.stats(g,g.context,y),(g.options.showPerformance||g.options.showDebug)&&e.performance(g,g.context,y),g.context.setTransform(1,0,0,1,0,0)})()},e.stop=function(g){l(g.frameRequestId)},e.setPixelRatio=function(g,w){var y=g.options,m=g.canvas;w==="auto"&&(w=M(m)),y.pixelRatio=w,m.setAttribute("data-pixel-ratio",w),m.width=y.width*w,m.height=y.height*w,m.style.width=y.width+"px",m.style.height=y.height+"px"},e.setSize=function(g,w,y){g.options.width=w,g.options.height=y,g.bounds.max.x=g.bounds.min.x+w,g.bounds.max.y=g.bounds.min.y+y,g.options.pixelRatio!==1?e.setPixelRatio(g,g.options.pixelRatio):(g.canvas.width=w,g.canvas.height=y)},e.lookAt=function(g,w,y,m){m=typeof m<"u"?m:!0,w=r.isArray(w)?w:[w],y=y||{x:0,y:0};for(var P={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},C=0;C<w.length;C+=1){var A=w[C],b=A.bounds?A.bounds.min:A.min||A.position||A,I=A.bounds?A.bounds.max:A.max||A.position||A;b&&I&&(b.x<P.min.x&&(P.min.x=b.x),I.x>P.max.x&&(P.max.x=I.x),b.y<P.min.y&&(P.min.y=b.y),I.y>P.max.y&&(P.max.y=I.y))}var R=P.max.x-P.min.x+2*y.x,B=P.max.y-P.min.y+2*y.y,H=g.canvas.height,N=g.canvas.width,G=N/H,z=R/B,U=1,_=1;z>G?_=z/G:U=G/z,g.options.hasBounds=!0,g.bounds.min.x=P.min.x,g.bounds.max.x=P.min.x+R*U,g.bounds.min.y=P.min.y,g.bounds.max.y=P.min.y+B*_,m&&(g.bounds.min.x+=R*.5-R*U*.5,g.bounds.max.x+=R*.5-R*U*.5,g.bounds.min.y+=B*.5-B*_*.5,g.bounds.max.y+=B*.5-B*_*.5),g.bounds.min.x-=y.x,g.bounds.max.x-=y.x,g.bounds.min.y-=y.y,g.bounds.max.y-=y.y,g.mouse&&(c.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.canvas.width,y:(g.bounds.max.y-g.bounds.min.y)/g.canvas.height}),c.setOffset(g.mouse,g.bounds.min))},e.startViewTransform=function(g){var w=g.bounds.max.x-g.bounds.min.x,y=g.bounds.max.y-g.bounds.min.y,m=w/g.options.width,P=y/g.options.height;g.context.setTransform(g.options.pixelRatio/m,0,0,g.options.pixelRatio/P,0,0),g.context.translate(-g.bounds.min.x,-g.bounds.min.y)},e.endViewTransform=function(g){g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0)},e.world=function(g,w){var y=r.now(),m=g.engine,P=m.world,C=g.canvas,A=g.context,b=g.options,I=g.timing,R=i.allBodies(P),B=i.allConstraints(P),H=b.wireframes?b.wireframeBackground:b.background,N=[],G=[],z,U={timestamp:m.timing.timestamp};if(n.trigger(g,"beforeRender",U),g.currentBackground!==H&&E(g,H),A.globalCompositeOperation="source-in",A.fillStyle="transparent",A.fillRect(0,0,C.width,C.height),A.globalCompositeOperation="source-over",b.hasBounds){for(z=0;z<R.length;z++){var _=R[z];o.overlaps(_.bounds,g.bounds)&&N.push(_)}for(z=0;z<B.length;z++){var X=B[z],W=X.bodyA,V=X.bodyB,F=X.pointA,T=X.pointB;W&&(F=u.add(W.position,X.pointA)),V&&(T=u.add(V.position,X.pointB)),!(!F||!T)&&(o.contains(g.bounds,F)||o.contains(g.bounds,T))&&G.push(X)}e.startViewTransform(g),g.mouse&&(c.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.options.width,y:(g.bounds.max.y-g.bounds.min.y)/g.options.height}),c.setOffset(g.mouse,g.bounds.min))}else G=B,N=R,g.options.pixelRatio!==1&&g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0);!b.wireframes||m.enableSleeping&&b.showSleeping?e.bodies(g,N,A):(b.showConvexHulls&&e.bodyConvexHulls(g,N,A),e.bodyWireframes(g,N,A)),b.showBounds&&e.bodyBounds(g,N,A),(b.showAxes||b.showAngleIndicator)&&e.bodyAxes(g,N,A),b.showPositions&&e.bodyPositions(g,N,A),b.showVelocity&&e.bodyVelocity(g,N,A),b.showIds&&e.bodyIds(g,N,A),b.showSeparations&&e.separations(g,m.pairs.list,A),b.showCollisions&&e.collisions(g,m.pairs.list,A),b.showVertexNumbers&&e.vertexNumbers(g,N,A),b.showMousePosition&&e.mousePosition(g,g.mouse,A),e.constraints(G,A),b.hasBounds&&e.endViewTransform(g),n.trigger(g,"afterRender",U),I.lastElapsed=r.now()-y},e.stats=function(g,w,y){for(var m=g.engine,P=m.world,C=i.allBodies(P),A=0,b=55,I=44,R=0,B=0,H=0;H<C.length;H+=1)A+=C[H].parts.length;var N={Part:A,Body:C.length,Cons:i.allConstraints(P).length,Comp:i.allComposites(P).length,Pair:m.pairs.list.length};w.fillStyle="#0e0f19",w.fillRect(R,B,b*5.5,I),w.font="12px Arial",w.textBaseline="top",w.textAlign="right";for(var G in N){var z=N[G];w.fillStyle="#aaa",w.fillText(G,R+b,B+8),w.fillStyle="#eee",w.fillText(z,R+b,B+26),R+=b}},e.performance=function(g,w){var y=g.engine,m=g.timing,P=m.deltaHistory,C=m.elapsedHistory,A=m.timestampElapsedHistory,b=m.engineDeltaHistory,I=m.engineUpdatesHistory,R=m.engineElapsedHistory,B=y.timing.lastUpdatesPerFrame,H=y.timing.lastDelta,N=v(P),G=v(C),z=v(b),U=v(I),_=v(R),X=v(A),W=X/N||0,V=Math.round(N/H),F=1e3/N||0,T=4,O=12,L=60,D=34,Y=10,J=69;w.fillStyle="#0e0f19",w.fillRect(0,50,O*5+L*6+22,D),e.status(w,Y,J,L,T,P.length,Math.round(F)+" fps",F/e._goodFps,function(K){return P[K]/N-1}),e.status(w,Y+O+L,J,L,T,b.length,H.toFixed(2)+" dt",e._goodDelta/H,function(K){return b[K]/z-1}),e.status(w,Y+(O+L)*2,J,L,T,I.length,B+" upf",Math.pow(r.clamp(U/V||1,0,1),4),function(K){return I[K]/U-1}),e.status(w,Y+(O+L)*3,J,L,T,R.length,_.toFixed(2)+" ut",1-B*_/e._goodFps,function(K){return R[K]/_-1}),e.status(w,Y+(O+L)*4,J,L,T,C.length,G.toFixed(2)+" rt",1-G/e._goodFps,function(K){return C[K]/G-1}),e.status(w,Y+(O+L)*5,J,L,T,A.length,W.toFixed(2)+" x",W*W*W,function(K){return(A[K]/P[K]/W||0)-1})},e.status=function(g,w,y,m,P,C,A,b,I){g.strokeStyle="#888",g.fillStyle="#444",g.lineWidth=1,g.fillRect(w,y+7,m,1),g.beginPath(),g.moveTo(w,y+7-P*r.clamp(.4*I(0),-2,2));for(var R=0;R<m;R+=1)g.lineTo(w+R,y+7-(R<C?P*r.clamp(.4*I(R),-2,2):0));g.stroke(),g.fillStyle="hsl("+r.clamp(25+95*b,0,120)+",100%,60%)",g.fillRect(w,y-7,4,4),g.font="12px Arial",g.textBaseline="middle",g.textAlign="right",g.fillStyle="#eee",g.fillText(A,w+m,y-5)},e.constraints=function(g,w){for(var y=w,m=0;m<g.length;m++){var P=g[m];if(!(!P.render.visible||!P.pointA||!P.pointB)){var C=P.bodyA,A=P.bodyB,b,I;if(C?b=u.add(C.position,P.pointA):b=P.pointA,P.render.type==="pin")y.beginPath(),y.arc(b.x,b.y,3,0,2*Math.PI),y.closePath();else{if(A?I=u.add(A.position,P.pointB):I=P.pointB,y.beginPath(),y.moveTo(b.x,b.y),P.render.type==="spring")for(var R=u.sub(I,b),B=u.perp(u.normalise(R)),H=Math.ceil(r.clamp(P.length/5,12,20)),N,G=1;G<H;G+=1)N=G%2===0?1:-1,y.lineTo(b.x+R.x*(G/H)+B.x*N*4,b.y+R.y*(G/H)+B.y*N*4);y.lineTo(I.x,I.y)}P.render.lineWidth&&(y.lineWidth=P.render.lineWidth,y.strokeStyle=P.render.strokeStyle,y.stroke()),P.render.anchors&&(y.fillStyle=P.render.strokeStyle,y.beginPath(),y.arc(b.x,b.y,3,0,2*Math.PI),y.arc(I.x,I.y,3,0,2*Math.PI),y.closePath(),y.fill())}}},e.bodies=function(g,w,y){var m=y;g.engine;var P=g.options,C=P.showInternalEdges||!P.wireframes,A,b,I,R;for(I=0;I<w.length;I++)if(A=w[I],!!A.render.visible){for(R=A.parts.length>1?1:0;R<A.parts.length;R++)if(b=A.parts[R],!!b.render.visible){if(P.showSleeping&&A.isSleeping?m.globalAlpha=.5*b.render.opacity:b.render.opacity!==1&&(m.globalAlpha=b.render.opacity),b.render.sprite&&b.render.sprite.texture&&!P.wireframes){var B=b.render.sprite,H=k(g,B.texture);m.translate(b.position.x,b.position.y),m.rotate(b.angle),m.drawImage(H,H.width*-B.xOffset*B.xScale,H.height*-B.yOffset*B.yScale,H.width*B.xScale,H.height*B.yScale),m.rotate(-b.angle),m.translate(-b.position.x,-b.position.y)}else{if(b.circleRadius)m.beginPath(),m.arc(b.position.x,b.position.y,b.circleRadius,0,2*Math.PI);else{m.beginPath(),m.moveTo(b.vertices[0].x,b.vertices[0].y);for(var N=1;N<b.vertices.length;N++)!b.vertices[N-1].isInternal||C?m.lineTo(b.vertices[N].x,b.vertices[N].y):m.moveTo(b.vertices[N].x,b.vertices[N].y),b.vertices[N].isInternal&&!C&&m.moveTo(b.vertices[(N+1)%b.vertices.length].x,b.vertices[(N+1)%b.vertices.length].y);m.lineTo(b.vertices[0].x,b.vertices[0].y),m.closePath()}P.wireframes?(m.lineWidth=1,m.strokeStyle=g.options.wireframeStrokeStyle,m.stroke()):(m.fillStyle=b.render.fillStyle,b.render.lineWidth&&(m.lineWidth=b.render.lineWidth,m.strokeStyle=b.render.strokeStyle,m.stroke()),m.fill())}m.globalAlpha=1}}},e.bodyWireframes=function(g,w,y){var m=y,P=g.options.showInternalEdges,C,A,b,I,R;for(m.beginPath(),b=0;b<w.length;b++)if(C=w[b],!!C.render.visible)for(R=C.parts.length>1?1:0;R<C.parts.length;R++){for(A=C.parts[R],m.moveTo(A.vertices[0].x,A.vertices[0].y),I=1;I<A.vertices.length;I++)!A.vertices[I-1].isInternal||P?m.lineTo(A.vertices[I].x,A.vertices[I].y):m.moveTo(A.vertices[I].x,A.vertices[I].y),A.vertices[I].isInternal&&!P&&m.moveTo(A.vertices[(I+1)%A.vertices.length].x,A.vertices[(I+1)%A.vertices.length].y);m.lineTo(A.vertices[0].x,A.vertices[0].y)}m.lineWidth=1,m.strokeStyle=g.options.wireframeStrokeStyle,m.stroke()},e.bodyConvexHulls=function(g,w,y){var m=y,P,C,A;for(m.beginPath(),C=0;C<w.length;C++)if(P=w[C],!(!P.render.visible||P.parts.length===1)){for(m.moveTo(P.vertices[0].x,P.vertices[0].y),A=1;A<P.vertices.length;A++)m.lineTo(P.vertices[A].x,P.vertices[A].y);m.lineTo(P.vertices[0].x,P.vertices[0].y)}m.lineWidth=1,m.strokeStyle="rgba(255,255,255,0.2)",m.stroke()},e.vertexNumbers=function(g,w,y){var m=y,P,C,A;for(P=0;P<w.length;P++){var b=w[P].parts;for(A=b.length>1?1:0;A<b.length;A++){var I=b[A];for(C=0;C<I.vertices.length;C++)m.fillStyle="rgba(255,255,255,0.2)",m.fillText(P+"_"+C,I.position.x+(I.vertices[C].x-I.position.x)*.8,I.position.y+(I.vertices[C].y-I.position.y)*.8)}}},e.mousePosition=function(g,w,y){var m=y;m.fillStyle="rgba(255,255,255,0.8)",m.fillText(w.position.x+"  "+w.position.y,w.position.x+5,w.position.y-5)},e.bodyBounds=function(g,w,y){var m=y;g.engine;var P=g.options;m.beginPath();for(var C=0;C<w.length;C++){var A=w[C];if(A.render.visible)for(var b=w[C].parts,I=b.length>1?1:0;I<b.length;I++){var R=b[I];m.rect(R.bounds.min.x,R.bounds.min.y,R.bounds.max.x-R.bounds.min.x,R.bounds.max.y-R.bounds.min.y)}}P.wireframes?m.strokeStyle="rgba(255,255,255,0.08)":m.strokeStyle="rgba(0,0,0,0.1)",m.lineWidth=1,m.stroke()},e.bodyAxes=function(g,w,y){var m=y;g.engine;var P=g.options,C,A,b,I;for(m.beginPath(),A=0;A<w.length;A++){var R=w[A],B=R.parts;if(R.render.visible)if(P.showAxes)for(b=B.length>1?1:0;b<B.length;b++)for(C=B[b],I=0;I<C.axes.length;I++){var H=C.axes[I];m.moveTo(C.position.x,C.position.y),m.lineTo(C.position.x+H.x*20,C.position.y+H.y*20)}else for(b=B.length>1?1:0;b<B.length;b++)for(C=B[b],I=0;I<C.axes.length;I++)m.moveTo(C.position.x,C.position.y),m.lineTo((C.vertices[0].x+C.vertices[C.vertices.length-1].x)/2,(C.vertices[0].y+C.vertices[C.vertices.length-1].y)/2)}P.wireframes?(m.strokeStyle="indianred",m.lineWidth=1):(m.strokeStyle="rgba(255, 255, 255, 0.4)",m.globalCompositeOperation="overlay",m.lineWidth=2),m.stroke(),m.globalCompositeOperation="source-over"},e.bodyPositions=function(g,w,y){var m=y;g.engine;var P=g.options,C,A,b,I;for(m.beginPath(),b=0;b<w.length;b++)if(C=w[b],!!C.render.visible)for(I=0;I<C.parts.length;I++)A=C.parts[I],m.arc(A.position.x,A.position.y,3,0,2*Math.PI,!1),m.closePath();for(P.wireframes?m.fillStyle="indianred":m.fillStyle="rgba(0,0,0,0.5)",m.fill(),m.beginPath(),b=0;b<w.length;b++)C=w[b],C.render.visible&&(m.arc(C.positionPrev.x,C.positionPrev.y,2,0,2*Math.PI,!1),m.closePath());m.fillStyle="rgba(255,165,0,0.8)",m.fill()},e.bodyVelocity=function(g,w,y){var m=y;m.beginPath();for(var P=0;P<w.length;P++){var C=w[P];if(C.render.visible){var A=s.getVelocity(C);m.moveTo(C.position.x,C.position.y),m.lineTo(C.position.x+A.x,C.position.y+A.y)}}m.lineWidth=3,m.strokeStyle="cornflowerblue",m.stroke()},e.bodyIds=function(g,w,y){var m=y,P,C;for(P=0;P<w.length;P++)if(w[P].render.visible){var A=w[P].parts;for(C=A.length>1?1:0;C<A.length;C++){var b=A[C];m.font="12px Arial",m.fillStyle="rgba(255,255,255,0.5)",m.fillText(b.id,b.position.x+10,b.position.y-10)}}},e.collisions=function(g,w,y){var m=y,P=g.options,C,A,b,I;for(m.beginPath(),b=0;b<w.length;b++)if(C=w[b],!!C.isActive)for(A=C.collision,I=0;I<C.contactCount;I++){var R=C.contacts[I],B=R.vertex;m.rect(B.x-1.5,B.y-1.5,3.5,3.5)}for(P.wireframes?m.fillStyle="rgba(255,255,255,0.7)":m.fillStyle="orange",m.fill(),m.beginPath(),b=0;b<w.length;b++)if(C=w[b],!!C.isActive&&(A=C.collision,C.contactCount>0)){var H=C.contacts[0].vertex.x,N=C.contacts[0].vertex.y;C.contactCount===2&&(H=(C.contacts[0].vertex.x+C.contacts[1].vertex.x)/2,N=(C.contacts[0].vertex.y+C.contacts[1].vertex.y)/2),A.bodyB===A.supports[0].body||A.bodyA.isStatic===!0?m.moveTo(H-A.normal.x*8,N-A.normal.y*8):m.moveTo(H+A.normal.x*8,N+A.normal.y*8),m.lineTo(H,N)}P.wireframes?m.strokeStyle="rgba(255,165,0,0.7)":m.strokeStyle="orange",m.lineWidth=1,m.stroke()},e.separations=function(g,w,y){var m=y,P=g.options,C,A,b,I,R;for(m.beginPath(),R=0;R<w.length;R++)if(C=w[R],!!C.isActive){A=C.collision,b=A.bodyA,I=A.bodyB;var B=1;!I.isStatic&&!b.isStatic&&(B=.5),I.isStatic&&(B=0),m.moveTo(I.position.x,I.position.y),m.lineTo(I.position.x-A.penetration.x*B,I.position.y-A.penetration.y*B),B=1,!I.isStatic&&!b.isStatic&&(B=.5),b.isStatic&&(B=0),m.moveTo(b.position.x,b.position.y),m.lineTo(b.position.x+A.penetration.x*B,b.position.y+A.penetration.y*B)}P.wireframes?m.strokeStyle="rgba(255,165,0,0.5)":m.strokeStyle="orange",m.stroke()},e.inspector=function(g,w){g.engine;var y=g.selected,m=g.render,P=m.options,C;if(P.hasBounds){var A=m.bounds.max.x-m.bounds.min.x,b=m.bounds.max.y-m.bounds.min.y,I=A/m.options.width,R=b/m.options.height;w.scale(1/I,1/R),w.translate(-m.bounds.min.x,-m.bounds.min.y)}for(var B=0;B<y.length;B++){var H=y[B].data;switch(w.translate(.5,.5),w.lineWidth=1,w.strokeStyle="rgba(255,165,0,0.9)",w.setLineDash([1,2]),H.type){case"body":C=H.bounds,w.beginPath(),w.rect(Math.floor(C.min.x-3),Math.floor(C.min.y-3),Math.floor(C.max.x-C.min.x+6),Math.floor(C.max.y-C.min.y+6)),w.closePath(),w.stroke();break;case"constraint":var N=H.pointA;H.bodyA&&(N=H.pointB),w.beginPath(),w.arc(N.x,N.y,10,0,2*Math.PI),w.closePath(),w.stroke();break}w.setLineDash([]),w.translate(-.5,-.5)}g.selectStart!==null&&(w.translate(.5,.5),w.lineWidth=1,w.strokeStyle="rgba(255,165,0,0.6)",w.fillStyle="rgba(255,165,0,0.1)",C=g.selectBounds,w.beginPath(),w.rect(Math.floor(C.min.x),Math.floor(C.min.y),Math.floor(C.max.x-C.min.x),Math.floor(C.max.y-C.min.y)),w.closePath(),w.stroke(),w.fill(),w.translate(-.5,-.5)),P.hasBounds&&w.setTransform(1,0,0,1,0,0)};var a=function(g,w){var y=g.engine,m=g.timing,P=m.historySize,C=y.timing.timestamp;m.delta=w-m.lastTime||e._goodDelta,m.lastTime=w,m.timestampElapsed=C-m.lastTimestamp||0,m.lastTimestamp=C,m.deltaHistory.unshift(m.delta),m.deltaHistory.length=Math.min(m.deltaHistory.length,P),m.engineDeltaHistory.unshift(y.timing.lastDelta),m.engineDeltaHistory.length=Math.min(m.engineDeltaHistory.length,P),m.timestampElapsedHistory.unshift(m.timestampElapsed),m.timestampElapsedHistory.length=Math.min(m.timestampElapsedHistory.length,P),m.engineUpdatesHistory.unshift(y.timing.lastUpdatesPerFrame),m.engineUpdatesHistory.length=Math.min(m.engineUpdatesHistory.length,P),m.engineElapsedHistory.unshift(y.timing.lastElapsed),m.engineElapsedHistory.length=Math.min(m.engineElapsedHistory.length,P),m.elapsedHistory.unshift(m.lastElapsed),m.elapsedHistory.length=Math.min(m.elapsedHistory.length,P)},v=function(g){for(var w=0,y=0;y<g.length;y+=1)w+=g[y];return w/g.length||0},S=function(g,w){var y=document.createElement("canvas");return y.width=g,y.height=w,y.oncontextmenu=function(){return!1},y.onselectstart=function(){return!1},y},M=function(g){var w=g.getContext("2d"),y=window.devicePixelRatio||1,m=w.webkitBackingStorePixelRatio||w.mozBackingStorePixelRatio||w.msBackingStorePixelRatio||w.oBackingStorePixelRatio||w.backingStorePixelRatio||1;return y/m},k=function(g,w){var y=g.textures[w];return y||(y=g.textures[w]=new Image,y.src=w,y)},E=function(g,w){var y=w;/(jpg|gif|png)$/.test(w)&&(y="url("+w+")"),g.canvas.style.background=y,g.canvas.style.backgroundSize="contain",g.currentBackground=w}})()},function(d,x,f){var e={};d.exports=e;var s=f(5),r=f(17),i=f(0);(function(){e._maxFrameDelta=1e3/15,e._frameDeltaFallback=1e3/60,e._timeBufferMargin=1.5,e._elapsedNextEstimate=1,e._smoothingLowerBound=.1,e._smoothingUpperBound=.9,e.create=function(n){var u={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},c=i.extend(u,n);return c.fps=0,c},e.run=function(n,u){return n.timeBuffer=e._frameDeltaFallback,function c(t){n.frameRequestId=e._onNextFrame(n,c),t&&n.enabled&&e.tick(n,u,t)}(),n},e.tick=function(n,u,c){var t=i.now(),l=n.delta,a=0,v=c-n.timeLastTick;if((!v||!n.timeLastTick||v>Math.max(e._maxFrameDelta,n.maxFrameTime))&&(v=n.frameDelta||e._frameDeltaFallback),n.frameDeltaSmoothing){n.frameDeltaHistory.push(v),n.frameDeltaHistory=n.frameDeltaHistory.slice(-n.frameDeltaHistorySize);var S=n.frameDeltaHistory.slice(0).sort(),M=n.frameDeltaHistory.slice(S.length*e._smoothingLowerBound,S.length*e._smoothingUpperBound),k=o(M);v=k||v}n.frameDeltaSnapping&&(v=1e3/Math.round(1e3/v)),n.frameDelta=v,n.timeLastTick=c,n.timeBuffer+=n.frameDelta,n.timeBuffer=i.clamp(n.timeBuffer,0,n.frameDelta+l*e._timeBufferMargin),n.lastUpdatesDeferred=0;var E=n.maxUpdates||Math.ceil(n.maxFrameTime/l),g={timestamp:u.timing.timestamp};s.trigger(n,"beforeTick",g),s.trigger(n,"tick",g);for(var w=i.now();l>0&&n.timeBuffer>=l*e._timeBufferMargin;){s.trigger(n,"beforeUpdate",g),r.update(u,l),s.trigger(n,"afterUpdate",g),n.timeBuffer-=l,a+=1;var y=i.now()-t,m=i.now()-w,P=y+e._elapsedNextEstimate*m/a;if(a>=E||P>n.maxFrameTime){n.lastUpdatesDeferred=Math.round(Math.max(0,n.timeBuffer/l-e._timeBufferMargin));break}}u.timing.lastUpdatesPerFrame=a,s.trigger(n,"afterTick",g),n.frameDeltaHistory.length>=100&&(n.lastUpdatesDeferred&&Math.round(n.frameDelta/l)>E?i.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):n.lastUpdatesDeferred&&i.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof n.isFixed<"u"&&i.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(n.deltaMin||n.deltaMax)&&i.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),n.fps!==0&&i.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},e.stop=function(n){e._cancelNextFrame(n)},e._onNextFrame=function(n,u){if(typeof window<"u"&&window.requestAnimationFrame)n.frameRequestId=window.requestAnimationFrame(u);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return n.frameRequestId},e._cancelNextFrame=function(n){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(n.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var o=function(n){for(var u=0,c=n.length,t=0;t<c;t+=1)u+=n[t];return u/c||0}})()},function(d,x,f){var e={};d.exports=e;var s=f(8),r=f(0),i=r.deprecated;(function(){e.collides=function(o,n){return s.collides(o,n)},i(e,"collides","SAT.collides ➤ replaced by Collision.collides")})()},function(d,x,f){var e={};d.exports=e,f(1);var s=f(0);(function(){e.pathToVertices=function(r,i){typeof window<"u"&&!("SVGPathSeg"in window)&&s.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var o,n,u,c,t,l,a,v,S,M,k=[],E,g,w=0,y=0,m=0;i=i||15;var P=function(A,b,I){var R=I%2===1&&I>1;if(!S||A!=S.x||b!=S.y){S&&R?(E=S.x,g=S.y):(E=0,g=0);var B={x:E+A,y:g+b};(R||!S)&&(S=B),k.push(B),y=E+A,m=g+b}},C=function(A){var b=A.pathSegTypeAsLetter.toUpperCase();if(b!=="Z"){switch(b){case"M":case"L":case"T":case"C":case"S":case"Q":y=A.x,m=A.y;break;case"H":y=A.x;break;case"V":m=A.y;break}P(y,m,A.pathSegType)}};for(e._svgPathToAbsolute(r),u=r.getTotalLength(),l=[],o=0;o<r.pathSegList.numberOfItems;o+=1)l.push(r.pathSegList.getItem(o));for(a=l.concat();w<u;){if(M=r.getPathSegAtLength(w),t=l[M],t!=v){for(;a.length&&a[0]!=t;)C(a.shift());v=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":c=r.getPointAtLength(w),P(c.x,c.y,0);break}w+=i}for(o=0,n=a.length;o<n;++o)C(a[o]);return k},e._svgPathToAbsolute=function(r){for(var i,o,n,u,c,t,l=r.pathSegList,a=0,v=0,S=l.numberOfItems,M=0;M<S;++M){var k=l.getItem(M),E=k.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(E))"x"in k&&(a=k.x),"y"in k&&(v=k.y);else switch("x1"in k&&(n=a+k.x1),"x2"in k&&(c=a+k.x2),"y1"in k&&(u=v+k.y1),"y2"in k&&(t=v+k.y2),"x"in k&&(a+=k.x),"y"in k&&(v+=k.y),E){case"m":l.replaceItem(r.createSVGPathSegMovetoAbs(a,v),M);break;case"l":l.replaceItem(r.createSVGPathSegLinetoAbs(a,v),M);break;case"h":l.replaceItem(r.createSVGPathSegLinetoHorizontalAbs(a),M);break;case"v":l.replaceItem(r.createSVGPathSegLinetoVerticalAbs(v),M);break;case"c":l.replaceItem(r.createSVGPathSegCurvetoCubicAbs(a,v,n,u,c,t),M);break;case"s":l.replaceItem(r.createSVGPathSegCurvetoCubicSmoothAbs(a,v,c,t),M);break;case"q":l.replaceItem(r.createSVGPathSegCurvetoQuadraticAbs(a,v,n,u),M);break;case"t":l.replaceItem(r.createSVGPathSegCurvetoQuadraticSmoothAbs(a,v),M);break;case"a":l.replaceItem(r.createSVGPathSegArcAbs(a,v,k.r1,k.r2,k.angle,k.largeArcFlag,k.sweepFlag),M);break;case"z":case"Z":a=i,v=o;break}(E=="M"||E=="m")&&(i=a,o=v)}}})()},function(d,x,f){var e={};d.exports=e;var s=f(6);f(0),function(){e.create=s.create,e.add=s.add,e.remove=s.remove,e.clear=s.clear,e.addComposite=s.addComposite,e.addBody=s.addBody,e.addConstraint=s.addConstraint}()}])})})(rn);var Pn=rn.exports;const Z=Cn(Pn),an=8,me=381+an,yt=an/me,Ye=330/me,on=51/me,ft=Ye+on,De=4.7625/me,Fe=17.5/me,be=102/me,Re=203/me,Ae=305/me,ln=15/me,ue=Object.freeze(Object.defineProperty({__proto__:null,base:ft,disc:ln,ditchWidth:on,fifteen:be,five:Ae,peg:De,rimWidth:yt,surface:Ye,ten:Re,twenty:Fe},Symbol.toStringTag,{value:"Module"})),Mn={blue:"#4477AA",red:"#EE6677",green:"#228833",yellow:"#CCBB44",cyan:"#66CCEE",purple:"#AA3377",gray:"#BBBBBB"},bn={black:"#000000",white:"#ffffff","gray-50":"rgb(247, 247, 247)","gray-100":"rgb(239, 239, 239)","gray-200":"rgb(223, 223, 223)","gray-300":"rgb(202, 202, 202)","gray-400":"rgb(168, 168, 168)","gray-500":"rgb(135, 135, 135)","gray-600":"rgb(109, 109, 109)","gray-700":"rgb(78, 78, 78)","gray-800":"rgb(55, 55, 55)","gray-900":"rgb(38, 38, 38)","gray-1000":"rgb(25, 25, 25)","pink-aa":"#FF24FF","pink-aaa":"#D100D1","teal-aa":"#00A3A3","teal-aaa":"#008080","red-aa":"#FE5F55","red-aaa":"#E91101","purple-aaa":"#564592"},nt={category:Mn,color:bn,"":{"11px":"0.7rem","12px":"0.75rem","14px":"0.875rem","16px":"1rem","18px":"1.125rem","20px":"1.25rem","22px":"1.375rem","24px":"1.5rem","28px":"1.75rem","32px":"2rem","36px":"2.25rem","40px":"2.5rem","44px":"2.75rem","48px":"3rem","56px":"3.5rem","64px":"4rem","80px":"5rem","96px":"6rem","112px":"7rem","128px":"8rem"}},ye=1,it=2,Rt=4,st=8,Bt=16,An=.9,kn=.05,En=.05,Ft={player1:nt.color["pink-aa"],player2:nt.color["teal-aa"],active:nt.color.black,vector:nt.color.black};class Tn{constructor(){this.events={}}on(h,d){this.events[h]||(this.events[h]=[]),this.events[h].push(d)}emit(h,d){this.events[h]&&this.events[h].forEach(x=>x(d))}}function In(){const p=new Tn;let h,d,x,f,e,s,r,i,o,n,u=[],c,t;function l(){const W=Z.Bodies.circle(e,e,e*Fe,{isStatic:!0,isSensor:!0,render:{visible:!1},label:"20"},64);Z.World.add(d,[W])}function a(){const V=Math.max(2,e*.05),F=Fe*e+V/2-1,T=[];for(let O=0;O<16;O++){const L=O/16*2*Math.PI,D=e+Math.cos(L)*F,Y=e+Math.sin(L)*F,J=2*Math.PI*F/16,K=Z.Bodies.rectangle(D,Y,V,J,{isStatic:!0,isSensor:!1,angle:L,render:{visible:!1},label:"trap 20",collisionFilter:{category:Rt,mask:ye}});T.push(K)}Z.World.add(d,T)}function v(){const V=Math.max(8,e*.2),F=ft*e+V/2-1,T=[];for(let O=0;O<32;O++){const L=O/32*2*Math.PI,D=e+Math.cos(L)*F,Y=e+Math.sin(L)*F,J=2*Math.PI*F/32,K=Z.Bodies.rectangle(D,Y,V,J,{isStatic:!0,isSensor:!1,angle:L,render:{visible:!1},label:"trap rim",collisionFilter:{category:st,mask:ye}});T.push(K)}Z.World.add(d,T)}function S(){const V=Math.max(8,e*.1),F=Ye*e-V/2+1,T=[];for(let O=0;O<32;O++){const L=O/32*2*Math.PI,D=e+Math.cos(L)*F,Y=e+Math.sin(L)*F,J=2*Math.PI*F/32,K=Z.Bodies.rectangle(D,Y,V,J,{isStatic:!0,isSensor:!1,angle:L,render:{visible:!1},label:"trap surface",collisionFilter:{category:Bt,mask:ye}});T.push(K)}Z.World.add(d,T)}function M(){const W=[],V=De*e;for(let F=0;F<8;F++){const T=.375+F/8*Math.PI*2,O=e+Math.cos(T)*e*be,L=e+Math.sin(T)*e*be,D=Z.Bodies.circle(O,L,V,{isStatic:!0,restitution:.9,render:{visible:!1},collisionFilter:{category:it,mask:ye}});W.push(D)}Z.World.add(d,W)}function k(W){if(!t||!o)return;const V=t.circleRadius,F=Z.Vector.normalise(o),T=t.position.x+F.x*V*1.25,O=t.position.y+F.y*V*1.25,L=t.position.x+F.x*V*1.5+o.x,D=t.position.y+F.y*V*1.5+o.y;W.beginPath(),W.strokeStyle=Ft.vector,W.lineWidth=2,W.moveTo(T,O),W.lineTo(L,D),W.stroke();const Y=e*.03,J=Math.PI/4,K=Math.atan2(o.y,o.x);W.beginPath(),W.moveTo(L,D),W.lineTo(L-Y*Math.cos(K-J),D-Y*Math.sin(K-J)),W.moveTo(L,D),W.lineTo(L-Y*Math.cos(K+J),D-Y*Math.sin(K+J)),W.stroke(),W.closePath()}function E(){const W=f.context;n&&k(W)}function g(W){W.pairs.forEach(({bodyA:V,bodyB:F})=>{const T=V.label==="disc"?V:F.label==="disc"?F:null,O=V.label==="20"?V:F.label==="20"?F:null;if(T&&O&&!T.in20){const L=Z.Vector.magnitude(Z.Vector.sub(T.position,O.position)),Y=T.circleRadius*.75,J=10,K=L<Y,Ee=T.speed<J;K&&Ee&&(T.in20=!0,T.collisionFilter.mask=ye|it|st|Rt,T.restitution=.4)}})}function w(W){W.pairs.forEach(({bodyA:V,bodyB:F})=>{const T=V.label==="disc"?V:F.label==="disc"?F:null,O=V.label==="disc"&&V.id!==T.id?V:F.label==="disc"&&F.id!==T.id?F:null,L=V.label==="trap rim"?V:F.label==="trap rim"?F:null;if(T&&L)T.frictionAir=.3,T.collisionFilter.mask=ye|it|st|Bt;else if(T&&O){T.collided=!0,O.collided=!0;const D=T.player!==O.player;T.collidedOpp=D,O.collidedOpp=D}})}function y({target:W,speed:V}){if(!t)return;const F={x:W.x-t.position.x,y:W.y-t.position.y},T=Z.Vector.normalise(F);if(V){const O=V*s;i=Z.Vector.mult(T,O)}else{const O=Z.Vector.magnitude(F),L=Math.min(O,r),D=L/r*s;i=Z.Vector.mult(T,D),o=Z.Vector.mult(T,L)}}function m(W){const V={x:e,y:e},F=W.circleRadius,T=W.position,O=Math.sqrt(Math.pow(T.x-V.x,2)+Math.pow(T.y-V.y,2)),D=[{r:e*Fe,score:20},{r:e*be,score:15},{r:e*Re,score:10},{r:e*Ae,score:5}].find(Y=>O+F<Y.r);return(D==null?void 0:D.score)||0}function P(W){const V={x:e,y:e},F=W.circleRadius,T=W.position,O=Math.sqrt(Math.pow(T.x-V.x,2)+Math.pow(T.y-V.y,2)),L=e*be;if(O-F<L)return!0}function C(){if(u.every(V=>V.isSleeping)){u.forEach(D=>{D.score=m(D),D.intersect15=P(D)});const V=u.some(D=>D.player!==t.player),F=u.some(D=>D.collidedOpp),T=u.filter(D=>D.player===t.player).some(D=>D.intersect15);u.forEach(D=>{V?D.player===t.player?D.id===t.id?D.valid=F:D.valid=D.collided?F:!0:D.valid=!0:D.id===t.id?D.valid=D.collided?T:D.intersect15:D.valid=D.collided?T:!0,(!D.valid||!D.score)&&Z.World.remove(d,D)});const O=u.find(D=>D.id===t.id).valid;u=u.filter(D=>D.score>0&&D.valid);const L=u.map(D=>({player:D.player,score:D.score}));u.forEach(D=>{D.score===20&&Z.World.remove(d,D)}),u=u.filter(D=>D.score!==20),t=null,u.forEach(D=>{D.valid=void 0,D.collided=void 0,D.collidedOpp=void 0,D.intersect15=void 0,D.in20=void 0}),U("idle"),p.emit("shotComplete",{scores:L,valid:O})}}function A(){Z.Composite.clear(d,!1),Z.Events.off(h),Z.Render.stop(f),f.canvas.remove(),f.context=null,f.textures={},Z.Runner.stop(x)}function b(W){u.forEach(V=>{const F=e/W,T=V.position.x*F,O=V.position.y*F;Z.Body.setPosition(V,{x:T,y:O}),Z.Body.scale(V,F,F),Z.World.add(d,V)})}function I(){u.forEach(W=>{Z.World.remove(d,W)}),u=[],t=null,n=!1,o=void 0,i=void 0}function R(W={}){const V=W.player||"player1",F=W.state||"position",T=W.x?W.x*e*2:e,O=W.y?W.y*e*2:V==="player1"?e+e*Ae:e-e*Ae,L=e*ln,D=kn,Y=An,J=En,K=Z.Bodies.circle(T,O,L,{density:D,restitution:Y,frictionAir:J,render:{fillStyle:Ft[V],strokeStyle:"#fff",lineWidth:1},label:"disc",collisionFilter:{category:ye,mask:ye|it|st},sleepThreshold:60,isSleeping:!0},64);K.player=V,u.push(K),t=K,Z.Events.on(K,"sleepStart",C),Z.World.add(d,K),s=t.mass*e*7e-4,U(F)}function B(W){if(!t||c!=="position")return;const V=2,F=[45-V,135+V],T=e*Ae;let O=W-e;O=Math.max(-T,Math.min(T,O));const L=t.player==="player1",D=L?-1:1,Y=F[L?0:1]*D*-1,J=F[L?1:0]*D*-1,K=e-Math.sqrt(Math.max(0,Math.pow(T,2)-Math.pow(O,2)))*D,Ee={x:e+O,y:K},qe={x:e,y:e},Ce=Z.Vector.angle(qe,Ee)*180/Math.PI;if(Ce>Y&&Ce<J)Z.Body.setPosition(t,Ee);else if(Ce<=Y){const xe=Y*Math.PI/180,Pe=Math.cos(xe)*T,ae=Math.sin(xe)*T,Te=e+Pe,Me=e+ae;Z.Body.setPosition(t,{x:Te,y:Me})}else if(Ce>=J){const xe=J*Math.PI/180,Pe=Math.cos(xe)*T,ae=Math.sin(xe)*T,Te=e+Pe,Me=e+ae;Z.Body.setPosition(t,{x:Te,y:Me})}}function H({degrees:W,speed:V}){const F=(W-90)*Math.PI/180,T=t.position.x+Math.cos(F),O=t.position.y+Math.sin(F);return{x:t.position.x+(T-t.position.x)*V,y:t.position.y+(O-t.position.y)*V}}function N({degrees:W,power:V,visible:F}){if(!t||c!=="shoot")return;_(F===void 0?!0:F);const O=Math.max(.01,V)*r,L=H({degrees:W,speed:O});y({target:L})}function G(){!t||c!=="shoot"||(U("play"),_(!1),Z.Body.applyForce(t,t.position,i))}function z(){!t||c!=="shoot"||G()}function U(W){c=W}function _(W){n=W}function X({element:W,width:V}){let F;h?(A(),F=e):U("idle");const T=V;e=V/2,r=e*.2,h=Z.Engine.create({enableSleeping:!0}),d=h.world,h.gravity.y=0,x=Z.Runner.create(),f=Z.Render.create({element:W,engine:h,options:{width:V,height:T,wireframes:!1,pixelRatio:"auto",background:"transparent",hasBounds:!0,showSleeping:!1}}),b(F),l(),M(),a(),v(),S(),Z.Events.on(f,"afterRender",E),Z.Runner.run(x,h),Z.Render.run(f),Z.Events.on(h,"collisionActive",g),Z.Events.on(h,"collisionStart",w),u.length||p.emit("ready")}return{removeDiscs:I,addDisc:R,positionDisc:B,aimDisc:N,release:z,flickDisc:G,setState:U,setIndicatorVisible:_,init:X,on:(W,V)=>p.on(W,V)}}function ot(p){return Object.keys(p).reduce((h,d)=>p[d]===void 0?h:h+`${d}:${p[d]};`,"")}function pt(p){return p?!0:void 0}ot({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function Vt(p){function h(d){return d(p),()=>{}}return{subscribe:h}}function mt(p){if(!fn)return null;const h=document.querySelector(`[data-melt-id="${p}"]`);return Xe(h)?h:null}const _e=p=>new Proxy(p,{get(h,d,x){return Reflect.get(h,d,x)},ownKeys(h){return Reflect.ownKeys(h).filter(d=>d!=="action")}}),Ot=p=>typeof p=="function";St("empty");function St(p,h){const{stores:d,action:x,returned:f}=h??{},e=(()=>{if(d&&f)return vt(d,r=>{const i=f(r);if(Ot(i)){const o=(...n)=>_e({...i(...n),[`data-melt-${p}`]:"",action:x??Se});return o.action=x??Se,o}return _e({...i,[`data-melt-${p}`]:"",action:x??Se})});{const r=f,i=r==null?void 0:r();if(Ot(i)){const o=(...n)=>_e({...i(...n),[`data-melt-${p}`]:"",action:x??Se});return o.action=x??Se,Vt(o)}return Vt(_e({...i,[`data-melt-${p}`]:"",action:x??Se}))}})(),s=x??(()=>{});return s.subscribe=e.subscribe,s}function Lt(p,h){const{stores:d,returned:x,action:f}=h,{subscribe:e}=vt(d,r=>x(r).map(i=>_e({...i,[`data-melt-${p}`]:"",action:f??Se}))),s=f??(()=>{});return s.subscribe=e,s}function Dn(p){const h=e=>e?`${p}-${e}`:p,d=e=>`data-melt-${p}${e?`-${e}`:""}`,x=e=>`[data-melt-${p}${e?`-${e}`:""}]`;return{name:h,attribute:d,selector:x,getEl:e=>document.querySelector(x(e))}}const fn=typeof document<"u";function Xe(p){return p instanceof HTMLElement}function Rn(...p){return(...h)=>{for(const d of p)typeof d=="function"&&d(...h)}}function Se(){}function Be(p,h,d,x){const f=Array.isArray(h)?h:[h];return f.forEach(e=>p.addEventListener(e,d,x)),()=>{f.forEach(e=>p.removeEventListener(e,d,x))}}function Bn(p,h,d,x){const f=Array.isArray(h)?h:[h];if(typeof d=="function"){const e=Vn(s=>d(s));return f.forEach(s=>p.addEventListener(s,e,x)),()=>{f.forEach(s=>p.removeEventListener(s,e,x))}}return()=>void 0}function Fn(p){const h=p.currentTarget;if(!Xe(h))return null;const d=new CustomEvent(`m-${p.type}`,{detail:{originalEvent:p},cancelable:!0});return h.dispatchEvent(d),d}function Vn(p){return h=>{const d=Fn(h);if(!(d!=null&&d.defaultPrevented))return p(h)}}const On=p=>{try{gn(p)}catch{return p}};function cn(p,...h){const d={};for(const x of Object.keys(p))h.includes(x)||(d[x]=p[x]);return d}function we(p){return{...p,get:()=>pn(p)}}we.writable=function(p){const h=Ie(p);let d=p;return{subscribe:h.subscribe,set(x){h.set(x),d=x},update(x){const f=x(d);h.set(f),d=f},get(){return d}}};we.derived=function(p,h){const d=new Map,x=()=>{const e=Array.isArray(p)?p.map(s=>s.get()):p.get();return h(e)};return{get:x,subscribe:e=>{const s=[];return(Array.isArray(p)?p:[p]).forEach(i=>{s.push(i.subscribe(()=>{e(x())}))}),e(x()),d.set(e,s),()=>{const i=d.get(e);if(i)for(const o of i)o();d.delete(e)}}}};const Ln=(p,h)=>{const d=we(p),x=(e,s)=>{d.update(r=>{const i=e(r);let o=i;return h&&(o=h({curr:r,next:i})),s==null||s(o),o})};return{...d,update:x,set:e=>{x(()=>e)}}};let Wn="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Hn=(p=21)=>{let h="",d=p;for(;d--;)h+=Wn[Math.random()*64|0];return h};function Un(){return Hn(10)}function Nn(p){return p.reduce((h,d)=>(h[d]=Un(),h),{})}const oe={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};function Wt(p,h){let d;const x=vt(p,e=>{d==null||d(),d=h(e)}).subscribe(Se),f=()=>{x(),d==null||d()};return On(f),f}function Gn(p){const h={};return Object.keys(p).forEach(d=>{const x=d,f=p[x];h[x]=we(Ie(f))}),h}function xt(p,h,d,x){const f=(p-(isNaN(h)?0:h))%x;let e=Math.abs(f)*2>=x?p+Math.sign(f)*(x-Math.abs(f)):p-f;isNaN(h)?!isNaN(d)&&e>d&&(e=Math.floor(d/x)*x):e<h?e=h:!isNaN(d)&&e>d&&(e=h+Math.floor((d-h)/x)*x);const s=x.toString(),r=s.indexOf("."),i=r>=0?s.length-r:0;if(i>0){const o=Math.pow(10,i);e=Math.round(e*o)/o}return e}Ke(void 0,p=>{function h(x){p(x),p(void 0)}return Be(document,"pointerup",h,{passive:!1,capture:!0})});Ke(void 0,p=>{function h(x){x&&x.key===oe.ESCAPE&&p(x),p(void 0)}return Be(document,"keydown",h,{passive:!1})});Ke(!1),Ke(!1),Ke(void 0);const zn={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...cn(zn,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const _n={defaultValue:[],min:0,max:100,step:1,orientation:"horizontal",dir:"ltr",disabled:!1},{name:rt}=Dn("slider"),Kn=p=>{const h={..._n,...p},d=Gn(cn(h,"value","onValueChange","defaultValue")),{min:x,max:f,step:e,orientation:s,dir:r,disabled:i}=d,o=h.value??Ie(h.defaultValue),n=Ln(o,h==null?void 0:h.onValueChange),u=we(Ie(!1)),c=we(Ie(0)),t=we(Ie(null)),l=Nn(["root"]),a=(y,m)=>{n.update(P=>{if(!P)return[y];if(P[m]===y)return P;const C=[...P],A=C[m]>y?-1:1;function b(){C[m]=C[m+A],C[m+A]=y;const H=v();H&&(H[m+A].focus(),t.set({thumb:H[m+A],index:m+A}))}if(A===-1&&y<C[m-1])return b(),C;if(A===1&&y>C[m+1])return b(),C;const I=x.get(),R=f.get(),B=e.get();return C[m]=xt(y,I,R,B),C})},v=()=>{const y=mt(l.root);return y?Array.from(y.querySelectorAll('[data-melt-part="thumb"]')).filter(m=>Xe(m)):null},S=vt([x,f],([y,m])=>P=>(P-y)/(m-y)*100),M=we.derived([s,r],([y,m])=>y==="horizontal"?m==="rtl"?"rl":"lr":m==="rtl"?"tb":"bt"),k=St(rt(),{stores:[i,s,r],returned:([y,m,P])=>({dir:P,disabled:pt(y),"data-disabled":pt(y),"data-orientation":m,style:y?void 0:`touch-action: ${m==="horizontal"?"pan-y":"pan-x"}`,"data-melt-id":l.root})}),E=St(rt("range"),{stores:[n,M,S],returned:([y,m,P])=>{const C=y.length>1?P(Math.min(...y)??0):0,A=100-P(Math.max(...y)??0),b={position:"absolute"};switch(m){case"lr":{b.left=`${C}%`,b.right=`${A}%`;break}case"rl":{b.right=`${C}%`,b.left=`${A}%`;break}case"bt":{b.bottom=`${C}%`,b.top=`${A}%`;break}case"tb":{b.top=`${C}%`,b.bottom=`${A}%`;break}}return{style:ot(b)}}}),g=Lt(rt("thumb"),{stores:[n,S,x,f,i,s,M],returned:([y,m,P,C,A,b,I])=>Array.from({length:y.length||1},(B,H)=>{c.get()<y.length&&c.update(_=>_+1);const G=y[H],z=`${m(G)}%`,U={position:"absolute"};switch(I){case"lr":{U.left=z,U.translate="-50% 0";break}case"rl":{U.right=z,U.translate="50% 0";break}case"bt":{U.bottom=z,U.translate="0 50%";break}case"tb":{U.top=z,U.translate="0 -50%";break}}return{role:"slider","aria-valuemin":P,"aria-valuemax":C,"aria-valuenow":G,"aria-disabled":pt(A),"aria-orientation":b,"data-melt-part":"thumb","data-value":G,style:ot(U),tabindex:A?-1:0}}),action:y=>({destroy:Bn(y,"keydown",P=>{if(i.get())return;const C=P.currentTarget;if(!Xe(C))return;const A=v();if(!(A!=null&&A.length))return;const b=A.indexOf(C);if(c.set(b),![oe.ARROW_LEFT,oe.ARROW_RIGHT,oe.ARROW_UP,oe.ARROW_DOWN,oe.HOME,oe.END].includes(P.key))return;P.preventDefault();const I=x.get(),R=f.get(),B=e.get(),H=n.get(),N=s.get(),G=M.get(),z=H[b];switch(P.key){case oe.HOME:{a(I,b);break}case oe.END:{a(R,b);break}case oe.ARROW_LEFT:{if(N!=="horizontal")break;P.metaKey?a(G==="rl"?R:I,b):G==="rl"&&z<R?a(z+B,b):G==="lr"&&z>I&&a(z-B,b);break}case oe.ARROW_RIGHT:{if(N!=="horizontal")break;P.metaKey?a(G==="rl"?I:R,b):G==="rl"&&z>I?a(z-B,b):G==="lr"&&z<R&&a(z+B,b);break}case oe.ARROW_UP:{P.metaKey?a(G==="tb"?I:R,b):G==="tb"&&z>I?a(z-B,b):G!=="tb"&&z<R&&a(z+B,b);break}case oe.ARROW_DOWN:{P.metaKey?a(G==="tb"?R:I,b):G==="tb"&&z<R?a(z+B,b):G!=="tb"&&z>I&&a(z-B,b);break}}})})}),w=Lt(rt("tick"),{stores:[n,x,f,e,M],returned:([y,m,P,C,A])=>{const b=P-m;let I=Math.ceil(b/C);return b%C==0&&I++,Array.from({length:I},(R,B)=>{const H=`${B*(C/(P-m))*100}%`,N=B===0,G=B===I-1,z=N?0:G?-100:-50,U={position:"absolute"};switch(A){case"lr":{U.left=H,U.translate=`${z}% 0`;break}case"rl":{U.right=H,U.translate=`${-z}% 0`;break}case"bt":{U.bottom=H,U.translate=`0 ${-z}%`;break}case"tb":{U.top=H,U.translate=`0 ${z}%`;break}}const _=m+B*C;return{"data-bounded":(y.length===1?_<=y[0]:y[0]<=_&&_<=y[y.length-1])?!0:void 0,"data-value":_,style:ot(U)}})}});return Wt([k,x,f,i,s,M,e],([y,m,P,C,A,b,I])=>{if(!fn||C)return;const R=(U,_,X,W)=>{const F=(U-X)/(W-X)*(P-m)+m;if(F<m)a(m,_);else if(F>P)a(P,_);else{const T=I,O=m,L=Math.floor((F-O)/T),D=O+L*T+T/2,Y=O+(L+1)*T+T/2,J=F>=D&&F<Y?(L+1)*T+O:L*T+O;J<=P&&a(J,_)}},B=U=>{const _=v();if(!_)return;_.forEach(F=>F.blur());const X=_.map(F=>{if(A==="horizontal"){const{left:T,right:O}=F.getBoundingClientRect();return Math.abs(U.clientX-(T+O)/2)}else{const{top:T,bottom:O}=F.getBoundingClientRect();return Math.abs(U.clientY-(T+O)/2)}}),W=_[X.indexOf(Math.min(...X))],V=_.indexOf(W);return{thumb:W,index:V}},H=U=>{if(!u.get())return;U.preventDefault(),U.stopPropagation();const _=mt(y["data-melt-id"]),X=t.get();if(!_||!X)return;X.thumb.focus();const{left:W,right:V,top:F,bottom:T}=_.getBoundingClientRect();switch(b){case"lr":{R(U.clientX,X.index,W,V);break}case"rl":{R(U.clientX,X.index,V,W);break}case"bt":{R(U.clientY,X.index,T,F);break}case"tb":{R(U.clientY,X.index,F,T);break}}},N=U=>{if(U.button!==0)return;const _=mt(y["data-melt-id"]),X=B(U);if(!X||!_)return;const W=U.target;!Xe(W)||!_.contains(W)||(U.preventDefault(),t.set(X),X.thumb.focus(),u.set(!0),H(U))},G=()=>{u.set(!1)},z=Rn(Be(document,"pointerdown",N),Be(document,"pointerup",G),Be(document,"pointerleave",G),Be(document,"pointermove",H));return()=>{z()}}),Wt([e,x,f,n],function([m,P,C,A]){const b=R=>xt(R,P,C,m)===R,I=R=>xt(R,P,C,m);A.some(R=>!b(R))&&n.update(R=>R.map(I))}),{elements:{root:k,thumbs:g,range:E,ticks:w},states:{value:n},options:d}};function Xn(p,h){const d={};return h.forEach(x=>{d[x]={[`data-${p}-${x}`]:""}}),x=>d[x]}function Yn(){const p=nn();return h=>{const{originalEvent:d}=h.detail,{cancelable:x}=h,f=d.type;p(f,{originalEvent:d,currentTarget:d.currentTarget},{cancelable:x})||h.preventDefault()}}function Qn(p){const h={};for(const d in p){const x=p[d];x!==void 0&&(h[d]=x)}return h}function Zn(p){return function(h,d){if(d===void 0)return;const x=p[h];x&&x.set(d)}}function un(){return{NAME:"slider",PARTS:["root","input","range","thumb","tick"]}}function Jn(p){const{NAME:h,PARTS:d}=un(),x=Xn(h,d),f={...Kn(Qn(p)),getAttrs:x};return mn(h,f),{...f,updateOption:Zn(f.options)}}function dn(){const{NAME:p}=un();return xn(p)}const jn=p=>({builder:p&4,ticks:p&8,thumbs:p&16}),Ht=p=>({builder:p[2],ticks:p[3],thumbs:p[4]}),qn=p=>({builder:p&4,ticks:p&8,thumbs:p&16}),Ut=p=>({builder:p[2],ticks:p[3],thumbs:p[4]});function $n(p){let h,d,x,f;const e=p[19].default,s=ct(e,p,p[18],Ht);let r=[p[2],p[8]],i={};for(let o=0;o<r.length;o+=1)i=pe(i,r[o]);return{c(){h=$("span"),s&&s.c(),this.h()},l(o){h=ee(o,"SPAN",{});var n=te(h);s&&s.l(n),n.forEach(Q),this.h()},h(){Oe(h,i)},m(o,n){ne(o,h,n),s&&s.m(h,null),p[20](h),d=!0,x||(f=Ct(p[2].action(h)),x=!0)},p(o,n){s&&s.p&&(!d||n&262172)&&ut(s,e,o,o[18],d?ht(e,o[18],n,jn):dt(o[18]),Ht),Oe(h,i=bt(r,[n&4&&o[2],n&256&&o[8]]))},i(o){d||(ie(s,o),d=!0)},o(o){se(s,o),d=!1},d(o){o&&Q(h),s&&s.d(o),p[20](null),x=!1,f()}}}function ei(p){let h;const d=p[19].default,x=ct(d,p,p[18],Ut);return{c(){x&&x.c()},l(f){x&&x.l(f)},m(f,e){x&&x.m(f,e),h=!0},p(f,e){x&&x.p&&(!h||e&262172)&&ut(x,d,f,f[18],h?ht(d,f[18],e,qn):dt(f[18]),Ut)},i(f){h||(ie(x,f),h=!0)},o(f){se(x,f),h=!1},d(f){x&&x.d(f)}}}function ti(p){let h,d,x,f;const e=[ei,$n],s=[];function r(i,o){return i[1]?0:1}return h=r(p),d=s[h]=e[h](p),{c(){d.c(),x=de()},l(i){d.l(i),x=de()},m(i,o){s[h].m(i,o),ne(i,x,o),f=!0},p(i,[o]){let n=h;h=r(i),h===n?s[h].p(i,o):(We(),se(s[n],1,1,()=>{s[n]=null}),He(),d=s[h],d?d.p(i,o):(d=s[h]=e[h](i),d.c()),ie(d,1),d.m(x.parentNode,x))},i(i){f||(ie(d),f=!0)},o(i){se(d),f=!1},d(i){i&&Q(x),s[h].d(i)}}}function ni(p,h,d){let x;const f=["disabled","min","max","step","orientation","dir","value","onValueChange","asChild","el"];let e=Ve(h,f),s,r,i,{$$slots:o={},$$scope:n}=h,{disabled:u=void 0}=h,{min:c=void 0}=h,{max:t=void 0}=h,{step:l=void 0}=h,{orientation:a=void 0}=h,{dir:v=void 0}=h,{value:S=void 0}=h,{onValueChange:M=void 0}=h,{asChild:k=!1}=h,{el:E=void 0}=h;const{elements:{root:g,ticks:w,thumbs:y},states:{value:m},updateOption:P,getAttrs:C}=Jn({disabled:u,dir:v,min:c,max:t,step:l,orientation:a,defaultValue:S,onValueChange:({next:I})=>(S!==I&&(M==null||M(I),d(9,S=I)),I)});at(p,g,I=>d(17,s=I)),at(p,w,I=>d(3,r=I)),at(p,y,I=>d(4,i=I));const A=C("root");function b(I){ke[I?"unshift":"push"](()=>{E=I,d(0,E)})}return p.$$set=I=>{h=pe(pe({},h),wt(I)),d(8,e=Ve(h,f)),"disabled"in I&&d(10,u=I.disabled),"min"in I&&d(11,c=I.min),"max"in I&&d(12,t=I.max),"step"in I&&d(13,l=I.step),"orientation"in I&&d(14,a=I.orientation),"dir"in I&&d(15,v=I.dir),"value"in I&&d(9,S=I.value),"onValueChange"in I&&d(16,M=I.onValueChange),"asChild"in I&&d(1,k=I.asChild),"el"in I&&d(0,E=I.el),"$$scope"in I&&d(18,n=I.$$scope)},p.$$.update=()=>{p.$$.dirty&512&&S!==void 0&&m.set(S),p.$$.dirty&1024&&P("disabled",u),p.$$.dirty&2048&&P("min",c),p.$$.dirty&4096&&P("max",t),p.$$.dirty&8192&&P("step",l),p.$$.dirty&16384&&P("orientation",a),p.$$.dirty&32768&&P("dir",v),p.$$.dirty&131072&&d(2,x=s),p.$$.dirty&4&&Object.assign(x,A)},[E,k,x,r,i,g,w,y,e,S,u,c,t,l,a,v,M,s,n,o,b]}class ii extends Ne{constructor(h){super(),Ge(this,h,ni,ti,Ue,{disabled:10,min:11,max:12,step:13,orientation:14,dir:15,value:9,onValueChange:16,asChild:1,el:0})}}const si=p=>({builder:p&4}),Nt=p=>({builder:p[2]});function ri(p){let h,d,x,f=[p[2],p[4]],e={};for(let s=0;s<f.length;s+=1)e=pe(e,f[s]);return{c(){h=$("span"),this.h()},l(s){h=ee(s,"SPAN",{}),te(h).forEach(Q),this.h()},h(){Oe(h,e)},m(s,r){ne(s,h,r),p[8](h),d||(x=Ct(p[2].action(h)),d=!0)},p(s,r){Oe(h,e=bt(f,[r&4&&s[2],r&16&&s[4]]))},i:he,o:he,d(s){s&&Q(h),p[8](null),d=!1,x()}}}function ai(p){let h;const d=p[7].default,x=ct(d,p,p[6],Nt);return{c(){x&&x.c()},l(f){x&&x.l(f)},m(f,e){x&&x.m(f,e),h=!0},p(f,e){x&&x.p&&(!h||e&68)&&ut(x,d,f,f[6],h?ht(d,f[6],e,si):dt(f[6]),Nt)},i(f){h||(ie(x,f),h=!0)},o(f){se(x,f),h=!1},d(f){x&&x.d(f)}}}function oi(p){let h,d,x,f;const e=[ai,ri],s=[];function r(i,o){return i[1]?0:1}return h=r(p),d=s[h]=e[h](p),{c(){d.c(),x=de()},l(i){d.l(i),x=de()},m(i,o){s[h].m(i,o),ne(i,x,o),f=!0},p(i,[o]){let n=h;h=r(i),h===n?s[h].p(i,o):(We(),se(s[n],1,1,()=>{s[n]=null}),He(),d=s[h],d?d.p(i,o):(d=s[h]=e[h](i),d.c()),ie(d,1),d.m(x.parentNode,x))},i(i){f||(ie(d),f=!0)},o(i){se(d),f=!1},d(i){i&&Q(x),s[h].d(i)}}}function li(p,h,d){let x;const f=["asChild","el"];let e=Ve(h,f),s,{$$slots:r={},$$scope:i}=h,{asChild:o=!1}=h,{el:n=void 0}=h;const{elements:{range:u},getAttrs:c}=dn();at(p,u,a=>d(5,s=a));const t=c("range");function l(a){ke[a?"unshift":"push"](()=>{n=a,d(0,n)})}return p.$$set=a=>{h=pe(pe({},h),wt(a)),d(4,e=Ve(h,f)),"asChild"in a&&d(1,o=a.asChild),"el"in a&&d(0,n=a.el),"$$scope"in a&&d(6,i=a.$$scope)},p.$$.update=()=>{p.$$.dirty&32&&d(2,x=s),p.$$.dirty&4&&Object.assign(x,t)},[n,o,x,u,e,s,i,r,l]}class fi extends Ne{constructor(h){super(),Ge(this,h,li,oi,Ue,{asChild:1,el:0})}}const ci=p=>({builder:p&4}),Gt=p=>({builder:p[2]});function ui(p){let h,d,x,f=[p[2],p[4]],e={};for(let s=0;s<f.length;s+=1)e=pe(e,f[s]);return{c(){h=$("span"),this.h()},l(s){h=ee(s,"SPAN",{}),te(h).forEach(Q),this.h()},h(){Oe(h,e)},m(s,r){ne(s,h,r),p[8](h),d||(x=[Ct(p[2].action(h)),Le(h,"m-keydown",p[3])],d=!0)},p(s,r){Oe(h,e=bt(f,[r&4&&s[2],r&16&&s[4]]))},i:he,o:he,d(s){s&&Q(h),p[8](null),d=!1,sn(x)}}}function di(p){let h;const d=p[7].default,x=ct(d,p,p[6],Gt);return{c(){x&&x.c()},l(f){x&&x.l(f)},m(f,e){x&&x.m(f,e),h=!0},p(f,e){x&&x.p&&(!h||e&68)&&ut(x,d,f,f[6],h?ht(d,f[6],e,ci):dt(f[6]),Gt)},i(f){h||(ie(x,f),h=!0)},o(f){se(x,f),h=!1},d(f){x&&x.d(f)}}}function hi(p){let h,d,x,f;const e=[di,ui],s=[];function r(i,o){return i[1]?0:1}return h=r(p),d=s[h]=e[h](p),{c(){d.c(),x=de()},l(i){d.l(i),x=de()},m(i,o){s[h].m(i,o),ne(i,x,o),f=!0},p(i,[o]){let n=h;h=r(i),h===n?s[h].p(i,o):(We(),se(s[n],1,1,()=>{s[n]=null}),He(),d=s[h],d?d.p(i,o):(d=s[h]=e[h](i),d.c()),ie(d,1),d.m(x.parentNode,x))},i(i){f||(ie(d),f=!0)},o(i){se(d),f=!1},d(i){i&&Q(x),s[h].d(i)}}}function vi(p,h,d){let x;const f=["asChild","el","thumb"];let e=Ve(h,f),{$$slots:s={},$$scope:r}=h,{asChild:i=!1}=h,{el:o=void 0}=h,{thumb:n}=h;const{getAttrs:u}=dn(),c=Yn(),t=u("thumb");function l(a){ke[a?"unshift":"push"](()=>{o=a,d(0,o)})}return p.$$set=a=>{h=pe(pe({},h),wt(a)),d(4,e=Ve(h,f)),"asChild"in a&&d(1,i=a.asChild),"el"in a&&d(0,o=a.el),"thumb"in a&&d(5,n=a.thumb),"$$scope"in a&&d(6,r=a.$$scope)},p.$$.update=()=>{p.$$.dirty&32&&d(2,x=n),p.$$.dirty&4&&Object.assign(x,t)},[o,i,x,c,e,n,r,s,l]}class gi extends Ne{constructor(h){super(),Ge(this,h,vi,hi,Ue,{asChild:1,el:0,thumb:5})}}function zt(p,h,d){const x=p.slice();return x[7]=h[d],x}function _t(p){let h,d;return h=new gi({props:{thumb:p[7]}}),{c(){Qe(h.$$.fragment)},l(x){Ze(h.$$.fragment,x)},m(x,f){Je(h,x,f),d=!0},p(x,f){const e={};f&64&&(e.thumb=x[7]),h.$set(e)},i(x){d||(ie(h.$$.fragment,x),d=!0)},o(x){se(h.$$.fragment,x),d=!1},d(x){je(h,x)}}}function pi(p){let h,d,x,f,e;d=new fi({});let s=ce(p[6]),r=[];for(let o=0;o<s.length;o+=1)r[o]=_t(zt(p,s,o));const i=o=>se(r[o],1,1,()=>{r[o]=null});return{c(){h=$("span"),Qe(d.$$.fragment),x=le();for(let o=0;o<r.length;o+=1)r[o].c();f=de(),this.h()},l(o){h=ee(o,"SPAN",{class:!0});var n=te(h);Ze(d.$$.fragment,n),n.forEach(Q),x=fe(o);for(let u=0;u<r.length;u+=1)r[u].l(o);f=de(),this.h()},h(){re(h,"class","bg svelte-7s8b7u")},m(o,n){ne(o,h,n),Je(d,h,null),ne(o,x,n);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,n);ne(o,f,n),e=!0},p(o,n){if(n&64){s=ce(o[6]);let u;for(u=0;u<s.length;u+=1){const c=zt(o,s,u);r[u]?(r[u].p(c,n),ie(r[u],1)):(r[u]=_t(c),r[u].c(),ie(r[u],1),r[u].m(f.parentNode,f))}for(We(),u=s.length;u<r.length;u+=1)i(u);He()}},i(o){if(!e){ie(d.$$.fragment,o);for(let n=0;n<s.length;n+=1)ie(r[n]);e=!0}},o(o){se(d.$$.fragment,o),r=r.filter(Boolean);for(let n=0;n<r.length;n+=1)se(r[n]);e=!1},d(o){o&&(Q(h),Q(x),Q(f)),je(d),ze(r,o)}}}function mi(p){let h,d,x,f,e,s,r;function i(n){p[5](n)}let o={min:p[2],max:p[3],step:p[4],$$slots:{default:[pi,({thumbs:n})=>({6:n}),({thumbs:n})=>n?64:0]},$$scope:{ctx:p}};return p[0]!==void 0&&(o.value=p[0]),e=new ii({props:o}),ke.push(()=>Mt(e,"value",i)),{c(){h=$("div"),d=$("p"),x=ve(p[1]),f=le(),Qe(e.$$.fragment),this.h()},l(n){h=ee(n,"DIV",{class:!0});var u=te(h);d=ee(u,"P",{class:!0});var c=te(d);x=ge(c,p[1]),c.forEach(Q),f=fe(u),Ze(e.$$.fragment,u),u.forEach(Q),this.h()},h(){re(d,"class","label svelte-7s8b7u"),re(h,"class","c svelte-7s8b7u")},m(n,u){ne(n,h,u),q(h,d),q(d,x),q(h,f),Je(e,h,null),r=!0},p(n,[u]){(!r||u&2)&&lt(x,n[1]);const c={};u&4&&(c.min=n[2]),u&8&&(c.max=n[3]),u&16&&(c.step=n[4]),u&1088&&(c.$$scope={dirty:u,ctx:n}),!s&&u&1&&(s=!0,c.value=n[0],Pt(()=>s=!1)),e.$set(c)},i(n){r||(ie(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){n&&Q(h),je(e)}}}function xi(p,h,d){let{label:x}=h,{value:f}=h,{min:e}=h,{max:s}=h,{step:r}=h;function i(o){f=o,d(0,f)}return p.$$set=o=>{"label"in o&&d(1,x=o.label),"value"in o&&d(0,f=o.value),"min"in o&&d(2,e=o.min),"max"in o&&d(3,s=o.max),"step"in o&&d(4,r=o.step)},[f,x,e,s,r,i]}class yi extends Ne{constructor(h){super(),Ge(this,h,xi,mi,Ue,{label:1,value:0,min:2,max:3,step:4})}}function Si(p){let h,d,x,f;return{c(){h=$("button"),d=ve("Flick"),this.h()},l(e){h=ee(e,"BUTTON",{});var s=te(h);d=ge(s,"Flick"),s.forEach(Q),this.h()},h(){h.disabled=p[0]},m(e,s){ne(e,h,s),q(h,d),x||(f=[Le(h,"pointerdown",p[1]),Le(h,"pointerup",p[2])],x=!0)},p(e,[s]){s&1&&(h.disabled=e[0])},i:he,o:he,d(e){e&&Q(h),x=!1,sn(f)}}}function wi(p,h,d){let{value:x}=h,{disabled:f}=h;const e=nn();let s;function r(){let o=-1;s=setInterval(()=>{x>=1?o=-1:x<=0&&(o=1),d(3,x+=.01*o),d(3,x=+x.toFixed(2))},17)}function i(){clearInterval(s),e("release",x),d(3,x=0)}return p.$$set=o=>{"value"in o&&d(3,x=o.value),"disabled"in o&&d(0,f=o.disabled)},[f,r,i,x]}class Ci extends Ne{constructor(h){super(),Ge(this,h,wi,Si,Ue,{value:3,disabled:0})}}const Pi=[{state:"shoot",player:"player1",random:!0,power:.23,degrees:0}],Mi=[{state:"shoot",player:"player1"}],bi=[{state:"shoot",player:"player2",power:.3,degrees:184}],Ai=[{x:.5304521798504799,y:.5607950399638847,player:"player2"},{x:.43462246777163904,y:.8876611418047882,state:"shoot",player:"player1",power:.45,degrees:15}],ki=[{x:.5304521798504799,y:.5607950399638847,player:"player2"},{state:"position",player:"player1"}],Ei=[{x:.5304521798504799,y:.5607950399638847,player:"player2"},{state:"shoot",player:"player1",power:.15,degrees:-3}],Ti={open:Pi,opentry:Mi,fifteen:bi,opponent:Ai,opponenttry:ki,invalid:Ei};function Kt(p,h,d){const x=p.slice();return x[36]=h[d],x}function Xt(p,h,d){const x=p.slice();return x[39]=h[d],x}function Yt(p,h,d){const x=p.slice();x[42]=h[d];const f=x[18][x[42]];return x[43]=f,x}function Qt(p,h,d){const x=p.slice();return x[42]=h[d],x[47]=d,x}function Zt(p){let h;return{c(){h=$("div"),this.h()},l(d){h=ee(d,"DIV",{class:!0,style:!0}),te(h).forEach(Q),this.h()},h(){re(h,"class",Sn(p[42])+" svelte-1r309e6"),j(h,"--w",Math.floor(ue[p[42]]*p[0])+"px"),j(h,"--b",(ue[p[42]]-ue[p[17][p[47]+1]])/2*p[0]+"px")},m(d,x){ne(d,h,x)},p(d,x){x[0]&1&&j(h,"--w",Math.floor(ue[d[42]]*d[0])+"px"),x[0]&1&&j(h,"--b",(ue[d[42]]-ue[d[17][d[47]+1]])/2*d[0]+"px")},d(d){d&&Q(h)}}}function Jt(p){let h,d=p[43]+"",x;return{c(){h=$("span"),x=ve(d),this.h()},l(f){h=ee(f,"SPAN",{class:!0,style:!0});var e=te(h);x=ge(e,d),e.forEach(Q),this.h()},h(){re(h,"class","text-"+p[42]+" svelte-1r309e6"),j(h,"--w",Math.floor(p[0]/2-ue[p[42]]*p[0]/2)+"px"),j(h,"--d",ue[p[42]]*p[0]+"px")},m(f,e){ne(f,h,e),q(h,x)},p(f,e){e[0]&1&&j(h,"--w",Math.floor(f[0]/2-ue[f[42]]*f[0]/2)+"px"),e[0]&1&&j(h,"--d",ue[f[42]]*f[0]+"px")},d(f){f&&Q(h)}}}function jt(p){let h;return{c(){h=$("div"),this.h()},l(d){h=ee(d,"DIV",{class:!0,style:!0}),te(h).forEach(Q),this.h()},h(){re(h,"class","quadrant-line svelte-1r309e6"),j(h,"--w",(Ae-Re)*p[0]/2+"px"),j(h,"--x",Re*p[0]/2+"px"),j(h,"--angle",p[39]+"deg")},m(d,x){ne(d,h,x)},p(d,x){x[0]&1&&j(h,"--w",(Ae-Re)*d[0]/2+"px"),x[0]&1&&j(h,"--x",Re*d[0]/2+"px")},d(d){d&&Q(h)}}}function qt(p){let h;return{c(){h=$("div"),this.h()},l(d){h=ee(d,"DIV",{class:!0,style:!0}),te(h).forEach(Q),this.h()},h(){re(h,"class","peg svelte-1r309e6"),j(h,"--w",De*p[0]+"px"),j(h,"--x",((be-De)*p[0]+1)/2+"px"),j(h,"--angle",p[36]+"deg")},m(d,x){ne(d,h,x)},p(d,x){x[0]&1&&j(h,"--w",De*d[0]+"px"),x[0]&1&&j(h,"--x",((be-De)*d[0]+1)/2+"px")},d(d){d&&Q(h)}}}function Ii(p){let h,d,x,f;return{c(){h=$("button"),d=ve(p[14])},l(e){h=ee(e,"BUTTON",{});var s=te(h);d=ge(s,p[14]),s.forEach(Q)},m(e,s){ne(e,h,s),q(h,d),x||(f=Le(h,"click",p[22]),x=!0)},p(e,s){s[0]&16384&&lt(d,e[14])},i:he,o:he,d(e){e&&Q(h),x=!1,f()}}}function Di(p){let h,d,x;function f(s){p[25](s)}let e={disabled:p[9]};return p[5]!==void 0&&(e.value=p[5]),h=new Ci({props:e}),ke.push(()=>Mt(h,"value",f)),h.$on("release",p[21]),{c(){Qe(h.$$.fragment)},l(s){Ze(h.$$.fragment,s)},m(s,r){Je(h,s,r),x=!0},p(s,r){const i={};r[0]&512&&(i.disabled=s[9]),!d&&r[0]&32&&(d=!0,i.value=s[5],Pt(()=>d=!1)),h.$set(i)},i(s){x||(ie(h.$$.fragment,s),x=!0)},o(s){se(h.$$.fragment,s),x=!1},d(s){je(h,s)}}}function Ri(p){let h,d,x,f;return{c(){h=$("button"),d=ve("Replay"),this.h()},l(e){h=ee(e,"BUTTON",{});var s=te(h);d=ge(s,"Replay"),s.forEach(Q),this.h()},h(){h.disabled=p[10]},m(e,s){ne(e,h,s),q(h,d),x||(f=Le(h,"click",p[23]),x=!0)},p(e,s){s[0]&1024&&(h.disabled=e[10])},i:he,o:he,d(e){e&&Q(h),x=!1,f()}}}function $t(p){var s,r,i;let h,d,x;function f(o){p[26](o)}let e={label:p[6]==="shoot"?"aim":p[6],min:(s=p[19][p[6]])==null?void 0:s.min,max:(r=p[19][p[6]])==null?void 0:r.max,step:(i=p[19][p[6]])==null?void 0:i.step};return p[4]!==void 0&&(e.value=p[4]),h=new yi({props:e}),ke.push(()=>Mt(h,"value",f)),{c(){Qe(h.$$.fragment)},l(o){Ze(h.$$.fragment,o)},m(o,n){Je(h,o,n),x=!0},p(o,n){var c,t,l;const u={};n[0]&64&&(u.label=o[6]==="shoot"?"aim":o[6]),n[0]&64&&(u.min=(c=o[19][o[6]])==null?void 0:c.min),n[0]&64&&(u.max=(t=o[19][o[6]])==null?void 0:t.max),n[0]&64&&(u.step=(l=o[19][o[6]])==null?void 0:l.step),!d&&n[0]&16&&(d=!0,u.value=o[4],Pt(()=>d=!1)),h.$set(u)},i(o){x||(ie(h.$$.fragment,o),x=!0)},o(o){se(h.$$.fragment,o),x=!1},d(o){je(h,o)}}}function en(p){let h,d,x,f,e;return{c(){h=$("p"),d=ve("x: "),x=ve(p[7]),f=ve(", y: "),e=ve(p[8]),this.h()},l(s){h=ee(s,"P",{class:!0});var r=te(h);d=ge(r,"x: "),x=ge(r,p[7]),f=ge(r,", y: "),e=ge(r,p[8]),r.forEach(Q),this.h()},h(){re(h,"class","svelte-1r309e6")},m(s,r){ne(s,h,r),q(h,d),q(h,x),q(h,f),q(h,e)},p(s,r){r[0]&128&&lt(x,s[7]),r[0]&256&&lt(e,s[8])},d(s){s&&Q(h)}}}function Bi(p){let h,d,x,f,e,s,r,i,o,n,u,c=`${p[0]}px`,t=`${p[0]}px`,l,a,v,S,M,k,E,g,w,y,m,P,C,A,b,I=ce(p[17].slice(0,3)),R=[];for(let T=0;T<I.length;T+=1)R[T]=Zt(Qt(p,I,T));let B=ce(p[17]),H=[];for(let T=0;T<B.length;T+=1)H[T]=Jt(Yt(p,B,T));let N=ce(p[15]),G=[];for(let T=0;T<N.length;T+=1)G[T]=jt(Xt(p,N,T));let z=ce(p[16]),U=[];for(let T=0;T<z.length;T+=1)U[T]=qt(Kt(p,z,T));const _=[Ri,Di,Ii],X=[];function W(T,O){return T[11]?0:T[6]==="shoot"?1:2}E=W(p),g=X[E]=_[E](p);let V=!p[11]&&$t(p),F=p[1]&&en(p);return{c(){h=$("div"),d=$("div"),x=$("div"),f=le(),e=$("div"),s=le();for(let T=0;T<R.length;T+=1)R[T].c();r=le(),i=$("div"),o=le();for(let T=0;T<H.length;T+=1)H[T].c();n=le();for(let T=0;T<G.length;T+=1)G[T].c();u=le();for(let T=0;T<U.length;T+=1)U[T].c();l=le(),a=$("div"),S=le(),M=$("div"),k=$("div"),g.c(),w=le(),y=$("div"),V&&V.c(),m=le(),F&&F.c(),P=de(),this.h()},l(T){h=ee(T,"DIV",{class:!0});var O=te(h);d=ee(O,"DIV",{class:!0});var L=te(d);x=ee(L,"DIV",{class:!0,style:!0}),te(x).forEach(Q),f=fe(L),e=ee(L,"DIV",{class:!0,style:!0}),te(e).forEach(Q),s=fe(L);for(let K=0;K<R.length;K+=1)R[K].l(L);r=fe(L),i=ee(L,"DIV",{class:!0,style:!0}),te(i).forEach(Q),o=fe(L);for(let K=0;K<H.length;K+=1)H[K].l(L);n=fe(L);for(let K=0;K<G.length;K+=1)G[K].l(L);u=fe(L);for(let K=0;K<U.length;K+=1)U[K].l(L);L.forEach(Q),l=fe(O),a=ee(O,"DIV",{class:!0}),te(a).forEach(Q),O.forEach(Q),S=fe(T),M=ee(T,"DIV",{class:!0});var D=te(M);k=ee(D,"DIV",{class:!0});var Y=te(k);g.l(Y),Y.forEach(Q),w=fe(D),y=ee(D,"DIV",{class:!0});var J=te(y);V&&V.l(J),J.forEach(Q),D.forEach(Q),m=fe(T),F&&F.l(T),P=de(),this.h()},h(){re(x,"class","base svelte-1r309e6"),j(x,"--w",ft*p[0]+"px"),j(x,"--b",yt/2*p[0]+"px"),re(e,"class","surface svelte-1r309e6"),j(e,"--w",Ye*p[0]+"px"),re(i,"class","twenty svelte-1r309e6"),j(i,"--w",Math.floor(Fe*p[0])+"px"),re(d,"class","bg svelte-1r309e6"),j(d,"width",c),j(d,"height",t),re(a,"class","fg svelte-1r309e6"),re(h,"class",v="c "+p[13]+" svelte-1r309e6"),re(k,"class","top svelte-1r309e6"),re(y,"class","bottom svelte-1r309e6"),re(M,"class","ui svelte-1r309e6"),Dt(M,"visible",p[12]||!p[2])},m(T,O){ne(T,h,O),q(h,d),q(d,x),q(d,f),q(d,e),q(d,s);for(let L=0;L<R.length;L+=1)R[L]&&R[L].m(d,null);q(d,r),q(d,i),q(d,o);for(let L=0;L<H.length;L+=1)H[L]&&H[L].m(d,null);q(d,n);for(let L=0;L<G.length;L+=1)G[L]&&G[L].m(d,null);q(d,u);for(let L=0;L<U.length;L+=1)U[L]&&U[L].m(d,null);q(h,l),q(h,a),p[24](a),ne(T,S,O),ne(T,M,O),q(M,k),X[E].m(k,null),q(M,w),q(M,y),V&&V.m(y,null),ne(T,m,O),F&&F.m(T,O),ne(T,P,O),C=!0,A||(b=Le(a,"click",p[20]),A=!0)},p(T,O){if((!C||O[0]&1)&&j(x,"--w",ft*T[0]+"px"),(!C||O[0]&1)&&j(x,"--b",yt/2*T[0]+"px"),(!C||O[0]&1)&&j(e,"--w",Ye*T[0]+"px"),O[0]&131073){I=ce(T[17].slice(0,3));let D;for(D=0;D<I.length;D+=1){const Y=Qt(T,I,D);R[D]?R[D].p(Y,O):(R[D]=Zt(Y),R[D].c(),R[D].m(d,r))}for(;D<R.length;D+=1)R[D].d(1);R.length=I.length}if((!C||O[0]&1)&&j(i,"--w",Math.floor(Fe*T[0])+"px"),O[0]&393217){B=ce(T[17]);let D;for(D=0;D<B.length;D+=1){const Y=Yt(T,B,D);H[D]?H[D].p(Y,O):(H[D]=Jt(Y),H[D].c(),H[D].m(d,n))}for(;D<H.length;D+=1)H[D].d(1);H.length=B.length}if(O[0]&32769){N=ce(T[15]);let D;for(D=0;D<N.length;D+=1){const Y=Xt(T,N,D);G[D]?G[D].p(Y,O):(G[D]=jt(Y),G[D].c(),G[D].m(d,u))}for(;D<G.length;D+=1)G[D].d(1);G.length=N.length}if(O[0]&65537){z=ce(T[16]);let D;for(D=0;D<z.length;D+=1){const Y=Kt(T,z,D);U[D]?U[D].p(Y,O):(U[D]=qt(Y),U[D].c(),U[D].m(d,null))}for(;D<U.length;D+=1)U[D].d(1);U.length=z.length}O[0]&1&&c!==(c=`${T[0]}px`)&&j(d,"width",c),O[0]&1&&t!==(t=`${T[0]}px`)&&j(d,"height",t),(!C||O[0]&8192&&v!==(v="c "+T[13]+" svelte-1r309e6"))&&re(h,"class",v);let L=E;E=W(T),E===L?X[E].p(T,O):(We(),se(X[L],1,1,()=>{X[L]=null}),He(),g=X[E],g?g.p(T,O):(g=X[E]=_[E](T),g.c()),ie(g,1),g.m(k,null)),T[11]?V&&(We(),se(V,1,1,()=>{V=null}),He()):V?(V.p(T,O),O[0]&2048&&ie(V,1)):(V=$t(T),V.c(),ie(V,1),V.m(y,null)),(!C||O[0]&4100)&&Dt(M,"visible",T[12]||!T[2]),T[1]?F?F.p(T,O):(F=en(T),F.c(),F.m(P.parentNode,P)):F&&(F.d(1),F=null)},i(T){C||(ie(g),ie(V),C=!0)},o(T){se(g),se(V),C=!1},d(T){T&&(Q(h),Q(S),Q(M),Q(m),Q(P)),ze(R,T),ze(H,T),ze(G,T),ze(U,T),p[24](null),X[E].d(),V&&V.d(),F&&F.d(T),A=!1,b()}}}const tn=.25;function Fi(p,h,d){let x,f,{width:e}=h,{dev:s}=h,{tutorial:r}=h;const i=In(),o=[45,135,225,315],n=[15,60,105,150,195,240,285,330],u=["five","ten","fifteen","twenty"],c={five:"5",ten:"10",fifteen:"15",twenty:"20"},t={position:{value:[.5],min:.22,max:.78,step:.01},shoot:{value:[0],min:-90,max:90,step:1}};let l,a=0,v=0,S=t.position.value,M=.25,k="position",E,g,w,y,m,P;function C(_){s&&(d(7,a=_.offsetX/e),d(8,v=_.offsetY/e))}function A({scores:_,valid:X}){d(5,M=tn),r&&!y&&N(),d(9,g=!1),d(10,w=!1)}function b(){i.flickDisc()}function I(){k==="position"?i.positionDisc(S[0]*e):k==="shoot"&&(E=Math.round(S[0]),i.aimDisc({degrees:E,power:.25,visible:r.includes("try")}))}function R(){i.aimDisc({degrees:E,power:M,visible:r.includes("try")})}function B(){k==="position"&&(d(6,k="shoot"),d(4,S=t.shoot.value),d(5,M=tn),i.setState("shoot"))}function H(){i.removeDiscs(),N(r,1)}async function N(_,X=2e3){clearTimeout(P),i.removeDiscs(),d(11,y=!r.includes("try")),d(10,w=!0),d(12,m=!["regions","score"].includes(r));const W=Ti[r];if(W&&(W.forEach(i.addDisc),d(6,k=W[W.length-1].state)),k==="shoot"&&!y&&i.setIndicatorVisible(!0),y&&W){const V=W[W.length-1],F=V.random?Math.random()*3-1.5:0,T=V.degrees+F,O=V.random?Math.random()*.07-.035:0,L=V.power+O;console.log({d:T,p:L}),P=setTimeout(()=>{i.aimDisc({degrees:T,power:L}),i.flickDisc()},X)}await wn(),d(4,S=t[k].value)}yn(()=>{i.on("shotComplete",A)});function G(_){ke[_?"unshift":"push"](()=>{l=_,d(3,l)})}function z(_){M=_,d(5,M)}function U(_){S=_,d(4,S)}return p.$$set=_=>{"width"in _&&d(0,e=_.width),"dev"in _&&d(1,s=_.dev),"tutorial"in _&&d(2,r=_.tutorial)},p.$$.update=()=>{p.$$.dirty[0]&64&&d(14,x=k==="position"?"Place Disc":""),p.$$.dirty[0]&1&&d(7,a=0),p.$$.dirty[0]&1&&d(8,v=0),p.$$.dirty[0]&9&&e&&i.init({element:l,width:e}),p.$$.dirty[0]&17&&e&&I(),p.$$.dirty[0]&33&&e&&R(),p.$$.dirty[0]&5&&e&&N(),p.$$.dirty[0]&4&&d(13,f=r?`tutorial tutorial-${r}`:"")},[e,s,r,l,S,M,k,a,v,g,w,y,m,f,x,o,n,u,c,t,C,b,B,H,G,z,U]}class Hi extends Ne{constructor(h){super(),Ge(this,h,Fi,Bi,Ue,{width:0,dev:1,tutorial:2},null,[-1,-1])}}export{Hi as C,bt as a,Wi as b,gt as c,ce as e,Cn as g};
