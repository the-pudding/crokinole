import{a5 as mn,a6 as pn,a7 as sn,a4 as xn,a3 as yn,a as Ne,m as de,g as te,f as X,Z as He,k as lt,U as me,_ as bt,w as Ie,O as dt,e as ie,c as se,b as re,a8 as Ue,a9 as At,P as ht,Q as vt,R as gt,n as Pe,a0 as Le,r as rn,t as Se,l as ce,d as we,o as ue,u as ae,h as $,j as ct,aa as kt,T as _e,v as j,a1 as Bt,q as Sn,ab as wn,y as Cn}from"./scheduler.lxN5xj0T.js";import{S as ze,i as Ge,g as Ee,t as ne,c as Te,a as q,f as Et,b as Ze,d as Je,m as je,e as qe}from"./index.x4oV_jfq.js";import{d as mt,w as Be,r as Qe}from"./index.Y-8zMvr6.js";function he(m){return(m==null?void 0:m.length)!==void 0?m:Array.from(m)}function Tt(m,h){const d={},x={},f={$$scope:1};let e=m.length;for(;e--;){const s=m[e],r=h[e];if(r){for(const n in s)n in r||(x[n]=1);for(const n in r)f[n]||(d[n]=r[n],f[n]=1);m[e]=r}else for(const n in s)f[n]=1}for(const s in x)s in d||(d[s]=void 0);return d}function Wi(m){return typeof m=="object"&&m!==null?m:{}}var xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pn(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var an={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(m,h){(function(x,f){m.exports=f()})(xt,function(){return function(d){var x={};function f(e){if(x[e])return x[e].exports;var s=x[e]={i:e,l:!1,exports:{}};return d[e].call(s.exports,s,s.exports,f),s.l=!0,s.exports}return f.m=d,f.c=x,f.d=function(e,s,r){f.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:r})},f.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.t=function(e,s){if(s&1&&(e=f(e)),s&8||s&4&&typeof e=="object"&&e&&e.__esModule)return e;var r=Object.create(null);if(f.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),s&2&&typeof e!="string")for(var n in e)f.d(r,n,(function(o){return e[o]}).bind(null,n));return r},f.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(s,"a",s),s},f.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},f.p="",f(f.s=20)}([function(d,x){var f={};d.exports=f,function(){f._baseDelta=1e3/60,f._nextId=0,f._seed=0,f._nowStartTime=+new Date,f._warnedOnce={},f._decomp=null,f.extend=function(s,r){var n,o;typeof r=="boolean"?(n=2,o=r):(n=1,o=!0);for(var i=n;i<arguments.length;i++){var u=arguments[i];if(u)for(var c in u)o&&u[c]&&u[c].constructor===Object&&(!s[c]||s[c].constructor===Object)?(s[c]=s[c]||{},f.extend(s[c],o,u[c])):s[c]=u[c]}return s},f.clone=function(s,r){return f.extend({},r,s)},f.keys=function(s){if(Object.keys)return Object.keys(s);var r=[];for(var n in s)r.push(n);return r},f.values=function(s){var r=[];if(Object.keys){for(var n=Object.keys(s),o=0;o<n.length;o++)r.push(s[n[o]]);return r}for(var i in s)r.push(s[i]);return r},f.get=function(s,r,n,o){r=r.split(".").slice(n,o);for(var i=0;i<r.length;i+=1)s=s[r[i]];return s},f.set=function(s,r,n,o,i){var u=r.split(".").slice(o,i);return f.get(s,r,0,-1)[u[u.length-1]]=n,n},f.shuffle=function(s){for(var r=s.length-1;r>0;r--){var n=Math.floor(f.random()*(r+1)),o=s[r];s[r]=s[n],s[n]=o}return s},f.choose=function(s){return s[Math.floor(f.random()*s.length)]},f.isElement=function(s){return typeof HTMLElement<"u"?s instanceof HTMLElement:!!(s&&s.nodeType&&s.nodeName)},f.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"},f.isFunction=function(s){return typeof s=="function"},f.isPlainObject=function(s){return typeof s=="object"&&s.constructor===Object},f.isString=function(s){return toString.call(s)==="[object String]"},f.clamp=function(s,r,n){return s<r?r:s>n?n:s},f.sign=function(s){return s<0?-1:1},f.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-f._nowStartTime},f.random=function(s,r){return s=typeof s<"u"?s:0,r=typeof r<"u"?r:1,s+e()*(r-s)};var e=function(){return f._seed=(f._seed*9301+49297)%233280,f._seed/233280};f.colorToNumber=function(s){return s=s.replace("#",""),s.length==3&&(s=s.charAt(0)+s.charAt(0)+s.charAt(1)+s.charAt(1)+s.charAt(2)+s.charAt(2)),parseInt(s,16)},f.logLevel=1,f.log=function(){console&&f.logLevel>0&&f.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.info=function(){console&&f.logLevel>0&&f.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.warn=function(){console&&f.logLevel>0&&f.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.warnOnce=function(){var s=Array.prototype.slice.call(arguments).join(" ");f._warnedOnce[s]||(f.warn(s),f._warnedOnce[s]=!0)},f.deprecated=function(s,r,n){s[r]=f.chain(function(){f.warnOnce("ðŸ”… deprecated ðŸ”…",n)},s[r])},f.nextId=function(){return f._nextId++},f.indexOf=function(s,r){if(s.indexOf)return s.indexOf(r);for(var n=0;n<s.length;n++)if(s[n]===r)return n;return-1},f.map=function(s,r){if(s.map)return s.map(r);for(var n=[],o=0;o<s.length;o+=1)n.push(r(s[o]));return n},f.topologicalSort=function(s){var r=[],n=[],o=[];for(var i in s)!n[i]&&!o[i]&&f._topologicalSort(i,n,o,s,r);return r},f._topologicalSort=function(s,r,n,o,i){var u=o[s]||[];n[s]=!0;for(var c=0;c<u.length;c+=1){var t=u[c];n[t]||r[t]||f._topologicalSort(t,r,n,o,i)}n[s]=!1,r[s]=!0,i.push(s)},f.chain=function(){for(var s=[],r=0;r<arguments.length;r+=1){var n=arguments[r];n._chained?s.push.apply(s,n._chained):s.push(n)}var o=function(){for(var i,u=new Array(arguments.length),c=0,t=arguments.length;c<t;c++)u[c]=arguments[c];for(c=0;c<s.length;c+=1){var l=s[c].apply(i,u);typeof l<"u"&&(i=l)}return i};return o._chained=s,o},f.chainPathBefore=function(s,r,n){return f.set(s,r,f.chain(n,f.get(s,r)))},f.chainPathAfter=function(s,r,n){return f.set(s,r,f.chain(f.get(s,r),n))},f.setDecomp=function(s){f._decomp=s},f.getDecomp=function(){var s=f._decomp;try{!s&&typeof window<"u"&&(s=window.decomp),!s&&typeof xt<"u"&&(s=xt.decomp)}catch{s=null}return s}}()},function(d,x){var f={};d.exports=f,function(){f.create=function(e){var s={min:{x:0,y:0},max:{x:0,y:0}};return e&&f.update(s,e),s},f.update=function(e,s,r){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var n=0;n<s.length;n++){var o=s[n];o.x>e.max.x&&(e.max.x=o.x),o.x<e.min.x&&(e.min.x=o.x),o.y>e.max.y&&(e.max.y=o.y),o.y<e.min.y&&(e.min.y=o.y)}r&&(r.x>0?e.max.x+=r.x:e.min.x+=r.x,r.y>0?e.max.y+=r.y:e.min.y+=r.y)},f.contains=function(e,s){return s.x>=e.min.x&&s.x<=e.max.x&&s.y>=e.min.y&&s.y<=e.max.y},f.overlaps=function(e,s){return e.min.x<=s.max.x&&e.max.x>=s.min.x&&e.max.y>=s.min.y&&e.min.y<=s.max.y},f.translate=function(e,s){e.min.x+=s.x,e.max.x+=s.x,e.min.y+=s.y,e.max.y+=s.y},f.shift=function(e,s){var r=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=s.x,e.max.x=s.x+r,e.min.y=s.y,e.max.y=s.y+n}}()},function(d,x){var f={};d.exports=f,function(){f.create=function(e,s){return{x:e||0,y:s||0}},f.clone=function(e){return{x:e.x,y:e.y}},f.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},f.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},f.rotate=function(e,s,r){var n=Math.cos(s),o=Math.sin(s);r||(r={});var i=e.x*n-e.y*o;return r.y=e.x*o+e.y*n,r.x=i,r},f.rotateAbout=function(e,s,r,n){var o=Math.cos(s),i=Math.sin(s);n||(n={});var u=r.x+((e.x-r.x)*o-(e.y-r.y)*i);return n.y=r.y+((e.x-r.x)*i+(e.y-r.y)*o),n.x=u,n},f.normalise=function(e){var s=f.magnitude(e);return s===0?{x:0,y:0}:{x:e.x/s,y:e.y/s}},f.dot=function(e,s){return e.x*s.x+e.y*s.y},f.cross=function(e,s){return e.x*s.y-e.y*s.x},f.cross3=function(e,s,r){return(s.x-e.x)*(r.y-e.y)-(s.y-e.y)*(r.x-e.x)},f.add=function(e,s,r){return r||(r={}),r.x=e.x+s.x,r.y=e.y+s.y,r},f.sub=function(e,s,r){return r||(r={}),r.x=e.x-s.x,r.y=e.y-s.y,r},f.mult=function(e,s){return{x:e.x*s,y:e.y*s}},f.div=function(e,s){return{x:e.x/s,y:e.y/s}},f.perp=function(e,s){return s=s===!0?-1:1,{x:s*-e.y,y:s*e.x}},f.neg=function(e){return{x:-e.x,y:-e.y}},f.angle=function(e,s){return Math.atan2(s.y-e.y,s.x-e.x)},f._temp=[f.create(),f.create(),f.create(),f.create(),f.create(),f.create()]}()},function(d,x,f){var e={};d.exports=e;var s=f(2),r=f(0);(function(){e.create=function(n,o){for(var i=[],u=0;u<n.length;u++){var c=n[u],t={x:c.x,y:c.y,index:u,body:o,isInternal:!1};i.push(t)}return i},e.fromPath=function(n,o){var i=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return n.replace(i,function(c,t,l){u.push({x:parseFloat(t),y:parseFloat(l)})}),e.create(u,o)},e.centre=function(n){for(var o=e.area(n,!0),i={x:0,y:0},u,c,t,l=0;l<n.length;l++)t=(l+1)%n.length,u=s.cross(n[l],n[t]),c=s.mult(s.add(n[l],n[t]),u),i=s.add(i,c);return s.div(i,6*o)},e.mean=function(n){for(var o={x:0,y:0},i=0;i<n.length;i++)o.x+=n[i].x,o.y+=n[i].y;return s.div(o,n.length)},e.area=function(n,o){for(var i=0,u=n.length-1,c=0;c<n.length;c++)i+=(n[u].x-n[c].x)*(n[u].y+n[c].y),u=c;return o?i/2:Math.abs(i)/2},e.inertia=function(n,o){for(var i=0,u=0,c=n,t,l,a=0;a<c.length;a++)l=(a+1)%c.length,t=Math.abs(s.cross(c[l],c[a])),i+=t*(s.dot(c[l],c[l])+s.dot(c[l],c[a])+s.dot(c[a],c[a])),u+=t;return o/6*(i/u)},e.translate=function(n,o,i){i=typeof i<"u"?i:1;var u=n.length,c=o.x*i,t=o.y*i,l;for(l=0;l<u;l++)n[l].x+=c,n[l].y+=t;return n},e.rotate=function(n,o,i){if(o!==0){var u=Math.cos(o),c=Math.sin(o),t=i.x,l=i.y,a=n.length,v,S,b,k;for(k=0;k<a;k++)v=n[k],S=v.x-t,b=v.y-l,v.x=t+(S*u-b*c),v.y=l+(S*c+b*u);return n}},e.contains=function(n,o){for(var i=o.x,u=o.y,c=n.length,t=n[c-1],l,a=0;a<c;a++){if(l=n[a],(i-t.x)*(l.y-t.y)+(u-t.y)*(t.x-l.x)>0)return!1;t=l}return!0},e.scale=function(n,o,i,u){if(o===1&&i===1)return n;u=u||e.centre(n);for(var c,t,l=0;l<n.length;l++)c=n[l],t=s.sub(c,u),n[l].x=u.x+t.x*o,n[l].y=u.y+t.y*i;return n},e.chamfer=function(n,o,i,u,c){typeof o=="number"?o=[o]:o=o||[8],i=typeof i<"u"?i:-1,u=u||2,c=c||14;for(var t=[],l=0;l<n.length;l++){var a=n[l-1>=0?l-1:n.length-1],v=n[l],S=n[(l+1)%n.length],b=o[l<o.length?l:o.length-1];if(b===0){t.push(v);continue}var k=s.normalise({x:v.y-a.y,y:a.x-v.x}),E=s.normalise({x:S.y-v.y,y:v.x-S.x}),g=Math.sqrt(2*Math.pow(b,2)),w=s.mult(r.clone(k),b),y=s.normalise(s.mult(s.add(k,E),.5)),p=s.sub(v,s.mult(y,g)),P=i;i===-1&&(P=Math.pow(b,.32)*1.75),P=r.clamp(P,u,c),P%2===1&&(P+=1);for(var C=Math.acos(s.dot(k,E)),A=C/P,M=0;M<P;M++)t.push(s.add(s.rotate(w,A*M),p))}return t},e.clockwiseSort=function(n){var o=e.mean(n);return n.sort(function(i,u){return s.angle(o,i)-s.angle(o,u)}),n},e.isConvex=function(n){var o=0,i=n.length,u,c,t,l;if(i<3)return null;for(u=0;u<i;u++)if(c=(u+1)%i,t=(u+2)%i,l=(n[c].x-n[u].x)*(n[t].y-n[c].y),l-=(n[c].y-n[u].y)*(n[t].x-n[c].x),l<0?o|=1:l>0&&(o|=2),o===3)return!1;return o!==0?!0:null},e.hull=function(n){var o=[],i=[],u,c;for(n=n.slice(0),n.sort(function(t,l){var a=t.x-l.x;return a!==0?a:t.y-l.y}),c=0;c<n.length;c+=1){for(u=n[c];i.length>=2&&s.cross3(i[i.length-2],i[i.length-1],u)<=0;)i.pop();i.push(u)}for(c=n.length-1;c>=0;c-=1){for(u=n[c];o.length>=2&&s.cross3(o[o.length-2],o[o.length-1],u)<=0;)o.pop();o.push(u)}return o.pop(),i.pop(),o.concat(i)}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(2),n=f(7),o=f(0),i=f(1),u=f(11);(function(){e._timeCorrection=!0,e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e._baseDelta=1e3/60,e.create=function(t){var l={id:o.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:s.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},a=o.extend(l,t);return c(a,t),a},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var c=function(t,l){l=l||{},e.set(t,{bounds:t.bounds||i.create(t.vertices),positionPrev:t.positionPrev||r.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),s.rotate(t.vertices,t.angle,t.position),u.rotate(t.axes,t.angle),i.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:l.axes||t.axes,area:l.area||t.area,mass:l.mass||t.mass,inertia:l.inertia||t.inertia});var a=t.isStatic?"#14151f":o.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=t.isStatic?"#555":"#ccc",S=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||a,t.render.strokeStyle=t.render.strokeStyle||v,t.render.lineWidth=t.render.lineWidth||S,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,l,a){var v;typeof l=="string"&&(v=l,l={},l[v]=a);for(v in l)if(Object.prototype.hasOwnProperty.call(l,v))switch(a=l[v],v){case"isStatic":e.setStatic(t,a);break;case"isSleeping":n.set(t,a);break;case"mass":e.setMass(t,a);break;case"density":e.setDensity(t,a);break;case"inertia":e.setInertia(t,a);break;case"vertices":e.setVertices(t,a);break;case"position":e.setPosition(t,a);break;case"angle":e.setAngle(t,a);break;case"velocity":e.setVelocity(t,a);break;case"angularVelocity":e.setAngularVelocity(t,a);break;case"speed":e.setSpeed(t,a);break;case"angularSpeed":e.setAngularSpeed(t,a);break;case"parts":e.setParts(t,a);break;case"centre":e.setCentre(t,a);break;default:t[v]=a}},e.setStatic=function(t,l){for(var a=0;a<t.parts.length;a++){var v=t.parts[a];l?(v.isStatic||(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia}),v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null),v.isStatic=l}},e.setMass=function(t,l){var a=t.inertia/(t.mass/6);t.inertia=a*(l/6),t.inverseInertia=1/t.inertia,t.mass=l,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,l){e.setMass(t,l*t.area),t.density=l},e.setInertia=function(t,l){t.inertia=l,t.inverseInertia=1/t.inertia},e.setVertices=function(t,l){l[0].body===t?t.vertices=l:t.vertices=s.create(l,t),t.axes=u.fromVertices(t.vertices),t.area=s.area(t.vertices),e.setMass(t,t.density*t.area);var a=s.centre(t.vertices);s.translate(t.vertices,a,-1),e.setInertia(t,e._inertiaScale*s.inertia(t.vertices,t.mass)),s.translate(t.vertices,t.position),i.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,l,a){var v;for(l=l.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,v=0;v<l.length;v++){var S=l[v];S!==t&&(S.parent=t,t.parts.push(S))}if(t.parts.length!==1){if(a=typeof a<"u"?a:!0,a){var b=[];for(v=0;v<l.length;v++)b=b.concat(l[v].vertices);s.clockwiseSort(b);var k=s.hull(b),E=s.centre(k);e.setVertices(t,k),s.translate(t.vertices,E)}var g=e._totalProperties(t);t.area=g.area,t.parent=t,t.position.x=g.centre.x,t.position.y=g.centre.y,t.positionPrev.x=g.centre.x,t.positionPrev.y=g.centre.y,e.setMass(t,g.mass),e.setInertia(t,g.inertia),e.setPosition(t,g.centre)}},e.setCentre=function(t,l,a){a?(t.positionPrev.x+=l.x,t.positionPrev.y+=l.y,t.position.x+=l.x,t.position.y+=l.y):(t.positionPrev.x=l.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=l.y-(t.position.y-t.positionPrev.y),t.position.x=l.x,t.position.y=l.y)},e.setPosition=function(t,l,a){var v=r.sub(l,t.position);a?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=v.x,t.velocity.y=v.y,t.speed=r.magnitude(v)):(t.positionPrev.x+=v.x,t.positionPrev.y+=v.y);for(var S=0;S<t.parts.length;S++){var b=t.parts[S];b.position.x+=v.x,b.position.y+=v.y,s.translate(b.vertices,v),i.update(b.bounds,b.vertices,t.velocity)}},e.setAngle=function(t,l,a){var v=l-t.angle;a?(t.anglePrev=t.angle,t.angularVelocity=v,t.angularSpeed=Math.abs(v)):t.anglePrev+=v;for(var S=0;S<t.parts.length;S++){var b=t.parts[S];b.angle+=v,s.rotate(b.vertices,v,t.position),u.rotate(b.axes,v),i.update(b.bounds,b.vertices,t.velocity),S>0&&r.rotateAbout(b.position,v,t.position,b.position)}},e.setVelocity=function(t,l){var a=t.deltaTime/e._baseDelta;t.positionPrev.x=t.position.x-l.x*a,t.positionPrev.y=t.position.y-l.y*a,t.velocity.x=(t.position.x-t.positionPrev.x)/a,t.velocity.y=(t.position.y-t.positionPrev.y)/a,t.speed=r.magnitude(t.velocity)},e.getVelocity=function(t){var l=e._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*l,y:(t.position.y-t.positionPrev.y)*l}},e.getSpeed=function(t){return r.magnitude(e.getVelocity(t))},e.setSpeed=function(t,l){e.setVelocity(t,r.mult(r.normalise(e.getVelocity(t)),l))},e.setAngularVelocity=function(t,l){var a=t.deltaTime/e._baseDelta;t.anglePrev=t.angle-l*a,t.angularVelocity=(t.angle-t.anglePrev)/a,t.angularSpeed=Math.abs(t.angularVelocity)},e.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*e._baseDelta/t.deltaTime},e.getAngularSpeed=function(t){return Math.abs(e.getAngularVelocity(t))},e.setAngularSpeed=function(t,l){e.setAngularVelocity(t,o.sign(e.getAngularVelocity(t))*l)},e.translate=function(t,l,a){e.setPosition(t,r.add(t.position,l),a)},e.rotate=function(t,l,a,v){if(!a)e.setAngle(t,t.angle+l,v);else{var S=Math.cos(l),b=Math.sin(l),k=t.position.x-a.x,E=t.position.y-a.y;e.setPosition(t,{x:a.x+(k*S-E*b),y:a.y+(k*b+E*S)},v),e.setAngle(t,t.angle+l,v)}},e.scale=function(t,l,a,v){var S=0,b=0;v=v||t.position;for(var k=0;k<t.parts.length;k++){var E=t.parts[k];s.scale(E.vertices,l,a,v),E.axes=u.fromVertices(E.vertices),E.area=s.area(E.vertices),e.setMass(E,t.density*E.area),s.translate(E.vertices,{x:-E.position.x,y:-E.position.y}),e.setInertia(E,e._inertiaScale*s.inertia(E.vertices,E.mass)),s.translate(E.vertices,{x:E.position.x,y:E.position.y}),k>0&&(S+=E.area,b+=E.inertia),E.position.x=v.x+(E.position.x-v.x)*l,E.position.y=v.y+(E.position.y-v.y)*a,i.update(E.bounds,E.vertices,t.velocity)}t.parts.length>1&&(t.area=S,t.isStatic||(e.setMass(t,t.density*S),e.setInertia(t,b))),t.circleRadius&&(l===a?t.circleRadius*=l:t.circleRadius=null)},e.update=function(t,l){l=(typeof l<"u"?l:1e3/60)*t.timeScale;var a=l*l,v=e._timeCorrection?l/(t.deltaTime||l):1,S=1-t.frictionAir*(l/o._baseDelta),b=(t.position.x-t.positionPrev.x)*v,k=(t.position.y-t.positionPrev.y)*v;t.velocity.x=b*S+t.force.x/t.mass*a,t.velocity.y=k*S+t.force.y/t.mass*a,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=l,t.angularVelocity=(t.angle-t.anglePrev)*S*v+t.torque/t.inertia*a,t.anglePrev=t.angle,t.angle+=t.angularVelocity;for(var E=0;E<t.parts.length;E++){var g=t.parts[E];s.translate(g.vertices,t.velocity),E>0&&(g.position.x+=t.velocity.x,g.position.y+=t.velocity.y),t.angularVelocity!==0&&(s.rotate(g.vertices,t.angularVelocity,t.position),u.rotate(g.axes,t.angularVelocity),E>0&&r.rotateAbout(g.position,t.angularVelocity,t.position,g.position)),i.update(g.bounds,g.vertices,t.velocity)}},e.updateVelocities=function(t){var l=e._baseDelta/t.deltaTime,a=t.velocity;a.x=(t.position.x-t.positionPrev.x)*l,a.y=(t.position.y-t.positionPrev.y)*l,t.speed=Math.sqrt(a.x*a.x+a.y*a.y),t.angularVelocity=(t.angle-t.anglePrev)*l,t.angularSpeed=Math.abs(t.angularVelocity)},e.applyForce=function(t,l,a){var v={x:l.x-t.position.x,y:l.y-t.position.y};t.force.x+=a.x,t.force.y+=a.y,t.torque+=v.x*a.y-v.y*a.x},e._totalProperties=function(t){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},a=t.parts.length===1?0:1;a<t.parts.length;a++){var v=t.parts[a],S=v.mass!==1/0?v.mass:1;l.mass+=S,l.area+=v.area,l.inertia+=v.inertia,l.centre=r.add(l.centre,r.mult(v.position,S))}return l.centre=r.div(l.centre,l.mass),l}})()},function(d,x,f){var e={};d.exports=e;var s=f(0);(function(){e.on=function(r,n,o){for(var i=n.split(" "),u,c=0;c<i.length;c++)u=i[c],r.events=r.events||{},r.events[u]=r.events[u]||[],r.events[u].push(o);return o},e.off=function(r,n,o){if(!n){r.events={};return}typeof n=="function"&&(o=n,n=s.keys(r.events).join(" "));for(var i=n.split(" "),u=0;u<i.length;u++){var c=r.events[i[u]],t=[];if(o&&c)for(var l=0;l<c.length;l++)c[l]!==o&&t.push(c[l]);r.events[i[u]]=t}},e.trigger=function(r,n,o){var i,u,c,t,l=r.events;if(l&&s.keys(l).length>0){o||(o={}),i=n.split(" ");for(var a=0;a<i.length;a++)if(u=i[a],c=l[u],c){t=s.clone(o,!1),t.name=u,t.source=r;for(var v=0;v<c.length;v++)c[v].apply(r,[t])}}}})()},function(d,x,f){var e={};d.exports=e;var s=f(5),r=f(0),n=f(1),o=f(4);(function(){e.create=function(i){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},i)},e.setModified=function(i,u,c,t){if(i.isModified=u,u&&i.cache&&(i.cache.allBodies=null,i.cache.allConstraints=null,i.cache.allComposites=null),c&&i.parent&&e.setModified(i.parent,u,c,t),t)for(var l=0;l<i.composites.length;l++){var a=i.composites[l];e.setModified(a,u,c,t)}},e.add=function(i,u){var c=[].concat(u);s.trigger(i,"beforeAdd",{object:u});for(var t=0;t<c.length;t++){var l=c[t];switch(l.type){case"body":if(l.parent!==l){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(i,l);break;case"constraint":e.addConstraint(i,l);break;case"composite":e.addComposite(i,l);break;case"mouseConstraint":e.addConstraint(i,l.constraint);break}}return s.trigger(i,"afterAdd",{object:u}),i},e.remove=function(i,u,c){var t=[].concat(u);s.trigger(i,"beforeRemove",{object:u});for(var l=0;l<t.length;l++){var a=t[l];switch(a.type){case"body":e.removeBody(i,a,c);break;case"constraint":e.removeConstraint(i,a,c);break;case"composite":e.removeComposite(i,a,c);break;case"mouseConstraint":e.removeConstraint(i,a.constraint);break}}return s.trigger(i,"afterRemove",{object:u}),i},e.addComposite=function(i,u){return i.composites.push(u),u.parent=i,e.setModified(i,!0,!0,!1),i},e.removeComposite=function(i,u,c){var t=r.indexOf(i.composites,u);if(t!==-1){var l=e.allBodies(u);e.removeCompositeAt(i,t);for(var a=0;a<l.length;a++)l[a].sleepCounter=0}if(c)for(var a=0;a<i.composites.length;a++)e.removeComposite(i.composites[a],u,!0);return i},e.removeCompositeAt=function(i,u){return i.composites.splice(u,1),e.setModified(i,!0,!0,!1),i},e.addBody=function(i,u){return i.bodies.push(u),e.setModified(i,!0,!0,!1),i},e.removeBody=function(i,u,c){var t=r.indexOf(i.bodies,u);if(t!==-1&&(e.removeBodyAt(i,t),u.sleepCounter=0),c)for(var l=0;l<i.composites.length;l++)e.removeBody(i.composites[l],u,!0);return i},e.removeBodyAt=function(i,u){return i.bodies.splice(u,1),e.setModified(i,!0,!0,!1),i},e.addConstraint=function(i,u){return i.constraints.push(u),e.setModified(i,!0,!0,!1),i},e.removeConstraint=function(i,u,c){var t=r.indexOf(i.constraints,u);if(t!==-1&&e.removeConstraintAt(i,t),c)for(var l=0;l<i.composites.length;l++)e.removeConstraint(i.composites[l],u,!0);return i},e.removeConstraintAt=function(i,u){return i.constraints.splice(u,1),e.setModified(i,!0,!0,!1),i},e.clear=function(i,u,c){if(c)for(var t=0;t<i.composites.length;t++)e.clear(i.composites[t],u,!0);return u?i.bodies=i.bodies.filter(function(l){return l.isStatic}):i.bodies.length=0,i.constraints.length=0,i.composites.length=0,e.setModified(i,!0,!0,!1),i},e.allBodies=function(i){if(i.cache&&i.cache.allBodies)return i.cache.allBodies;for(var u=[].concat(i.bodies),c=0;c<i.composites.length;c++)u=u.concat(e.allBodies(i.composites[c]));return i.cache&&(i.cache.allBodies=u),u},e.allConstraints=function(i){if(i.cache&&i.cache.allConstraints)return i.cache.allConstraints;for(var u=[].concat(i.constraints),c=0;c<i.composites.length;c++)u=u.concat(e.allConstraints(i.composites[c]));return i.cache&&(i.cache.allConstraints=u),u},e.allComposites=function(i){if(i.cache&&i.cache.allComposites)return i.cache.allComposites;for(var u=[].concat(i.composites),c=0;c<i.composites.length;c++)u=u.concat(e.allComposites(i.composites[c]));return i.cache&&(i.cache.allComposites=u),u},e.get=function(i,u,c){var t,l;switch(c){case"body":t=e.allBodies(i);break;case"constraint":t=e.allConstraints(i);break;case"composite":t=e.allComposites(i).concat(i);break}return t?(l=t.filter(function(a){return a.id.toString()===u.toString()}),l.length===0?null:l[0]):null},e.move=function(i,u,c){return e.remove(i,u),e.add(c,u),i},e.rebase=function(i){for(var u=e.allBodies(i).concat(e.allConstraints(i)).concat(e.allComposites(i)),c=0;c<u.length;c++)u[c].id=r.nextId();return i},e.translate=function(i,u,c){for(var t=c?e.allBodies(i):i.bodies,l=0;l<t.length;l++)o.translate(t[l],u);return i},e.rotate=function(i,u,c,t){for(var l=Math.cos(u),a=Math.sin(u),v=t?e.allBodies(i):i.bodies,S=0;S<v.length;S++){var b=v[S],k=b.position.x-c.x,E=b.position.y-c.y;o.setPosition(b,{x:c.x+(k*l-E*a),y:c.y+(k*a+E*l)}),o.rotate(b,u)}return i},e.scale=function(i,u,c,t,l){for(var a=l?e.allBodies(i):i.bodies,v=0;v<a.length;v++){var S=a[v],b=S.position.x-t.x,k=S.position.y-t.y;o.setPosition(S,{x:t.x+b*u,y:t.y+k*c}),o.scale(S,u,c)}return i},e.bounds=function(i){for(var u=e.allBodies(i),c=[],t=0;t<u.length;t+=1){var l=u[t];c.push(l.bounds.min,l.bounds.max)}return n.create(c)}})()},function(d,x,f){var e={};d.exports=e;var s=f(4),r=f(5),n=f(0);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(o,i){for(var u=i/n._baseDelta,c=e._motionSleepThreshold,t=0;t<o.length;t++){var l=o[t],a=s.getSpeed(l),v=s.getAngularSpeed(l),S=a*a+v*v;if(l.force.x!==0||l.force.y!==0){e.set(l,!1);continue}var b=Math.min(l.motion,S),k=Math.max(l.motion,S);l.motion=e._minBias*b+(1-e._minBias)*k,l.sleepThreshold>0&&l.motion<c?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold/u&&e.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},e.afterCollisions=function(o){for(var i=e._motionSleepThreshold,u=0;u<o.length;u++){var c=o[u];if(c.isActive){var t=c.collision,l=t.bodyA.parent,a=t.bodyB.parent;if(!(l.isSleeping&&a.isSleeping||l.isStatic||a.isStatic)&&(l.isSleeping||a.isSleeping)){var v=l.isSleeping&&!l.isStatic?l:a,S=v===l?a:l;!v.isStatic&&S.motion>i&&e.set(v,!1)}}}},e.set=function(o,i){var u=o.isSleeping;i?(o.isSleeping=!0,o.sleepCounter=o.sleepThreshold,o.positionImpulse.x=0,o.positionImpulse.y=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.speed=0,o.angularSpeed=0,o.motion=0,u||r.trigger(o,"sleepStart")):(o.isSleeping=!1,o.sleepCounter=0,u&&r.trigger(o,"sleepEnd"))}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(9);(function(){var n=[],o={overlap:0,axis:null},i={overlap:0,axis:null};e.create=function(u,c){return{pair:null,collided:!1,bodyA:u,bodyB:c,parentA:u.parent,parentB:c.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},e.collides=function(u,c,t){if(e._overlapAxes(o,u.vertices,c.vertices,u.axes),o.overlap<=0||(e._overlapAxes(i,c.vertices,u.vertices,c.axes),i.overlap<=0))return null;var l=t&&t.table[r.id(u,c)],a;l?a=l.collision:(a=e.create(u,c),a.collided=!0,a.bodyA=u.id<c.id?u:c,a.bodyB=u.id<c.id?c:u,a.parentA=a.bodyA.parent,a.parentB=a.bodyB.parent),u=a.bodyA,c=a.bodyB;var v;o.overlap<i.overlap?v=o:v=i;var S=a.normal,b=a.tangent,k=a.penetration,E=a.supports,g=v.overlap,w=v.axis,y=w.x,p=w.y,P=c.position.x-u.position.x,C=c.position.y-u.position.y;y*P+p*C>=0&&(y=-y,p=-p),S.x=y,S.y=p,b.x=-p,b.y=y,k.x=y*g,k.y=p*g,a.depth=g;var A=e._findSupports(u,c,S,1),M=0;if(s.contains(u.vertices,A[0])&&(E[M++]=A[0]),s.contains(u.vertices,A[1])&&(E[M++]=A[1]),M<2){var T=e._findSupports(c,u,S,-1);s.contains(c.vertices,T[0])&&(E[M++]=T[0]),M<2&&s.contains(c.vertices,T[1])&&(E[M++]=T[1])}return M===0&&(E[M++]=A[0]),a.supportCount=M,a},e._overlapAxes=function(u,c,t,l){var a=c.length,v=t.length,S=c[0].x,b=c[0].y,k=t[0].x,E=t[0].y,g=l.length,w=Number.MAX_VALUE,y=0,p,P,C,A,M,T;for(M=0;M<g;M++){var D=l[M],V=D.x,W=D.y,G=S*V+b*W,z=k*V+E*W,O=G,U=z;for(T=1;T<a;T+=1)A=c[T].x*V+c[T].y*W,A>O?O=A:A<G&&(G=A);for(T=1;T<v;T+=1)A=t[T].x*V+t[T].y*W,A>U?U=A:A<z&&(z=A);if(P=O-z,C=U-G,p=P<C?P:C,p<w&&(w=p,y=M,p<=0))break}u.axis=l[y],u.overlap=w},e._findSupports=function(u,c,t,l){var a=c.vertices,v=a.length,S=u.position.x,b=u.position.y,k=t.x*l,E=t.y*l,g=a[0],w=g,y=k*(S-w.x)+E*(b-w.y),p,P,C;for(C=1;C<v;C+=1)w=a[C],P=k*(S-w.x)+E*(b-w.y),P<y&&(y=P,g=w);return p=a[(v+g.index-1)%v],y=k*(S-p.x)+E*(b-p.y),w=a[(g.index+1)%v],k*(S-w.x)+E*(b-w.y)<y?(n[0]=g,n[1]=w,n):(n[0]=g,n[1]=p,n)}})()},function(d,x,f){var e={};d.exports=e;var s=f(16);(function(){e.create=function(r,n){var o=r.bodyA,i=r.bodyB,u={id:e.id(o,i),bodyA:o,bodyB:i,collision:r,contacts:[s.create(),s.create()],contactCount:0,separation:0,isActive:!0,isSensor:o.isSensor||i.isSensor,timeCreated:n,timeUpdated:n,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(u,r,n),u},e.update=function(r,n,o){var i=n.supports,u=n.supportCount,c=r.contacts,t=n.parentA,l=n.parentB;r.isActive=!0,r.timeUpdated=o,r.collision=n,r.separation=n.depth,r.inverseMass=t.inverseMass+l.inverseMass,r.friction=t.friction<l.friction?t.friction:l.friction,r.frictionStatic=t.frictionStatic>l.frictionStatic?t.frictionStatic:l.frictionStatic,r.restitution=t.restitution>l.restitution?t.restitution:l.restitution,r.slop=t.slop>l.slop?t.slop:l.slop,r.contactCount=u,n.pair=r;var a=i[0],v=c[0],S=i[1],b=c[1];(b.vertex===a||v.vertex===S)&&(c[1]=v,c[0]=v=b,b=c[1]),v.vertex=a,b.vertex=S},e.setActive=function(r,n,o){n?(r.isActive=!0,r.timeUpdated=o):(r.isActive=!1,r.contactCount=0)},e.id=function(r,n){return r.id<n.id?r.id.toString(36)+":"+n.id.toString(36):n.id.toString(36)+":"+r.id.toString(36)}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(2),n=f(7),o=f(1),i=f(11),u=f(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(c){var t=c;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var l=t.bodyA?r.add(t.bodyA.position,t.pointA):t.pointA,a=t.bodyB?r.add(t.bodyB.position,t.pointB):t.pointB,v=r.magnitude(r.sub(l,a));t.length=typeof t.length<"u"?t.length:v,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var S={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(S.type="pin",S.anchors=!1):t.stiffness<.9&&(S.type="spring"),t.render=u.extend(S,t.render),t},e.preSolveAll=function(c){for(var t=0;t<c.length;t+=1){var l=c[t],a=l.constraintImpulse;l.isStatic||a.x===0&&a.y===0&&a.angle===0||(l.position.x+=a.x,l.position.y+=a.y,l.angle+=a.angle)}},e.solveAll=function(c,t){for(var l=u.clamp(t/u._baseDelta,0,1),a=0;a<c.length;a+=1){var v=c[a],S=!v.bodyA||v.bodyA&&v.bodyA.isStatic,b=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(S||b)&&e.solve(c[a],l)}for(a=0;a<c.length;a+=1)v=c[a],S=!v.bodyA||v.bodyA&&v.bodyA.isStatic,b=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!S&&!b&&e.solve(c[a],l)},e.solve=function(c,t){var l=c.bodyA,a=c.bodyB,v=c.pointA,S=c.pointB;if(!(!l&&!a)){l&&!l.isStatic&&(r.rotate(v,l.angle-c.angleA,v),c.angleA=l.angle),a&&!a.isStatic&&(r.rotate(S,a.angle-c.angleB,S),c.angleB=a.angle);var b=v,k=S;if(l&&(b=r.add(l.position,v)),a&&(k=r.add(a.position,S)),!(!b||!k)){var E=r.sub(b,k),g=r.magnitude(E);g<e._minLength&&(g=e._minLength);var w=(g-c.length)/g,y=c.stiffness>=1||c.length===0,p=y?c.stiffness*t:c.stiffness*t*t,P=c.damping*t,C=r.mult(E,w*p),A=(l?l.inverseMass:0)+(a?a.inverseMass:0),M=(l?l.inverseInertia:0)+(a?a.inverseInertia:0),T=A+M,D,V,W,G,z;if(P>0){var O=r.create();W=r.div(E,g),z=r.sub(a&&r.sub(a.position,a.positionPrev)||O,l&&r.sub(l.position,l.positionPrev)||O),G=r.dot(W,z)}l&&!l.isStatic&&(V=l.inverseMass/A,l.constraintImpulse.x-=C.x*V,l.constraintImpulse.y-=C.y*V,l.position.x-=C.x*V,l.position.y-=C.y*V,P>0&&(l.positionPrev.x-=P*W.x*G*V,l.positionPrev.y-=P*W.y*G*V),D=r.cross(v,C)/T*e._torqueDampen*l.inverseInertia*(1-c.angularStiffness),l.constraintImpulse.angle-=D,l.angle-=D),a&&!a.isStatic&&(V=a.inverseMass/A,a.constraintImpulse.x+=C.x*V,a.constraintImpulse.y+=C.y*V,a.position.x+=C.x*V,a.position.y+=C.y*V,P>0&&(a.positionPrev.x+=P*W.x*G*V,a.positionPrev.y+=P*W.y*G*V),D=r.cross(S,C)/T*e._torqueDampen*a.inverseInertia*(1-c.angularStiffness),a.constraintImpulse.angle+=D,a.angle+=D)}}},e.postSolveAll=function(c){for(var t=0;t<c.length;t++){var l=c[t],a=l.constraintImpulse;if(!(l.isStatic||a.x===0&&a.y===0&&a.angle===0)){n.set(l,!1);for(var v=0;v<l.parts.length;v++){var S=l.parts[v];s.translate(S.vertices,a),v>0&&(S.position.x+=a.x,S.position.y+=a.y),a.angle!==0&&(s.rotate(S.vertices,a.angle,l.position),i.rotate(S.axes,a.angle),v>0&&r.rotateAbout(S.position,a.angle,l.position,S.position)),o.update(S.bounds,S.vertices,l.velocity)}a.angle*=e._warming,a.x*=e._warming,a.y*=e._warming}}},e.pointAWorld=function(c){return{x:(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),y:(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0)}},e.pointBWorld=function(c){return{x:(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),y:(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0)}},e.currentLength=function(c){var t=(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),l=(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0),a=(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),v=(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0),S=t-a,b=l-v;return Math.sqrt(S*S+b*b)}})()},function(d,x,f){var e={};d.exports=e;var s=f(2),r=f(0);(function(){e.fromVertices=function(n){for(var o={},i=0;i<n.length;i++){var u=(i+1)%n.length,c=s.normalise({x:n[u].y-n[i].y,y:n[i].x-n[u].x}),t=c.y===0?1/0:c.x/c.y;t=t.toFixed(3).toString(),o[t]=c}return r.values(o)},e.rotate=function(n,o){if(o!==0)for(var i=Math.cos(o),u=Math.sin(o),c=0;c<n.length;c++){var t=n[c],l;l=t.x*i-t.y*u,t.y=t.x*u+t.y*i,t.x=l}}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(0),n=f(4),o=f(1),i=f(2);(function(){e.rectangle=function(u,c,t,l,a){a=a||{};var v={label:"Rectangle Body",position:{x:u,y:c},vertices:s.fromPath("L 0 0 L "+t+" 0 L "+t+" "+l+" L 0 "+l)};if(a.chamfer){var S=a.chamfer;v.vertices=s.chamfer(v.vertices,S.radius,S.quality,S.qualityMin,S.qualityMax),delete a.chamfer}return n.create(r.extend({},v,a))},e.trapezoid=function(u,c,t,l,a,v){v=v||{},a>=1&&r.warn("Bodies.trapezoid: slope parameter must be < 1."),a*=.5;var S=(1-a*2)*t,b=t*a,k=b+S,E=k+b,g;a<.5?g="L 0 0 L "+b+" "+-l+" L "+k+" "+-l+" L "+E+" 0":g="L 0 0 L "+k+" "+-l+" L "+E+" 0";var w={label:"Trapezoid Body",position:{x:u,y:c},vertices:s.fromPath(g)};if(v.chamfer){var y=v.chamfer;w.vertices=s.chamfer(w.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete v.chamfer}return n.create(r.extend({},w,v))},e.circle=function(u,c,t,l,a){l=l||{};var v={label:"Circle Body",circleRadius:t};a=a||25;var S=Math.ceil(Math.max(10,Math.min(a,t)));return S%2===1&&(S+=1),e.polygon(u,c,S,t,r.extend({},v,l))},e.polygon=function(u,c,t,l,a){if(a=a||{},t<3)return e.circle(u,c,l,a);for(var v=2*Math.PI/t,S="",b=v*.5,k=0;k<t;k+=1){var E=b+k*v,g=Math.cos(E)*l,w=Math.sin(E)*l;S+="L "+g.toFixed(3)+" "+w.toFixed(3)+" "}var y={label:"Polygon Body",position:{x:u,y:c},vertices:s.fromPath(S)};if(a.chamfer){var p=a.chamfer;y.vertices=s.chamfer(y.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete a.chamfer}return n.create(r.extend({},y,a))},e.fromVertices=function(u,c,t,l,a,v,S,b){var k=r.getDecomp(),E,g,w,y,p,P,C,A,M,T,D;for(E=!!(k&&k.quickDecomp),l=l||{},w=[],a=typeof a<"u"?a:!1,v=typeof v<"u"?v:.01,S=typeof S<"u"?S:10,b=typeof b<"u"?b:.01,r.isArray(t[0])||(t=[t]),T=0;T<t.length;T+=1)if(P=t[T],y=s.isConvex(P),p=!y,p&&!E&&r.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),y||!E)y?P=s.clockwiseSort(P):P=s.hull(P),w.push({position:{x:u,y:c},vertices:P});else{var V=P.map(function(R){return[R.x,R.y]});k.makeCCW(V),v!==!1&&k.removeCollinearPoints(V,v),b!==!1&&k.removeDuplicatePoints&&k.removeDuplicatePoints(V,b);var W=k.quickDecomp(V);for(C=0;C<W.length;C++){var G=W[C],z=G.map(function(R){return{x:R[0],y:R[1]}});S>0&&s.area(z)<S||w.push({position:s.centre(z),vertices:z})}}for(C=0;C<w.length;C++)w[C]=n.create(r.extend(w[C],l));if(a){var O=5;for(C=0;C<w.length;C++){var U=w[C];for(A=C+1;A<w.length;A++){var _=w[A];if(o.overlaps(U.bounds,_.bounds)){var B=U.vertices,K=_.vertices;for(M=0;M<U.vertices.length;M++)for(D=0;D<_.vertices.length;D++){var I=i.magnitudeSquared(i.sub(B[(M+1)%B.length],K[D])),F=i.magnitudeSquared(i.sub(B[M],K[(D+1)%K.length]));I<O&&F<O&&(B[M].isInternal=!0,K[D].isInternal=!0)}}}}}return w.length>1?(g=n.create(r.extend({parts:w.slice(0)},l)),n.setPosition(g,{x:u,y:c}),g):w[0]}})()},function(d,x,f){var e={};d.exports=e;var s=f(0),r=f(8);(function(){e.create=function(n){var o={bodies:[],collisions:[],pairs:null};return s.extend(o,n)},e.setBodies=function(n,o){n.bodies=o.slice(0)},e.clear=function(n){n.bodies=[],n.collisions=[]},e.collisions=function(n){var o=n.pairs,i=n.bodies,u=i.length,c=e.canCollide,t=r.collides,l=n.collisions,a=0,v,S;for(i.sort(e._compareBoundsX),v=0;v<u;v++){var b=i[v],k=b.bounds,E=b.bounds.max.x,g=b.bounds.max.y,w=b.bounds.min.y,y=b.isStatic||b.isSleeping,p=b.parts.length,P=p===1;for(S=v+1;S<u;S++){var C=i[S],A=C.bounds;if(A.min.x>E)break;if(!(g<A.min.y||w>A.max.y)&&!(y&&(C.isStatic||C.isSleeping))&&c(b.collisionFilter,C.collisionFilter)){var M=C.parts.length;if(P&&M===1){var T=t(b,C,o);T&&(l[a++]=T)}else for(var D=p>1?1:0,V=M>1?1:0,W=D;W<p;W++)for(var G=b.parts[W],k=G.bounds,z=V;z<M;z++){var O=C.parts[z],A=O.bounds;if(!(k.min.x>A.max.x||k.max.x<A.min.x||k.max.y<A.min.y||k.min.y>A.max.y)){var T=t(G,O,o);T&&(l[a++]=T)}}}}}return l.length!==a&&(l.length=a),l},e.canCollide=function(n,o){return n.group===o.group&&n.group!==0?n.group>0:(n.mask&o.category)!==0&&(o.mask&n.category)!==0},e._compareBoundsX=function(n,o){return n.bounds.min.x-o.bounds.min.x}})()},function(d,x,f){var e={};d.exports=e;var s=f(0);(function(){e.create=function(r){var n={};return r||s.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=r||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=parseInt(n.element.getAttribute("data-pixel-ratio"),10)||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(o){var i=e._getRelativeMousePosition(o,n.element,n.pixelRatio),u=o.changedTouches;u&&(n.button=0,o.preventDefault()),n.absolute.x=i.x,n.absolute.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=o},n.mousedown=function(o){var i=e._getRelativeMousePosition(o,n.element,n.pixelRatio),u=o.changedTouches;u?(n.button=0,o.preventDefault()):n.button=o.button,n.absolute.x=i.x,n.absolute.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=o},n.mouseup=function(o){var i=e._getRelativeMousePosition(o,n.element,n.pixelRatio),u=o.changedTouches;u&&o.preventDefault(),n.button=-1,n.absolute.x=i.x,n.absolute.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=o},n.mousewheel=function(o){n.wheelDelta=Math.max(-1,Math.min(1,o.wheelDelta||-o.detail)),o.preventDefault(),n.sourceEvents.mousewheel=o},e.setElement(n,n.element),n},e.setElement=function(r,n){r.element=n,n.addEventListener("mousemove",r.mousemove,{passive:!0}),n.addEventListener("mousedown",r.mousedown,{passive:!0}),n.addEventListener("mouseup",r.mouseup,{passive:!0}),n.addEventListener("wheel",r.mousewheel,{passive:!1}),n.addEventListener("touchmove",r.mousemove,{passive:!1}),n.addEventListener("touchstart",r.mousedown,{passive:!1}),n.addEventListener("touchend",r.mouseup,{passive:!1})},e.clearSourceEvents=function(r){r.sourceEvents.mousemove=null,r.sourceEvents.mousedown=null,r.sourceEvents.mouseup=null,r.sourceEvents.mousewheel=null,r.wheelDelta=0},e.setOffset=function(r,n){r.offset.x=n.x,r.offset.y=n.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y},e.setScale=function(r,n){r.scale.x=n.x,r.scale.y=n.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y},e._getRelativeMousePosition=function(r,n,o){var i=n.getBoundingClientRect(),u=document.documentElement||document.body.parentNode||document.body,c=window.pageXOffset!==void 0?window.pageXOffset:u.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:u.scrollTop,l=r.changedTouches,a,v;return l?(a=l[0].pageX-i.left-c,v=l[0].pageY-i.top-t):(a=r.pageX-i.left-c,v=r.pageY-i.top-t),{x:a/(n.clientWidth/(n.width||n.clientWidth)*o),y:v/(n.clientHeight/(n.height||n.clientHeight)*o)}}})()},function(d,x,f){var e={};d.exports=e;var s=f(0);(function(){e._registry={},e.register=function(r){if(e.isPlugin(r)||s.warn("Plugin.register:",e.toString(r),"does not implement all required fields."),r.name in e._registry){var n=e._registry[r.name],o=e.versionParse(r.version).number,i=e.versionParse(n.version).number;o>i?(s.warn("Plugin.register:",e.toString(n),"was upgraded to",e.toString(r)),e._registry[r.name]=r):o<i?s.warn("Plugin.register:",e.toString(n),"can not be downgraded to",e.toString(r)):r!==n&&s.warn("Plugin.register:",e.toString(r),"is already registered to different plugin object")}else e._registry[r.name]=r;return r},e.resolve=function(r){return e._registry[e.dependencyParse(r).name]},e.toString=function(r){return typeof r=="string"?r:(r.name||"anonymous")+"@"+(r.version||r.range||"0.0.0")},e.isPlugin=function(r){return r&&r.name&&r.version&&r.install},e.isUsed=function(r,n){return r.used.indexOf(n)>-1},e.isFor=function(r,n){var o=r.for&&e.dependencyParse(r.for);return!r.for||n.name===o.name&&e.versionSatisfies(n.version,o.range)},e.use=function(r,n){if(r.uses=(r.uses||[]).concat(n||[]),r.uses.length===0){s.warn("Plugin.use:",e.toString(r),"does not specify any dependencies to install.");return}for(var o=e.dependencies(r),i=s.topologicalSort(o),u=[],c=0;c<i.length;c+=1)if(i[c]!==r.name){var t=e.resolve(i[c]);if(!t){u.push("âŒ "+i[c]);continue}e.isUsed(r,t.name)||(e.isFor(t,r)||(s.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(r)+"."),t._warned=!0),t.install?t.install(r):(s.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(u.push("ðŸ”¶ "+e.toString(t)),delete t._warned):u.push("âœ… "+e.toString(t)),r.used.push(t.name))}u.length>0&&s.info(u.join("  "))},e.dependencies=function(r,n){var o=e.dependencyParse(r),i=o.name;if(n=n||{},!(i in n)){r=e.resolve(r)||r,n[i]=s.map(r.uses||[],function(c){e.isPlugin(c)&&e.register(c);var t=e.dependencyParse(c),l=e.resolve(c);return l&&!e.versionSatisfies(l.version,t.range)?(s.warn("Plugin.dependencies:",e.toString(l),"does not satisfy",e.toString(t),"used by",e.toString(o)+"."),l._warned=!0,r._warned=!0):l||(s.warn("Plugin.dependencies:",e.toString(c),"used by",e.toString(o),"could not be resolved."),r._warned=!0),t.name});for(var u=0;u<n[i].length;u+=1)e.dependencies(n[i][u],n);return n}},e.dependencyParse=function(r){if(s.isString(r)){var n=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return n.test(r)||s.warn("Plugin.dependencyParse:",r,"is not a valid dependency string."),{name:r.split("@")[0],range:r.split("@")[1]||"*"}}return{name:r.name,range:r.range||r.version}},e.versionParse=function(r){var n=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;n.test(r)||s.warn("Plugin.versionParse:",r,"is not a valid version or range.");var o=n.exec(r),i=Number(o[4]),u=Number(o[5]),c=Number(o[6]);return{isRange:!!(o[1]||o[2]),version:o[3],range:r,operator:o[1]||o[2]||"",major:i,minor:u,patch:c,parts:[i,u,c],prerelease:o[7],number:i*1e8+u*1e4+c}},e.versionSatisfies=function(r,n){n=n||"*";var o=e.versionParse(n),i=e.versionParse(r);if(o.isRange){if(o.operator==="*"||r==="*")return!0;if(o.operator===">")return i.number>o.number;if(o.operator===">=")return i.number>=o.number;if(o.operator==="~")return i.major===o.major&&i.minor===o.minor&&i.patch>=o.patch;if(o.operator==="^")return o.major>0?i.major===o.major&&i.number>=o.number:o.minor>0?i.minor===o.minor&&i.patch>=o.patch:i.patch===o.patch}return r===n||r==="*"}})()},function(d,x){var f={};d.exports=f,function(){f.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(d,x,f){var e={};d.exports=e;var s=f(7),r=f(18),n=f(13),o=f(19),i=f(5),u=f(6),c=f(10),t=f(0),l=f(4);(function(){e._deltaMax=1e3/60,e.create=function(a){a=a||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},S=t.extend(v,a);return S.world=a.world||u.create({label:"World"}),S.pairs=a.pairs||o.create(),S.detector=a.detector||n.create(),S.detector.pairs=S.pairs,S.grid={buckets:[]},S.world.gravity=S.gravity,S.broadphase=S.grid,S.metrics={},S},e.update=function(a,v){var S=t.now(),b=a.world,k=a.detector,E=a.pairs,g=a.timing,w=g.timestamp,y;v>e._deltaMax&&t.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",e._deltaMax.toFixed(3),"ms."),v=typeof v<"u"?v:t._baseDelta,v*=g.timeScale,g.timestamp+=v,g.lastDelta=v;var p={timestamp:g.timestamp,delta:v};i.trigger(a,"beforeUpdate",p);var P=u.allBodies(b),C=u.allConstraints(b);for(b.isModified&&(n.setBodies(k,P),u.setModified(b,!1,!1,!0)),a.enableSleeping&&s.update(P,v),e._bodiesApplyGravity(P,a.gravity),v>0&&e._bodiesUpdate(P,v),i.trigger(a,"beforeSolve",p),c.preSolveAll(P),y=0;y<a.constraintIterations;y++)c.solveAll(C,v);c.postSolveAll(P);var A=n.collisions(k);o.update(E,A,w),a.enableSleeping&&s.afterCollisions(E.list),E.collisionStart.length>0&&i.trigger(a,"collisionStart",{pairs:E.collisionStart,timestamp:g.timestamp,delta:v});var M=t.clamp(20/a.positionIterations,0,1);for(r.preSolvePosition(E.list),y=0;y<a.positionIterations;y++)r.solvePosition(E.list,v,M);for(r.postSolvePosition(P),c.preSolveAll(P),y=0;y<a.constraintIterations;y++)c.solveAll(C,v);for(c.postSolveAll(P),r.preSolveVelocity(E.list),y=0;y<a.velocityIterations;y++)r.solveVelocity(E.list,v);return e._bodiesUpdateVelocities(P),E.collisionActive.length>0&&i.trigger(a,"collisionActive",{pairs:E.collisionActive,timestamp:g.timestamp,delta:v}),E.collisionEnd.length>0&&i.trigger(a,"collisionEnd",{pairs:E.collisionEnd,timestamp:g.timestamp,delta:v}),e._bodiesClearForces(P),i.trigger(a,"afterUpdate",p),a.timing.lastElapsed=t.now()-S,a},e.merge=function(a,v){if(t.extend(a,v),v.world){a.world=v.world,e.clear(a);for(var S=u.allBodies(a.world),b=0;b<S.length;b++){var k=S[b];s.set(k,!1),k.id=t.nextId()}}},e.clear=function(a){o.clear(a.pairs),n.clear(a.detector)},e._bodiesClearForces=function(a){for(var v=a.length,S=0;S<v;S++){var b=a[S];b.force.x=0,b.force.y=0,b.torque=0}},e._bodiesApplyGravity=function(a,v){var S=typeof v.scale<"u"?v.scale:.001,b=a.length;if(!(v.x===0&&v.y===0||S===0))for(var k=0;k<b;k++){var E=a[k];E.isStatic||E.isSleeping||(E.force.y+=E.mass*v.y*S,E.force.x+=E.mass*v.x*S)}},e._bodiesUpdate=function(a,v){for(var S=a.length,b=0;b<S;b++){var k=a[b];k.isStatic||k.isSleeping||l.update(k,v)}},e._bodiesUpdateVelocities=function(a){for(var v=a.length,S=0;S<v;S++)l.updateVelocities(a[S])}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(0),n=f(1);(function(){e._restingThresh=2,e._restingThreshTangent=Math.sqrt(6),e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e._frictionMaxStatic=Number.MAX_VALUE,e.preSolvePosition=function(o){var i,u,c,t=o.length;for(i=0;i<t;i++)u=o[i],u.isActive&&(c=u.contactCount,u.collision.parentA.totalContacts+=c,u.collision.parentB.totalContacts+=c)},e.solvePosition=function(o,i,u){var c,t,l,a,v,S,b,k,E=e._positionDampen*(u||1),g=r.clamp(i/r._baseDelta,0,1),w=o.length;for(c=0;c<w;c++)t=o[c],!(!t.isActive||t.isSensor)&&(l=t.collision,a=l.parentA,v=l.parentB,S=l.normal,t.separation=l.depth+S.x*(v.positionImpulse.x-a.positionImpulse.x)+S.y*(v.positionImpulse.y-a.positionImpulse.y));for(c=0;c<w;c++)t=o[c],!(!t.isActive||t.isSensor)&&(l=t.collision,a=l.parentA,v=l.parentB,S=l.normal,k=t.separation-t.slop*g,(a.isStatic||v.isStatic)&&(k*=2),a.isStatic||a.isSleeping||(b=E/a.totalContacts,a.positionImpulse.x+=S.x*k*b,a.positionImpulse.y+=S.y*k*b),v.isStatic||v.isSleeping||(b=E/v.totalContacts,v.positionImpulse.x-=S.x*k*b,v.positionImpulse.y-=S.y*k*b))},e.postSolvePosition=function(o){for(var i=e._positionWarming,u=o.length,c=s.translate,t=n.update,l=0;l<u;l++){var a=o[l],v=a.positionImpulse,S=v.x,b=v.y,k=a.velocity;if(a.totalContacts=0,S!==0||b!==0){for(var E=0;E<a.parts.length;E++){var g=a.parts[E];c(g.vertices,v),t(g.bounds,g.vertices,k),g.position.x+=S,g.position.y+=b}a.positionPrev.x+=S,a.positionPrev.y+=b,S*k.x+b*k.y<0?(v.x=0,v.y=0):(v.x*=i,v.y*=i)}}},e.preSolveVelocity=function(o){var i=o.length,u,c;for(u=0;u<i;u++){var t=o[u];if(!(!t.isActive||t.isSensor)){var l=t.contacts,a=t.contactCount,v=t.collision,S=v.parentA,b=v.parentB,k=v.normal,E=v.tangent;for(c=0;c<a;c++){var g=l[c],w=g.vertex,y=g.normalImpulse,p=g.tangentImpulse;if(y!==0||p!==0){var P=k.x*y+E.x*p,C=k.y*y+E.y*p;S.isStatic||S.isSleeping||(S.positionPrev.x+=P*S.inverseMass,S.positionPrev.y+=C*S.inverseMass,S.anglePrev+=S.inverseInertia*((w.x-S.position.x)*C-(w.y-S.position.y)*P)),b.isStatic||b.isSleeping||(b.positionPrev.x-=P*b.inverseMass,b.positionPrev.y-=C*b.inverseMass,b.anglePrev-=b.inverseInertia*((w.x-b.position.x)*C-(w.y-b.position.y)*P))}}}}},e.solveVelocity=function(o,i){var u=i/r._baseDelta,c=u*u,t=c*u,l=-e._restingThresh*u,a=e._restingThreshTangent,v=e._frictionNormalMultiplier*u,S=e._frictionMaxStatic,b=o.length,k,E,g,w;for(g=0;g<b;g++){var y=o[g];if(!(!y.isActive||y.isSensor)){var p=y.collision,P=p.parentA,C=p.parentB,A=p.normal.x,M=p.normal.y,T=p.tangent.x,D=p.tangent.y,V=y.inverseMass,W=y.friction*y.frictionStatic*v,G=y.contacts,z=y.contactCount,O=1/z,U=P.position.x-P.positionPrev.x,_=P.position.y-P.positionPrev.y,B=P.angle-P.anglePrev,K=C.position.x-C.positionPrev.x,I=C.position.y-C.positionPrev.y,F=C.angle-C.anglePrev;for(w=0;w<z;w++){var R=G[w],L=R.vertex,N=L.x-P.position.x,Q=L.y-P.position.y,H=L.x-C.position.x,Z=L.y-C.position.y,J=U-Q*B,ee=_+N*B,oe=K-Z*F,$e=I+H*F,pt=J-oe,Me=ee-$e,ge=A*pt+M*Me,le=T*pt+D*Me,De=y.separation+ge,be=Math.min(De,1);be=De<0?0:be;var Re=be*W;le<-Re||le>Re?(E=le>0?le:-le,k=y.friction*(le>0?1:-1)*t,k<-E?k=-E:k>E&&(k=E)):(k=le,E=S);var It=N*M-Q*A,Dt=H*M-Z*A,Rt=O/(V+P.inverseInertia*It*It+C.inverseInertia*Dt*Dt),et=(1+y.restitution)*ge*Rt;if(k*=Rt,ge<l)R.normalImpulse=0;else{var vn=R.normalImpulse;R.normalImpulse+=et,R.normalImpulse>0&&(R.normalImpulse=0),et=R.normalImpulse-vn}if(le<-a||le>a)R.tangentImpulse=0;else{var gn=R.tangentImpulse;R.tangentImpulse+=k,R.tangentImpulse<-E&&(R.tangentImpulse=-E),R.tangentImpulse>E&&(R.tangentImpulse=E),k=R.tangentImpulse-gn}var tt=A*et+T*k,nt=M*et+D*k;P.isStatic||P.isSleeping||(P.positionPrev.x+=tt*P.inverseMass,P.positionPrev.y+=nt*P.inverseMass,P.anglePrev+=(N*nt-Q*tt)*P.inverseInertia),C.isStatic||C.isSleeping||(C.positionPrev.x-=tt*C.inverseMass,C.positionPrev.y-=nt*C.inverseMass,C.anglePrev-=(H*nt-Z*tt)*C.inverseInertia)}}}}})()},function(d,x,f){var e={};d.exports=e;var s=f(9),r=f(0);(function(){e.create=function(n){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},n)},e.update=function(n,o,i){var u=s.update,c=s.create,t=s.setActive,l=n.table,a=n.list,v=a.length,S=v,b=n.collisionStart,k=n.collisionEnd,E=n.collisionActive,g=o.length,w=0,y=0,p=0,P,C,A;for(A=0;A<g;A++)P=o[A],C=P.pair,C?(C.isActive&&(E[p++]=C),u(C,P,i)):(C=c(P,i),l[C.id]=C,b[w++]=C,a[S++]=C);for(S=0,v=a.length,A=0;A<v;A++)C=a[A],C.timeUpdated>=i?a[S++]=C:(t(C,!1,i),C.collision.bodyA.sleepCounter>0&&C.collision.bodyB.sleepCounter>0?a[S++]=C:(k[y++]=C,delete l[C.id]));a.length!==S&&(a.length=S),b.length!==w&&(b.length=w),k.length!==y&&(k.length=y),E.length!==p&&(E.length=p)},e.clear=function(n){return n.table={},n.list.length=0,n.collisionStart.length=0,n.collisionActive.length=0,n.collisionEnd.length=0,n}})()},function(d,x,f){var e=d.exports=f(21);e.Axes=f(11),e.Bodies=f(12),e.Body=f(4),e.Bounds=f(1),e.Collision=f(8),e.Common=f(0),e.Composite=f(6),e.Composites=f(22),e.Constraint=f(10),e.Contact=f(16),e.Detector=f(13),e.Engine=f(17),e.Events=f(5),e.Grid=f(23),e.Mouse=f(14),e.MouseConstraint=f(24),e.Pair=f(9),e.Pairs=f(19),e.Plugin=f(15),e.Query=f(25),e.Render=f(26),e.Resolver=f(18),e.Runner=f(27),e.SAT=f(28),e.Sleeping=f(7),e.Svg=f(29),e.Vector=f(2),e.Vertices=f(3),e.World=f(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run âž¤ use Matter.Runner.run(engine) instead")},function(d,x,f){var e={};d.exports=e;var s=f(15),r=f(0);(function(){e.name="matter-js",e.version="0.20.0",e.uses=[],e.used=[],e.use=function(){s.use(e,Array.prototype.slice.call(arguments))},e.before=function(n,o){return n=n.replace(/^Matter./,""),r.chainPathBefore(e,n,o)},e.after=function(n,o){return n=n.replace(/^Matter./,""),r.chainPathAfter(e,n,o)}})()},function(d,x,f){var e={};d.exports=e;var s=f(6),r=f(10),n=f(0),o=f(4),i=f(12),u=n.deprecated;(function(){e.stack=function(c,t,l,a,v,S,b){for(var k=s.create({label:"Stack"}),E=c,g=t,w,y=0,p=0;p<a;p++){for(var P=0,C=0;C<l;C++){var A=b(E,g,C,p,w,y);if(A){var M=A.bounds.max.y-A.bounds.min.y,T=A.bounds.max.x-A.bounds.min.x;M>P&&(P=M),o.translate(A,{x:T*.5,y:M*.5}),E=A.bounds.max.x+v,s.addBody(k,A),w=A,y+=1}else E+=v}g+=P+S,E=c}return k},e.chain=function(c,t,l,a,v,S){for(var b=c.bodies,k=1;k<b.length;k++){var E=b[k-1],g=b[k],w=E.bounds.max.y-E.bounds.min.y,y=E.bounds.max.x-E.bounds.min.x,p=g.bounds.max.y-g.bounds.min.y,P=g.bounds.max.x-g.bounds.min.x,C={bodyA:E,pointA:{x:y*t,y:w*l},bodyB:g,pointB:{x:P*a,y:p*v}},A=n.extend(C,S);s.addConstraint(c,r.create(A))}return c.label+=" Chain",c},e.mesh=function(c,t,l,a,v){var S=c.bodies,b,k,E,g,w;for(b=0;b<l;b++){for(k=1;k<t;k++)E=S[k-1+b*t],g=S[k+b*t],s.addConstraint(c,r.create(n.extend({bodyA:E,bodyB:g},v)));if(b>0)for(k=0;k<t;k++)E=S[k+(b-1)*t],g=S[k+b*t],s.addConstraint(c,r.create(n.extend({bodyA:E,bodyB:g},v))),a&&k>0&&(w=S[k-1+(b-1)*t],s.addConstraint(c,r.create(n.extend({bodyA:w,bodyB:g},v)))),a&&k<t-1&&(w=S[k+1+(b-1)*t],s.addConstraint(c,r.create(n.extend({bodyA:w,bodyB:g},v))))}return c.label+=" Mesh",c},e.pyramid=function(c,t,l,a,v,S,b){return e.stack(c,t,l,a,v,S,function(k,E,g,w,y,p){var P=Math.min(a,Math.ceil(l/2)),C=y?y.bounds.max.x-y.bounds.min.x:0;if(!(w>P)){w=P-w;var A=w,M=l-1-w;if(!(g<A||g>M)){p===1&&o.translate(y,{x:(g+(l%2===1?1:-1))*C,y:0});var T=y?g*C:0;return b(c+T+g*v,E,g,w,y,p)}}})},e.newtonsCradle=function(c,t,l,a,v){for(var S=s.create({label:"Newtons Cradle"}),b=0;b<l;b++){var k=1.9,E=i.circle(c+b*(a*k),t+v,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),g=r.create({pointA:{x:c+b*(a*k),y:t},bodyB:E});s.addBody(S,E),s.addConstraint(S,g)}return S},u(e,"newtonsCradle","Composites.newtonsCradle âž¤ moved to newtonsCradle example"),e.car=function(c,t,l,a,v){var S=o.nextGroup(!0),b=20,k=-l*.5+b,E=l*.5-b,g=0,w=s.create({label:"Car"}),y=i.rectangle(c,t,l,a,{collisionFilter:{group:S},chamfer:{radius:a*.5},density:2e-4}),p=i.circle(c+k,t+g,v,{collisionFilter:{group:S},friction:.8}),P=i.circle(c+E,t+g,v,{collisionFilter:{group:S},friction:.8}),C=r.create({bodyB:y,pointB:{x:k,y:g},bodyA:p,stiffness:1,length:0}),A=r.create({bodyB:y,pointB:{x:E,y:g},bodyA:P,stiffness:1,length:0});return s.addBody(w,y),s.addBody(w,p),s.addBody(w,P),s.addConstraint(w,C),s.addConstraint(w,A),w},u(e,"car","Composites.car âž¤ moved to car example"),e.softBody=function(c,t,l,a,v,S,b,k,E,g){E=n.extend({inertia:1/0},E),g=n.extend({stiffness:.2,render:{type:"line",anchors:!1}},g);var w=e.stack(c,t,l,a,v,S,function(y,p){return i.circle(y,p,k,E)});return e.mesh(w,l,a,b,g),w.label="Soft Body",w},u(e,"softBody","Composites.softBody âž¤ moved to softBody and cloth examples")})()},function(d,x,f){var e={};d.exports=e;var s=f(9),r=f(0),n=r.deprecated;(function(){e.create=function(o){var i={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return r.extend(i,o)},e.update=function(o,i,u,c){var t,l,a,v=u.world,S=o.buckets,b,k,E=!1;for(t=0;t<i.length;t++){var g=i[t];if(!(g.isSleeping&&!c)&&!(v.bounds&&(g.bounds.max.x<v.bounds.min.x||g.bounds.min.x>v.bounds.max.x||g.bounds.max.y<v.bounds.min.y||g.bounds.min.y>v.bounds.max.y))){var w=e._getRegion(o,g);if(!g.region||w.id!==g.region.id||c){(!g.region||c)&&(g.region=w);var y=e._regionUnion(w,g.region);for(l=y.startCol;l<=y.endCol;l++)for(a=y.startRow;a<=y.endRow;a++){k=e._getBucketId(l,a),b=S[k];var p=l>=w.startCol&&l<=w.endCol&&a>=w.startRow&&a<=w.endRow,P=l>=g.region.startCol&&l<=g.region.endCol&&a>=g.region.startRow&&a<=g.region.endRow;!p&&P&&P&&b&&e._bucketRemoveBody(o,b,g),(g.region===w||p&&!P||c)&&(b||(b=e._createBucket(S,k)),e._bucketAddBody(o,b,g))}g.region=w,E=!0}}}E&&(o.pairsList=e._createActivePairsList(o))},n(e,"update","Grid.update âž¤ replaced by Matter.Detector"),e.clear=function(o){o.buckets={},o.pairs={},o.pairsList=[]},n(e,"clear","Grid.clear âž¤ replaced by Matter.Detector"),e._regionUnion=function(o,i){var u=Math.min(o.startCol,i.startCol),c=Math.max(o.endCol,i.endCol),t=Math.min(o.startRow,i.startRow),l=Math.max(o.endRow,i.endRow);return e._createRegion(u,c,t,l)},e._getRegion=function(o,i){var u=i.bounds,c=Math.floor(u.min.x/o.bucketWidth),t=Math.floor(u.max.x/o.bucketWidth),l=Math.floor(u.min.y/o.bucketHeight),a=Math.floor(u.max.y/o.bucketHeight);return e._createRegion(c,t,l,a)},e._createRegion=function(o,i,u,c){return{id:o+","+i+","+u+","+c,startCol:o,endCol:i,startRow:u,endRow:c}},e._getBucketId=function(o,i){return"C"+o+"R"+i},e._createBucket=function(o,i){var u=o[i]=[];return u},e._bucketAddBody=function(o,i,u){var c=o.pairs,t=s.id,l=i.length,a;for(a=0;a<l;a++){var v=i[a];if(!(u.id===v.id||u.isStatic&&v.isStatic)){var S=t(u,v),b=c[S];b?b[2]+=1:c[S]=[u,v,1]}}i.push(u)},e._bucketRemoveBody=function(o,i,u){var c=o.pairs,t=s.id,l;i.splice(r.indexOf(i,u),1);var a=i.length;for(l=0;l<a;l++){var v=c[t(u,i[l])];v&&(v[2]-=1)}},e._createActivePairsList=function(o){var i,u=o.pairs,c=r.keys(u),t=c.length,l=[],a;for(a=0;a<t;a++)i=u[c[a]],i[2]>0?l.push(i):delete u[c[a]];return l}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(7),n=f(14),o=f(5),i=f(13),u=f(10),c=f(6),t=f(0),l=f(1);(function(){e.create=function(a,v){var S=(a?a.mouse:null)||(v?v.mouse:null);S||(a&&a.render&&a.render.canvas?S=n.create(a.render.canvas):v&&v.element?S=n.create(v.element):(S=n.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var b=u.create({label:"Mouse Constraint",pointA:S.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),k={type:"mouseConstraint",mouse:S,element:null,body:null,constraint:b,collisionFilter:{category:1,mask:4294967295,group:0}},E=t.extend(k,v);return o.on(a,"beforeUpdate",function(){var g=c.allBodies(a.world);e.update(E,g),e._triggerEvents(E)}),E},e.update=function(a,v){var S=a.mouse,b=a.constraint,k=a.body;if(S.button===0){if(b.bodyB)r.set(b.bodyB,!1),b.pointA=S.position;else for(var E=0;E<v.length;E++)if(k=v[E],l.contains(k.bounds,S.position)&&i.canCollide(k.collisionFilter,a.collisionFilter))for(var g=k.parts.length>1?1:0;g<k.parts.length;g++){var w=k.parts[g];if(s.contains(w.vertices,S.position)){b.pointA=S.position,b.bodyB=a.body=k,b.pointB={x:S.position.x-k.position.x,y:S.position.y-k.position.y},b.angleB=k.angle,r.set(k,!1),o.trigger(a,"startdrag",{mouse:S,body:k});break}}}else b.bodyB=a.body=null,b.pointB=null,k&&o.trigger(a,"enddrag",{mouse:S,body:k})},e._triggerEvents=function(a){var v=a.mouse,S=v.sourceEvents;S.mousemove&&o.trigger(a,"mousemove",{mouse:v}),S.mousedown&&o.trigger(a,"mousedown",{mouse:v}),S.mouseup&&o.trigger(a,"mouseup",{mouse:v}),n.clearSourceEvents(v)}})()},function(d,x,f){var e={};d.exports=e;var s=f(2),r=f(8),n=f(1),o=f(12),i=f(3);(function(){e.collides=function(u,c){for(var t=[],l=c.length,a=u.bounds,v=r.collides,S=n.overlaps,b=0;b<l;b++){var k=c[b],E=k.parts.length,g=E===1?0:1;if(S(k.bounds,a))for(var w=g;w<E;w++){var y=k.parts[w];if(S(y.bounds,a)){var p=v(y,u);if(p){t.push(p);break}}}}return t},e.ray=function(u,c,t,l){l=l||1e-100;for(var a=s.angle(c,t),v=s.magnitude(s.sub(c,t)),S=(t.x+c.x)*.5,b=(t.y+c.y)*.5,k=o.rectangle(S,b,v,l,{angle:a}),E=e.collides(k,u),g=0;g<E.length;g+=1){var w=E[g];w.body=w.bodyB=w.bodyA}return E},e.region=function(u,c,t){for(var l=[],a=0;a<u.length;a++){var v=u[a],S=n.overlaps(v.bounds,c);(S&&!t||!S&&t)&&l.push(v)}return l},e.point=function(u,c){for(var t=[],l=0;l<u.length;l++){var a=u[l];if(n.contains(a.bounds,c))for(var v=a.parts.length===1?0:1;v<a.parts.length;v++){var S=a.parts[v];if(n.contains(S.bounds,c)&&i.contains(S.vertices,c)){t.push(a);break}}}return t}})()},function(d,x,f){var e={};d.exports=e;var s=f(4),r=f(0),n=f(6),o=f(1),i=f(5),u=f(2),c=f(14);(function(){var t,l;typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(g){window.setTimeout(function(){g(r.now())},1e3/60)},l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(g){var w={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!g.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},y=r.extend(w,g);return y.canvas&&(y.canvas.width=y.options.width||y.canvas.width,y.canvas.height=y.options.height||y.canvas.height),y.mouse=g.mouse,y.engine=g.engine,y.canvas=y.canvas||S(y.options.width,y.options.height),y.context=y.canvas.getContext("2d"),y.textures={},y.bounds=y.bounds||{min:{x:0,y:0},max:{x:y.canvas.width,y:y.canvas.height}},y.controller=e,y.options.showBroadphase=!1,y.options.pixelRatio!==1&&e.setPixelRatio(y,y.options.pixelRatio),r.isElement(y.element)&&y.element.appendChild(y.canvas),y},e.run=function(g){(function w(y){g.frameRequestId=t(w),a(g,y),e.world(g,y),g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0),(g.options.showStats||g.options.showDebug)&&e.stats(g,g.context,y),(g.options.showPerformance||g.options.showDebug)&&e.performance(g,g.context,y),g.context.setTransform(1,0,0,1,0,0)})()},e.stop=function(g){l(g.frameRequestId)},e.setPixelRatio=function(g,w){var y=g.options,p=g.canvas;w==="auto"&&(w=b(p)),y.pixelRatio=w,p.setAttribute("data-pixel-ratio",w),p.width=y.width*w,p.height=y.height*w,p.style.width=y.width+"px",p.style.height=y.height+"px"},e.setSize=function(g,w,y){g.options.width=w,g.options.height=y,g.bounds.max.x=g.bounds.min.x+w,g.bounds.max.y=g.bounds.min.y+y,g.options.pixelRatio!==1?e.setPixelRatio(g,g.options.pixelRatio):(g.canvas.width=w,g.canvas.height=y)},e.lookAt=function(g,w,y,p){p=typeof p<"u"?p:!0,w=r.isArray(w)?w:[w],y=y||{x:0,y:0};for(var P={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},C=0;C<w.length;C+=1){var A=w[C],M=A.bounds?A.bounds.min:A.min||A.position||A,T=A.bounds?A.bounds.max:A.max||A.position||A;M&&T&&(M.x<P.min.x&&(P.min.x=M.x),T.x>P.max.x&&(P.max.x=T.x),M.y<P.min.y&&(P.min.y=M.y),T.y>P.max.y&&(P.max.y=T.y))}var D=P.max.x-P.min.x+2*y.x,V=P.max.y-P.min.y+2*y.y,W=g.canvas.height,G=g.canvas.width,z=G/W,O=D/V,U=1,_=1;O>z?_=O/z:U=z/O,g.options.hasBounds=!0,g.bounds.min.x=P.min.x,g.bounds.max.x=P.min.x+D*U,g.bounds.min.y=P.min.y,g.bounds.max.y=P.min.y+V*_,p&&(g.bounds.min.x+=D*.5-D*U*.5,g.bounds.max.x+=D*.5-D*U*.5,g.bounds.min.y+=V*.5-V*_*.5,g.bounds.max.y+=V*.5-V*_*.5),g.bounds.min.x-=y.x,g.bounds.max.x-=y.x,g.bounds.min.y-=y.y,g.bounds.max.y-=y.y,g.mouse&&(c.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.canvas.width,y:(g.bounds.max.y-g.bounds.min.y)/g.canvas.height}),c.setOffset(g.mouse,g.bounds.min))},e.startViewTransform=function(g){var w=g.bounds.max.x-g.bounds.min.x,y=g.bounds.max.y-g.bounds.min.y,p=w/g.options.width,P=y/g.options.height;g.context.setTransform(g.options.pixelRatio/p,0,0,g.options.pixelRatio/P,0,0),g.context.translate(-g.bounds.min.x,-g.bounds.min.y)},e.endViewTransform=function(g){g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0)},e.world=function(g,w){var y=r.now(),p=g.engine,P=p.world,C=g.canvas,A=g.context,M=g.options,T=g.timing,D=n.allBodies(P),V=n.allConstraints(P),W=M.wireframes?M.wireframeBackground:M.background,G=[],z=[],O,U={timestamp:p.timing.timestamp};if(i.trigger(g,"beforeRender",U),g.currentBackground!==W&&E(g,W),A.globalCompositeOperation="source-in",A.fillStyle="transparent",A.fillRect(0,0,C.width,C.height),A.globalCompositeOperation="source-over",M.hasBounds){for(O=0;O<D.length;O++){var _=D[O];o.overlaps(_.bounds,g.bounds)&&G.push(_)}for(O=0;O<V.length;O++){var B=V[O],K=B.bodyA,I=B.bodyB,F=B.pointA,R=B.pointB;K&&(F=u.add(K.position,B.pointA)),I&&(R=u.add(I.position,B.pointB)),!(!F||!R)&&(o.contains(g.bounds,F)||o.contains(g.bounds,R))&&z.push(B)}e.startViewTransform(g),g.mouse&&(c.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.options.width,y:(g.bounds.max.y-g.bounds.min.y)/g.options.height}),c.setOffset(g.mouse,g.bounds.min))}else z=V,G=D,g.options.pixelRatio!==1&&g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0);!M.wireframes||p.enableSleeping&&M.showSleeping?e.bodies(g,G,A):(M.showConvexHulls&&e.bodyConvexHulls(g,G,A),e.bodyWireframes(g,G,A)),M.showBounds&&e.bodyBounds(g,G,A),(M.showAxes||M.showAngleIndicator)&&e.bodyAxes(g,G,A),M.showPositions&&e.bodyPositions(g,G,A),M.showVelocity&&e.bodyVelocity(g,G,A),M.showIds&&e.bodyIds(g,G,A),M.showSeparations&&e.separations(g,p.pairs.list,A),M.showCollisions&&e.collisions(g,p.pairs.list,A),M.showVertexNumbers&&e.vertexNumbers(g,G,A),M.showMousePosition&&e.mousePosition(g,g.mouse,A),e.constraints(z,A),M.hasBounds&&e.endViewTransform(g),i.trigger(g,"afterRender",U),T.lastElapsed=r.now()-y},e.stats=function(g,w,y){for(var p=g.engine,P=p.world,C=n.allBodies(P),A=0,M=55,T=44,D=0,V=0,W=0;W<C.length;W+=1)A+=C[W].parts.length;var G={Part:A,Body:C.length,Cons:n.allConstraints(P).length,Comp:n.allComposites(P).length,Pair:p.pairs.list.length};w.fillStyle="#0e0f19",w.fillRect(D,V,M*5.5,T),w.font="12px Arial",w.textBaseline="top",w.textAlign="right";for(var z in G){var O=G[z];w.fillStyle="#aaa",w.fillText(z,D+M,V+8),w.fillStyle="#eee",w.fillText(O,D+M,V+26),D+=M}},e.performance=function(g,w){var y=g.engine,p=g.timing,P=p.deltaHistory,C=p.elapsedHistory,A=p.timestampElapsedHistory,M=p.engineDeltaHistory,T=p.engineUpdatesHistory,D=p.engineElapsedHistory,V=y.timing.lastUpdatesPerFrame,W=y.timing.lastDelta,G=v(P),z=v(C),O=v(M),U=v(T),_=v(D),B=v(A),K=B/G||0,I=Math.round(G/W),F=1e3/G||0,R=4,L=12,N=60,Q=34,H=10,Z=69;w.fillStyle="#0e0f19",w.fillRect(0,50,L*5+N*6+22,Q),e.status(w,H,Z,N,R,P.length,Math.round(F)+" fps",F/e._goodFps,function(J){return P[J]/G-1}),e.status(w,H+L+N,Z,N,R,M.length,W.toFixed(2)+" dt",e._goodDelta/W,function(J){return M[J]/O-1}),e.status(w,H+(L+N)*2,Z,N,R,T.length,V+" upf",Math.pow(r.clamp(U/I||1,0,1),4),function(J){return T[J]/U-1}),e.status(w,H+(L+N)*3,Z,N,R,D.length,_.toFixed(2)+" ut",1-V*_/e._goodFps,function(J){return D[J]/_-1}),e.status(w,H+(L+N)*4,Z,N,R,C.length,z.toFixed(2)+" rt",1-z/e._goodFps,function(J){return C[J]/z-1}),e.status(w,H+(L+N)*5,Z,N,R,A.length,K.toFixed(2)+" x",K*K*K,function(J){return(A[J]/P[J]/K||0)-1})},e.status=function(g,w,y,p,P,C,A,M,T){g.strokeStyle="#888",g.fillStyle="#444",g.lineWidth=1,g.fillRect(w,y+7,p,1),g.beginPath(),g.moveTo(w,y+7-P*r.clamp(.4*T(0),-2,2));for(var D=0;D<p;D+=1)g.lineTo(w+D,y+7-(D<C?P*r.clamp(.4*T(D),-2,2):0));g.stroke(),g.fillStyle="hsl("+r.clamp(25+95*M,0,120)+",100%,60%)",g.fillRect(w,y-7,4,4),g.font="12px Arial",g.textBaseline="middle",g.textAlign="right",g.fillStyle="#eee",g.fillText(A,w+p,y-5)},e.constraints=function(g,w){for(var y=w,p=0;p<g.length;p++){var P=g[p];if(!(!P.render.visible||!P.pointA||!P.pointB)){var C=P.bodyA,A=P.bodyB,M,T;if(C?M=u.add(C.position,P.pointA):M=P.pointA,P.render.type==="pin")y.beginPath(),y.arc(M.x,M.y,3,0,2*Math.PI),y.closePath();else{if(A?T=u.add(A.position,P.pointB):T=P.pointB,y.beginPath(),y.moveTo(M.x,M.y),P.render.type==="spring")for(var D=u.sub(T,M),V=u.perp(u.normalise(D)),W=Math.ceil(r.clamp(P.length/5,12,20)),G,z=1;z<W;z+=1)G=z%2===0?1:-1,y.lineTo(M.x+D.x*(z/W)+V.x*G*4,M.y+D.y*(z/W)+V.y*G*4);y.lineTo(T.x,T.y)}P.render.lineWidth&&(y.lineWidth=P.render.lineWidth,y.strokeStyle=P.render.strokeStyle,y.stroke()),P.render.anchors&&(y.fillStyle=P.render.strokeStyle,y.beginPath(),y.arc(M.x,M.y,3,0,2*Math.PI),y.arc(T.x,T.y,3,0,2*Math.PI),y.closePath(),y.fill())}}},e.bodies=function(g,w,y){var p=y;g.engine;var P=g.options,C=P.showInternalEdges||!P.wireframes,A,M,T,D;for(T=0;T<w.length;T++)if(A=w[T],!!A.render.visible){for(D=A.parts.length>1?1:0;D<A.parts.length;D++)if(M=A.parts[D],!!M.render.visible){if(P.showSleeping&&A.isSleeping?p.globalAlpha=.5*M.render.opacity:M.render.opacity!==1&&(p.globalAlpha=M.render.opacity),M.render.sprite&&M.render.sprite.texture&&!P.wireframes){var V=M.render.sprite,W=k(g,V.texture);p.translate(M.position.x,M.position.y),p.rotate(M.angle),p.drawImage(W,W.width*-V.xOffset*V.xScale,W.height*-V.yOffset*V.yScale,W.width*V.xScale,W.height*V.yScale),p.rotate(-M.angle),p.translate(-M.position.x,-M.position.y)}else{if(M.circleRadius)p.beginPath(),p.arc(M.position.x,M.position.y,M.circleRadius,0,2*Math.PI);else{p.beginPath(),p.moveTo(M.vertices[0].x,M.vertices[0].y);for(var G=1;G<M.vertices.length;G++)!M.vertices[G-1].isInternal||C?p.lineTo(M.vertices[G].x,M.vertices[G].y):p.moveTo(M.vertices[G].x,M.vertices[G].y),M.vertices[G].isInternal&&!C&&p.moveTo(M.vertices[(G+1)%M.vertices.length].x,M.vertices[(G+1)%M.vertices.length].y);p.lineTo(M.vertices[0].x,M.vertices[0].y),p.closePath()}P.wireframes?(p.lineWidth=1,p.strokeStyle=g.options.wireframeStrokeStyle,p.stroke()):(p.fillStyle=M.render.fillStyle,M.render.lineWidth&&(p.lineWidth=M.render.lineWidth,p.strokeStyle=M.render.strokeStyle,p.stroke()),p.fill())}p.globalAlpha=1}}},e.bodyWireframes=function(g,w,y){var p=y,P=g.options.showInternalEdges,C,A,M,T,D;for(p.beginPath(),M=0;M<w.length;M++)if(C=w[M],!!C.render.visible)for(D=C.parts.length>1?1:0;D<C.parts.length;D++){for(A=C.parts[D],p.moveTo(A.vertices[0].x,A.vertices[0].y),T=1;T<A.vertices.length;T++)!A.vertices[T-1].isInternal||P?p.lineTo(A.vertices[T].x,A.vertices[T].y):p.moveTo(A.vertices[T].x,A.vertices[T].y),A.vertices[T].isInternal&&!P&&p.moveTo(A.vertices[(T+1)%A.vertices.length].x,A.vertices[(T+1)%A.vertices.length].y);p.lineTo(A.vertices[0].x,A.vertices[0].y)}p.lineWidth=1,p.strokeStyle=g.options.wireframeStrokeStyle,p.stroke()},e.bodyConvexHulls=function(g,w,y){var p=y,P,C,A;for(p.beginPath(),C=0;C<w.length;C++)if(P=w[C],!(!P.render.visible||P.parts.length===1)){for(p.moveTo(P.vertices[0].x,P.vertices[0].y),A=1;A<P.vertices.length;A++)p.lineTo(P.vertices[A].x,P.vertices[A].y);p.lineTo(P.vertices[0].x,P.vertices[0].y)}p.lineWidth=1,p.strokeStyle="rgba(255,255,255,0.2)",p.stroke()},e.vertexNumbers=function(g,w,y){var p=y,P,C,A;for(P=0;P<w.length;P++){var M=w[P].parts;for(A=M.length>1?1:0;A<M.length;A++){var T=M[A];for(C=0;C<T.vertices.length;C++)p.fillStyle="rgba(255,255,255,0.2)",p.fillText(P+"_"+C,T.position.x+(T.vertices[C].x-T.position.x)*.8,T.position.y+(T.vertices[C].y-T.position.y)*.8)}}},e.mousePosition=function(g,w,y){var p=y;p.fillStyle="rgba(255,255,255,0.8)",p.fillText(w.position.x+"  "+w.position.y,w.position.x+5,w.position.y-5)},e.bodyBounds=function(g,w,y){var p=y;g.engine;var P=g.options;p.beginPath();for(var C=0;C<w.length;C++){var A=w[C];if(A.render.visible)for(var M=w[C].parts,T=M.length>1?1:0;T<M.length;T++){var D=M[T];p.rect(D.bounds.min.x,D.bounds.min.y,D.bounds.max.x-D.bounds.min.x,D.bounds.max.y-D.bounds.min.y)}}P.wireframes?p.strokeStyle="rgba(255,255,255,0.08)":p.strokeStyle="rgba(0,0,0,0.1)",p.lineWidth=1,p.stroke()},e.bodyAxes=function(g,w,y){var p=y;g.engine;var P=g.options,C,A,M,T;for(p.beginPath(),A=0;A<w.length;A++){var D=w[A],V=D.parts;if(D.render.visible)if(P.showAxes)for(M=V.length>1?1:0;M<V.length;M++)for(C=V[M],T=0;T<C.axes.length;T++){var W=C.axes[T];p.moveTo(C.position.x,C.position.y),p.lineTo(C.position.x+W.x*20,C.position.y+W.y*20)}else for(M=V.length>1?1:0;M<V.length;M++)for(C=V[M],T=0;T<C.axes.length;T++)p.moveTo(C.position.x,C.position.y),p.lineTo((C.vertices[0].x+C.vertices[C.vertices.length-1].x)/2,(C.vertices[0].y+C.vertices[C.vertices.length-1].y)/2)}P.wireframes?(p.strokeStyle="indianred",p.lineWidth=1):(p.strokeStyle="rgba(255, 255, 255, 0.4)",p.globalCompositeOperation="overlay",p.lineWidth=2),p.stroke(),p.globalCompositeOperation="source-over"},e.bodyPositions=function(g,w,y){var p=y;g.engine;var P=g.options,C,A,M,T;for(p.beginPath(),M=0;M<w.length;M++)if(C=w[M],!!C.render.visible)for(T=0;T<C.parts.length;T++)A=C.parts[T],p.arc(A.position.x,A.position.y,3,0,2*Math.PI,!1),p.closePath();for(P.wireframes?p.fillStyle="indianred":p.fillStyle="rgba(0,0,0,0.5)",p.fill(),p.beginPath(),M=0;M<w.length;M++)C=w[M],C.render.visible&&(p.arc(C.positionPrev.x,C.positionPrev.y,2,0,2*Math.PI,!1),p.closePath());p.fillStyle="rgba(255,165,0,0.8)",p.fill()},e.bodyVelocity=function(g,w,y){var p=y;p.beginPath();for(var P=0;P<w.length;P++){var C=w[P];if(C.render.visible){var A=s.getVelocity(C);p.moveTo(C.position.x,C.position.y),p.lineTo(C.position.x+A.x,C.position.y+A.y)}}p.lineWidth=3,p.strokeStyle="cornflowerblue",p.stroke()},e.bodyIds=function(g,w,y){var p=y,P,C;for(P=0;P<w.length;P++)if(w[P].render.visible){var A=w[P].parts;for(C=A.length>1?1:0;C<A.length;C++){var M=A[C];p.font="12px Arial",p.fillStyle="rgba(255,255,255,0.5)",p.fillText(M.id,M.position.x+10,M.position.y-10)}}},e.collisions=function(g,w,y){var p=y,P=g.options,C,A,M,T;for(p.beginPath(),M=0;M<w.length;M++)if(C=w[M],!!C.isActive)for(A=C.collision,T=0;T<C.contactCount;T++){var D=C.contacts[T],V=D.vertex;p.rect(V.x-1.5,V.y-1.5,3.5,3.5)}for(P.wireframes?p.fillStyle="rgba(255,255,255,0.7)":p.fillStyle="orange",p.fill(),p.beginPath(),M=0;M<w.length;M++)if(C=w[M],!!C.isActive&&(A=C.collision,C.contactCount>0)){var W=C.contacts[0].vertex.x,G=C.contacts[0].vertex.y;C.contactCount===2&&(W=(C.contacts[0].vertex.x+C.contacts[1].vertex.x)/2,G=(C.contacts[0].vertex.y+C.contacts[1].vertex.y)/2),A.bodyB===A.supports[0].body||A.bodyA.isStatic===!0?p.moveTo(W-A.normal.x*8,G-A.normal.y*8):p.moveTo(W+A.normal.x*8,G+A.normal.y*8),p.lineTo(W,G)}P.wireframes?p.strokeStyle="rgba(255,165,0,0.7)":p.strokeStyle="orange",p.lineWidth=1,p.stroke()},e.separations=function(g,w,y){var p=y,P=g.options,C,A,M,T,D;for(p.beginPath(),D=0;D<w.length;D++)if(C=w[D],!!C.isActive){A=C.collision,M=A.bodyA,T=A.bodyB;var V=1;!T.isStatic&&!M.isStatic&&(V=.5),T.isStatic&&(V=0),p.moveTo(T.position.x,T.position.y),p.lineTo(T.position.x-A.penetration.x*V,T.position.y-A.penetration.y*V),V=1,!T.isStatic&&!M.isStatic&&(V=.5),M.isStatic&&(V=0),p.moveTo(M.position.x,M.position.y),p.lineTo(M.position.x+A.penetration.x*V,M.position.y+A.penetration.y*V)}P.wireframes?p.strokeStyle="rgba(255,165,0,0.5)":p.strokeStyle="orange",p.stroke()},e.inspector=function(g,w){g.engine;var y=g.selected,p=g.render,P=p.options,C;if(P.hasBounds){var A=p.bounds.max.x-p.bounds.min.x,M=p.bounds.max.y-p.bounds.min.y,T=A/p.options.width,D=M/p.options.height;w.scale(1/T,1/D),w.translate(-p.bounds.min.x,-p.bounds.min.y)}for(var V=0;V<y.length;V++){var W=y[V].data;switch(w.translate(.5,.5),w.lineWidth=1,w.strokeStyle="rgba(255,165,0,0.9)",w.setLineDash([1,2]),W.type){case"body":C=W.bounds,w.beginPath(),w.rect(Math.floor(C.min.x-3),Math.floor(C.min.y-3),Math.floor(C.max.x-C.min.x+6),Math.floor(C.max.y-C.min.y+6)),w.closePath(),w.stroke();break;case"constraint":var G=W.pointA;W.bodyA&&(G=W.pointB),w.beginPath(),w.arc(G.x,G.y,10,0,2*Math.PI),w.closePath(),w.stroke();break}w.setLineDash([]),w.translate(-.5,-.5)}g.selectStart!==null&&(w.translate(.5,.5),w.lineWidth=1,w.strokeStyle="rgba(255,165,0,0.6)",w.fillStyle="rgba(255,165,0,0.1)",C=g.selectBounds,w.beginPath(),w.rect(Math.floor(C.min.x),Math.floor(C.min.y),Math.floor(C.max.x-C.min.x),Math.floor(C.max.y-C.min.y)),w.closePath(),w.stroke(),w.fill(),w.translate(-.5,-.5)),P.hasBounds&&w.setTransform(1,0,0,1,0,0)};var a=function(g,w){var y=g.engine,p=g.timing,P=p.historySize,C=y.timing.timestamp;p.delta=w-p.lastTime||e._goodDelta,p.lastTime=w,p.timestampElapsed=C-p.lastTimestamp||0,p.lastTimestamp=C,p.deltaHistory.unshift(p.delta),p.deltaHistory.length=Math.min(p.deltaHistory.length,P),p.engineDeltaHistory.unshift(y.timing.lastDelta),p.engineDeltaHistory.length=Math.min(p.engineDeltaHistory.length,P),p.timestampElapsedHistory.unshift(p.timestampElapsed),p.timestampElapsedHistory.length=Math.min(p.timestampElapsedHistory.length,P),p.engineUpdatesHistory.unshift(y.timing.lastUpdatesPerFrame),p.engineUpdatesHistory.length=Math.min(p.engineUpdatesHistory.length,P),p.engineElapsedHistory.unshift(y.timing.lastElapsed),p.engineElapsedHistory.length=Math.min(p.engineElapsedHistory.length,P),p.elapsedHistory.unshift(p.lastElapsed),p.elapsedHistory.length=Math.min(p.elapsedHistory.length,P)},v=function(g){for(var w=0,y=0;y<g.length;y+=1)w+=g[y];return w/g.length||0},S=function(g,w){var y=document.createElement("canvas");return y.width=g,y.height=w,y.oncontextmenu=function(){return!1},y.onselectstart=function(){return!1},y},b=function(g){var w=g.getContext("2d"),y=window.devicePixelRatio||1,p=w.webkitBackingStorePixelRatio||w.mozBackingStorePixelRatio||w.msBackingStorePixelRatio||w.oBackingStorePixelRatio||w.backingStorePixelRatio||1;return y/p},k=function(g,w){var y=g.textures[w];return y||(y=g.textures[w]=new Image,y.src=w,y)},E=function(g,w){var y=w;/(jpg|gif|png)$/.test(w)&&(y="url("+w+")"),g.canvas.style.background=y,g.canvas.style.backgroundSize="contain",g.currentBackground=w}})()},function(d,x,f){var e={};d.exports=e;var s=f(5),r=f(17),n=f(0);(function(){e._maxFrameDelta=1e3/15,e._frameDeltaFallback=1e3/60,e._timeBufferMargin=1.5,e._elapsedNextEstimate=1,e._smoothingLowerBound=.1,e._smoothingUpperBound=.9,e.create=function(i){var u={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},c=n.extend(u,i);return c.fps=0,c},e.run=function(i,u){return i.timeBuffer=e._frameDeltaFallback,function c(t){i.frameRequestId=e._onNextFrame(i,c),t&&i.enabled&&e.tick(i,u,t)}(),i},e.tick=function(i,u,c){var t=n.now(),l=i.delta,a=0,v=c-i.timeLastTick;if((!v||!i.timeLastTick||v>Math.max(e._maxFrameDelta,i.maxFrameTime))&&(v=i.frameDelta||e._frameDeltaFallback),i.frameDeltaSmoothing){i.frameDeltaHistory.push(v),i.frameDeltaHistory=i.frameDeltaHistory.slice(-i.frameDeltaHistorySize);var S=i.frameDeltaHistory.slice(0).sort(),b=i.frameDeltaHistory.slice(S.length*e._smoothingLowerBound,S.length*e._smoothingUpperBound),k=o(b);v=k||v}i.frameDeltaSnapping&&(v=1e3/Math.round(1e3/v)),i.frameDelta=v,i.timeLastTick=c,i.timeBuffer+=i.frameDelta,i.timeBuffer=n.clamp(i.timeBuffer,0,i.frameDelta+l*e._timeBufferMargin),i.lastUpdatesDeferred=0;var E=i.maxUpdates||Math.ceil(i.maxFrameTime/l),g={timestamp:u.timing.timestamp};s.trigger(i,"beforeTick",g),s.trigger(i,"tick",g);for(var w=n.now();l>0&&i.timeBuffer>=l*e._timeBufferMargin;){s.trigger(i,"beforeUpdate",g),r.update(u,l),s.trigger(i,"afterUpdate",g),i.timeBuffer-=l,a+=1;var y=n.now()-t,p=n.now()-w,P=y+e._elapsedNextEstimate*p/a;if(a>=E||P>i.maxFrameTime){i.lastUpdatesDeferred=Math.round(Math.max(0,i.timeBuffer/l-e._timeBufferMargin));break}}u.timing.lastUpdatesPerFrame=a,s.trigger(i,"afterTick",g),i.frameDeltaHistory.length>=100&&(i.lastUpdatesDeferred&&Math.round(i.frameDelta/l)>E?n.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):i.lastUpdatesDeferred&&n.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof i.isFixed<"u"&&n.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(i.deltaMin||i.deltaMax)&&n.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),i.fps!==0&&n.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},e.stop=function(i){e._cancelNextFrame(i)},e._onNextFrame=function(i,u){if(typeof window<"u"&&window.requestAnimationFrame)i.frameRequestId=window.requestAnimationFrame(u);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return i.frameRequestId},e._cancelNextFrame=function(i){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(i.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var o=function(i){for(var u=0,c=i.length,t=0;t<c;t+=1)u+=i[t];return u/c||0}})()},function(d,x,f){var e={};d.exports=e;var s=f(8),r=f(0),n=r.deprecated;(function(){e.collides=function(o,i){return s.collides(o,i)},n(e,"collides","SAT.collides âž¤ replaced by Collision.collides")})()},function(d,x,f){var e={};d.exports=e,f(1);var s=f(0);(function(){e.pathToVertices=function(r,n){typeof window<"u"&&!("SVGPathSeg"in window)&&s.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var o,i,u,c,t,l,a,v,S,b,k=[],E,g,w=0,y=0,p=0;n=n||15;var P=function(A,M,T){var D=T%2===1&&T>1;if(!S||A!=S.x||M!=S.y){S&&D?(E=S.x,g=S.y):(E=0,g=0);var V={x:E+A,y:g+M};(D||!S)&&(S=V),k.push(V),y=E+A,p=g+M}},C=function(A){var M=A.pathSegTypeAsLetter.toUpperCase();if(M!=="Z"){switch(M){case"M":case"L":case"T":case"C":case"S":case"Q":y=A.x,p=A.y;break;case"H":y=A.x;break;case"V":p=A.y;break}P(y,p,A.pathSegType)}};for(e._svgPathToAbsolute(r),u=r.getTotalLength(),l=[],o=0;o<r.pathSegList.numberOfItems;o+=1)l.push(r.pathSegList.getItem(o));for(a=l.concat();w<u;){if(b=r.getPathSegAtLength(w),t=l[b],t!=v){for(;a.length&&a[0]!=t;)C(a.shift());v=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":c=r.getPointAtLength(w),P(c.x,c.y,0);break}w+=n}for(o=0,i=a.length;o<i;++o)C(a[o]);return k},e._svgPathToAbsolute=function(r){for(var n,o,i,u,c,t,l=r.pathSegList,a=0,v=0,S=l.numberOfItems,b=0;b<S;++b){var k=l.getItem(b),E=k.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(E))"x"in k&&(a=k.x),"y"in k&&(v=k.y);else switch("x1"in k&&(i=a+k.x1),"x2"in k&&(c=a+k.x2),"y1"in k&&(u=v+k.y1),"y2"in k&&(t=v+k.y2),"x"in k&&(a+=k.x),"y"in k&&(v+=k.y),E){case"m":l.replaceItem(r.createSVGPathSegMovetoAbs(a,v),b);break;case"l":l.replaceItem(r.createSVGPathSegLinetoAbs(a,v),b);break;case"h":l.replaceItem(r.createSVGPathSegLinetoHorizontalAbs(a),b);break;case"v":l.replaceItem(r.createSVGPathSegLinetoVerticalAbs(v),b);break;case"c":l.replaceItem(r.createSVGPathSegCurvetoCubicAbs(a,v,i,u,c,t),b);break;case"s":l.replaceItem(r.createSVGPathSegCurvetoCubicSmoothAbs(a,v,c,t),b);break;case"q":l.replaceItem(r.createSVGPathSegCurvetoQuadraticAbs(a,v,i,u),b);break;case"t":l.replaceItem(r.createSVGPathSegCurvetoQuadraticSmoothAbs(a,v),b);break;case"a":l.replaceItem(r.createSVGPathSegArcAbs(a,v,k.r1,k.r2,k.angle,k.largeArcFlag,k.sweepFlag),b);break;case"z":case"Z":a=n,v=o;break}(E=="M"||E=="m")&&(n=a,o=v)}}})()},function(d,x,f){var e={};d.exports=e;var s=f(6);f(0),function(){e.create=s.create,e.add=s.add,e.remove=s.remove,e.clear=s.clear,e.addComposite=s.addComposite,e.addBody=s.addBody,e.addConstraint=s.addConstraint}()}])})})(an);var Mn=an.exports;const Y=Pn(Mn),on=8,pe=381+on,Pt=on/pe,Ye=330/pe,ln=51/pe,ut=Ye+ln,Fe=4.7625/pe,We=17.5/pe,Ae=102/pe,Ve=203/pe,ke=305/pe,fn=15/pe,ve=Object.freeze(Object.defineProperty({__proto__:null,base:ut,disc:fn,ditchWidth:ln,fifteen:Ae,five:ke,peg:Fe,rimWidth:Pt,surface:Ye,ten:Ve,twenty:We},Symbol.toStringTag,{value:"Module"})),bn={blue:"#4477AA",red:"#EE6677",green:"#228833",yellow:"#CCBB44",cyan:"#66CCEE",purple:"#AA3377",gray:"#BBBBBB"},An={black:"#000000",white:"#ffffff","gray-50":"rgb(247, 247, 247)","gray-100":"rgb(239, 239, 239)","gray-200":"rgb(223, 223, 223)","gray-300":"rgb(202, 202, 202)","gray-400":"rgb(168, 168, 168)","gray-500":"rgb(135, 135, 135)","gray-600":"rgb(109, 109, 109)","gray-700":"rgb(78, 78, 78)","gray-800":"rgb(55, 55, 55)","gray-900":"rgb(38, 38, 38)","gray-1000":"rgb(25, 25, 25)","pink-aa":"#FF24FF","pink-aaa":"#D100D1","teal-aa":"#00A3A3","teal-aaa":"#008080","red-aa":"#FE5F55","red-aaa":"#E91101","purple-aaa":"#564592"},it={category:bn,color:An,"":{"11px":"0.7rem","12px":"0.75rem","14px":"0.875rem","16px":"1rem","18px":"1.125rem","20px":"1.25rem","22px":"1.375rem","24px":"1.5rem","28px":"1.75rem","32px":"2rem","36px":"2.25rem","40px":"2.5rem","44px":"2.75rem","48px":"3rem","56px":"3.5rem","64px":"4rem","80px":"5rem","96px":"6rem","112px":"7rem","128px":"8rem"}},xe=1,st=2,Ft=4,rt=8,Vt=16,kn=.9,En=.05,Tn=.05,yt={player1:it.color["pink-aa"],player2:it.color["teal-aa"],active:it.color.black,vector:it.color.black};class In{constructor(){this.events={}}on(h,d){this.events[h]||(this.events[h]=[]),this.events[h].push(d)}emit(h,d){this.events[h]&&this.events[h].forEach(x=>x(d))}}function Dn(){const m=new In;let h,d,x,f,e,s,r,n,o,i,u=[],c,t;function l(){const I=Y.Bodies.circle(e,e,e*We,{isStatic:!0,isSensor:!0,render:{visible:!1},label:"20"},64);Y.World.add(d,[I])}function a(){const F=Math.max(2,e*.05),R=We*e+F/2-1,L=[];for(let N=0;N<16;N++){const Q=N/16*2*Math.PI,H=e+Math.cos(Q)*R,Z=e+Math.sin(Q)*R,J=2*Math.PI*R/16,ee=Y.Bodies.rectangle(H,Z,F,J,{isStatic:!0,isSensor:!1,angle:Q,render:{visible:!1},label:"trap 20",collisionFilter:{category:Ft,mask:xe}});L.push(ee)}Y.World.add(d,L)}function v(){const F=Math.max(8,e*.2),R=ut*e+F/2-1,L=[];for(let N=0;N<32;N++){const Q=N/32*2*Math.PI,H=e+Math.cos(Q)*R,Z=e+Math.sin(Q)*R,J=2*Math.PI*R/32,ee=Y.Bodies.rectangle(H,Z,F,J,{isStatic:!0,isSensor:!1,angle:Q,render:{visible:!1},label:"trap rim",collisionFilter:{category:rt,mask:xe}});L.push(ee)}Y.World.add(d,L)}function S(){const F=Math.max(8,e*.1),R=Ye*e-F/2+1,L=[];for(let N=0;N<32;N++){const Q=N/32*2*Math.PI,H=e+Math.cos(Q)*R,Z=e+Math.sin(Q)*R,J=2*Math.PI*R/32,ee=Y.Bodies.rectangle(H,Z,F,J,{isStatic:!0,isSensor:!1,angle:Q,render:{visible:!1},label:"trap surface",collisionFilter:{category:Vt,mask:xe}});L.push(ee)}Y.World.add(d,L)}function b(){const I=[],F=Fe*e;for(let R=0;R<8;R++){const L=.375+R/8*Math.PI*2,N=e+Math.cos(L)*e*Ae,Q=e+Math.sin(L)*e*Ae,H=Y.Bodies.circle(N,Q,F,{isStatic:!0,restitution:.9,render:{visible:!1},collisionFilter:{category:st,mask:xe}});I.push(H)}Y.World.add(d,I)}function k(I,F,R,L,N,Q){const H=Math.atan2(N-R,L-F),Z=L-Q*Math.cos(H-Math.PI/4),J=N-Q*Math.sin(H-Math.PI/4),ee=L-Q*Math.cos(H+Math.PI/4),oe=N-Q*Math.sin(H+Math.PI/4);I.moveTo(L,N),I.lineTo(Z,J),I.moveTo(L,N),I.lineTo(ee,oe)}function E(I){if(!t)return;const F=t.circleRadius,R=t.position;if(o&&i){const L=Y.Vector.normalise(o),N=R.x+L.x*F*1.25,Q=R.y+L.y*F*1.25,H=R.x+L.x*F*1.5+o.x,Z=R.y+L.y*F*1.5+o.y;I.beginPath(),I.strokeStyle=yt.vector,I.lineWidth=2,I.moveTo(N,Q),I.lineTo(H,Z),I.stroke();const J=e*.03,ee=Math.PI/4,oe=Math.atan2(o.y,o.x);I.beginPath(),I.moveTo(H,Z),I.lineTo(H-J*Math.cos(oe-ee),Z-J*Math.sin(oe-ee)),I.moveTo(H,Z),I.lineTo(H-J*Math.cos(oe+ee),Z-J*Math.sin(oe+ee)),I.stroke(),I.closePath()}c==="position"&&(I.beginPath(),I.strokeStyle=yt.vector,I.lineWidth=2,I.moveTo(R.x-F*2.5,R.y),I.lineTo(R.x-F*1.25,R.y),I.moveTo(R.x+F*2.5,R.y),I.lineTo(R.x+F*1.25,R.y),I.stroke(),I.closePath(),I.lineDashOffset=0,I.beginPath(),k(I,R.x-F*1.25,R.y,R.x-F*2.5,R.y,F*.75),k(I,R.x+F*1.25,R.y,R.x+F*2.5,R.y,F*.75),I.stroke(),I.closePath())}function g(){const I=f.context;E(I)}function w(I){I.pairs.forEach(({bodyA:F,bodyB:R})=>{const L=F.label==="disc"?F:R.label==="disc"?R:null,N=F.label==="20"?F:R.label==="20"?R:null;if(L&&N&&!L.in20){const Q=Y.Vector.magnitude(Y.Vector.sub(L.position,N.position)),Z=L.circleRadius*.75,J=10,ee=Q<Z,oe=L.speed<J;ee&&oe&&(L.in20=!0,L.collisionFilter.mask=xe|st|rt|Ft,L.restitution=.4)}})}function y(I){I.pairs.forEach(({bodyA:F,bodyB:R})=>{const L=F.label==="disc"?F:R.label==="disc"?R:null,N=F.label==="disc"&&F.id!==L.id?F:R.label==="disc"&&R.id!==L.id?R:null,Q=F.label==="trap rim"?F:R.label==="trap rim"?R:null;if(L&&Q)L.frictionAir=.3,L.collisionFilter.mask=xe|st|rt|Vt;else if(L&&N){L.collided=!0,N.collided=!0;const H=L.player!==N.player;L.collidedOpp=H,N.collidedOpp=H}})}function p({target:I,speed:F}){if(!t)return;const R={x:I.x-t.position.x,y:I.y-t.position.y},L=Y.Vector.normalise(R);if(F){const N=F*s;n=Y.Vector.mult(L,N)}else{const N=Y.Vector.magnitude(R),Q=Math.min(N,r),H=Q/r*s;n=Y.Vector.mult(L,H),o=Y.Vector.mult(L,Q)}}function P(I){const F={x:e,y:e},R=I.circleRadius,L=I.position,N=Math.sqrt(Math.pow(L.x-F.x,2)+Math.pow(L.y-F.y,2)),H=[{r:e*We,score:20},{r:e*Ae,score:15},{r:e*Ve,score:10},{r:e*ke,score:5}].find(Z=>N+R<Z.r);return(H==null?void 0:H.score)||0}function C(I){const F={x:e,y:e},R=I.circleRadius,L=I.position,N=Math.sqrt(Math.pow(L.x-F.x,2)+Math.pow(L.y-F.y,2)),Q=e*Ae;if(N-R<Q)return!0}function A(){if(u.every(F=>F.isSleeping)){u.forEach(H=>{H.score=P(H),H.intersect15=C(H)});const F=u.some(H=>H.player!==t.player),R=u.some(H=>H.collidedOpp),L=u.filter(H=>H.player===t.player).some(H=>H.intersect15);u.forEach(H=>{F?H.player===t.player?H.id===t.id?H.valid=R:H.valid=H.collided?R:!0:H.valid=!0:H.id===t.id?H.valid=H.collided?L:H.intersect15:H.valid=H.collided?L:!0,(!H.valid||!H.score)&&Y.World.remove(d,H)});const N=u.find(H=>H.id===t.id).valid;u=u.filter(H=>H.score>0&&H.valid);const Q=u.map(H=>({player:H.player,score:H.score}));u.forEach(H=>{H.score===20&&Y.World.remove(d,H)}),u=u.filter(H=>H.score!==20),t=null,u.forEach(H=>{H.valid=void 0,H.collided=void 0,H.collidedOpp=void 0,H.intersect15=void 0,H.in20=void 0}),_("idle"),m.emit("shotComplete",{scores:Q,valid:N})}}function M(){Y.Composite.clear(d,!1),Y.Events.off(h),Y.Render.stop(f),f.canvas.remove(),f.context=null,f.textures={},Y.Runner.stop(x)}function T(I){u.forEach(F=>{const R=e/I,L=F.position.x*R,N=F.position.y*R;Y.Body.setPosition(F,{x:L,y:N}),Y.Body.scale(F,R,R),Y.World.add(d,F)})}function D(){u.forEach(I=>{Y.World.remove(d,I)}),u=[],t=null,i=!1,o=void 0,n=void 0}function V(I={}){const F=I.player||"player1",R=I.state||"position",L=I.x?I.x*e*2:e,N=I.y?I.y*e*2:F==="player1"?e+e*ke:e-e*ke,Q=e*fn,H=En,Z=kn,J=Tn,ee=Y.Bodies.circle(L,N,Q,{density:H,restitution:Z,frictionAir:J,render:{fillStyle:yt[F],strokeStyle:"#fff",lineWidth:1},label:"disc",collisionFilter:{category:xe,mask:xe|st|rt},sleepThreshold:100,isSleeping:!0},64);ee.player=F,u.push(ee),t=ee,Y.Events.on(ee,"sleepStart",A),Y.World.add(d,ee),s=t.mass*e*7e-4,_(R)}function W(I){if(!t||c!=="position")return;const F=2,R=[45-F,135+F],L=e*ke;let N=I-e;N=Math.max(-L,Math.min(L,N));const Q=t.player==="player1",H=Q?-1:1,Z=R[Q?0:1]*H*-1,J=R[Q?1:0]*H*-1,ee=e-Math.sqrt(Math.max(0,Math.pow(L,2)-Math.pow(N,2)))*H,oe={x:e+N,y:ee},$e={x:e,y:e},Me=Y.Vector.angle($e,oe)*180/Math.PI;if(Me>Z&&Me<J)Y.Body.setPosition(t,oe);else if(Me<=Z){const ge=Z*Math.PI/180,le=Math.cos(ge)*L,De=Math.sin(ge)*L,be=e+le,Re=e+De;Y.Body.setPosition(t,{x:be,y:Re})}else if(Me>=J){const ge=J*Math.PI/180,le=Math.cos(ge)*L,De=Math.sin(ge)*L,be=e+le,Re=e+De;Y.Body.setPosition(t,{x:be,y:Re})}}function G({degrees:I,speed:F}){const R=(I-90)*Math.PI/180,L=t.position.x+Math.cos(R),N=t.position.y+Math.sin(R);return{x:t.position.x+(L-t.position.x)*F,y:t.position.y+(N-t.position.y)*F}}function z({degrees:I,power:F,visible:R}){if(!t||c!=="shoot")return;B(R===void 0?!0:R);const N=Math.max(.01,F)*r,Q=G({degrees:I,speed:N});p({target:Q})}function O(){!t||c!=="shoot"||(_("play"),B(!1),Y.Body.applyForce(t,t.position,n))}function U(){!t||c!=="shoot"||O()}function _(I){c=I}function B(I){i=I}function K({element:I,width:F}){let R;h?(M(),R=e):_("idle");const L=F;e=F/2,r=e*.2,h=Y.Engine.create({enableSleeping:!0}),d=h.world,h.gravity.y=0,x=Y.Runner.create(),f=Y.Render.create({element:I,engine:h,options:{width:F,height:L,wireframes:!1,pixelRatio:"auto",background:"transparent",hasBounds:!0,showSleeping:!1}}),T(R),l(),b(),a(),v(),S(),Y.Events.on(f,"afterRender",g),Y.Runner.run(x,h),Y.Render.run(f),Y.Events.on(h,"collisionActive",w),Y.Events.on(h,"collisionStart",y),u.length||m.emit("ready")}return{removeDiscs:D,addDisc:V,positionDisc:W,aimDisc:z,release:U,flickDisc:O,setState:_,setIndicatorVisible:B,init:K,on:(I,F)=>m.on(I,F)}}function ft(m){return Object.keys(m).reduce((h,d)=>m[d]===void 0?h:h+`${d}:${m[d]};`,"")}function St(m){return m?!0:void 0}ft({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function Ot(m){function h(d){return d(m),()=>{}}return{subscribe:h}}function wt(m){if(!cn)return null;const h=document.querySelector(`[data-melt-id="${m}"]`);return Xe(h)?h:null}const Ke=m=>new Proxy(m,{get(h,d,x){return Reflect.get(h,d,x)},ownKeys(h){return Reflect.ownKeys(h).filter(d=>d!=="action")}}),Lt=m=>typeof m=="function";Mt("empty");function Mt(m,h){const{stores:d,action:x,returned:f}=h??{},e=(()=>{if(d&&f)return mt(d,r=>{const n=f(r);if(Lt(n)){const o=(...i)=>Ke({...n(...i),[`data-melt-${m}`]:"",action:x??ye});return o.action=x??ye,o}return Ke({...n,[`data-melt-${m}`]:"",action:x??ye})});{const r=f,n=r==null?void 0:r();if(Lt(n)){const o=(...i)=>Ke({...n(...i),[`data-melt-${m}`]:"",action:x??ye});return o.action=x??ye,Ot(o)}return Ot(Ke({...n,[`data-melt-${m}`]:"",action:x??ye}))}})(),s=x??(()=>{});return s.subscribe=e.subscribe,s}function Wt(m,h){const{stores:d,returned:x,action:f}=h,{subscribe:e}=mt(d,r=>x(r).map(n=>Ke({...n,[`data-melt-${m}`]:"",action:f??ye}))),s=f??(()=>{});return s.subscribe=e,s}function Rn(m){const h=e=>e?`${m}-${e}`:m,d=e=>`data-melt-${m}${e?`-${e}`:""}`,x=e=>`[data-melt-${m}${e?`-${e}`:""}]`;return{name:h,attribute:d,selector:x,getEl:e=>document.querySelector(x(e))}}const cn=typeof document<"u";function Xe(m){return m instanceof HTMLElement}function Bn(...m){return(...h)=>{for(const d of m)typeof d=="function"&&d(...h)}}function ye(){}function Oe(m,h,d,x){const f=Array.isArray(h)?h:[h];return f.forEach(e=>m.addEventListener(e,d,x)),()=>{f.forEach(e=>m.removeEventListener(e,d,x))}}function Fn(m,h,d,x){const f=Array.isArray(h)?h:[h];if(typeof d=="function"){const e=On(s=>d(s));return f.forEach(s=>m.addEventListener(s,e,x)),()=>{f.forEach(s=>m.removeEventListener(s,e,x))}}return()=>void 0}function Vn(m){const h=m.currentTarget;if(!Xe(h))return null;const d=new CustomEvent(`m-${m.type}`,{detail:{originalEvent:m},cancelable:!0});return h.dispatchEvent(d),d}function On(m){return h=>{const d=Vn(h);if(!(d!=null&&d.defaultPrevented))return m(h)}}const Ln=m=>{try{mn(m)}catch{return m}};function un(m,...h){const d={};for(const x of Object.keys(m))h.includes(x)||(d[x]=m[x]);return d}function Ce(m){return{...m,get:()=>pn(m)}}Ce.writable=function(m){const h=Be(m);let d=m;return{subscribe:h.subscribe,set(x){h.set(x),d=x},update(x){const f=x(d);h.set(f),d=f},get(){return d}}};Ce.derived=function(m,h){const d=new Map,x=()=>{const e=Array.isArray(m)?m.map(s=>s.get()):m.get();return h(e)};return{get:x,subscribe:e=>{const s=[];return(Array.isArray(m)?m:[m]).forEach(n=>{s.push(n.subscribe(()=>{e(x())}))}),e(x()),d.set(e,s),()=>{const n=d.get(e);if(n)for(const o of n)o();d.delete(e)}}}};const Wn=(m,h)=>{const d=Ce(m),x=(e,s)=>{d.update(r=>{const n=e(r);let o=n;return h&&(o=h({curr:r,next:n})),s==null||s(o),o})};return{...d,update:x,set:e=>{x(()=>e)}}};let Hn="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Un=(m=21)=>{let h="",d=m;for(;d--;)h+=Hn[Math.random()*64|0];return h};function Nn(){return Un(10)}function zn(m){return m.reduce((h,d)=>(h[d]=Nn(),h),{})}const fe={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};function Ht(m,h){let d;const x=mt(m,e=>{d==null||d(),d=h(e)}).subscribe(ye),f=()=>{x(),d==null||d()};return Ln(f),f}function Gn(m){const h={};return Object.keys(m).forEach(d=>{const x=d,f=m[x];h[x]=Ce(Be(f))}),h}function Ct(m,h,d,x){const f=(m-(isNaN(h)?0:h))%x;let e=Math.abs(f)*2>=x?m+Math.sign(f)*(x-Math.abs(f)):m-f;isNaN(h)?!isNaN(d)&&e>d&&(e=Math.floor(d/x)*x):e<h?e=h:!isNaN(d)&&e>d&&(e=h+Math.floor((d-h)/x)*x);const s=x.toString(),r=s.indexOf("."),n=r>=0?s.length-r:0;if(n>0){const o=Math.pow(10,n);e=Math.round(e*o)/o}return e}Qe(void 0,m=>{function h(x){m(x),m(void 0)}return Oe(document,"pointerup",h,{passive:!1,capture:!0})});Qe(void 0,m=>{function h(x){x&&x.key===fe.ESCAPE&&m(x),m(void 0)}return Oe(document,"keydown",h,{passive:!1})});Qe(!1),Qe(!1),Qe(void 0);const _n={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...un(_n,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const Kn={defaultValue:[],min:0,max:100,step:1,orientation:"horizontal",dir:"ltr",disabled:!1},{name:at}=Rn("slider"),Qn=m=>{const h={...Kn,...m},d=Gn(un(h,"value","onValueChange","defaultValue")),{min:x,max:f,step:e,orientation:s,dir:r,disabled:n}=d,o=h.value??Be(h.defaultValue),i=Wn(o,h==null?void 0:h.onValueChange),u=Ce(Be(!1)),c=Ce(Be(0)),t=Ce(Be(null)),l=zn(["root"]),a=(y,p)=>{i.update(P=>{if(!P)return[y];if(P[p]===y)return P;const C=[...P],A=C[p]>y?-1:1;function M(){C[p]=C[p+A],C[p+A]=y;const W=v();W&&(W[p+A].focus(),t.set({thumb:W[p+A],index:p+A}))}if(A===-1&&y<C[p-1])return M(),C;if(A===1&&y>C[p+1])return M(),C;const T=x.get(),D=f.get(),V=e.get();return C[p]=Ct(y,T,D,V),C})},v=()=>{const y=wt(l.root);return y?Array.from(y.querySelectorAll('[data-melt-part="thumb"]')).filter(p=>Xe(p)):null},S=mt([x,f],([y,p])=>P=>(P-y)/(p-y)*100),b=Ce.derived([s,r],([y,p])=>y==="horizontal"?p==="rtl"?"rl":"lr":p==="rtl"?"tb":"bt"),k=Mt(at(),{stores:[n,s,r],returned:([y,p,P])=>({dir:P,disabled:St(y),"data-disabled":St(y),"data-orientation":p,style:y?void 0:`touch-action: ${p==="horizontal"?"pan-y":"pan-x"}`,"data-melt-id":l.root})}),E=Mt(at("range"),{stores:[i,b,S],returned:([y,p,P])=>{const C=y.length>1?P(Math.min(...y)??0):0,A=100-P(Math.max(...y)??0),M={position:"absolute"};switch(p){case"lr":{M.left=`${C}%`,M.right=`${A}%`;break}case"rl":{M.right=`${C}%`,M.left=`${A}%`;break}case"bt":{M.bottom=`${C}%`,M.top=`${A}%`;break}case"tb":{M.top=`${C}%`,M.bottom=`${A}%`;break}}return{style:ft(M)}}}),g=Wt(at("thumb"),{stores:[i,S,x,f,n,s,b],returned:([y,p,P,C,A,M,T])=>Array.from({length:y.length||1},(V,W)=>{c.get()<y.length&&c.update(_=>_+1);const z=y[W],O=`${p(z)}%`,U={position:"absolute"};switch(T){case"lr":{U.left=O,U.translate="-50% 0";break}case"rl":{U.right=O,U.translate="50% 0";break}case"bt":{U.bottom=O,U.translate="0 50%";break}case"tb":{U.top=O,U.translate="0 -50%";break}}return{role:"slider","aria-valuemin":P,"aria-valuemax":C,"aria-valuenow":z,"aria-disabled":St(A),"aria-orientation":M,"data-melt-part":"thumb","data-value":z,style:ft(U),tabindex:A?-1:0}}),action:y=>({destroy:Fn(y,"keydown",P=>{if(n.get())return;const C=P.currentTarget;if(!Xe(C))return;const A=v();if(!(A!=null&&A.length))return;const M=A.indexOf(C);if(c.set(M),![fe.ARROW_LEFT,fe.ARROW_RIGHT,fe.ARROW_UP,fe.ARROW_DOWN,fe.HOME,fe.END].includes(P.key))return;P.preventDefault();const T=x.get(),D=f.get(),V=e.get(),W=i.get(),G=s.get(),z=b.get(),O=W[M];switch(P.key){case fe.HOME:{a(T,M);break}case fe.END:{a(D,M);break}case fe.ARROW_LEFT:{if(G!=="horizontal")break;P.metaKey?a(z==="rl"?D:T,M):z==="rl"&&O<D?a(O+V,M):z==="lr"&&O>T&&a(O-V,M);break}case fe.ARROW_RIGHT:{if(G!=="horizontal")break;P.metaKey?a(z==="rl"?T:D,M):z==="rl"&&O>T?a(O-V,M):z==="lr"&&O<D&&a(O+V,M);break}case fe.ARROW_UP:{P.metaKey?a(z==="tb"?T:D,M):z==="tb"&&O>T?a(O-V,M):z!=="tb"&&O<D&&a(O+V,M);break}case fe.ARROW_DOWN:{P.metaKey?a(z==="tb"?D:T,M):z==="tb"&&O<D?a(O+V,M):z!=="tb"&&O>T&&a(O-V,M);break}}})})}),w=Wt(at("tick"),{stores:[i,x,f,e,b],returned:([y,p,P,C,A])=>{const M=P-p;let T=Math.ceil(M/C);return M%C==0&&T++,Array.from({length:T},(D,V)=>{const W=`${V*(C/(P-p))*100}%`,G=V===0,z=V===T-1,O=G?0:z?-100:-50,U={position:"absolute"};switch(A){case"lr":{U.left=W,U.translate=`${O}% 0`;break}case"rl":{U.right=W,U.translate=`${-O}% 0`;break}case"bt":{U.bottom=W,U.translate=`0 ${-O}%`;break}case"tb":{U.top=W,U.translate=`0 ${O}%`;break}}const _=p+V*C;return{"data-bounded":(y.length===1?_<=y[0]:y[0]<=_&&_<=y[y.length-1])?!0:void 0,"data-value":_,style:ft(U)}})}});return Ht([k,x,f,n,s,b,e],([y,p,P,C,A,M,T])=>{if(!cn||C)return;const D=(U,_,B,K)=>{const F=(U-B)/(K-B)*(P-p)+p;if(F<p)a(p,_);else if(F>P)a(P,_);else{const R=T,L=p,N=Math.floor((F-L)/R),Q=L+N*R+R/2,H=L+(N+1)*R+R/2,Z=F>=Q&&F<H?(N+1)*R+L:N*R+L;Z<=P&&a(Z,_)}},V=U=>{const _=v();if(!_)return;_.forEach(F=>F.blur());const B=_.map(F=>{if(A==="horizontal"){const{left:R,right:L}=F.getBoundingClientRect();return Math.abs(U.clientX-(R+L)/2)}else{const{top:R,bottom:L}=F.getBoundingClientRect();return Math.abs(U.clientY-(R+L)/2)}}),K=_[B.indexOf(Math.min(...B))],I=_.indexOf(K);return{thumb:K,index:I}},W=U=>{if(!u.get())return;U.preventDefault(),U.stopPropagation();const _=wt(y["data-melt-id"]),B=t.get();if(!_||!B)return;B.thumb.focus();const{left:K,right:I,top:F,bottom:R}=_.getBoundingClientRect();switch(M){case"lr":{D(U.clientX,B.index,K,I);break}case"rl":{D(U.clientX,B.index,I,K);break}case"bt":{D(U.clientY,B.index,R,F);break}case"tb":{D(U.clientY,B.index,F,R);break}}},G=U=>{if(U.button!==0)return;const _=wt(y["data-melt-id"]),B=V(U);if(!B||!_)return;const K=U.target;!Xe(K)||!_.contains(K)||(U.preventDefault(),t.set(B),B.thumb.focus(),u.set(!0),W(U))},z=()=>{u.set(!1)},O=Bn(Oe(document,"pointerdown",G),Oe(document,"pointerup",z),Oe(document,"pointerleave",z),Oe(document,"pointermove",W));return()=>{O()}}),Ht([e,x,f,i],function([p,P,C,A]){const M=D=>Ct(D,P,C,p)===D,T=D=>Ct(D,P,C,p);A.some(D=>!M(D))&&i.update(D=>D.map(T))}),{elements:{root:k,thumbs:g,range:E,ticks:w},states:{value:i},options:d}};function Xn(m,h){const d={};return h.forEach(x=>{d[x]={[`data-${m}-${x}`]:""}}),x=>d[x]}function Yn(){const m=sn();return h=>{const{originalEvent:d}=h.detail,{cancelable:x}=h,f=d.type;m(f,{originalEvent:d,currentTarget:d.currentTarget},{cancelable:x})||h.preventDefault()}}function Zn(m){const h={};for(const d in m){const x=m[d];x!==void 0&&(h[d]=x)}return h}function Jn(m){return function(h,d){if(d===void 0)return;const x=m[h];x&&x.set(d)}}function dn(){return{NAME:"slider",PARTS:["root","input","range","thumb","tick"]}}function jn(m){const{NAME:h,PARTS:d}=dn(),x=Xn(h,d),f={...Qn(Zn(m)),getAttrs:x};return xn(h,f),{...f,updateOption:Jn(f.options)}}function hn(){const{NAME:m}=dn();return yn(m)}const qn=m=>({builder:m&4,ticks:m&8,thumbs:m&16}),Ut=m=>({builder:m[2],ticks:m[3],thumbs:m[4]}),$n=m=>({builder:m&4,ticks:m&8,thumbs:m&16}),Nt=m=>({builder:m[2],ticks:m[3],thumbs:m[4]});function ei(m){let h,d,x,f;const e=m[19].default,s=dt(e,m,m[18],Ut);let r=[m[2],m[8]],n={};for(let o=0;o<r.length;o+=1)n=me(n,r[o]);return{c(){h=ie("span"),s&&s.c(),this.h()},l(o){h=se(o,"SPAN",{});var i=re(h);s&&s.l(i),i.forEach(X),this.h()},h(){Ue(h,n)},m(o,i){te(o,h,i),s&&s.m(h,null),m[20](h),d=!0,x||(f=At(m[2].action(h)),x=!0)},p(o,i){s&&s.p&&(!d||i&262172)&&ht(s,e,o,o[18],d?gt(e,o[18],i,qn):vt(o[18]),Ut),Ue(h,n=Tt(r,[i&4&&o[2],i&256&&o[8]]))},i(o){d||(q(s,o),d=!0)},o(o){ne(s,o),d=!1},d(o){o&&X(h),s&&s.d(o),m[20](null),x=!1,f()}}}function ti(m){let h;const d=m[19].default,x=dt(d,m,m[18],Nt);return{c(){x&&x.c()},l(f){x&&x.l(f)},m(f,e){x&&x.m(f,e),h=!0},p(f,e){x&&x.p&&(!h||e&262172)&&ht(x,d,f,f[18],h?gt(d,f[18],e,$n):vt(f[18]),Nt)},i(f){h||(q(x,f),h=!0)},o(f){ne(x,f),h=!1},d(f){x&&x.d(f)}}}function ni(m){let h,d,x,f;const e=[ti,ei],s=[];function r(n,o){return n[1]?0:1}return h=r(m),d=s[h]=e[h](m),{c(){d.c(),x=de()},l(n){d.l(n),x=de()},m(n,o){s[h].m(n,o),te(n,x,o),f=!0},p(n,[o]){let i=h;h=r(n),h===i?s[h].p(n,o):(Ee(),ne(s[i],1,1,()=>{s[i]=null}),Te(),d=s[h],d?d.p(n,o):(d=s[h]=e[h](n),d.c()),q(d,1),d.m(x.parentNode,x))},i(n){f||(q(d),f=!0)},o(n){ne(d),f=!1},d(n){n&&X(x),s[h].d(n)}}}function ii(m,h,d){let x;const f=["disabled","min","max","step","orientation","dir","value","onValueChange","asChild","el"];let e=He(h,f),s,r,n,{$$slots:o={},$$scope:i}=h,{disabled:u=void 0}=h,{min:c=void 0}=h,{max:t=void 0}=h,{step:l=void 0}=h,{orientation:a=void 0}=h,{dir:v=void 0}=h,{value:S=void 0}=h,{onValueChange:b=void 0}=h,{asChild:k=!1}=h,{el:E=void 0}=h;const{elements:{root:g,ticks:w,thumbs:y},states:{value:p},updateOption:P,getAttrs:C}=jn({disabled:u,dir:v,min:c,max:t,step:l,orientation:a,defaultValue:S,onValueChange:({next:T})=>(S!==T&&(b==null||b(T),d(9,S=T)),T)});lt(m,g,T=>d(17,s=T)),lt(m,w,T=>d(3,r=T)),lt(m,y,T=>d(4,n=T));const A=C("root");function M(T){Ie[T?"unshift":"push"](()=>{E=T,d(0,E)})}return m.$$set=T=>{h=me(me({},h),bt(T)),d(8,e=He(h,f)),"disabled"in T&&d(10,u=T.disabled),"min"in T&&d(11,c=T.min),"max"in T&&d(12,t=T.max),"step"in T&&d(13,l=T.step),"orientation"in T&&d(14,a=T.orientation),"dir"in T&&d(15,v=T.dir),"value"in T&&d(9,S=T.value),"onValueChange"in T&&d(16,b=T.onValueChange),"asChild"in T&&d(1,k=T.asChild),"el"in T&&d(0,E=T.el),"$$scope"in T&&d(18,i=T.$$scope)},m.$$.update=()=>{m.$$.dirty&512&&S!==void 0&&p.set(S),m.$$.dirty&1024&&P("disabled",u),m.$$.dirty&2048&&P("min",c),m.$$.dirty&4096&&P("max",t),m.$$.dirty&8192&&P("step",l),m.$$.dirty&16384&&P("orientation",a),m.$$.dirty&32768&&P("dir",v),m.$$.dirty&131072&&d(2,x=s),m.$$.dirty&4&&Object.assign(x,A)},[E,k,x,r,n,g,w,y,e,S,u,c,t,l,a,v,b,s,i,o,M]}class si extends ze{constructor(h){super(),Ge(this,h,ii,ni,Ne,{disabled:10,min:11,max:12,step:13,orientation:14,dir:15,value:9,onValueChange:16,asChild:1,el:0})}}const ri=m=>({builder:m&4}),zt=m=>({builder:m[2]});function ai(m){let h,d,x,f=[m[2],m[4]],e={};for(let s=0;s<f.length;s+=1)e=me(e,f[s]);return{c(){h=ie("span"),this.h()},l(s){h=se(s,"SPAN",{}),re(h).forEach(X),this.h()},h(){Ue(h,e)},m(s,r){te(s,h,r),m[8](h),d||(x=At(m[2].action(h)),d=!0)},p(s,r){Ue(h,e=Tt(f,[r&4&&s[2],r&16&&s[4]]))},i:Pe,o:Pe,d(s){s&&X(h),m[8](null),d=!1,x()}}}function oi(m){let h;const d=m[7].default,x=dt(d,m,m[6],zt);return{c(){x&&x.c()},l(f){x&&x.l(f)},m(f,e){x&&x.m(f,e),h=!0},p(f,e){x&&x.p&&(!h||e&68)&&ht(x,d,f,f[6],h?gt(d,f[6],e,ri):vt(f[6]),zt)},i(f){h||(q(x,f),h=!0)},o(f){ne(x,f),h=!1},d(f){x&&x.d(f)}}}function li(m){let h,d,x,f;const e=[oi,ai],s=[];function r(n,o){return n[1]?0:1}return h=r(m),d=s[h]=e[h](m),{c(){d.c(),x=de()},l(n){d.l(n),x=de()},m(n,o){s[h].m(n,o),te(n,x,o),f=!0},p(n,[o]){let i=h;h=r(n),h===i?s[h].p(n,o):(Ee(),ne(s[i],1,1,()=>{s[i]=null}),Te(),d=s[h],d?d.p(n,o):(d=s[h]=e[h](n),d.c()),q(d,1),d.m(x.parentNode,x))},i(n){f||(q(d),f=!0)},o(n){ne(d),f=!1},d(n){n&&X(x),s[h].d(n)}}}function fi(m,h,d){let x;const f=["asChild","el"];let e=He(h,f),s,{$$slots:r={},$$scope:n}=h,{asChild:o=!1}=h,{el:i=void 0}=h;const{elements:{range:u},getAttrs:c}=hn();lt(m,u,a=>d(5,s=a));const t=c("range");function l(a){Ie[a?"unshift":"push"](()=>{i=a,d(0,i)})}return m.$$set=a=>{h=me(me({},h),bt(a)),d(4,e=He(h,f)),"asChild"in a&&d(1,o=a.asChild),"el"in a&&d(0,i=a.el),"$$scope"in a&&d(6,n=a.$$scope)},m.$$.update=()=>{m.$$.dirty&32&&d(2,x=s),m.$$.dirty&4&&Object.assign(x,t)},[i,o,x,u,e,s,n,r,l]}class ci extends ze{constructor(h){super(),Ge(this,h,fi,li,Ne,{asChild:1,el:0})}}const ui=m=>({builder:m&4}),Gt=m=>({builder:m[2]});function di(m){let h,d,x,f=[m[2],m[4]],e={};for(let s=0;s<f.length;s+=1)e=me(e,f[s]);return{c(){h=ie("span"),this.h()},l(s){h=se(s,"SPAN",{}),re(h).forEach(X),this.h()},h(){Ue(h,e)},m(s,r){te(s,h,r),m[8](h),d||(x=[At(m[2].action(h)),Le(h,"m-keydown",m[3])],d=!0)},p(s,r){Ue(h,e=Tt(f,[r&4&&s[2],r&16&&s[4]]))},i:Pe,o:Pe,d(s){s&&X(h),m[8](null),d=!1,rn(x)}}}function hi(m){let h;const d=m[7].default,x=dt(d,m,m[6],Gt);return{c(){x&&x.c()},l(f){x&&x.l(f)},m(f,e){x&&x.m(f,e),h=!0},p(f,e){x&&x.p&&(!h||e&68)&&ht(x,d,f,f[6],h?gt(d,f[6],e,ui):vt(f[6]),Gt)},i(f){h||(q(x,f),h=!0)},o(f){ne(x,f),h=!1},d(f){x&&x.d(f)}}}function vi(m){let h,d,x,f;const e=[hi,di],s=[];function r(n,o){return n[1]?0:1}return h=r(m),d=s[h]=e[h](m),{c(){d.c(),x=de()},l(n){d.l(n),x=de()},m(n,o){s[h].m(n,o),te(n,x,o),f=!0},p(n,[o]){let i=h;h=r(n),h===i?s[h].p(n,o):(Ee(),ne(s[i],1,1,()=>{s[i]=null}),Te(),d=s[h],d?d.p(n,o):(d=s[h]=e[h](n),d.c()),q(d,1),d.m(x.parentNode,x))},i(n){f||(q(d),f=!0)},o(n){ne(d),f=!1},d(n){n&&X(x),s[h].d(n)}}}function gi(m,h,d){let x;const f=["asChild","el","thumb"];let e=He(h,f),{$$slots:s={},$$scope:r}=h,{asChild:n=!1}=h,{el:o=void 0}=h,{thumb:i}=h;const{getAttrs:u}=hn(),c=Yn(),t=u("thumb");function l(a){Ie[a?"unshift":"push"](()=>{o=a,d(0,o)})}return m.$$set=a=>{h=me(me({},h),bt(a)),d(4,e=He(h,f)),"asChild"in a&&d(1,n=a.asChild),"el"in a&&d(0,o=a.el),"thumb"in a&&d(5,i=a.thumb),"$$scope"in a&&d(6,r=a.$$scope)},m.$$.update=()=>{m.$$.dirty&32&&d(2,x=i),m.$$.dirty&4&&Object.assign(x,t)},[o,n,x,c,e,i,r,s,l]}class mi extends ze{constructor(h){super(),Ge(this,h,gi,vi,Ne,{asChild:1,el:0,thumb:5})}}function _t(m,h,d){const x=m.slice();return x[7]=h[d],x}function Kt(m){let h,d;return h=new mi({props:{thumb:m[7]}}),{c(){Ze(h.$$.fragment)},l(x){Je(h.$$.fragment,x)},m(x,f){je(h,x,f),d=!0},p(x,f){const e={};f&64&&(e.thumb=x[7]),h.$set(e)},i(x){d||(q(h.$$.fragment,x),d=!0)},o(x){ne(h.$$.fragment,x),d=!1},d(x){qe(h,x)}}}function pi(m){let h,d,x,f,e;d=new ci({});let s=he(m[6]),r=[];for(let o=0;o<s.length;o+=1)r[o]=Kt(_t(m,s,o));const n=o=>ne(r[o],1,1,()=>{r[o]=null});return{c(){h=ie("span"),Ze(d.$$.fragment),x=ce();for(let o=0;o<r.length;o+=1)r[o].c();f=de(),this.h()},l(o){h=se(o,"SPAN",{class:!0});var i=re(h);Je(d.$$.fragment,i),i.forEach(X),x=ue(o);for(let u=0;u<r.length;u+=1)r[u].l(o);f=de(),this.h()},h(){ae(h,"class","bg svelte-7s8b7u")},m(o,i){te(o,h,i),je(d,h,null),te(o,x,i);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,i);te(o,f,i),e=!0},p(o,i){if(i&64){s=he(o[6]);let u;for(u=0;u<s.length;u+=1){const c=_t(o,s,u);r[u]?(r[u].p(c,i),q(r[u],1)):(r[u]=Kt(c),r[u].c(),q(r[u],1),r[u].m(f.parentNode,f))}for(Ee(),u=s.length;u<r.length;u+=1)n(u);Te()}},i(o){if(!e){q(d.$$.fragment,o);for(let i=0;i<s.length;i+=1)q(r[i]);e=!0}},o(o){ne(d.$$.fragment,o),r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)ne(r[i]);e=!1},d(o){o&&(X(h),X(x),X(f)),qe(d),_e(r,o)}}}function xi(m){let h,d,x,f,e,s,r;function n(i){m[5](i)}let o={min:m[2],max:m[3],step:m[4],$$slots:{default:[pi,({thumbs:i})=>({6:i}),({thumbs:i})=>i?64:0]},$$scope:{ctx:m}};return m[0]!==void 0&&(o.value=m[0]),e=new si({props:o}),Ie.push(()=>Et(e,"value",n)),{c(){h=ie("div"),d=ie("p"),x=Se(m[1]),f=ce(),Ze(e.$$.fragment),this.h()},l(i){h=se(i,"DIV",{class:!0});var u=re(h);d=se(u,"P",{class:!0});var c=re(d);x=we(c,m[1]),c.forEach(X),f=ue(u),Je(e.$$.fragment,u),u.forEach(X),this.h()},h(){ae(d,"class","label svelte-7s8b7u"),ae(h,"class","c svelte-7s8b7u")},m(i,u){te(i,h,u),$(h,d),$(d,x),$(h,f),je(e,h,null),r=!0},p(i,[u]){(!r||u&2)&&ct(x,i[1]);const c={};u&4&&(c.min=i[2]),u&8&&(c.max=i[3]),u&16&&(c.step=i[4]),u&1088&&(c.$$scope={dirty:u,ctx:i}),!s&&u&1&&(s=!0,c.value=i[0],kt(()=>s=!1)),e.$set(c)},i(i){r||(q(e.$$.fragment,i),r=!0)},o(i){ne(e.$$.fragment,i),r=!1},d(i){i&&X(h),qe(e)}}}function yi(m,h,d){let{label:x}=h,{value:f}=h,{min:e}=h,{max:s}=h,{step:r}=h;function n(o){f=o,d(0,f)}return m.$$set=o=>{"label"in o&&d(1,x=o.label),"value"in o&&d(0,f=o.value),"min"in o&&d(2,e=o.min),"max"in o&&d(3,s=o.max),"step"in o&&d(4,r=o.step)},[f,x,e,s,r,n]}class Si extends ze{constructor(h){super(),Ge(this,h,yi,xi,Ne,{label:1,value:0,min:2,max:3,step:4})}}function wi(m){let h,d,x,f;return{c(){h=ie("button"),d=Se("Shoot"),this.h()},l(e){h=se(e,"BUTTON",{});var s=re(h);d=we(s,"Shoot"),s.forEach(X),this.h()},h(){h.disabled=m[0]},m(e,s){te(e,h,s),$(h,d),x||(f=[Le(h,"pointerdown",m[1]),Le(h,"pointerup",m[2]),Le(h,"pointerleave",m[2])],x=!0)},p(e,[s]){s&1&&(h.disabled=e[0])},i:Pe,o:Pe,d(e){e&&X(h),x=!1,rn(f)}}}function Ci(m,h,d){let{value:x}=h,{disabled:f}=h;const e=sn();let s,r;function n(){let i=-1;r=!0,s=setInterval(()=>{x>=1?i=-1:x<=0&&(i=1),d(3,x+=.01*i),d(3,x=+x.toFixed(2))},17)}function o(){r&&(clearInterval(s),e("release",x),d(3,x=0),r=!1)}return m.$$set=i=>{"value"in i&&d(3,x=i.value),"disabled"in i&&d(0,f=i.disabled)},[f,n,o,x]}class Pi extends ze{constructor(h){super(),Ge(this,h,Ci,wi,Ne,{value:3,disabled:0})}}const Mi=[{state:"shoot",player:"player1",random:!0,power:.23,degrees:0}],bi=[{state:"shoot",player:"player1"}],Ai=[{state:"shoot",player:"player2",power:.3,degrees:184}],ki=[{x:.5304521798504799,y:.5607950399638847,player:"player2"},{x:.43462246777163904,y:.8876611418047882,state:"shoot",player:"player1",power:.45,degrees:15}],Ei=[{x:.5304521798504799,y:.5607950399638847,player:"player2"},{state:"position",player:"player1"}],Ti=[{x:.5304521798504799,y:.5607950399638847,player:"player2"},{state:"shoot",player:"player1",power:.15,degrees:-3}],Ii={open:Mi,opentry:bi,fifteen:Ai,opponent:ki,opponenttry:Ei,invalid:Ti};function Qt(m,h,d){const x=m.slice();return x[34]=h[d],x}function Xt(m,h,d){const x=m.slice();return x[37]=h[d],x}function Yt(m,h,d){const x=m.slice();x[40]=h[d];const f=x[17][x[40]];return x[41]=f,x}function Zt(m,h,d){const x=m.slice();return x[40]=h[d],x[45]=d,x}function Jt(m){let h;return{c(){h=ie("div"),this.h()},l(d){h=se(d,"DIV",{class:!0,style:!0}),re(h).forEach(X),this.h()},h(){ae(h,"class",wn(m[40])+" svelte-zuhc1v"),j(h,"--w",Math.floor(ve[m[40]]*m[0])+"px"),j(h,"--b",(ve[m[40]]-ve[m[16][m[45]+1]])/2*m[0]+"px")},m(d,x){te(d,h,x)},p(d,x){x[0]&1&&j(h,"--w",Math.floor(ve[d[40]]*d[0])+"px"),x[0]&1&&j(h,"--b",(ve[d[40]]-ve[d[16][d[45]+1]])/2*d[0]+"px")},d(d){d&&X(h)}}}function jt(m){let h,d=m[41]+"",x;return{c(){h=ie("span"),x=Se(d),this.h()},l(f){h=se(f,"SPAN",{class:!0,style:!0});var e=re(h);x=we(e,d),e.forEach(X),this.h()},h(){ae(h,"class","text-"+m[40]+" svelte-zuhc1v"),j(h,"--w",Math.floor(m[0]/2-ve[m[40]]*m[0]/2)+"px"),j(h,"--d",ve[m[40]]*m[0]+"px")},m(f,e){te(f,h,e),$(h,x)},p(f,e){e[0]&1&&j(h,"--w",Math.floor(f[0]/2-ve[f[40]]*f[0]/2)+"px"),e[0]&1&&j(h,"--d",ve[f[40]]*f[0]+"px")},d(f){f&&X(h)}}}function qt(m){let h;return{c(){h=ie("div"),this.h()},l(d){h=se(d,"DIV",{class:!0,style:!0}),re(h).forEach(X),this.h()},h(){ae(h,"class","quadrant-line svelte-zuhc1v"),j(h,"--w",(ke-Ve)*m[0]/2+"px"),j(h,"--x",Ve*m[0]/2+"px"),j(h,"--angle",m[37]+"deg")},m(d,x){te(d,h,x)},p(d,x){x[0]&1&&j(h,"--w",(ke-Ve)*d[0]/2+"px"),x[0]&1&&j(h,"--x",Ve*d[0]/2+"px")},d(d){d&&X(h)}}}function $t(m){let h;return{c(){h=ie("div"),this.h()},l(d){h=se(d,"DIV",{class:!0,style:!0}),re(h).forEach(X),this.h()},h(){ae(h,"class","peg svelte-zuhc1v"),j(h,"--w",Fe*m[0]+"px"),j(h,"--x",((Ae-Fe)*m[0]+1)/2+"px"),j(h,"--angle",m[34]+"deg")},m(d,x){te(d,h,x)},p(d,x){x[0]&1&&j(h,"--w",Fe*d[0]+"px"),x[0]&1&&j(h,"--x",((Ae-Fe)*d[0]+1)/2+"px")},d(d){d&&X(h)}}}function en(m){let h,d,x,f;const e=[Ri,Di],s=[];function r(n,o){return n[6]==="shoot"?0:1}return h=r(m),d=s[h]=e[h](m),{c(){d.c(),x=de()},l(n){d.l(n),x=de()},m(n,o){s[h].m(n,o),te(n,x,o),f=!0},p(n,o){let i=h;h=r(n),h===i?s[h].p(n,o):(Ee(),ne(s[i],1,1,()=>{s[i]=null}),Te(),d=s[h],d?d.p(n,o):(d=s[h]=e[h](n),d.c()),q(d,1),d.m(x.parentNode,x))},i(n){f||(q(d),f=!0)},o(n){ne(d),f=!1},d(n){n&&X(x),s[h].d(n)}}}function Di(m){let h,d,x,f;return{c(){h=ie("button"),d=Se(m[13])},l(e){h=se(e,"BUTTON",{});var s=re(h);d=we(s,m[13]),s.forEach(X)},m(e,s){te(e,h,s),$(h,d),x||(f=Le(h,"click",m[21]),x=!0)},p(e,s){s[0]&8192&&ct(d,e[13])},i:Pe,o:Pe,d(e){e&&X(h),x=!1,f()}}}function Ri(m){let h,d,x;function f(s){m[23](s)}let e={disabled:m[9]};return m[5]!==void 0&&(e.value=m[5]),h=new Pi({props:e}),Ie.push(()=>Et(h,"value",f)),h.$on("release",m[20]),{c(){Ze(h.$$.fragment)},l(s){Je(h.$$.fragment,s)},m(s,r){je(h,s,r),x=!0},p(s,r){const n={};r[0]&512&&(n.disabled=s[9]),!d&&r[0]&32&&(d=!0,n.value=s[5],kt(()=>d=!1)),h.$set(n)},i(s){x||(q(h.$$.fragment,s),x=!0)},o(s){ne(h.$$.fragment,s),x=!1},d(s){qe(h,s)}}}function tn(m){var s,r,n;let h,d,x;function f(o){m[24](o)}let e={label:m[6]==="shoot"?"aim":m[6],min:(s=m[18][m[6]])==null?void 0:s.min,max:(r=m[18][m[6]])==null?void 0:r.max,step:(n=m[18][m[6]])==null?void 0:n.step};return m[4]!==void 0&&(e.value=m[4]),h=new Si({props:e}),Ie.push(()=>Et(h,"value",f)),{c(){Ze(h.$$.fragment)},l(o){Je(h.$$.fragment,o)},m(o,i){je(h,o,i),x=!0},p(o,i){var c,t,l;const u={};i[0]&64&&(u.label=o[6]==="shoot"?"aim":o[6]),i[0]&64&&(u.min=(c=o[18][o[6]])==null?void 0:c.min),i[0]&64&&(u.max=(t=o[18][o[6]])==null?void 0:t.max),i[0]&64&&(u.step=(l=o[18][o[6]])==null?void 0:l.step),!d&&i[0]&16&&(d=!0,u.value=o[4],kt(()=>d=!1)),h.$set(u)},i(o){x||(q(h.$$.fragment,o),x=!0)},o(o){ne(h.$$.fragment,o),x=!1},d(o){qe(h,o)}}}function nn(m){let h,d,x,f,e;return{c(){h=ie("p"),d=Se("x: "),x=Se(m[7]),f=Se(", y: "),e=Se(m[8]),this.h()},l(s){h=se(s,"P",{class:!0});var r=re(h);d=we(r,"x: "),x=we(r,m[7]),f=we(r,", y: "),e=we(r,m[8]),r.forEach(X),this.h()},h(){ae(h,"class","svelte-zuhc1v")},m(s,r){te(s,h,r),$(h,d),$(h,x),$(h,f),$(h,e)},p(s,r){r[0]&128&&ct(x,s[7]),r[0]&256&&ct(e,s[8])},d(s){s&&X(h)}}}function Bi(m){let h,d,x,f,e,s,r,n,o,i,u,c=`${m[0]}px`,t=`${m[0]}px`,l,a,v,S,b,k,E,g,w,y,p,P,C,A=he(m[16].slice(0,3)),M=[];for(let B=0;B<A.length;B+=1)M[B]=Jt(Zt(m,A,B));let T=he(m[16]),D=[];for(let B=0;B<T.length;B+=1)D[B]=jt(Yt(m,T,B));let V=he(m[14]),W=[];for(let B=0;B<V.length;B+=1)W[B]=qt(Xt(m,V,B));let G=he(m[15]),z=[];for(let B=0;B<G.length;B+=1)z[B]=$t(Qt(m,G,B));let O=!m[10]&&en(m),U=!m[10]&&tn(m),_=m[1]&&nn(m);return{c(){h=ie("div"),d=ie("div"),x=ie("div"),f=ce(),e=ie("div"),s=ce();for(let B=0;B<M.length;B+=1)M[B].c();r=ce(),n=ie("div"),o=ce();for(let B=0;B<D.length;B+=1)D[B].c();i=ce();for(let B=0;B<W.length;B+=1)W[B].c();u=ce();for(let B=0;B<z.length;B+=1)z[B].c();l=ce(),a=ie("div"),S=ce(),b=ie("div"),k=ie("div"),O&&O.c(),E=ce(),g=ie("div"),U&&U.c(),w=ce(),_&&_.c(),y=de(),this.h()},l(B){h=se(B,"DIV",{class:!0});var K=re(h);d=se(K,"DIV",{class:!0});var I=re(d);x=se(I,"DIV",{class:!0,style:!0}),re(x).forEach(X),f=ue(I),e=se(I,"DIV",{class:!0,style:!0}),re(e).forEach(X),s=ue(I);for(let N=0;N<M.length;N+=1)M[N].l(I);r=ue(I),n=se(I,"DIV",{class:!0,style:!0}),re(n).forEach(X),o=ue(I);for(let N=0;N<D.length;N+=1)D[N].l(I);i=ue(I);for(let N=0;N<W.length;N+=1)W[N].l(I);u=ue(I);for(let N=0;N<z.length;N+=1)z[N].l(I);I.forEach(X),l=ue(K),a=se(K,"DIV",{class:!0}),re(a).forEach(X),K.forEach(X),S=ue(B),b=se(B,"DIV",{class:!0});var F=re(b);k=se(F,"DIV",{class:!0});var R=re(k);O&&O.l(R),R.forEach(X),E=ue(F),g=se(F,"DIV",{class:!0});var L=re(g);U&&U.l(L),L.forEach(X),F.forEach(X),w=ue(B),_&&_.l(B),y=de(),this.h()},h(){ae(x,"class","base svelte-zuhc1v"),j(x,"--w",ut*m[0]+"px"),j(x,"--b",Pt/2*m[0]+"px"),ae(e,"class","surface svelte-zuhc1v"),j(e,"--w",Ye*m[0]+"px"),ae(n,"class","twenty svelte-zuhc1v"),j(n,"--w",Math.floor(We*m[0])+"px"),ae(d,"class","bg svelte-zuhc1v"),j(d,"width",c),j(d,"height",t),ae(a,"class","fg svelte-zuhc1v"),ae(h,"class",v="c "+m[12]+" svelte-zuhc1v"),ae(k,"class","top svelte-zuhc1v"),ae(g,"class","bottom svelte-zuhc1v"),ae(b,"class","ui svelte-zuhc1v"),Bt(b,"visible",m[11]||!m[2])},m(B,K){te(B,h,K),$(h,d),$(d,x),$(d,f),$(d,e),$(d,s);for(let I=0;I<M.length;I+=1)M[I]&&M[I].m(d,null);$(d,r),$(d,n),$(d,o);for(let I=0;I<D.length;I+=1)D[I]&&D[I].m(d,null);$(d,i);for(let I=0;I<W.length;I+=1)W[I]&&W[I].m(d,null);$(d,u);for(let I=0;I<z.length;I+=1)z[I]&&z[I].m(d,null);$(h,l),$(h,a),m[22](a),te(B,S,K),te(B,b,K),$(b,k),O&&O.m(k,null),$(b,E),$(b,g),U&&U.m(g,null),te(B,w,K),_&&_.m(B,K),te(B,y,K),p=!0,P||(C=Le(a,"click",m[19]),P=!0)},p(B,K){if((!p||K[0]&1)&&j(x,"--w",ut*B[0]+"px"),(!p||K[0]&1)&&j(x,"--b",Pt/2*B[0]+"px"),(!p||K[0]&1)&&j(e,"--w",Ye*B[0]+"px"),K[0]&65537){A=he(B[16].slice(0,3));let I;for(I=0;I<A.length;I+=1){const F=Zt(B,A,I);M[I]?M[I].p(F,K):(M[I]=Jt(F),M[I].c(),M[I].m(d,r))}for(;I<M.length;I+=1)M[I].d(1);M.length=A.length}if((!p||K[0]&1)&&j(n,"--w",Math.floor(We*B[0])+"px"),K[0]&196609){T=he(B[16]);let I;for(I=0;I<T.length;I+=1){const F=Yt(B,T,I);D[I]?D[I].p(F,K):(D[I]=jt(F),D[I].c(),D[I].m(d,i))}for(;I<D.length;I+=1)D[I].d(1);D.length=T.length}if(K[0]&16385){V=he(B[14]);let I;for(I=0;I<V.length;I+=1){const F=Xt(B,V,I);W[I]?W[I].p(F,K):(W[I]=qt(F),W[I].c(),W[I].m(d,u))}for(;I<W.length;I+=1)W[I].d(1);W.length=V.length}if(K[0]&32769){G=he(B[15]);let I;for(I=0;I<G.length;I+=1){const F=Qt(B,G,I);z[I]?z[I].p(F,K):(z[I]=$t(F),z[I].c(),z[I].m(d,null))}for(;I<z.length;I+=1)z[I].d(1);z.length=G.length}K[0]&1&&c!==(c=`${B[0]}px`)&&j(d,"width",c),K[0]&1&&t!==(t=`${B[0]}px`)&&j(d,"height",t),(!p||K[0]&4096&&v!==(v="c "+B[12]+" svelte-zuhc1v"))&&ae(h,"class",v),B[10]?O&&(Ee(),ne(O,1,1,()=>{O=null}),Te()):O?(O.p(B,K),K[0]&1024&&q(O,1)):(O=en(B),O.c(),q(O,1),O.m(k,null)),B[10]?U&&(Ee(),ne(U,1,1,()=>{U=null}),Te()):U?(U.p(B,K),K[0]&1024&&q(U,1)):(U=tn(B),U.c(),q(U,1),U.m(g,null)),(!p||K[0]&2052)&&Bt(b,"visible",B[11]||!B[2]),B[1]?_?_.p(B,K):(_=nn(B),_.c(),_.m(y.parentNode,y)):_&&(_.d(1),_=null)},i(B){p||(q(O),q(U),p=!0)},o(B){ne(O),ne(U),p=!1},d(B){B&&(X(h),X(S),X(b),X(w),X(y)),_e(M,B),_e(D,B),_e(W,B),_e(z,B),m[22](null),O&&O.d(),U&&U.d(),_&&_.d(B),P=!1,C()}}}const ot=0;function Fi(m,h,d){let x,f,{width:e}=h,{dev:s}=h,{tutorial:r}=h;const n=Dn(),o=[45,135,225,315],i=[15,60,105,150,195,240,285,330],u=["five","ten","fifteen","twenty"],c={five:"5",ten:"10",fifteen:"15",twenty:"20"},t={position:{value:[.5],min:.22,max:.78,step:.01},shoot:{value:[0],min:-90,max:90,step:1}};let l,a=0,v=0,S=t.position.value,b=ot,k="position",E,g,w,y,p;function P(O){s&&(d(7,a=O.offsetX/e),d(8,v=O.offsetY/e))}function C({scores:O,valid:U}){d(5,b=ot),r&&V(),d(9,g=!1)}function A(){n.flickDisc()}function M(){k==="position"?n.positionDisc(S[0]*e):k==="shoot"&&(E=Math.round(S[0]),n.aimDisc({degrees:E,power:.25,visible:r.includes("try")}))}function T(){n.aimDisc({degrees:E,power:b,visible:r.includes("try")})}function D(){k==="position"&&(d(6,k="shoot"),d(4,S=t.shoot.value),d(5,b=ot),n.setState("shoot"))}async function V(){clearTimeout(p),d(10,w=!r.includes("try")),d(11,y=!["regions","score"].includes(r)),d(5,b=ot);const O=Ii[r];if(n.removeDiscs(),O&&O.forEach(n.addDisc),w&&O){const U=O[O.length-1],_=U.random?Math.random()*3-1.5:0,B=U.degrees+_,K=U.random?Math.random()*.07-.035:0,I=U.power+K;p=setTimeout(()=>{d(6,k=O[O.length-1].state),n.aimDisc({degrees:B,power:I}),n.flickDisc()},2e3)}else p=null,n.removeDiscs(),O&&(O.forEach(n.addDisc),d(6,k=O[O.length-1].state)),k==="shoot"&&n.setIndicatorVisible(!0);await Cn(),d(4,S=t[k].value)}Sn(()=>{n.on("shotComplete",C)});function W(O){Ie[O?"unshift":"push"](()=>{l=O,d(3,l)})}function G(O){b=O,d(5,b)}function z(O){S=O,d(4,S)}return m.$$set=O=>{"width"in O&&d(0,e=O.width),"dev"in O&&d(1,s=O.dev),"tutorial"in O&&d(2,r=O.tutorial)},m.$$.update=()=>{m.$$.dirty[0]&64&&d(13,x=k==="position"?"Place Disc":""),m.$$.dirty[0]&1&&d(7,a=0),m.$$.dirty[0]&1&&d(8,v=0),m.$$.dirty[0]&9&&e&&n.init({element:l,width:e}),m.$$.dirty[0]&17&&e&&M(),m.$$.dirty[0]&33&&e&&T(),m.$$.dirty[0]&5&&e&&V(),m.$$.dirty[0]&4&&d(12,f=r?`tutorial tutorial-${r}`:"")},[e,s,r,l,S,b,k,a,v,g,w,y,f,x,o,i,u,c,t,P,A,D,W,G,z]}class Hi extends ze{constructor(h){super(),Ge(this,h,Fi,Bi,Ne,{width:0,dev:1,tutorial:2},null,[-1,-1])}}export{Hi as C,Tt as a,Wi as b,xt as c,he as e,Pn as g};
