import{K as qn,ab as $n,ac as ei,ad as Nn,aa as ti,a8 as ni,s as vt,u as Oe,i as de,d as Q,a1 as ct,h as Ht,Y as ze,a2 as rn,m as rt,C as Gt,e as re,c as oe,a as se,ae as dt,a7 as on,D as Ut,E as Xt,F as Yt,n as Qe,a4 as Pt,r as Gn,t as Le,q as Pe,b as He,v as Me,j as ce,f as $,g as tt,af as Qt,X as wt,a6 as Wt,a5 as We,y as le,x as ii,ag as ri,k as oi}from"./scheduler.CMTgM8h0.js";import{S as mt,i as ht,g as Ze,a as pe,c as Ke,t as ue,f as Zt,b as gt,d as _t,m as yt,e as xt,h as pn}from"./index.Yj-hjQkw.js";import{w as ot,b as Kt,d as zt,r as ft}from"./paths.CghxdHVO.js";function Ue(h){return(h==null?void 0:h.length)!==void 0?h:Array.from(h)}function an(h,v){const r={},m={},u={$$scope:1};let n=h.length;for(;n--;){const o=h[n],c=v[n];if(c){for(const s in o)s in c||(m[s]=1);for(const s in c)u[s]||(r[s]=c[s],u[s]=1);h[n]=c}else for(const s in o)u[s]=1}for(const o in m)o in r||(r[o]=void 0);return r}function no(h){return typeof h=="object"&&h!==null?h:{}}function bt(h,v,r){this.k=h,this.x=v,this.y=r}bt.prototype={constructor:bt,scale:function(h){return h===1?this:new bt(this.k*h,this.x,this.y)},translate:function(h,v){return h===0&v===0?this:new bt(this.k,this.x+this.k*h,this.y+this.k*v)},apply:function(h){return[h[0]*this.k+this.x,h[1]*this.k+this.y]},applyX:function(h){return h*this.k+this.x},applyY:function(h){return h*this.k+this.y},invert:function(h){return[(h[0]-this.x)/this.k,(h[1]-this.y)/this.k]},invertX:function(h){return(h-this.x)/this.k},invertY:function(h){return(h-this.y)/this.k},rescaleX:function(h){return h.copy().domain(h.range().map(this.invertX,this).map(h.invert,h))},rescaleY:function(h){return h.copy().domain(h.range().map(this.invertY,this).map(h.invert,h))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};bt.prototype;function vn(h,{delay:v=0,duration:r=400,easing:m=qn}={}){const u=+getComputedStyle(h).opacity;return{delay:v,duration:r,easing:m,css:n=>`opacity: ${n*u}`}}var Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Un(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Xn={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(h,v){(function(m,u){h.exports=u()})(Ne,function(){return function(r){var m={};function u(n){if(m[n])return m[n].exports;var o=m[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,u),o.l=!0,o.exports}return u.m=r,u.c=m,u.d=function(n,o,c){u.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:c})},u.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},u.t=function(n,o){if(o&1&&(n=u(n)),o&8||o&4&&typeof n=="object"&&n&&n.__esModule)return n;var c=Object.create(null);if(u.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:n}),o&2&&typeof n!="string")for(var s in n)u.d(c,s,(function(d){return n[d]}).bind(null,s));return c},u.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return u.d(o,"a",o),o},u.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},u.p="",u(u.s=20)}([function(r,m){var u={};r.exports=u,function(){u._baseDelta=1e3/60,u._nextId=0,u._seed=0,u._nowStartTime=+new Date,u._warnedOnce={},u._decomp=null,u.extend=function(o,c){var s,d;typeof c=="boolean"?(s=2,d=c):(s=1,d=!0);for(var f=s;f<arguments.length;f++){var e=arguments[f];if(e)for(var i in e)d&&e[i]&&e[i].constructor===Object&&(!o[i]||o[i].constructor===Object)?(o[i]=o[i]||{},u.extend(o[i],d,e[i])):o[i]=e[i]}return o},u.clone=function(o,c){return u.extend({},c,o)},u.keys=function(o){if(Object.keys)return Object.keys(o);var c=[];for(var s in o)c.push(s);return c},u.values=function(o){var c=[];if(Object.keys){for(var s=Object.keys(o),d=0;d<s.length;d++)c.push(o[s[d]]);return c}for(var f in o)c.push(o[f]);return c},u.get=function(o,c,s,d){c=c.split(".").slice(s,d);for(var f=0;f<c.length;f+=1)o=o[c[f]];return o},u.set=function(o,c,s,d,f){var e=c.split(".").slice(d,f);return u.get(o,c,0,-1)[e[e.length-1]]=s,s},u.shuffle=function(o){for(var c=o.length-1;c>0;c--){var s=Math.floor(u.random()*(c+1)),d=o[c];o[c]=o[s],o[s]=d}return o},u.choose=function(o){return o[Math.floor(u.random()*o.length)]},u.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},u.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},u.isFunction=function(o){return typeof o=="function"},u.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},u.isString=function(o){return toString.call(o)==="[object String]"},u.clamp=function(o,c,s){return o<c?c:o>s?s:o},u.sign=function(o){return o<0?-1:1},u.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-u._nowStartTime},u.random=function(o,c){return o=typeof o<"u"?o:0,c=typeof c<"u"?c:1,o+n()*(c-o)};var n=function(){return u._seed=(u._seed*9301+49297)%233280,u._seed/233280};u.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},u.logLevel=1,u.log=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.info=function(){console&&u.logLevel>0&&u.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warn=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");u._warnedOnce[o]||(u.warn(o),u._warnedOnce[o]=!0)},u.deprecated=function(o,c,s){o[c]=u.chain(function(){u.warnOnce("🔅 deprecated 🔅",s)},o[c])},u.nextId=function(){return u._nextId++},u.indexOf=function(o,c){if(o.indexOf)return o.indexOf(c);for(var s=0;s<o.length;s++)if(o[s]===c)return s;return-1},u.map=function(o,c){if(o.map)return o.map(c);for(var s=[],d=0;d<o.length;d+=1)s.push(c(o[d]));return s},u.topologicalSort=function(o){var c=[],s=[],d=[];for(var f in o)!s[f]&&!d[f]&&u._topologicalSort(f,s,d,o,c);return c},u._topologicalSort=function(o,c,s,d,f){var e=d[o]||[];s[o]=!0;for(var i=0;i<e.length;i+=1){var t=e[i];s[t]||c[t]||u._topologicalSort(t,c,s,d,f)}s[o]=!1,c[o]=!0,f.push(o)},u.chain=function(){for(var o=[],c=0;c<arguments.length;c+=1){var s=arguments[c];s._chained?o.push.apply(o,s._chained):o.push(s)}var d=function(){for(var f,e=new Array(arguments.length),i=0,t=arguments.length;i<t;i++)e[i]=arguments[i];for(i=0;i<o.length;i+=1){var l=o[i].apply(f,e);typeof l<"u"&&(f=l)}return f};return d._chained=o,d},u.chainPathBefore=function(o,c,s){return u.set(o,c,u.chain(s,u.get(o,c)))},u.chainPathAfter=function(o,c,s){return u.set(o,c,u.chain(u.get(o,c),s))},u.setDecomp=function(o){u._decomp=o},u.getDecomp=function(){var o=u._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof Ne<"u"&&(o=Ne.decomp)}catch{o=null}return o}}()},function(r,m){var u={};r.exports=u,function(){u.create=function(n){var o={min:{x:0,y:0},max:{x:0,y:0}};return n&&u.update(o,n),o},u.update=function(n,o,c){n.min.x=1/0,n.max.x=-1/0,n.min.y=1/0,n.max.y=-1/0;for(var s=0;s<o.length;s++){var d=o[s];d.x>n.max.x&&(n.max.x=d.x),d.x<n.min.x&&(n.min.x=d.x),d.y>n.max.y&&(n.max.y=d.y),d.y<n.min.y&&(n.min.y=d.y)}c&&(c.x>0?n.max.x+=c.x:n.min.x+=c.x,c.y>0?n.max.y+=c.y:n.min.y+=c.y)},u.contains=function(n,o){return o.x>=n.min.x&&o.x<=n.max.x&&o.y>=n.min.y&&o.y<=n.max.y},u.overlaps=function(n,o){return n.min.x<=o.max.x&&n.max.x>=o.min.x&&n.max.y>=o.min.y&&n.min.y<=o.max.y},u.translate=function(n,o){n.min.x+=o.x,n.max.x+=o.x,n.min.y+=o.y,n.max.y+=o.y},u.shift=function(n,o){var c=n.max.x-n.min.x,s=n.max.y-n.min.y;n.min.x=o.x,n.max.x=o.x+c,n.min.y=o.y,n.max.y=o.y+s}}()},function(r,m){var u={};r.exports=u,function(){u.create=function(n,o){return{x:n||0,y:o||0}},u.clone=function(n){return{x:n.x,y:n.y}},u.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},u.magnitudeSquared=function(n){return n.x*n.x+n.y*n.y},u.rotate=function(n,o,c){var s=Math.cos(o),d=Math.sin(o);c||(c={});var f=n.x*s-n.y*d;return c.y=n.x*d+n.y*s,c.x=f,c},u.rotateAbout=function(n,o,c,s){var d=Math.cos(o),f=Math.sin(o);s||(s={});var e=c.x+((n.x-c.x)*d-(n.y-c.y)*f);return s.y=c.y+((n.x-c.x)*f+(n.y-c.y)*d),s.x=e,s},u.normalise=function(n){var o=u.magnitude(n);return o===0?{x:0,y:0}:{x:n.x/o,y:n.y/o}},u.dot=function(n,o){return n.x*o.x+n.y*o.y},u.cross=function(n,o){return n.x*o.y-n.y*o.x},u.cross3=function(n,o,c){return(o.x-n.x)*(c.y-n.y)-(o.y-n.y)*(c.x-n.x)},u.add=function(n,o,c){return c||(c={}),c.x=n.x+o.x,c.y=n.y+o.y,c},u.sub=function(n,o,c){return c||(c={}),c.x=n.x-o.x,c.y=n.y-o.y,c},u.mult=function(n,o){return{x:n.x*o,y:n.y*o}},u.div=function(n,o){return{x:n.x/o,y:n.y/o}},u.perp=function(n,o){return o=o===!0?-1:1,{x:o*-n.y,y:o*n.x}},u.neg=function(n){return{x:-n.x,y:-n.y}},u.angle=function(n,o){return Math.atan2(o.y-n.y,o.x-n.x)},u._temp=[u.create(),u.create(),u.create(),u.create(),u.create(),u.create()]}()},function(r,m,u){var n={};r.exports=n;var o=u(2),c=u(0);(function(){n.create=function(s,d){for(var f=[],e=0;e<s.length;e++){var i=s[e],t={x:i.x,y:i.y,index:e,body:d,isInternal:!1};f.push(t)}return f},n.fromPath=function(s,d){var f=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,e=[];return s.replace(f,function(i,t,l){e.push({x:parseFloat(t),y:parseFloat(l)})}),n.create(e,d)},n.centre=function(s){for(var d=n.area(s,!0),f={x:0,y:0},e,i,t,l=0;l<s.length;l++)t=(l+1)%s.length,e=o.cross(s[l],s[t]),i=o.mult(o.add(s[l],s[t]),e),f=o.add(f,i);return o.div(f,6*d)},n.mean=function(s){for(var d={x:0,y:0},f=0;f<s.length;f++)d.x+=s[f].x,d.y+=s[f].y;return o.div(d,s.length)},n.area=function(s,d){for(var f=0,e=s.length-1,i=0;i<s.length;i++)f+=(s[e].x-s[i].x)*(s[e].y+s[i].y),e=i;return d?f/2:Math.abs(f)/2},n.inertia=function(s,d){for(var f=0,e=0,i=s,t,l,a=0;a<i.length;a++)l=(a+1)%i.length,t=Math.abs(o.cross(i[l],i[a])),f+=t*(o.dot(i[l],i[l])+o.dot(i[l],i[a])+o.dot(i[a],i[a])),e+=t;return d/6*(f/e)},n.translate=function(s,d,f){f=typeof f<"u"?f:1;var e=s.length,i=d.x*f,t=d.y*f,l;for(l=0;l<e;l++)s[l].x+=i,s[l].y+=t;return s},n.rotate=function(s,d,f){if(d!==0){var e=Math.cos(d),i=Math.sin(d),t=f.x,l=f.y,a=s.length,p,g,w,T;for(T=0;T<a;T++)p=s[T],g=p.x-t,w=p.y-l,p.x=t+(g*e-w*i),p.y=l+(g*i+w*e);return s}},n.contains=function(s,d){for(var f=d.x,e=d.y,i=s.length,t=s[i-1],l,a=0;a<i;a++){if(l=s[a],(f-t.x)*(l.y-t.y)+(e-t.y)*(t.x-l.x)>0)return!1;t=l}return!0},n.scale=function(s,d,f,e){if(d===1&&f===1)return s;e=e||n.centre(s);for(var i,t,l=0;l<s.length;l++)i=s[l],t=o.sub(i,e),s[l].x=e.x+t.x*d,s[l].y=e.y+t.y*f;return s},n.chamfer=function(s,d,f,e,i){typeof d=="number"?d=[d]:d=d||[8],f=typeof f<"u"?f:-1,e=e||2,i=i||14;for(var t=[],l=0;l<s.length;l++){var a=s[l-1>=0?l-1:s.length-1],p=s[l],g=s[(l+1)%s.length],w=d[l<d.length?l:d.length-1];if(w===0){t.push(p);continue}var T=o.normalise({x:p.y-a.y,y:a.x-p.x}),C=o.normalise({x:g.y-p.y,y:p.x-g.x}),_=Math.sqrt(2*Math.pow(w,2)),S=o.mult(c.clone(T),w),x=o.normalise(o.mult(o.add(T,C),.5)),y=o.sub(p,o.mult(x,_)),b=f;f===-1&&(b=Math.pow(w,.32)*1.75),b=c.clamp(b,e,i),b%2===1&&(b+=1);for(var A=Math.acos(o.dot(T,C)),M=A/b,P=0;P<b;P++)t.push(o.add(o.rotate(S,M*P),y))}return t},n.clockwiseSort=function(s){var d=n.mean(s);return s.sort(function(f,e){return o.angle(d,f)-o.angle(d,e)}),s},n.isConvex=function(s){var d=0,f=s.length,e,i,t,l;if(f<3)return null;for(e=0;e<f;e++)if(i=(e+1)%f,t=(e+2)%f,l=(s[i].x-s[e].x)*(s[t].y-s[i].y),l-=(s[i].y-s[e].y)*(s[t].x-s[i].x),l<0?d|=1:l>0&&(d|=2),d===3)return!1;return d!==0?!0:null},n.hull=function(s){var d=[],f=[],e,i;for(s=s.slice(0),s.sort(function(t,l){var a=t.x-l.x;return a!==0?a:t.y-l.y}),i=0;i<s.length;i+=1){for(e=s[i];f.length>=2&&o.cross3(f[f.length-2],f[f.length-1],e)<=0;)f.pop();f.push(e)}for(i=s.length-1;i>=0;i-=1){for(e=s[i];d.length>=2&&o.cross3(d[d.length-2],d[d.length-1],e)<=0;)d.pop();d.push(e)}return d.pop(),f.pop(),d.concat(f)}})()},function(r,m,u){var n={};r.exports=n;var o=u(3),c=u(2),s=u(7),d=u(0),f=u(1),e=u(11);(function(){n._timeCorrection=!0,n._inertiaScale=4,n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,n._baseDelta=1e3/60,n.create=function(t){var l={id:d.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},a=d.extend(l,t);return i(a,t),a},n.nextGroup=function(t){return t?n._nextNonCollidingGroupId--:n._nextCollidingGroupId++},n.nextCategory=function(){return n._nextCategory=n._nextCategory<<1,n._nextCategory};var i=function(t,l){l=l||{},n.set(t,{bounds:t.bounds||f.create(t.vertices),positionPrev:t.positionPrev||c.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),o.rotate(t.vertices,t.angle,t.position),e.rotate(t.axes,t.angle),f.update(t.bounds,t.vertices,t.velocity),n.set(t,{axes:l.axes||t.axes,area:l.area||t.area,mass:l.mass||t.mass,inertia:l.inertia||t.inertia});var a=t.isStatic?"#14151f":d.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),p=t.isStatic?"#555":"#ccc",g=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||a,t.render.strokeStyle=t.render.strokeStyle||p,t.render.lineWidth=t.render.lineWidth||g,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};n.set=function(t,l,a){var p;typeof l=="string"&&(p=l,l={},l[p]=a);for(p in l)if(Object.prototype.hasOwnProperty.call(l,p))switch(a=l[p],p){case"isStatic":n.setStatic(t,a);break;case"isSleeping":s.set(t,a);break;case"mass":n.setMass(t,a);break;case"density":n.setDensity(t,a);break;case"inertia":n.setInertia(t,a);break;case"vertices":n.setVertices(t,a);break;case"position":n.setPosition(t,a);break;case"angle":n.setAngle(t,a);break;case"velocity":n.setVelocity(t,a);break;case"angularVelocity":n.setAngularVelocity(t,a);break;case"speed":n.setSpeed(t,a);break;case"angularSpeed":n.setAngularSpeed(t,a);break;case"parts":n.setParts(t,a);break;case"centre":n.setCentre(t,a);break;default:t[p]=a}},n.setStatic=function(t,l){for(var a=0;a<t.parts.length;a++){var p=t.parts[a];l?(p.isStatic||(p._original={restitution:p.restitution,friction:p.friction,mass:p.mass,inertia:p.inertia,density:p.density,inverseMass:p.inverseMass,inverseInertia:p.inverseInertia}),p.restitution=0,p.friction=1,p.mass=p.inertia=p.density=1/0,p.inverseMass=p.inverseInertia=0,p.positionPrev.x=p.position.x,p.positionPrev.y=p.position.y,p.anglePrev=p.angle,p.angularVelocity=0,p.speed=0,p.angularSpeed=0,p.motion=0):p._original&&(p.restitution=p._original.restitution,p.friction=p._original.friction,p.mass=p._original.mass,p.inertia=p._original.inertia,p.density=p._original.density,p.inverseMass=p._original.inverseMass,p.inverseInertia=p._original.inverseInertia,p._original=null),p.isStatic=l}},n.setMass=function(t,l){var a=t.inertia/(t.mass/6);t.inertia=a*(l/6),t.inverseInertia=1/t.inertia,t.mass=l,t.inverseMass=1/t.mass,t.density=t.mass/t.area},n.setDensity=function(t,l){n.setMass(t,l*t.area),t.density=l},n.setInertia=function(t,l){t.inertia=l,t.inverseInertia=1/t.inertia},n.setVertices=function(t,l){l[0].body===t?t.vertices=l:t.vertices=o.create(l,t),t.axes=e.fromVertices(t.vertices),t.area=o.area(t.vertices),n.setMass(t,t.density*t.area);var a=o.centre(t.vertices);o.translate(t.vertices,a,-1),n.setInertia(t,n._inertiaScale*o.inertia(t.vertices,t.mass)),o.translate(t.vertices,t.position),f.update(t.bounds,t.vertices,t.velocity)},n.setParts=function(t,l,a){var p;for(l=l.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,p=0;p<l.length;p++){var g=l[p];g!==t&&(g.parent=t,t.parts.push(g))}if(t.parts.length!==1){if(a=typeof a<"u"?a:!0,a){var w=[];for(p=0;p<l.length;p++)w=w.concat(l[p].vertices);o.clockwiseSort(w);var T=o.hull(w),C=o.centre(T);n.setVertices(t,T),o.translate(t.vertices,C)}var _=n._totalProperties(t);t.area=_.area,t.parent=t,t.position.x=_.centre.x,t.position.y=_.centre.y,t.positionPrev.x=_.centre.x,t.positionPrev.y=_.centre.y,n.setMass(t,_.mass),n.setInertia(t,_.inertia),n.setPosition(t,_.centre)}},n.setCentre=function(t,l,a){a?(t.positionPrev.x+=l.x,t.positionPrev.y+=l.y,t.position.x+=l.x,t.position.y+=l.y):(t.positionPrev.x=l.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=l.y-(t.position.y-t.positionPrev.y),t.position.x=l.x,t.position.y=l.y)},n.setPosition=function(t,l,a){var p=c.sub(l,t.position);a?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=p.x,t.velocity.y=p.y,t.speed=c.magnitude(p)):(t.positionPrev.x+=p.x,t.positionPrev.y+=p.y);for(var g=0;g<t.parts.length;g++){var w=t.parts[g];w.position.x+=p.x,w.position.y+=p.y,o.translate(w.vertices,p),f.update(w.bounds,w.vertices,t.velocity)}},n.setAngle=function(t,l,a){var p=l-t.angle;a?(t.anglePrev=t.angle,t.angularVelocity=p,t.angularSpeed=Math.abs(p)):t.anglePrev+=p;for(var g=0;g<t.parts.length;g++){var w=t.parts[g];w.angle+=p,o.rotate(w.vertices,p,t.position),e.rotate(w.axes,p),f.update(w.bounds,w.vertices,t.velocity),g>0&&c.rotateAbout(w.position,p,t.position,w.position)}},n.setVelocity=function(t,l){var a=t.deltaTime/n._baseDelta;t.positionPrev.x=t.position.x-l.x*a,t.positionPrev.y=t.position.y-l.y*a,t.velocity.x=(t.position.x-t.positionPrev.x)/a,t.velocity.y=(t.position.y-t.positionPrev.y)/a,t.speed=c.magnitude(t.velocity)},n.getVelocity=function(t){var l=n._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*l,y:(t.position.y-t.positionPrev.y)*l}},n.getSpeed=function(t){return c.magnitude(n.getVelocity(t))},n.setSpeed=function(t,l){n.setVelocity(t,c.mult(c.normalise(n.getVelocity(t)),l))},n.setAngularVelocity=function(t,l){var a=t.deltaTime/n._baseDelta;t.anglePrev=t.angle-l*a,t.angularVelocity=(t.angle-t.anglePrev)/a,t.angularSpeed=Math.abs(t.angularVelocity)},n.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*n._baseDelta/t.deltaTime},n.getAngularSpeed=function(t){return Math.abs(n.getAngularVelocity(t))},n.setAngularSpeed=function(t,l){n.setAngularVelocity(t,d.sign(n.getAngularVelocity(t))*l)},n.translate=function(t,l,a){n.setPosition(t,c.add(t.position,l),a)},n.rotate=function(t,l,a,p){if(!a)n.setAngle(t,t.angle+l,p);else{var g=Math.cos(l),w=Math.sin(l),T=t.position.x-a.x,C=t.position.y-a.y;n.setPosition(t,{x:a.x+(T*g-C*w),y:a.y+(T*w+C*g)},p),n.setAngle(t,t.angle+l,p)}},n.scale=function(t,l,a,p){var g=0,w=0;p=p||t.position;for(var T=0;T<t.parts.length;T++){var C=t.parts[T];o.scale(C.vertices,l,a,p),C.axes=e.fromVertices(C.vertices),C.area=o.area(C.vertices),n.setMass(C,t.density*C.area),o.translate(C.vertices,{x:-C.position.x,y:-C.position.y}),n.setInertia(C,n._inertiaScale*o.inertia(C.vertices,C.mass)),o.translate(C.vertices,{x:C.position.x,y:C.position.y}),T>0&&(g+=C.area,w+=C.inertia),C.position.x=p.x+(C.position.x-p.x)*l,C.position.y=p.y+(C.position.y-p.y)*a,f.update(C.bounds,C.vertices,t.velocity)}t.parts.length>1&&(t.area=g,t.isStatic||(n.setMass(t,t.density*g),n.setInertia(t,w))),t.circleRadius&&(l===a?t.circleRadius*=l:t.circleRadius=null)},n.update=function(t,l){l=(typeof l<"u"?l:1e3/60)*t.timeScale;var a=l*l,p=n._timeCorrection?l/(t.deltaTime||l):1,g=1-t.frictionAir*(l/d._baseDelta),w=(t.position.x-t.positionPrev.x)*p,T=(t.position.y-t.positionPrev.y)*p;t.velocity.x=w*g+t.force.x/t.mass*a,t.velocity.y=T*g+t.force.y/t.mass*a,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=l,t.angularVelocity=(t.angle-t.anglePrev)*g*p+t.torque/t.inertia*a,t.anglePrev=t.angle,t.angle+=t.angularVelocity;for(var C=0;C<t.parts.length;C++){var _=t.parts[C];o.translate(_.vertices,t.velocity),C>0&&(_.position.x+=t.velocity.x,_.position.y+=t.velocity.y),t.angularVelocity!==0&&(o.rotate(_.vertices,t.angularVelocity,t.position),e.rotate(_.axes,t.angularVelocity),C>0&&c.rotateAbout(_.position,t.angularVelocity,t.position,_.position)),f.update(_.bounds,_.vertices,t.velocity)}},n.updateVelocities=function(t){var l=n._baseDelta/t.deltaTime,a=t.velocity;a.x=(t.position.x-t.positionPrev.x)*l,a.y=(t.position.y-t.positionPrev.y)*l,t.speed=Math.sqrt(a.x*a.x+a.y*a.y),t.angularVelocity=(t.angle-t.anglePrev)*l,t.angularSpeed=Math.abs(t.angularVelocity)},n.applyForce=function(t,l,a){var p={x:l.x-t.position.x,y:l.y-t.position.y};t.force.x+=a.x,t.force.y+=a.y,t.torque+=p.x*a.y-p.y*a.x},n._totalProperties=function(t){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},a=t.parts.length===1?0:1;a<t.parts.length;a++){var p=t.parts[a],g=p.mass!==1/0?p.mass:1;l.mass+=g,l.area+=p.area,l.inertia+=p.inertia,l.centre=c.add(l.centre,c.mult(p.position,g))}return l.centre=c.div(l.centre,l.mass),l}})()},function(r,m,u){var n={};r.exports=n;var o=u(0);(function(){n.on=function(c,s,d){for(var f=s.split(" "),e,i=0;i<f.length;i++)e=f[i],c.events=c.events||{},c.events[e]=c.events[e]||[],c.events[e].push(d);return d},n.off=function(c,s,d){if(!s){c.events={};return}typeof s=="function"&&(d=s,s=o.keys(c.events).join(" "));for(var f=s.split(" "),e=0;e<f.length;e++){var i=c.events[f[e]],t=[];if(d&&i)for(var l=0;l<i.length;l++)i[l]!==d&&t.push(i[l]);c.events[f[e]]=t}},n.trigger=function(c,s,d){var f,e,i,t,l=c.events;if(l&&o.keys(l).length>0){d||(d={}),f=s.split(" ");for(var a=0;a<f.length;a++)if(e=f[a],i=l[e],i){t=o.clone(d,!1),t.name=e,t.source=c;for(var p=0;p<i.length;p++)i[p].apply(c,[t])}}}})()},function(r,m,u){var n={};r.exports=n;var o=u(5),c=u(0),s=u(1),d=u(4);(function(){n.create=function(f){return c.extend({id:c.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},f)},n.setModified=function(f,e,i,t){if(f.isModified=e,e&&f.cache&&(f.cache.allBodies=null,f.cache.allConstraints=null,f.cache.allComposites=null),i&&f.parent&&n.setModified(f.parent,e,i,t),t)for(var l=0;l<f.composites.length;l++){var a=f.composites[l];n.setModified(a,e,i,t)}},n.add=function(f,e){var i=[].concat(e);o.trigger(f,"beforeAdd",{object:e});for(var t=0;t<i.length;t++){var l=i[t];switch(l.type){case"body":if(l.parent!==l){c.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}n.addBody(f,l);break;case"constraint":n.addConstraint(f,l);break;case"composite":n.addComposite(f,l);break;case"mouseConstraint":n.addConstraint(f,l.constraint);break}}return o.trigger(f,"afterAdd",{object:e}),f},n.remove=function(f,e,i){var t=[].concat(e);o.trigger(f,"beforeRemove",{object:e});for(var l=0;l<t.length;l++){var a=t[l];switch(a.type){case"body":n.removeBody(f,a,i);break;case"constraint":n.removeConstraint(f,a,i);break;case"composite":n.removeComposite(f,a,i);break;case"mouseConstraint":n.removeConstraint(f,a.constraint);break}}return o.trigger(f,"afterRemove",{object:e}),f},n.addComposite=function(f,e){return f.composites.push(e),e.parent=f,n.setModified(f,!0,!0,!1),f},n.removeComposite=function(f,e,i){var t=c.indexOf(f.composites,e);if(t!==-1){var l=n.allBodies(e);n.removeCompositeAt(f,t);for(var a=0;a<l.length;a++)l[a].sleepCounter=0}if(i)for(var a=0;a<f.composites.length;a++)n.removeComposite(f.composites[a],e,!0);return f},n.removeCompositeAt=function(f,e){return f.composites.splice(e,1),n.setModified(f,!0,!0,!1),f},n.addBody=function(f,e){return f.bodies.push(e),n.setModified(f,!0,!0,!1),f},n.removeBody=function(f,e,i){var t=c.indexOf(f.bodies,e);if(t!==-1&&(n.removeBodyAt(f,t),e.sleepCounter=0),i)for(var l=0;l<f.composites.length;l++)n.removeBody(f.composites[l],e,!0);return f},n.removeBodyAt=function(f,e){return f.bodies.splice(e,1),n.setModified(f,!0,!0,!1),f},n.addConstraint=function(f,e){return f.constraints.push(e),n.setModified(f,!0,!0,!1),f},n.removeConstraint=function(f,e,i){var t=c.indexOf(f.constraints,e);if(t!==-1&&n.removeConstraintAt(f,t),i)for(var l=0;l<f.composites.length;l++)n.removeConstraint(f.composites[l],e,!0);return f},n.removeConstraintAt=function(f,e){return f.constraints.splice(e,1),n.setModified(f,!0,!0,!1),f},n.clear=function(f,e,i){if(i)for(var t=0;t<f.composites.length;t++)n.clear(f.composites[t],e,!0);return e?f.bodies=f.bodies.filter(function(l){return l.isStatic}):f.bodies.length=0,f.constraints.length=0,f.composites.length=0,n.setModified(f,!0,!0,!1),f},n.allBodies=function(f){if(f.cache&&f.cache.allBodies)return f.cache.allBodies;for(var e=[].concat(f.bodies),i=0;i<f.composites.length;i++)e=e.concat(n.allBodies(f.composites[i]));return f.cache&&(f.cache.allBodies=e),e},n.allConstraints=function(f){if(f.cache&&f.cache.allConstraints)return f.cache.allConstraints;for(var e=[].concat(f.constraints),i=0;i<f.composites.length;i++)e=e.concat(n.allConstraints(f.composites[i]));return f.cache&&(f.cache.allConstraints=e),e},n.allComposites=function(f){if(f.cache&&f.cache.allComposites)return f.cache.allComposites;for(var e=[].concat(f.composites),i=0;i<f.composites.length;i++)e=e.concat(n.allComposites(f.composites[i]));return f.cache&&(f.cache.allComposites=e),e},n.get=function(f,e,i){var t,l;switch(i){case"body":t=n.allBodies(f);break;case"constraint":t=n.allConstraints(f);break;case"composite":t=n.allComposites(f).concat(f);break}return t?(l=t.filter(function(a){return a.id.toString()===e.toString()}),l.length===0?null:l[0]):null},n.move=function(f,e,i){return n.remove(f,e),n.add(i,e),f},n.rebase=function(f){for(var e=n.allBodies(f).concat(n.allConstraints(f)).concat(n.allComposites(f)),i=0;i<e.length;i++)e[i].id=c.nextId();return f},n.translate=function(f,e,i){for(var t=i?n.allBodies(f):f.bodies,l=0;l<t.length;l++)d.translate(t[l],e);return f},n.rotate=function(f,e,i,t){for(var l=Math.cos(e),a=Math.sin(e),p=t?n.allBodies(f):f.bodies,g=0;g<p.length;g++){var w=p[g],T=w.position.x-i.x,C=w.position.y-i.y;d.setPosition(w,{x:i.x+(T*l-C*a),y:i.y+(T*a+C*l)}),d.rotate(w,e)}return f},n.scale=function(f,e,i,t,l){for(var a=l?n.allBodies(f):f.bodies,p=0;p<a.length;p++){var g=a[p],w=g.position.x-t.x,T=g.position.y-t.y;d.setPosition(g,{x:t.x+w*e,y:t.y+T*i}),d.scale(g,e,i)}return f},n.bounds=function(f){for(var e=n.allBodies(f),i=[],t=0;t<e.length;t+=1){var l=e[t];i.push(l.bounds.min,l.bounds.max)}return s.create(i)}})()},function(r,m,u){var n={};r.exports=n;var o=u(4),c=u(5),s=u(0);(function(){n._motionWakeThreshold=.18,n._motionSleepThreshold=.08,n._minBias=.9,n.update=function(d,f){for(var e=f/s._baseDelta,i=n._motionSleepThreshold,t=0;t<d.length;t++){var l=d[t],a=o.getSpeed(l),p=o.getAngularSpeed(l),g=a*a+p*p;if(l.force.x!==0||l.force.y!==0){n.set(l,!1);continue}var w=Math.min(l.motion,g),T=Math.max(l.motion,g);l.motion=n._minBias*w+(1-n._minBias)*T,l.sleepThreshold>0&&l.motion<i?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold/e&&n.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},n.afterCollisions=function(d){for(var f=n._motionSleepThreshold,e=0;e<d.length;e++){var i=d[e];if(i.isActive){var t=i.collision,l=t.bodyA.parent,a=t.bodyB.parent;if(!(l.isSleeping&&a.isSleeping||l.isStatic||a.isStatic)&&(l.isSleeping||a.isSleeping)){var p=l.isSleeping&&!l.isStatic?l:a,g=p===l?a:l;!p.isStatic&&g.motion>f&&n.set(p,!1)}}}},n.set=function(d,f){var e=d.isSleeping;f?(d.isSleeping=!0,d.sleepCounter=d.sleepThreshold,d.positionImpulse.x=0,d.positionImpulse.y=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.speed=0,d.angularSpeed=0,d.motion=0,e||c.trigger(d,"sleepStart")):(d.isSleeping=!1,d.sleepCounter=0,e&&c.trigger(d,"sleepEnd"))}})()},function(r,m,u){var n={};r.exports=n;var o=u(3),c=u(9);(function(){var s=[],d={overlap:0,axis:null},f={overlap:0,axis:null};n.create=function(e,i){return{pair:null,collided:!1,bodyA:e,bodyB:i,parentA:e.parent,parentB:i.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},n.collides=function(e,i,t){if(n._overlapAxes(d,e.vertices,i.vertices,e.axes),d.overlap<=0||(n._overlapAxes(f,i.vertices,e.vertices,i.axes),f.overlap<=0))return null;var l=t&&t.table[c.id(e,i)],a;l?a=l.collision:(a=n.create(e,i),a.collided=!0,a.bodyA=e.id<i.id?e:i,a.bodyB=e.id<i.id?i:e,a.parentA=a.bodyA.parent,a.parentB=a.bodyB.parent),e=a.bodyA,i=a.bodyB;var p;d.overlap<f.overlap?p=d:p=f;var g=a.normal,w=a.tangent,T=a.penetration,C=a.supports,_=p.overlap,S=p.axis,x=S.x,y=S.y,b=i.position.x-e.position.x,A=i.position.y-e.position.y;x*b+y*A>=0&&(x=-x,y=-y),g.x=x,g.y=y,w.x=-y,w.y=x,T.x=x*_,T.y=y*_,a.depth=_;var M=n._findSupports(e,i,g,1),P=0;if(o.contains(e.vertices,M[0])&&(C[P++]=M[0]),o.contains(e.vertices,M[1])&&(C[P++]=M[1]),P<2){var k=n._findSupports(i,e,g,-1);o.contains(i.vertices,k[0])&&(C[P++]=k[0]),P<2&&o.contains(i.vertices,k[1])&&(C[P++]=k[1])}return P===0&&(C[P++]=M[0]),a.supportCount=P,a},n._overlapAxes=function(e,i,t,l){var a=i.length,p=t.length,g=i[0].x,w=i[0].y,T=t[0].x,C=t[0].y,_=l.length,S=Number.MAX_VALUE,x=0,y,b,A,M,P,k;for(P=0;P<_;P++){var I=l[P],D=I.x,V=I.y,R=g*D+w*V,N=T*D+C*V,Y=R,G=N;for(k=1;k<a;k+=1)M=i[k].x*D+i[k].y*V,M>Y?Y=M:M<R&&(R=M);for(k=1;k<p;k+=1)M=t[k].x*D+t[k].y*V,M>G?G=M:M<N&&(N=M);if(b=Y-N,A=G-R,y=b<A?b:A,y<S&&(S=y,x=P,y<=0))break}e.axis=l[x],e.overlap=S},n._findSupports=function(e,i,t,l){var a=i.vertices,p=a.length,g=e.position.x,w=e.position.y,T=t.x*l,C=t.y*l,_=a[0],S=_,x=T*(g-S.x)+C*(w-S.y),y,b,A;for(A=1;A<p;A+=1)S=a[A],b=T*(g-S.x)+C*(w-S.y),b<x&&(x=b,_=S);return y=a[(p+_.index-1)%p],x=T*(g-y.x)+C*(w-y.y),S=a[(_.index+1)%p],T*(g-S.x)+C*(w-S.y)<x?(s[0]=_,s[1]=S,s):(s[0]=_,s[1]=y,s)}})()},function(r,m,u){var n={};r.exports=n;var o=u(16);(function(){n.create=function(c,s){var d=c.bodyA,f=c.bodyB,e={id:n.id(d,f),bodyA:d,bodyB:f,collision:c,contacts:[o.create(),o.create()],contactCount:0,separation:0,isActive:!0,isSensor:d.isSensor||f.isSensor,timeCreated:s,timeUpdated:s,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return n.update(e,c,s),e},n.update=function(c,s,d){var f=s.supports,e=s.supportCount,i=c.contacts,t=s.parentA,l=s.parentB;c.isActive=!0,c.timeUpdated=d,c.collision=s,c.separation=s.depth,c.inverseMass=t.inverseMass+l.inverseMass,c.friction=t.friction<l.friction?t.friction:l.friction,c.frictionStatic=t.frictionStatic>l.frictionStatic?t.frictionStatic:l.frictionStatic,c.restitution=t.restitution>l.restitution?t.restitution:l.restitution,c.slop=t.slop>l.slop?t.slop:l.slop,c.contactCount=e,s.pair=c;var a=f[0],p=i[0],g=f[1],w=i[1];(w.vertex===a||p.vertex===g)&&(i[1]=p,i[0]=p=w,w=i[1]),p.vertex=a,w.vertex=g},n.setActive=function(c,s,d){s?(c.isActive=!0,c.timeUpdated=d):(c.isActive=!1,c.contactCount=0)},n.id=function(c,s){return c.id<s.id?c.id.toString(36)+":"+s.id.toString(36):s.id.toString(36)+":"+c.id.toString(36)}})()},function(r,m,u){var n={};r.exports=n;var o=u(3),c=u(2),s=u(7),d=u(1),f=u(11),e=u(0);(function(){n._warming=.4,n._torqueDampen=1,n._minLength=1e-6,n.create=function(i){var t=i;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var l=t.bodyA?c.add(t.bodyA.position,t.pointA):t.pointA,a=t.bodyB?c.add(t.bodyB.position,t.pointB):t.pointB,p=c.magnitude(c.sub(l,a));t.length=typeof t.length<"u"?t.length:p,t.id=t.id||e.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var g={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(g.type="pin",g.anchors=!1):t.stiffness<.9&&(g.type="spring"),t.render=e.extend(g,t.render),t},n.preSolveAll=function(i){for(var t=0;t<i.length;t+=1){var l=i[t],a=l.constraintImpulse;l.isStatic||a.x===0&&a.y===0&&a.angle===0||(l.position.x+=a.x,l.position.y+=a.y,l.angle+=a.angle)}},n.solveAll=function(i,t){for(var l=e.clamp(t/e._baseDelta,0,1),a=0;a<i.length;a+=1){var p=i[a],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,w=!p.bodyB||p.bodyB&&p.bodyB.isStatic;(g||w)&&n.solve(i[a],l)}for(a=0;a<i.length;a+=1)p=i[a],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,w=!p.bodyB||p.bodyB&&p.bodyB.isStatic,!g&&!w&&n.solve(i[a],l)},n.solve=function(i,t){var l=i.bodyA,a=i.bodyB,p=i.pointA,g=i.pointB;if(!(!l&&!a)){l&&!l.isStatic&&(c.rotate(p,l.angle-i.angleA,p),i.angleA=l.angle),a&&!a.isStatic&&(c.rotate(g,a.angle-i.angleB,g),i.angleB=a.angle);var w=p,T=g;if(l&&(w=c.add(l.position,p)),a&&(T=c.add(a.position,g)),!(!w||!T)){var C=c.sub(w,T),_=c.magnitude(C);_<n._minLength&&(_=n._minLength);var S=(_-i.length)/_,x=i.stiffness>=1||i.length===0,y=x?i.stiffness*t:i.stiffness*t*t,b=i.damping*t,A=c.mult(C,S*y),M=(l?l.inverseMass:0)+(a?a.inverseMass:0),P=(l?l.inverseInertia:0)+(a?a.inverseInertia:0),k=M+P,I,D,V,R,N;if(b>0){var Y=c.create();V=c.div(C,_),N=c.sub(a&&c.sub(a.position,a.positionPrev)||Y,l&&c.sub(l.position,l.positionPrev)||Y),R=c.dot(V,N)}l&&!l.isStatic&&(D=l.inverseMass/M,l.constraintImpulse.x-=A.x*D,l.constraintImpulse.y-=A.y*D,l.position.x-=A.x*D,l.position.y-=A.y*D,b>0&&(l.positionPrev.x-=b*V.x*R*D,l.positionPrev.y-=b*V.y*R*D),I=c.cross(p,A)/k*n._torqueDampen*l.inverseInertia*(1-i.angularStiffness),l.constraintImpulse.angle-=I,l.angle-=I),a&&!a.isStatic&&(D=a.inverseMass/M,a.constraintImpulse.x+=A.x*D,a.constraintImpulse.y+=A.y*D,a.position.x+=A.x*D,a.position.y+=A.y*D,b>0&&(a.positionPrev.x+=b*V.x*R*D,a.positionPrev.y+=b*V.y*R*D),I=c.cross(g,A)/k*n._torqueDampen*a.inverseInertia*(1-i.angularStiffness),a.constraintImpulse.angle+=I,a.angle+=I)}}},n.postSolveAll=function(i){for(var t=0;t<i.length;t++){var l=i[t],a=l.constraintImpulse;if(!(l.isStatic||a.x===0&&a.y===0&&a.angle===0)){s.set(l,!1);for(var p=0;p<l.parts.length;p++){var g=l.parts[p];o.translate(g.vertices,a),p>0&&(g.position.x+=a.x,g.position.y+=a.y),a.angle!==0&&(o.rotate(g.vertices,a.angle,l.position),f.rotate(g.axes,a.angle),p>0&&c.rotateAbout(g.position,a.angle,l.position,g.position)),d.update(g.bounds,g.vertices,l.velocity)}a.angle*=n._warming,a.x*=n._warming,a.y*=n._warming}}},n.pointAWorld=function(i){return{x:(i.bodyA?i.bodyA.position.x:0)+(i.pointA?i.pointA.x:0),y:(i.bodyA?i.bodyA.position.y:0)+(i.pointA?i.pointA.y:0)}},n.pointBWorld=function(i){return{x:(i.bodyB?i.bodyB.position.x:0)+(i.pointB?i.pointB.x:0),y:(i.bodyB?i.bodyB.position.y:0)+(i.pointB?i.pointB.y:0)}},n.currentLength=function(i){var t=(i.bodyA?i.bodyA.position.x:0)+(i.pointA?i.pointA.x:0),l=(i.bodyA?i.bodyA.position.y:0)+(i.pointA?i.pointA.y:0),a=(i.bodyB?i.bodyB.position.x:0)+(i.pointB?i.pointB.x:0),p=(i.bodyB?i.bodyB.position.y:0)+(i.pointB?i.pointB.y:0),g=t-a,w=l-p;return Math.sqrt(g*g+w*w)}})()},function(r,m,u){var n={};r.exports=n;var o=u(2),c=u(0);(function(){n.fromVertices=function(s){for(var d={},f=0;f<s.length;f++){var e=(f+1)%s.length,i=o.normalise({x:s[e].y-s[f].y,y:s[f].x-s[e].x}),t=i.y===0?1/0:i.x/i.y;t=t.toFixed(3).toString(),d[t]=i}return c.values(d)},n.rotate=function(s,d){if(d!==0)for(var f=Math.cos(d),e=Math.sin(d),i=0;i<s.length;i++){var t=s[i],l;l=t.x*f-t.y*e,t.y=t.x*e+t.y*f,t.x=l}}})()},function(r,m,u){var n={};r.exports=n;var o=u(3),c=u(0),s=u(4),d=u(1),f=u(2);(function(){n.rectangle=function(e,i,t,l,a){a=a||{};var p={label:"Rectangle Body",position:{x:e,y:i},vertices:o.fromPath("L 0 0 L "+t+" 0 L "+t+" "+l+" L 0 "+l)};if(a.chamfer){var g=a.chamfer;p.vertices=o.chamfer(p.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete a.chamfer}return s.create(c.extend({},p,a))},n.trapezoid=function(e,i,t,l,a,p){p=p||{},a>=1&&c.warn("Bodies.trapezoid: slope parameter must be < 1."),a*=.5;var g=(1-a*2)*t,w=t*a,T=w+g,C=T+w,_;a<.5?_="L 0 0 L "+w+" "+-l+" L "+T+" "+-l+" L "+C+" 0":_="L 0 0 L "+T+" "+-l+" L "+C+" 0";var S={label:"Trapezoid Body",position:{x:e,y:i},vertices:o.fromPath(_)};if(p.chamfer){var x=p.chamfer;S.vertices=o.chamfer(S.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete p.chamfer}return s.create(c.extend({},S,p))},n.circle=function(e,i,t,l,a){l=l||{};var p={label:"Circle Body",circleRadius:t};a=a||25;var g=Math.ceil(Math.max(10,Math.min(a,t)));return g%2===1&&(g+=1),n.polygon(e,i,g,t,c.extend({},p,l))},n.polygon=function(e,i,t,l,a){if(a=a||{},t<3)return n.circle(e,i,l,a);for(var p=2*Math.PI/t,g="",w=p*.5,T=0;T<t;T+=1){var C=w+T*p,_=Math.cos(C)*l,S=Math.sin(C)*l;g+="L "+_.toFixed(3)+" "+S.toFixed(3)+" "}var x={label:"Polygon Body",position:{x:e,y:i},vertices:o.fromPath(g)};if(a.chamfer){var y=a.chamfer;x.vertices=o.chamfer(x.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete a.chamfer}return s.create(c.extend({},x,a))},n.fromVertices=function(e,i,t,l,a,p,g,w){var T=c.getDecomp(),C,_,S,x,y,b,A,M,P,k,I;for(C=!!(T&&T.quickDecomp),l=l||{},S=[],a=typeof a<"u"?a:!1,p=typeof p<"u"?p:.01,g=typeof g<"u"?g:10,w=typeof w<"u"?w:.01,c.isArray(t[0])||(t=[t]),k=0;k<t.length;k+=1)if(b=t[k],x=o.isConvex(b),y=!x,y&&!C&&c.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),x||!C)x?b=o.clockwiseSort(b):b=o.hull(b),S.push({position:{x:e,y:i},vertices:b});else{var D=b.map(function(z){return[z.x,z.y]});T.makeCCW(D),p!==!1&&T.removeCollinearPoints(D,p),w!==!1&&T.removeDuplicatePoints&&T.removeDuplicatePoints(D,w);var V=T.quickDecomp(D);for(A=0;A<V.length;A++){var R=V[A],N=R.map(function(z){return{x:z[0],y:z[1]}});g>0&&o.area(N)<g||S.push({position:o.centre(N),vertices:N})}}for(A=0;A<S.length;A++)S[A]=s.create(c.extend(S[A],l));if(a){var Y=5;for(A=0;A<S.length;A++){var G=S[A];for(M=A+1;M<S.length;M++){var j=S[M];if(d.overlaps(G.bounds,j.bounds)){var ee=G.vertices,ie=j.vertices;for(P=0;P<G.vertices.length;P++)for(I=0;I<j.vertices.length;I++){var he=f.magnitudeSquared(f.sub(ee[(P+1)%ee.length],ie[I])),ae=f.magnitudeSquared(f.sub(ee[P],ie[(I+1)%ie.length]));he<Y&&ae<Y&&(ee[P].isInternal=!0,ie[I].isInternal=!0)}}}}}return S.length>1?(_=s.create(c.extend({parts:S.slice(0)},l)),s.setPosition(_,{x:e,y:i}),_):S[0]}})()},function(r,m,u){var n={};r.exports=n;var o=u(0),c=u(8);(function(){n.create=function(s){var d={bodies:[],collisions:[],pairs:null};return o.extend(d,s)},n.setBodies=function(s,d){s.bodies=d.slice(0)},n.clear=function(s){s.bodies=[],s.collisions=[]},n.collisions=function(s){var d=s.pairs,f=s.bodies,e=f.length,i=n.canCollide,t=c.collides,l=s.collisions,a=0,p,g;for(f.sort(n._compareBoundsX),p=0;p<e;p++){var w=f[p],T=w.bounds,C=w.bounds.max.x,_=w.bounds.max.y,S=w.bounds.min.y,x=w.isStatic||w.isSleeping,y=w.parts.length,b=y===1;for(g=p+1;g<e;g++){var A=f[g],M=A.bounds;if(M.min.x>C)break;if(!(_<M.min.y||S>M.max.y)&&!(x&&(A.isStatic||A.isSleeping))&&i(w.collisionFilter,A.collisionFilter)){var P=A.parts.length;if(b&&P===1){var k=t(w,A,d);k&&(l[a++]=k)}else for(var I=y>1?1:0,D=P>1?1:0,V=I;V<y;V++)for(var R=w.parts[V],T=R.bounds,N=D;N<P;N++){var Y=A.parts[N],M=Y.bounds;if(!(T.min.x>M.max.x||T.max.x<M.min.x||T.max.y<M.min.y||T.min.y>M.max.y)){var k=t(R,Y,d);k&&(l[a++]=k)}}}}}return l.length!==a&&(l.length=a),l},n.canCollide=function(s,d){return s.group===d.group&&s.group!==0?s.group>0:(s.mask&d.category)!==0&&(d.mask&s.category)!==0},n._compareBoundsX=function(s,d){return s.bounds.min.x-d.bounds.min.x}})()},function(r,m,u){var n={};r.exports=n;var o=u(0);(function(){n.create=function(c){var s={};return c||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),s.element=c||document.body,s.absolute={x:0,y:0},s.position={x:0,y:0},s.mousedownPosition={x:0,y:0},s.mouseupPosition={x:0,y:0},s.offset={x:0,y:0},s.scale={x:1,y:1},s.wheelDelta=0,s.button=-1,s.pixelRatio=parseInt(s.element.getAttribute("data-pixel-ratio"),10)||1,s.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},s.mousemove=function(d){var f=n._getRelativeMousePosition(d,s.element,s.pixelRatio),e=d.changedTouches;e&&(s.button=0,d.preventDefault()),s.absolute.x=f.x,s.absolute.y=f.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.sourceEvents.mousemove=d},s.mousedown=function(d){var f=n._getRelativeMousePosition(d,s.element,s.pixelRatio),e=d.changedTouches;e?(s.button=0,d.preventDefault()):s.button=d.button,s.absolute.x=f.x,s.absolute.y=f.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.mousedownPosition.x=s.position.x,s.mousedownPosition.y=s.position.y,s.sourceEvents.mousedown=d},s.mouseup=function(d){var f=n._getRelativeMousePosition(d,s.element,s.pixelRatio),e=d.changedTouches;e&&d.preventDefault(),s.button=-1,s.absolute.x=f.x,s.absolute.y=f.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.mouseupPosition.x=s.position.x,s.mouseupPosition.y=s.position.y,s.sourceEvents.mouseup=d},s.mousewheel=function(d){s.wheelDelta=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail)),d.preventDefault(),s.sourceEvents.mousewheel=d},n.setElement(s,s.element),s},n.setElement=function(c,s){c.element=s,s.addEventListener("mousemove",c.mousemove,{passive:!0}),s.addEventListener("mousedown",c.mousedown,{passive:!0}),s.addEventListener("mouseup",c.mouseup,{passive:!0}),s.addEventListener("wheel",c.mousewheel,{passive:!1}),s.addEventListener("touchmove",c.mousemove,{passive:!1}),s.addEventListener("touchstart",c.mousedown,{passive:!1}),s.addEventListener("touchend",c.mouseup,{passive:!1})},n.clearSourceEvents=function(c){c.sourceEvents.mousemove=null,c.sourceEvents.mousedown=null,c.sourceEvents.mouseup=null,c.sourceEvents.mousewheel=null,c.wheelDelta=0},n.setOffset=function(c,s){c.offset.x=s.x,c.offset.y=s.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y},n.setScale=function(c,s){c.scale.x=s.x,c.scale.y=s.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y},n._getRelativeMousePosition=function(c,s,d){var f=s.getBoundingClientRect(),e=document.documentElement||document.body.parentNode||document.body,i=window.pageXOffset!==void 0?window.pageXOffset:e.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:e.scrollTop,l=c.changedTouches,a,p;return l?(a=l[0].pageX-f.left-i,p=l[0].pageY-f.top-t):(a=c.pageX-f.left-i,p=c.pageY-f.top-t),{x:a/(s.clientWidth/(s.width||s.clientWidth)*d),y:p/(s.clientHeight/(s.height||s.clientHeight)*d)}}})()},function(r,m,u){var n={};r.exports=n;var o=u(0);(function(){n._registry={},n.register=function(c){if(n.isPlugin(c)||o.warn("Plugin.register:",n.toString(c),"does not implement all required fields."),c.name in n._registry){var s=n._registry[c.name],d=n.versionParse(c.version).number,f=n.versionParse(s.version).number;d>f?(o.warn("Plugin.register:",n.toString(s),"was upgraded to",n.toString(c)),n._registry[c.name]=c):d<f?o.warn("Plugin.register:",n.toString(s),"can not be downgraded to",n.toString(c)):c!==s&&o.warn("Plugin.register:",n.toString(c),"is already registered to different plugin object")}else n._registry[c.name]=c;return c},n.resolve=function(c){return n._registry[n.dependencyParse(c).name]},n.toString=function(c){return typeof c=="string"?c:(c.name||"anonymous")+"@"+(c.version||c.range||"0.0.0")},n.isPlugin=function(c){return c&&c.name&&c.version&&c.install},n.isUsed=function(c,s){return c.used.indexOf(s)>-1},n.isFor=function(c,s){var d=c.for&&n.dependencyParse(c.for);return!c.for||s.name===d.name&&n.versionSatisfies(s.version,d.range)},n.use=function(c,s){if(c.uses=(c.uses||[]).concat(s||[]),c.uses.length===0){o.warn("Plugin.use:",n.toString(c),"does not specify any dependencies to install.");return}for(var d=n.dependencies(c),f=o.topologicalSort(d),e=[],i=0;i<f.length;i+=1)if(f[i]!==c.name){var t=n.resolve(f[i]);if(!t){e.push("❌ "+f[i]);continue}n.isUsed(c,t.name)||(n.isFor(t,c)||(o.warn("Plugin.use:",n.toString(t),"is for",t.for,"but installed on",n.toString(c)+"."),t._warned=!0),t.install?t.install(c):(o.warn("Plugin.use:",n.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(e.push("🔶 "+n.toString(t)),delete t._warned):e.push("✅ "+n.toString(t)),c.used.push(t.name))}e.length>0&&o.info(e.join("  "))},n.dependencies=function(c,s){var d=n.dependencyParse(c),f=d.name;if(s=s||{},!(f in s)){c=n.resolve(c)||c,s[f]=o.map(c.uses||[],function(i){n.isPlugin(i)&&n.register(i);var t=n.dependencyParse(i),l=n.resolve(i);return l&&!n.versionSatisfies(l.version,t.range)?(o.warn("Plugin.dependencies:",n.toString(l),"does not satisfy",n.toString(t),"used by",n.toString(d)+"."),l._warned=!0,c._warned=!0):l||(o.warn("Plugin.dependencies:",n.toString(i),"used by",n.toString(d),"could not be resolved."),c._warned=!0),t.name});for(var e=0;e<s[f].length;e+=1)n.dependencies(s[f][e],s);return s}},n.dependencyParse=function(c){if(o.isString(c)){var s=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return s.test(c)||o.warn("Plugin.dependencyParse:",c,"is not a valid dependency string."),{name:c.split("@")[0],range:c.split("@")[1]||"*"}}return{name:c.name,range:c.range||c.version}},n.versionParse=function(c){var s=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;s.test(c)||o.warn("Plugin.versionParse:",c,"is not a valid version or range.");var d=s.exec(c),f=Number(d[4]),e=Number(d[5]),i=Number(d[6]);return{isRange:!!(d[1]||d[2]),version:d[3],range:c,operator:d[1]||d[2]||"",major:f,minor:e,patch:i,parts:[f,e,i],prerelease:d[7],number:f*1e8+e*1e4+i}},n.versionSatisfies=function(c,s){s=s||"*";var d=n.versionParse(s),f=n.versionParse(c);if(d.isRange){if(d.operator==="*"||c==="*")return!0;if(d.operator===">")return f.number>d.number;if(d.operator===">=")return f.number>=d.number;if(d.operator==="~")return f.major===d.major&&f.minor===d.minor&&f.patch>=d.patch;if(d.operator==="^")return d.major>0?f.major===d.major&&f.number>=d.number:d.minor>0?f.minor===d.minor&&f.patch>=d.patch:f.patch===d.patch}return c===s||c==="*"}})()},function(r,m){var u={};r.exports=u,function(){u.create=function(n){return{vertex:n,normalImpulse:0,tangentImpulse:0}}}()},function(r,m,u){var n={};r.exports=n;var o=u(7),c=u(18),s=u(13),d=u(19),f=u(5),e=u(6),i=u(10),t=u(0),l=u(4);(function(){n._deltaMax=1e3/60,n.create=function(a){a=a||{};var p={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},g=t.extend(p,a);return g.world=a.world||e.create({label:"World"}),g.pairs=a.pairs||d.create(),g.detector=a.detector||s.create(),g.detector.pairs=g.pairs,g.grid={buckets:[]},g.world.gravity=g.gravity,g.broadphase=g.grid,g.metrics={},g},n.update=function(a,p){var g=t.now(),w=a.world,T=a.detector,C=a.pairs,_=a.timing,S=_.timestamp,x;p>n._deltaMax&&t.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",n._deltaMax.toFixed(3),"ms."),p=typeof p<"u"?p:t._baseDelta,p*=_.timeScale,_.timestamp+=p,_.lastDelta=p;var y={timestamp:_.timestamp,delta:p};f.trigger(a,"beforeUpdate",y);var b=e.allBodies(w),A=e.allConstraints(w);for(w.isModified&&(s.setBodies(T,b),e.setModified(w,!1,!1,!0)),a.enableSleeping&&o.update(b,p),n._bodiesApplyGravity(b,a.gravity),p>0&&n._bodiesUpdate(b,p),f.trigger(a,"beforeSolve",y),i.preSolveAll(b),x=0;x<a.constraintIterations;x++)i.solveAll(A,p);i.postSolveAll(b);var M=s.collisions(T);d.update(C,M,S),a.enableSleeping&&o.afterCollisions(C.list),C.collisionStart.length>0&&f.trigger(a,"collisionStart",{pairs:C.collisionStart,timestamp:_.timestamp,delta:p});var P=t.clamp(20/a.positionIterations,0,1);for(c.preSolvePosition(C.list),x=0;x<a.positionIterations;x++)c.solvePosition(C.list,p,P);for(c.postSolvePosition(b),i.preSolveAll(b),x=0;x<a.constraintIterations;x++)i.solveAll(A,p);for(i.postSolveAll(b),c.preSolveVelocity(C.list),x=0;x<a.velocityIterations;x++)c.solveVelocity(C.list,p);return n._bodiesUpdateVelocities(b),C.collisionActive.length>0&&f.trigger(a,"collisionActive",{pairs:C.collisionActive,timestamp:_.timestamp,delta:p}),C.collisionEnd.length>0&&f.trigger(a,"collisionEnd",{pairs:C.collisionEnd,timestamp:_.timestamp,delta:p}),n._bodiesClearForces(b),f.trigger(a,"afterUpdate",y),a.timing.lastElapsed=t.now()-g,a},n.merge=function(a,p){if(t.extend(a,p),p.world){a.world=p.world,n.clear(a);for(var g=e.allBodies(a.world),w=0;w<g.length;w++){var T=g[w];o.set(T,!1),T.id=t.nextId()}}},n.clear=function(a){d.clear(a.pairs),s.clear(a.detector)},n._bodiesClearForces=function(a){for(var p=a.length,g=0;g<p;g++){var w=a[g];w.force.x=0,w.force.y=0,w.torque=0}},n._bodiesApplyGravity=function(a,p){var g=typeof p.scale<"u"?p.scale:.001,w=a.length;if(!(p.x===0&&p.y===0||g===0))for(var T=0;T<w;T++){var C=a[T];C.isStatic||C.isSleeping||(C.force.y+=C.mass*p.y*g,C.force.x+=C.mass*p.x*g)}},n._bodiesUpdate=function(a,p){for(var g=a.length,w=0;w<g;w++){var T=a[w];T.isStatic||T.isSleeping||l.update(T,p)}},n._bodiesUpdateVelocities=function(a){for(var p=a.length,g=0;g<p;g++)l.updateVelocities(a[g])}})()},function(r,m,u){var n={};r.exports=n;var o=u(3),c=u(0),s=u(1);(function(){n._restingThresh=2,n._restingThreshTangent=Math.sqrt(6),n._positionDampen=.9,n._positionWarming=.8,n._frictionNormalMultiplier=5,n._frictionMaxStatic=Number.MAX_VALUE,n.preSolvePosition=function(d){var f,e,i,t=d.length;for(f=0;f<t;f++)e=d[f],e.isActive&&(i=e.contactCount,e.collision.parentA.totalContacts+=i,e.collision.parentB.totalContacts+=i)},n.solvePosition=function(d,f,e){var i,t,l,a,p,g,w,T,C=n._positionDampen*(e||1),_=c.clamp(f/c._baseDelta,0,1),S=d.length;for(i=0;i<S;i++)t=d[i],!(!t.isActive||t.isSensor)&&(l=t.collision,a=l.parentA,p=l.parentB,g=l.normal,t.separation=l.depth+g.x*(p.positionImpulse.x-a.positionImpulse.x)+g.y*(p.positionImpulse.y-a.positionImpulse.y));for(i=0;i<S;i++)t=d[i],!(!t.isActive||t.isSensor)&&(l=t.collision,a=l.parentA,p=l.parentB,g=l.normal,T=t.separation-t.slop*_,(a.isStatic||p.isStatic)&&(T*=2),a.isStatic||a.isSleeping||(w=C/a.totalContacts,a.positionImpulse.x+=g.x*T*w,a.positionImpulse.y+=g.y*T*w),p.isStatic||p.isSleeping||(w=C/p.totalContacts,p.positionImpulse.x-=g.x*T*w,p.positionImpulse.y-=g.y*T*w))},n.postSolvePosition=function(d){for(var f=n._positionWarming,e=d.length,i=o.translate,t=s.update,l=0;l<e;l++){var a=d[l],p=a.positionImpulse,g=p.x,w=p.y,T=a.velocity;if(a.totalContacts=0,g!==0||w!==0){for(var C=0;C<a.parts.length;C++){var _=a.parts[C];i(_.vertices,p),t(_.bounds,_.vertices,T),_.position.x+=g,_.position.y+=w}a.positionPrev.x+=g,a.positionPrev.y+=w,g*T.x+w*T.y<0?(p.x=0,p.y=0):(p.x*=f,p.y*=f)}}},n.preSolveVelocity=function(d){var f=d.length,e,i;for(e=0;e<f;e++){var t=d[e];if(!(!t.isActive||t.isSensor)){var l=t.contacts,a=t.contactCount,p=t.collision,g=p.parentA,w=p.parentB,T=p.normal,C=p.tangent;for(i=0;i<a;i++){var _=l[i],S=_.vertex,x=_.normalImpulse,y=_.tangentImpulse;if(x!==0||y!==0){var b=T.x*x+C.x*y,A=T.y*x+C.y*y;g.isStatic||g.isSleeping||(g.positionPrev.x+=b*g.inverseMass,g.positionPrev.y+=A*g.inverseMass,g.anglePrev+=g.inverseInertia*((S.x-g.position.x)*A-(S.y-g.position.y)*b)),w.isStatic||w.isSleeping||(w.positionPrev.x-=b*w.inverseMass,w.positionPrev.y-=A*w.inverseMass,w.anglePrev-=w.inverseInertia*((S.x-w.position.x)*A-(S.y-w.position.y)*b))}}}}},n.solveVelocity=function(d,f){var e=f/c._baseDelta,i=e*e,t=i*e,l=-n._restingThresh*e,a=n._restingThreshTangent,p=n._frictionNormalMultiplier*e,g=n._frictionMaxStatic,w=d.length,T,C,_,S;for(_=0;_<w;_++){var x=d[_];if(!(!x.isActive||x.isSensor)){var y=x.collision,b=y.parentA,A=y.parentB,M=y.normal.x,P=y.normal.y,k=y.tangent.x,I=y.tangent.y,D=x.inverseMass,V=x.friction*x.frictionStatic*p,R=x.contacts,N=x.contactCount,Y=1/N,G=b.position.x-b.positionPrev.x,j=b.position.y-b.positionPrev.y,ee=b.angle-b.anglePrev,ie=A.position.x-A.positionPrev.x,he=A.position.y-A.positionPrev.y,ae=A.angle-A.anglePrev;for(S=0;S<N;S++){var z=R[S],E=z.vertex,F=E.x-b.position.x,H=E.y-b.position.y,L=E.x-A.position.x,U=E.y-A.position.y,B=G-H*ee,K=j+F*ee,te=ie-U*ae,X=he+L*ae,Z=B-te,ge=K-X,ye=M*Z+P*ge,ve=k*Z+I*ge,ke=x.separation+ye,_e=Math.min(ke,1);_e=ke<0?0:_e;var me=_e*V;ve<-me||ve>me?(C=ve>0?ve:-ve,T=x.friction*(ve>0?1:-1)*t,T<-C?T=-C:T>C&&(T=C)):(T=ve,C=g);var Fe=F*P-H*M,we=L*P-U*M,Ye=Y/(D+b.inverseInertia*Fe*Fe+A.inverseInertia*we*we),xe=(1+x.restitution)*ye*Ye;if(T*=Ye,ye<l)z.normalImpulse=0;else{var Je=z.normalImpulse;z.normalImpulse+=xe,z.normalImpulse>0&&(z.normalImpulse=0),xe=z.normalImpulse-Je}if(ve<-a||ve>a)z.tangentImpulse=0;else{var Ce=z.tangentImpulse;z.tangentImpulse+=T,z.tangentImpulse<-C&&(z.tangentImpulse=-C),z.tangentImpulse>C&&(z.tangentImpulse=C),T=z.tangentImpulse-Ce}var Ge=M*xe+k*T,Se=P*xe+I*T;b.isStatic||b.isSleeping||(b.positionPrev.x+=Ge*b.inverseMass,b.positionPrev.y+=Se*b.inverseMass,b.anglePrev+=(F*Se-H*Ge)*b.inverseInertia),A.isStatic||A.isSleeping||(A.positionPrev.x-=Ge*A.inverseMass,A.positionPrev.y-=Se*A.inverseMass,A.anglePrev-=(L*Se-U*Ge)*A.inverseInertia)}}}}})()},function(r,m,u){var n={};r.exports=n;var o=u(9),c=u(0);(function(){n.create=function(s){return c.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},s)},n.update=function(s,d,f){var e=o.update,i=o.create,t=o.setActive,l=s.table,a=s.list,p=a.length,g=p,w=s.collisionStart,T=s.collisionEnd,C=s.collisionActive,_=d.length,S=0,x=0,y=0,b,A,M;for(M=0;M<_;M++)b=d[M],A=b.pair,A?(A.isActive&&(C[y++]=A),e(A,b,f)):(A=i(b,f),l[A.id]=A,w[S++]=A,a[g++]=A);for(g=0,p=a.length,M=0;M<p;M++)A=a[M],A.timeUpdated>=f?a[g++]=A:(t(A,!1,f),A.collision.bodyA.sleepCounter>0&&A.collision.bodyB.sleepCounter>0?a[g++]=A:(T[x++]=A,delete l[A.id]));a.length!==g&&(a.length=g),w.length!==S&&(w.length=S),T.length!==x&&(T.length=x),C.length!==y&&(C.length=y)},n.clear=function(s){return s.table={},s.list.length=0,s.collisionStart.length=0,s.collisionActive.length=0,s.collisionEnd.length=0,s}})()},function(r,m,u){var n=r.exports=u(21);n.Axes=u(11),n.Bodies=u(12),n.Body=u(4),n.Bounds=u(1),n.Collision=u(8),n.Common=u(0),n.Composite=u(6),n.Composites=u(22),n.Constraint=u(10),n.Contact=u(16),n.Detector=u(13),n.Engine=u(17),n.Events=u(5),n.Grid=u(23),n.Mouse=u(14),n.MouseConstraint=u(24),n.Pair=u(9),n.Pairs=u(19),n.Plugin=u(15),n.Query=u(25),n.Render=u(26),n.Resolver=u(18),n.Runner=u(27),n.SAT=u(28),n.Sleeping=u(7),n.Svg=u(29),n.Vector=u(2),n.Vertices=u(3),n.World=u(30),n.Engine.run=n.Runner.run,n.Common.deprecated(n.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(r,m,u){var n={};r.exports=n;var o=u(15),c=u(0);(function(){n.name="matter-js",n.version="0.20.0",n.uses=[],n.used=[],n.use=function(){o.use(n,Array.prototype.slice.call(arguments))},n.before=function(s,d){return s=s.replace(/^Matter./,""),c.chainPathBefore(n,s,d)},n.after=function(s,d){return s=s.replace(/^Matter./,""),c.chainPathAfter(n,s,d)}})()},function(r,m,u){var n={};r.exports=n;var o=u(6),c=u(10),s=u(0),d=u(4),f=u(12),e=s.deprecated;(function(){n.stack=function(i,t,l,a,p,g,w){for(var T=o.create({label:"Stack"}),C=i,_=t,S,x=0,y=0;y<a;y++){for(var b=0,A=0;A<l;A++){var M=w(C,_,A,y,S,x);if(M){var P=M.bounds.max.y-M.bounds.min.y,k=M.bounds.max.x-M.bounds.min.x;P>b&&(b=P),d.translate(M,{x:k*.5,y:P*.5}),C=M.bounds.max.x+p,o.addBody(T,M),S=M,x+=1}else C+=p}_+=b+g,C=i}return T},n.chain=function(i,t,l,a,p,g){for(var w=i.bodies,T=1;T<w.length;T++){var C=w[T-1],_=w[T],S=C.bounds.max.y-C.bounds.min.y,x=C.bounds.max.x-C.bounds.min.x,y=_.bounds.max.y-_.bounds.min.y,b=_.bounds.max.x-_.bounds.min.x,A={bodyA:C,pointA:{x:x*t,y:S*l},bodyB:_,pointB:{x:b*a,y:y*p}},M=s.extend(A,g);o.addConstraint(i,c.create(M))}return i.label+=" Chain",i},n.mesh=function(i,t,l,a,p){var g=i.bodies,w,T,C,_,S;for(w=0;w<l;w++){for(T=1;T<t;T++)C=g[T-1+w*t],_=g[T+w*t],o.addConstraint(i,c.create(s.extend({bodyA:C,bodyB:_},p)));if(w>0)for(T=0;T<t;T++)C=g[T+(w-1)*t],_=g[T+w*t],o.addConstraint(i,c.create(s.extend({bodyA:C,bodyB:_},p))),a&&T>0&&(S=g[T-1+(w-1)*t],o.addConstraint(i,c.create(s.extend({bodyA:S,bodyB:_},p)))),a&&T<t-1&&(S=g[T+1+(w-1)*t],o.addConstraint(i,c.create(s.extend({bodyA:S,bodyB:_},p))))}return i.label+=" Mesh",i},n.pyramid=function(i,t,l,a,p,g,w){return n.stack(i,t,l,a,p,g,function(T,C,_,S,x,y){var b=Math.min(a,Math.ceil(l/2)),A=x?x.bounds.max.x-x.bounds.min.x:0;if(!(S>b)){S=b-S;var M=S,P=l-1-S;if(!(_<M||_>P)){y===1&&d.translate(x,{x:(_+(l%2===1?1:-1))*A,y:0});var k=x?_*A:0;return w(i+k+_*p,C,_,S,x,y)}}})},n.newtonsCradle=function(i,t,l,a,p){for(var g=o.create({label:"Newtons Cradle"}),w=0;w<l;w++){var T=1.9,C=f.circle(i+w*(a*T),t+p,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),_=c.create({pointA:{x:i+w*(a*T),y:t},bodyB:C});o.addBody(g,C),o.addConstraint(g,_)}return g},e(n,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),n.car=function(i,t,l,a,p){var g=d.nextGroup(!0),w=20,T=-l*.5+w,C=l*.5-w,_=0,S=o.create({label:"Car"}),x=f.rectangle(i,t,l,a,{collisionFilter:{group:g},chamfer:{radius:a*.5},density:2e-4}),y=f.circle(i+T,t+_,p,{collisionFilter:{group:g},friction:.8}),b=f.circle(i+C,t+_,p,{collisionFilter:{group:g},friction:.8}),A=c.create({bodyB:x,pointB:{x:T,y:_},bodyA:y,stiffness:1,length:0}),M=c.create({bodyB:x,pointB:{x:C,y:_},bodyA:b,stiffness:1,length:0});return o.addBody(S,x),o.addBody(S,y),o.addBody(S,b),o.addConstraint(S,A),o.addConstraint(S,M),S},e(n,"car","Composites.car ➤ moved to car example"),n.softBody=function(i,t,l,a,p,g,w,T,C,_){C=s.extend({inertia:1/0},C),_=s.extend({stiffness:.2,render:{type:"line",anchors:!1}},_);var S=n.stack(i,t,l,a,p,g,function(x,y){return f.circle(x,y,T,C)});return n.mesh(S,l,a,w,_),S.label="Soft Body",S},e(n,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")})()},function(r,m,u){var n={};r.exports=n;var o=u(9),c=u(0),s=c.deprecated;(function(){n.create=function(d){var f={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return c.extend(f,d)},n.update=function(d,f,e,i){var t,l,a,p=e.world,g=d.buckets,w,T,C=!1;for(t=0;t<f.length;t++){var _=f[t];if(!(_.isSleeping&&!i)&&!(p.bounds&&(_.bounds.max.x<p.bounds.min.x||_.bounds.min.x>p.bounds.max.x||_.bounds.max.y<p.bounds.min.y||_.bounds.min.y>p.bounds.max.y))){var S=n._getRegion(d,_);if(!_.region||S.id!==_.region.id||i){(!_.region||i)&&(_.region=S);var x=n._regionUnion(S,_.region);for(l=x.startCol;l<=x.endCol;l++)for(a=x.startRow;a<=x.endRow;a++){T=n._getBucketId(l,a),w=g[T];var y=l>=S.startCol&&l<=S.endCol&&a>=S.startRow&&a<=S.endRow,b=l>=_.region.startCol&&l<=_.region.endCol&&a>=_.region.startRow&&a<=_.region.endRow;!y&&b&&b&&w&&n._bucketRemoveBody(d,w,_),(_.region===S||y&&!b||i)&&(w||(w=n._createBucket(g,T)),n._bucketAddBody(d,w,_))}_.region=S,C=!0}}}C&&(d.pairsList=n._createActivePairsList(d))},s(n,"update","Grid.update ➤ replaced by Matter.Detector"),n.clear=function(d){d.buckets={},d.pairs={},d.pairsList=[]},s(n,"clear","Grid.clear ➤ replaced by Matter.Detector"),n._regionUnion=function(d,f){var e=Math.min(d.startCol,f.startCol),i=Math.max(d.endCol,f.endCol),t=Math.min(d.startRow,f.startRow),l=Math.max(d.endRow,f.endRow);return n._createRegion(e,i,t,l)},n._getRegion=function(d,f){var e=f.bounds,i=Math.floor(e.min.x/d.bucketWidth),t=Math.floor(e.max.x/d.bucketWidth),l=Math.floor(e.min.y/d.bucketHeight),a=Math.floor(e.max.y/d.bucketHeight);return n._createRegion(i,t,l,a)},n._createRegion=function(d,f,e,i){return{id:d+","+f+","+e+","+i,startCol:d,endCol:f,startRow:e,endRow:i}},n._getBucketId=function(d,f){return"C"+d+"R"+f},n._createBucket=function(d,f){var e=d[f]=[];return e},n._bucketAddBody=function(d,f,e){var i=d.pairs,t=o.id,l=f.length,a;for(a=0;a<l;a++){var p=f[a];if(!(e.id===p.id||e.isStatic&&p.isStatic)){var g=t(e,p),w=i[g];w?w[2]+=1:i[g]=[e,p,1]}}f.push(e)},n._bucketRemoveBody=function(d,f,e){var i=d.pairs,t=o.id,l;f.splice(c.indexOf(f,e),1);var a=f.length;for(l=0;l<a;l++){var p=i[t(e,f[l])];p&&(p[2]-=1)}},n._createActivePairsList=function(d){var f,e=d.pairs,i=c.keys(e),t=i.length,l=[],a;for(a=0;a<t;a++)f=e[i[a]],f[2]>0?l.push(f):delete e[i[a]];return l}})()},function(r,m,u){var n={};r.exports=n;var o=u(3),c=u(7),s=u(14),d=u(5),f=u(13),e=u(10),i=u(6),t=u(0),l=u(1);(function(){n.create=function(a,p){var g=(a?a.mouse:null)||(p?p.mouse:null);g||(a&&a.render&&a.render.canvas?g=s.create(a.render.canvas):p&&p.element?g=s.create(p.element):(g=s.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var w=e.create({label:"Mouse Constraint",pointA:g.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),T={type:"mouseConstraint",mouse:g,element:null,body:null,constraint:w,collisionFilter:{category:1,mask:4294967295,group:0}},C=t.extend(T,p);return d.on(a,"beforeUpdate",function(){var _=i.allBodies(a.world);n.update(C,_),n._triggerEvents(C)}),C},n.update=function(a,p){var g=a.mouse,w=a.constraint,T=a.body;if(g.button===0){if(w.bodyB)c.set(w.bodyB,!1),w.pointA=g.position;else for(var C=0;C<p.length;C++)if(T=p[C],l.contains(T.bounds,g.position)&&f.canCollide(T.collisionFilter,a.collisionFilter))for(var _=T.parts.length>1?1:0;_<T.parts.length;_++){var S=T.parts[_];if(o.contains(S.vertices,g.position)){w.pointA=g.position,w.bodyB=a.body=T,w.pointB={x:g.position.x-T.position.x,y:g.position.y-T.position.y},w.angleB=T.angle,c.set(T,!1),d.trigger(a,"startdrag",{mouse:g,body:T});break}}}else w.bodyB=a.body=null,w.pointB=null,T&&d.trigger(a,"enddrag",{mouse:g,body:T})},n._triggerEvents=function(a){var p=a.mouse,g=p.sourceEvents;g.mousemove&&d.trigger(a,"mousemove",{mouse:p}),g.mousedown&&d.trigger(a,"mousedown",{mouse:p}),g.mouseup&&d.trigger(a,"mouseup",{mouse:p}),s.clearSourceEvents(p)}})()},function(r,m,u){var n={};r.exports=n;var o=u(2),c=u(8),s=u(1),d=u(12),f=u(3);(function(){n.collides=function(e,i){for(var t=[],l=i.length,a=e.bounds,p=c.collides,g=s.overlaps,w=0;w<l;w++){var T=i[w],C=T.parts.length,_=C===1?0:1;if(g(T.bounds,a))for(var S=_;S<C;S++){var x=T.parts[S];if(g(x.bounds,a)){var y=p(x,e);if(y){t.push(y);break}}}}return t},n.ray=function(e,i,t,l){l=l||1e-100;for(var a=o.angle(i,t),p=o.magnitude(o.sub(i,t)),g=(t.x+i.x)*.5,w=(t.y+i.y)*.5,T=d.rectangle(g,w,p,l,{angle:a}),C=n.collides(T,e),_=0;_<C.length;_+=1){var S=C[_];S.body=S.bodyB=S.bodyA}return C},n.region=function(e,i,t){for(var l=[],a=0;a<e.length;a++){var p=e[a],g=s.overlaps(p.bounds,i);(g&&!t||!g&&t)&&l.push(p)}return l},n.point=function(e,i){for(var t=[],l=0;l<e.length;l++){var a=e[l];if(s.contains(a.bounds,i))for(var p=a.parts.length===1?0:1;p<a.parts.length;p++){var g=a.parts[p];if(s.contains(g.bounds,i)&&f.contains(g.vertices,i)){t.push(a);break}}}return t}})()},function(r,m,u){var n={};r.exports=n;var o=u(4),c=u(0),s=u(6),d=u(1),f=u(5),e=u(2),i=u(14);(function(){var t,l;typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(_){window.setTimeout(function(){_(c.now())},1e3/60)},l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),n._goodFps=30,n._goodDelta=1e3/60,n.create=function(_){var S={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!_.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},x=c.extend(S,_);return x.canvas&&(x.canvas.width=x.options.width||x.canvas.width,x.canvas.height=x.options.height||x.canvas.height),x.mouse=_.mouse,x.engine=_.engine,x.canvas=x.canvas||g(x.options.width,x.options.height),x.context=x.canvas.getContext("2d"),x.textures={},x.bounds=x.bounds||{min:{x:0,y:0},max:{x:x.canvas.width,y:x.canvas.height}},x.controller=n,x.options.showBroadphase=!1,x.options.pixelRatio!==1&&n.setPixelRatio(x,x.options.pixelRatio),c.isElement(x.element)&&x.element.appendChild(x.canvas),x},n.run=function(_){(function S(x){_.frameRequestId=t(S),a(_,x),n.world(_,x),_.context.setTransform(_.options.pixelRatio,0,0,_.options.pixelRatio,0,0),(_.options.showStats||_.options.showDebug)&&n.stats(_,_.context,x),(_.options.showPerformance||_.options.showDebug)&&n.performance(_,_.context,x),_.context.setTransform(1,0,0,1,0,0)})()},n.stop=function(_){l(_.frameRequestId)},n.setPixelRatio=function(_,S){var x=_.options,y=_.canvas;S==="auto"&&(S=w(y)),x.pixelRatio=S,y.setAttribute("data-pixel-ratio",S),y.width=x.width*S,y.height=x.height*S,y.style.width=x.width+"px",y.style.height=x.height+"px"},n.setSize=function(_,S,x){_.options.width=S,_.options.height=x,_.bounds.max.x=_.bounds.min.x+S,_.bounds.max.y=_.bounds.min.y+x,_.options.pixelRatio!==1?n.setPixelRatio(_,_.options.pixelRatio):(_.canvas.width=S,_.canvas.height=x)},n.lookAt=function(_,S,x,y){y=typeof y<"u"?y:!0,S=c.isArray(S)?S:[S],x=x||{x:0,y:0};for(var b={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},A=0;A<S.length;A+=1){var M=S[A],P=M.bounds?M.bounds.min:M.min||M.position||M,k=M.bounds?M.bounds.max:M.max||M.position||M;P&&k&&(P.x<b.min.x&&(b.min.x=P.x),k.x>b.max.x&&(b.max.x=k.x),P.y<b.min.y&&(b.min.y=P.y),k.y>b.max.y&&(b.max.y=k.y))}var I=b.max.x-b.min.x+2*x.x,D=b.max.y-b.min.y+2*x.y,V=_.canvas.height,R=_.canvas.width,N=R/V,Y=I/D,G=1,j=1;Y>N?j=Y/N:G=N/Y,_.options.hasBounds=!0,_.bounds.min.x=b.min.x,_.bounds.max.x=b.min.x+I*G,_.bounds.min.y=b.min.y,_.bounds.max.y=b.min.y+D*j,y&&(_.bounds.min.x+=I*.5-I*G*.5,_.bounds.max.x+=I*.5-I*G*.5,_.bounds.min.y+=D*.5-D*j*.5,_.bounds.max.y+=D*.5-D*j*.5),_.bounds.min.x-=x.x,_.bounds.max.x-=x.x,_.bounds.min.y-=x.y,_.bounds.max.y-=x.y,_.mouse&&(i.setScale(_.mouse,{x:(_.bounds.max.x-_.bounds.min.x)/_.canvas.width,y:(_.bounds.max.y-_.bounds.min.y)/_.canvas.height}),i.setOffset(_.mouse,_.bounds.min))},n.startViewTransform=function(_){var S=_.bounds.max.x-_.bounds.min.x,x=_.bounds.max.y-_.bounds.min.y,y=S/_.options.width,b=x/_.options.height;_.context.setTransform(_.options.pixelRatio/y,0,0,_.options.pixelRatio/b,0,0),_.context.translate(-_.bounds.min.x,-_.bounds.min.y)},n.endViewTransform=function(_){_.context.setTransform(_.options.pixelRatio,0,0,_.options.pixelRatio,0,0)},n.world=function(_,S){var x=c.now(),y=_.engine,b=y.world,A=_.canvas,M=_.context,P=_.options,k=_.timing,I=s.allBodies(b),D=s.allConstraints(b),V=P.wireframes?P.wireframeBackground:P.background,R=[],N=[],Y,G={timestamp:y.timing.timestamp};if(f.trigger(_,"beforeRender",G),_.currentBackground!==V&&C(_,V),M.globalCompositeOperation="source-in",M.fillStyle="transparent",M.fillRect(0,0,A.width,A.height),M.globalCompositeOperation="source-over",P.hasBounds){for(Y=0;Y<I.length;Y++){var j=I[Y];d.overlaps(j.bounds,_.bounds)&&R.push(j)}for(Y=0;Y<D.length;Y++){var ee=D[Y],ie=ee.bodyA,he=ee.bodyB,ae=ee.pointA,z=ee.pointB;ie&&(ae=e.add(ie.position,ee.pointA)),he&&(z=e.add(he.position,ee.pointB)),!(!ae||!z)&&(d.contains(_.bounds,ae)||d.contains(_.bounds,z))&&N.push(ee)}n.startViewTransform(_),_.mouse&&(i.setScale(_.mouse,{x:(_.bounds.max.x-_.bounds.min.x)/_.options.width,y:(_.bounds.max.y-_.bounds.min.y)/_.options.height}),i.setOffset(_.mouse,_.bounds.min))}else N=D,R=I,_.options.pixelRatio!==1&&_.context.setTransform(_.options.pixelRatio,0,0,_.options.pixelRatio,0,0);!P.wireframes||y.enableSleeping&&P.showSleeping?n.bodies(_,R,M):(P.showConvexHulls&&n.bodyConvexHulls(_,R,M),n.bodyWireframes(_,R,M)),P.showBounds&&n.bodyBounds(_,R,M),(P.showAxes||P.showAngleIndicator)&&n.bodyAxes(_,R,M),P.showPositions&&n.bodyPositions(_,R,M),P.showVelocity&&n.bodyVelocity(_,R,M),P.showIds&&n.bodyIds(_,R,M),P.showSeparations&&n.separations(_,y.pairs.list,M),P.showCollisions&&n.collisions(_,y.pairs.list,M),P.showVertexNumbers&&n.vertexNumbers(_,R,M),P.showMousePosition&&n.mousePosition(_,_.mouse,M),n.constraints(N,M),P.hasBounds&&n.endViewTransform(_),f.trigger(_,"afterRender",G),k.lastElapsed=c.now()-x},n.stats=function(_,S,x){for(var y=_.engine,b=y.world,A=s.allBodies(b),M=0,P=55,k=44,I=0,D=0,V=0;V<A.length;V+=1)M+=A[V].parts.length;var R={Part:M,Body:A.length,Cons:s.allConstraints(b).length,Comp:s.allComposites(b).length,Pair:y.pairs.list.length};S.fillStyle="#0e0f19",S.fillRect(I,D,P*5.5,k),S.font="12px Arial",S.textBaseline="top",S.textAlign="right";for(var N in R){var Y=R[N];S.fillStyle="#aaa",S.fillText(N,I+P,D+8),S.fillStyle="#eee",S.fillText(Y,I+P,D+26),I+=P}},n.performance=function(_,S){var x=_.engine,y=_.timing,b=y.deltaHistory,A=y.elapsedHistory,M=y.timestampElapsedHistory,P=y.engineDeltaHistory,k=y.engineUpdatesHistory,I=y.engineElapsedHistory,D=x.timing.lastUpdatesPerFrame,V=x.timing.lastDelta,R=p(b),N=p(A),Y=p(P),G=p(k),j=p(I),ee=p(M),ie=ee/R||0,he=Math.round(R/V),ae=1e3/R||0,z=4,E=12,F=60,H=34,L=10,U=69;S.fillStyle="#0e0f19",S.fillRect(0,50,E*5+F*6+22,H),n.status(S,L,U,F,z,b.length,Math.round(ae)+" fps",ae/n._goodFps,function(B){return b[B]/R-1}),n.status(S,L+E+F,U,F,z,P.length,V.toFixed(2)+" dt",n._goodDelta/V,function(B){return P[B]/Y-1}),n.status(S,L+(E+F)*2,U,F,z,k.length,D+" upf",Math.pow(c.clamp(G/he||1,0,1),4),function(B){return k[B]/G-1}),n.status(S,L+(E+F)*3,U,F,z,I.length,j.toFixed(2)+" ut",1-D*j/n._goodFps,function(B){return I[B]/j-1}),n.status(S,L+(E+F)*4,U,F,z,A.length,N.toFixed(2)+" rt",1-N/n._goodFps,function(B){return A[B]/N-1}),n.status(S,L+(E+F)*5,U,F,z,M.length,ie.toFixed(2)+" x",ie*ie*ie,function(B){return(M[B]/b[B]/ie||0)-1})},n.status=function(_,S,x,y,b,A,M,P,k){_.strokeStyle="#888",_.fillStyle="#444",_.lineWidth=1,_.fillRect(S,x+7,y,1),_.beginPath(),_.moveTo(S,x+7-b*c.clamp(.4*k(0),-2,2));for(var I=0;I<y;I+=1)_.lineTo(S+I,x+7-(I<A?b*c.clamp(.4*k(I),-2,2):0));_.stroke(),_.fillStyle="hsl("+c.clamp(25+95*P,0,120)+",100%,60%)",_.fillRect(S,x-7,4,4),_.font="12px Arial",_.textBaseline="middle",_.textAlign="right",_.fillStyle="#eee",_.fillText(M,S+y,x-5)},n.constraints=function(_,S){for(var x=S,y=0;y<_.length;y++){var b=_[y];if(!(!b.render.visible||!b.pointA||!b.pointB)){var A=b.bodyA,M=b.bodyB,P,k;if(A?P=e.add(A.position,b.pointA):P=b.pointA,b.render.type==="pin")x.beginPath(),x.arc(P.x,P.y,3,0,2*Math.PI),x.closePath();else{if(M?k=e.add(M.position,b.pointB):k=b.pointB,x.beginPath(),x.moveTo(P.x,P.y),b.render.type==="spring")for(var I=e.sub(k,P),D=e.perp(e.normalise(I)),V=Math.ceil(c.clamp(b.length/5,12,20)),R,N=1;N<V;N+=1)R=N%2===0?1:-1,x.lineTo(P.x+I.x*(N/V)+D.x*R*4,P.y+I.y*(N/V)+D.y*R*4);x.lineTo(k.x,k.y)}b.render.lineWidth&&(x.lineWidth=b.render.lineWidth,x.strokeStyle=b.render.strokeStyle,x.stroke()),b.render.anchors&&(x.fillStyle=b.render.strokeStyle,x.beginPath(),x.arc(P.x,P.y,3,0,2*Math.PI),x.arc(k.x,k.y,3,0,2*Math.PI),x.closePath(),x.fill())}}},n.bodies=function(_,S,x){var y=x;_.engine;var b=_.options,A=b.showInternalEdges||!b.wireframes,M,P,k,I;for(k=0;k<S.length;k++)if(M=S[k],!!M.render.visible){for(I=M.parts.length>1?1:0;I<M.parts.length;I++)if(P=M.parts[I],!!P.render.visible){if(b.showSleeping&&M.isSleeping?y.globalAlpha=.5*P.render.opacity:P.render.opacity!==1&&(y.globalAlpha=P.render.opacity),P.render.sprite&&P.render.sprite.texture&&!b.wireframes){var D=P.render.sprite,V=T(_,D.texture);y.translate(P.position.x,P.position.y),y.rotate(P.angle),y.drawImage(V,V.width*-D.xOffset*D.xScale,V.height*-D.yOffset*D.yScale,V.width*D.xScale,V.height*D.yScale),y.rotate(-P.angle),y.translate(-P.position.x,-P.position.y)}else{if(P.circleRadius)y.beginPath(),y.arc(P.position.x,P.position.y,P.circleRadius,0,2*Math.PI);else{y.beginPath(),y.moveTo(P.vertices[0].x,P.vertices[0].y);for(var R=1;R<P.vertices.length;R++)!P.vertices[R-1].isInternal||A?y.lineTo(P.vertices[R].x,P.vertices[R].y):y.moveTo(P.vertices[R].x,P.vertices[R].y),P.vertices[R].isInternal&&!A&&y.moveTo(P.vertices[(R+1)%P.vertices.length].x,P.vertices[(R+1)%P.vertices.length].y);y.lineTo(P.vertices[0].x,P.vertices[0].y),y.closePath()}b.wireframes?(y.lineWidth=1,y.strokeStyle=_.options.wireframeStrokeStyle,y.stroke()):(y.fillStyle=P.render.fillStyle,P.render.lineWidth&&(y.lineWidth=P.render.lineWidth,y.strokeStyle=P.render.strokeStyle,y.stroke()),y.fill())}y.globalAlpha=1}}},n.bodyWireframes=function(_,S,x){var y=x,b=_.options.showInternalEdges,A,M,P,k,I;for(y.beginPath(),P=0;P<S.length;P++)if(A=S[P],!!A.render.visible)for(I=A.parts.length>1?1:0;I<A.parts.length;I++){for(M=A.parts[I],y.moveTo(M.vertices[0].x,M.vertices[0].y),k=1;k<M.vertices.length;k++)!M.vertices[k-1].isInternal||b?y.lineTo(M.vertices[k].x,M.vertices[k].y):y.moveTo(M.vertices[k].x,M.vertices[k].y),M.vertices[k].isInternal&&!b&&y.moveTo(M.vertices[(k+1)%M.vertices.length].x,M.vertices[(k+1)%M.vertices.length].y);y.lineTo(M.vertices[0].x,M.vertices[0].y)}y.lineWidth=1,y.strokeStyle=_.options.wireframeStrokeStyle,y.stroke()},n.bodyConvexHulls=function(_,S,x){var y=x,b,A,M;for(y.beginPath(),A=0;A<S.length;A++)if(b=S[A],!(!b.render.visible||b.parts.length===1)){for(y.moveTo(b.vertices[0].x,b.vertices[0].y),M=1;M<b.vertices.length;M++)y.lineTo(b.vertices[M].x,b.vertices[M].y);y.lineTo(b.vertices[0].x,b.vertices[0].y)}y.lineWidth=1,y.strokeStyle="rgba(255,255,255,0.2)",y.stroke()},n.vertexNumbers=function(_,S,x){var y=x,b,A,M;for(b=0;b<S.length;b++){var P=S[b].parts;for(M=P.length>1?1:0;M<P.length;M++){var k=P[M];for(A=0;A<k.vertices.length;A++)y.fillStyle="rgba(255,255,255,0.2)",y.fillText(b+"_"+A,k.position.x+(k.vertices[A].x-k.position.x)*.8,k.position.y+(k.vertices[A].y-k.position.y)*.8)}}},n.mousePosition=function(_,S,x){var y=x;y.fillStyle="rgba(255,255,255,0.8)",y.fillText(S.position.x+"  "+S.position.y,S.position.x+5,S.position.y-5)},n.bodyBounds=function(_,S,x){var y=x;_.engine;var b=_.options;y.beginPath();for(var A=0;A<S.length;A++){var M=S[A];if(M.render.visible)for(var P=S[A].parts,k=P.length>1?1:0;k<P.length;k++){var I=P[k];y.rect(I.bounds.min.x,I.bounds.min.y,I.bounds.max.x-I.bounds.min.x,I.bounds.max.y-I.bounds.min.y)}}b.wireframes?y.strokeStyle="rgba(255,255,255,0.08)":y.strokeStyle="rgba(0,0,0,0.1)",y.lineWidth=1,y.stroke()},n.bodyAxes=function(_,S,x){var y=x;_.engine;var b=_.options,A,M,P,k;for(y.beginPath(),M=0;M<S.length;M++){var I=S[M],D=I.parts;if(I.render.visible)if(b.showAxes)for(P=D.length>1?1:0;P<D.length;P++)for(A=D[P],k=0;k<A.axes.length;k++){var V=A.axes[k];y.moveTo(A.position.x,A.position.y),y.lineTo(A.position.x+V.x*20,A.position.y+V.y*20)}else for(P=D.length>1?1:0;P<D.length;P++)for(A=D[P],k=0;k<A.axes.length;k++)y.moveTo(A.position.x,A.position.y),y.lineTo((A.vertices[0].x+A.vertices[A.vertices.length-1].x)/2,(A.vertices[0].y+A.vertices[A.vertices.length-1].y)/2)}b.wireframes?(y.strokeStyle="indianred",y.lineWidth=1):(y.strokeStyle="rgba(255, 255, 255, 0.4)",y.globalCompositeOperation="overlay",y.lineWidth=2),y.stroke(),y.globalCompositeOperation="source-over"},n.bodyPositions=function(_,S,x){var y=x;_.engine;var b=_.options,A,M,P,k;for(y.beginPath(),P=0;P<S.length;P++)if(A=S[P],!!A.render.visible)for(k=0;k<A.parts.length;k++)M=A.parts[k],y.arc(M.position.x,M.position.y,3,0,2*Math.PI,!1),y.closePath();for(b.wireframes?y.fillStyle="indianred":y.fillStyle="rgba(0,0,0,0.5)",y.fill(),y.beginPath(),P=0;P<S.length;P++)A=S[P],A.render.visible&&(y.arc(A.positionPrev.x,A.positionPrev.y,2,0,2*Math.PI,!1),y.closePath());y.fillStyle="rgba(255,165,0,0.8)",y.fill()},n.bodyVelocity=function(_,S,x){var y=x;y.beginPath();for(var b=0;b<S.length;b++){var A=S[b];if(A.render.visible){var M=o.getVelocity(A);y.moveTo(A.position.x,A.position.y),y.lineTo(A.position.x+M.x,A.position.y+M.y)}}y.lineWidth=3,y.strokeStyle="cornflowerblue",y.stroke()},n.bodyIds=function(_,S,x){var y=x,b,A;for(b=0;b<S.length;b++)if(S[b].render.visible){var M=S[b].parts;for(A=M.length>1?1:0;A<M.length;A++){var P=M[A];y.font="12px Arial",y.fillStyle="rgba(255,255,255,0.5)",y.fillText(P.id,P.position.x+10,P.position.y-10)}}},n.collisions=function(_,S,x){var y=x,b=_.options,A,M,P,k;for(y.beginPath(),P=0;P<S.length;P++)if(A=S[P],!!A.isActive)for(M=A.collision,k=0;k<A.contactCount;k++){var I=A.contacts[k],D=I.vertex;y.rect(D.x-1.5,D.y-1.5,3.5,3.5)}for(b.wireframes?y.fillStyle="rgba(255,255,255,0.7)":y.fillStyle="orange",y.fill(),y.beginPath(),P=0;P<S.length;P++)if(A=S[P],!!A.isActive&&(M=A.collision,A.contactCount>0)){var V=A.contacts[0].vertex.x,R=A.contacts[0].vertex.y;A.contactCount===2&&(V=(A.contacts[0].vertex.x+A.contacts[1].vertex.x)/2,R=(A.contacts[0].vertex.y+A.contacts[1].vertex.y)/2),M.bodyB===M.supports[0].body||M.bodyA.isStatic===!0?y.moveTo(V-M.normal.x*8,R-M.normal.y*8):y.moveTo(V+M.normal.x*8,R+M.normal.y*8),y.lineTo(V,R)}b.wireframes?y.strokeStyle="rgba(255,165,0,0.7)":y.strokeStyle="orange",y.lineWidth=1,y.stroke()},n.separations=function(_,S,x){var y=x,b=_.options,A,M,P,k,I;for(y.beginPath(),I=0;I<S.length;I++)if(A=S[I],!!A.isActive){M=A.collision,P=M.bodyA,k=M.bodyB;var D=1;!k.isStatic&&!P.isStatic&&(D=.5),k.isStatic&&(D=0),y.moveTo(k.position.x,k.position.y),y.lineTo(k.position.x-M.penetration.x*D,k.position.y-M.penetration.y*D),D=1,!k.isStatic&&!P.isStatic&&(D=.5),P.isStatic&&(D=0),y.moveTo(P.position.x,P.position.y),y.lineTo(P.position.x+M.penetration.x*D,P.position.y+M.penetration.y*D)}b.wireframes?y.strokeStyle="rgba(255,165,0,0.5)":y.strokeStyle="orange",y.stroke()},n.inspector=function(_,S){_.engine;var x=_.selected,y=_.render,b=y.options,A;if(b.hasBounds){var M=y.bounds.max.x-y.bounds.min.x,P=y.bounds.max.y-y.bounds.min.y,k=M/y.options.width,I=P/y.options.height;S.scale(1/k,1/I),S.translate(-y.bounds.min.x,-y.bounds.min.y)}for(var D=0;D<x.length;D++){var V=x[D].data;switch(S.translate(.5,.5),S.lineWidth=1,S.strokeStyle="rgba(255,165,0,0.9)",S.setLineDash([1,2]),V.type){case"body":A=V.bounds,S.beginPath(),S.rect(Math.floor(A.min.x-3),Math.floor(A.min.y-3),Math.floor(A.max.x-A.min.x+6),Math.floor(A.max.y-A.min.y+6)),S.closePath(),S.stroke();break;case"constraint":var R=V.pointA;V.bodyA&&(R=V.pointB),S.beginPath(),S.arc(R.x,R.y,10,0,2*Math.PI),S.closePath(),S.stroke();break}S.setLineDash([]),S.translate(-.5,-.5)}_.selectStart!==null&&(S.translate(.5,.5),S.lineWidth=1,S.strokeStyle="rgba(255,165,0,0.6)",S.fillStyle="rgba(255,165,0,0.1)",A=_.selectBounds,S.beginPath(),S.rect(Math.floor(A.min.x),Math.floor(A.min.y),Math.floor(A.max.x-A.min.x),Math.floor(A.max.y-A.min.y)),S.closePath(),S.stroke(),S.fill(),S.translate(-.5,-.5)),b.hasBounds&&S.setTransform(1,0,0,1,0,0)};var a=function(_,S){var x=_.engine,y=_.timing,b=y.historySize,A=x.timing.timestamp;y.delta=S-y.lastTime||n._goodDelta,y.lastTime=S,y.timestampElapsed=A-y.lastTimestamp||0,y.lastTimestamp=A,y.deltaHistory.unshift(y.delta),y.deltaHistory.length=Math.min(y.deltaHistory.length,b),y.engineDeltaHistory.unshift(x.timing.lastDelta),y.engineDeltaHistory.length=Math.min(y.engineDeltaHistory.length,b),y.timestampElapsedHistory.unshift(y.timestampElapsed),y.timestampElapsedHistory.length=Math.min(y.timestampElapsedHistory.length,b),y.engineUpdatesHistory.unshift(x.timing.lastUpdatesPerFrame),y.engineUpdatesHistory.length=Math.min(y.engineUpdatesHistory.length,b),y.engineElapsedHistory.unshift(x.timing.lastElapsed),y.engineElapsedHistory.length=Math.min(y.engineElapsedHistory.length,b),y.elapsedHistory.unshift(y.lastElapsed),y.elapsedHistory.length=Math.min(y.elapsedHistory.length,b)},p=function(_){for(var S=0,x=0;x<_.length;x+=1)S+=_[x];return S/_.length||0},g=function(_,S){var x=document.createElement("canvas");return x.width=_,x.height=S,x.oncontextmenu=function(){return!1},x.onselectstart=function(){return!1},x},w=function(_){var S=_.getContext("2d"),x=window.devicePixelRatio||1,y=S.webkitBackingStorePixelRatio||S.mozBackingStorePixelRatio||S.msBackingStorePixelRatio||S.oBackingStorePixelRatio||S.backingStorePixelRatio||1;return x/y},T=function(_,S){var x=_.textures[S];return x||(x=_.textures[S]=new Image,x.src=S,x)},C=function(_,S){var x=S;/(jpg|gif|png)$/.test(S)&&(x="url("+S+")"),_.canvas.style.background=x,_.canvas.style.backgroundSize="contain",_.currentBackground=S}})()},function(r,m,u){var n={};r.exports=n;var o=u(5),c=u(17),s=u(0);(function(){n._maxFrameDelta=1e3/15,n._frameDeltaFallback=1e3/60,n._timeBufferMargin=1.5,n._elapsedNextEstimate=1,n._smoothingLowerBound=.1,n._smoothingUpperBound=.9,n.create=function(f){var e={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},i=s.extend(e,f);return i.fps=0,i},n.run=function(f,e){return f.timeBuffer=n._frameDeltaFallback,function i(t){f.frameRequestId=n._onNextFrame(f,i),t&&f.enabled&&n.tick(f,e,t)}(),f},n.tick=function(f,e,i){var t=s.now(),l=f.delta,a=0,p=i-f.timeLastTick;if((!p||!f.timeLastTick||p>Math.max(n._maxFrameDelta,f.maxFrameTime))&&(p=f.frameDelta||n._frameDeltaFallback),f.frameDeltaSmoothing){f.frameDeltaHistory.push(p),f.frameDeltaHistory=f.frameDeltaHistory.slice(-f.frameDeltaHistorySize);var g=f.frameDeltaHistory.slice(0).sort(),w=f.frameDeltaHistory.slice(g.length*n._smoothingLowerBound,g.length*n._smoothingUpperBound),T=d(w);p=T||p}f.frameDeltaSnapping&&(p=1e3/Math.round(1e3/p)),f.frameDelta=p,f.timeLastTick=i,f.timeBuffer+=f.frameDelta,f.timeBuffer=s.clamp(f.timeBuffer,0,f.frameDelta+l*n._timeBufferMargin),f.lastUpdatesDeferred=0;var C=f.maxUpdates||Math.ceil(f.maxFrameTime/l),_={timestamp:e.timing.timestamp};o.trigger(f,"beforeTick",_),o.trigger(f,"tick",_);for(var S=s.now();l>0&&f.timeBuffer>=l*n._timeBufferMargin;){o.trigger(f,"beforeUpdate",_),c.update(e,l),o.trigger(f,"afterUpdate",_),f.timeBuffer-=l,a+=1;var x=s.now()-t,y=s.now()-S,b=x+n._elapsedNextEstimate*y/a;if(a>=C||b>f.maxFrameTime){f.lastUpdatesDeferred=Math.round(Math.max(0,f.timeBuffer/l-n._timeBufferMargin));break}}e.timing.lastUpdatesPerFrame=a,o.trigger(f,"afterTick",_),f.frameDeltaHistory.length>=100&&(f.lastUpdatesDeferred&&Math.round(f.frameDelta/l)>C?s.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):f.lastUpdatesDeferred&&s.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof f.isFixed<"u"&&s.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(f.deltaMin||f.deltaMax)&&s.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),f.fps!==0&&s.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},n.stop=function(f){n._cancelNextFrame(f)},n._onNextFrame=function(f,e){if(typeof window<"u"&&window.requestAnimationFrame)f.frameRequestId=window.requestAnimationFrame(e);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return f.frameRequestId},n._cancelNextFrame=function(f){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(f.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var d=function(f){for(var e=0,i=f.length,t=0;t<i;t+=1)e+=f[t];return e/i||0}})()},function(r,m,u){var n={};r.exports=n;var o=u(8),c=u(0),s=c.deprecated;(function(){n.collides=function(d,f){return o.collides(d,f)},s(n,"collides","SAT.collides ➤ replaced by Collision.collides")})()},function(r,m,u){var n={};r.exports=n,u(1);var o=u(0);(function(){n.pathToVertices=function(c,s){typeof window<"u"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var d,f,e,i,t,l,a,p,g,w,T=[],C,_,S=0,x=0,y=0;s=s||15;var b=function(M,P,k){var I=k%2===1&&k>1;if(!g||M!=g.x||P!=g.y){g&&I?(C=g.x,_=g.y):(C=0,_=0);var D={x:C+M,y:_+P};(I||!g)&&(g=D),T.push(D),x=C+M,y=_+P}},A=function(M){var P=M.pathSegTypeAsLetter.toUpperCase();if(P!=="Z"){switch(P){case"M":case"L":case"T":case"C":case"S":case"Q":x=M.x,y=M.y;break;case"H":x=M.x;break;case"V":y=M.y;break}b(x,y,M.pathSegType)}};for(n._svgPathToAbsolute(c),e=c.getTotalLength(),l=[],d=0;d<c.pathSegList.numberOfItems;d+=1)l.push(c.pathSegList.getItem(d));for(a=l.concat();S<e;){if(w=c.getPathSegAtLength(S),t=l[w],t!=p){for(;a.length&&a[0]!=t;)A(a.shift());p=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":i=c.getPointAtLength(S),b(i.x,i.y,0);break}S+=s}for(d=0,f=a.length;d<f;++d)A(a[d]);return T},n._svgPathToAbsolute=function(c){for(var s,d,f,e,i,t,l=c.pathSegList,a=0,p=0,g=l.numberOfItems,w=0;w<g;++w){var T=l.getItem(w),C=T.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(C))"x"in T&&(a=T.x),"y"in T&&(p=T.y);else switch("x1"in T&&(f=a+T.x1),"x2"in T&&(i=a+T.x2),"y1"in T&&(e=p+T.y1),"y2"in T&&(t=p+T.y2),"x"in T&&(a+=T.x),"y"in T&&(p+=T.y),C){case"m":l.replaceItem(c.createSVGPathSegMovetoAbs(a,p),w);break;case"l":l.replaceItem(c.createSVGPathSegLinetoAbs(a,p),w);break;case"h":l.replaceItem(c.createSVGPathSegLinetoHorizontalAbs(a),w);break;case"v":l.replaceItem(c.createSVGPathSegLinetoVerticalAbs(p),w);break;case"c":l.replaceItem(c.createSVGPathSegCurvetoCubicAbs(a,p,f,e,i,t),w);break;case"s":l.replaceItem(c.createSVGPathSegCurvetoCubicSmoothAbs(a,p,i,t),w);break;case"q":l.replaceItem(c.createSVGPathSegCurvetoQuadraticAbs(a,p,f,e),w);break;case"t":l.replaceItem(c.createSVGPathSegCurvetoQuadraticSmoothAbs(a,p),w);break;case"a":l.replaceItem(c.createSVGPathSegArcAbs(a,p,T.r1,T.r2,T.angle,T.largeArcFlag,T.sweepFlag),w);break;case"z":case"Z":a=s,p=d;break}(C=="M"||C=="m")&&(s=a,d=p)}}})()},function(r,m,u){var n={};r.exports=n;var o=u(6);u(0),function(){n.create=o.create,n.add=o.add,n.remove=o.remove,n.clear=o.clear,n.addComposite=o.addComposite,n.addBody=o.addBody,n.addConstraint=o.addConstraint}()}])})})(Xn);var ai=Xn.exports;const q=Un(ai),nt=6,pt=330,Yn=51,lt=4.7625,Xe=17.5,et=102,at=203,Be=305,Qn=15,Ct=pt+Yn,fe=Ct+nt,ne=fe,si=88,li=39,ui=32,fi=32,ci=0,en=Object.freeze(Object.defineProperty({__proto__:null,baseR:Ct,boardR:fe,center:ne,discR:Qn,ditchW:Yn,fifteenR:et,fiveR:Be,marginBottom:ui,marginSide:ci,pegR:lt,rimW:nt,scoreHeight:li,stepperPadding:fi,surfaceR:pt,tenR:at,twentyR:Xe,uiHeight:si},Symbol.toStringTag,{value:"Module"})),di={blue:"#4477AA",red:"#EE6677",green:"#228833",yellow:"#CCBB44",cyan:"#66CCEE",purple:"#AA3377",gray:"#BBBBBB"},pi={black:"#000000",white:"#ffffff","gray-50":"rgb(247, 247, 247)","gray-100":"rgb(239, 239, 239)","gray-200":"rgb(223, 223, 223)","gray-300":"rgb(202, 202, 202)","gray-400":"rgb(168, 168, 168)","gray-500":"rgb(135, 135, 135)","gray-600":"rgb(109, 109, 109)","gray-700":"rgb(78, 78, 78)","gray-800":"rgb(55, 55, 55)","gray-900":"rgb(38, 38, 38)","gray-1000":"rgb(25, 25, 25)","pink-aa":"#FF24FF","pink-aaa":"#D100D1","teal-aa":"#00A3A3","teal-aaa":"#008080","red-aa":"#FE5F55","red-aaa":"#E91101","purple-aaa":"#564592"},Bt={category:di,color:pi,"":{"11px":"0.7rem","12px":"0.75rem","14px":"0.875rem","16px":"1rem","18px":"1.125rem","20px":"1.25rem","22px":"1.375rem","24px":"1.5rem","28px":"1.75rem","32px":"2rem","36px":"2.25rem","40px":"2.5rem","44px":"2.75rem","48px":"3rem","56px":"3.5rem","64px":"4rem","80px":"5rem","96px":"6rem","112px":"7rem","128px":"8rem"}};var kt={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(h){(function(){var v=function(){this.init()};v.prototype={init:function(){var e=this||r;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var i=this||r;if(e=parseFloat(e),i.ctx||f(),typeof e<"u"&&e>=0&&e<=1){if(i._volume=e,i._muted)return i;i.usingWebAudio&&i.masterGain.gain.setValueAtTime(e,r.ctx.currentTime);for(var t=0;t<i._howls.length;t++)if(!i._howls[t]._webAudio)for(var l=i._howls[t]._getSoundIds(),a=0;a<l.length;a++){var p=i._howls[t]._soundById(l[a]);p&&p._node&&(p._node.volume=p._volume*e)}return i}return i._volume},mute:function(e){var i=this||r;i.ctx||f(),i._muted=e,i.usingWebAudio&&i.masterGain.gain.setValueAtTime(e?0:i._volume,r.ctx.currentTime);for(var t=0;t<i._howls.length;t++)if(!i._howls[t]._webAudio)for(var l=i._howls[t]._getSoundIds(),a=0;a<l.length;a++){var p=i._howls[t]._soundById(l[a]);p&&p._node&&(p._node.muted=e?!0:p._muted)}return i},stop:function(){for(var e=this||r,i=0;i<e._howls.length;i++)e._howls[i].stop();return e},unload:function(){for(var e=this||r,i=e._howls.length-1;i>=0;i--)e._howls[i].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,f()),e},codecs:function(e){return(this||r)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||r;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var i=new Audio;typeof i.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var i=new Audio;i.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||r,i=null;try{i=typeof Audio<"u"?new Audio:null}catch{return e}if(!i||typeof i.canPlayType!="function")return e;var t=i.canPlayType("audio/mpeg;").replace(/^no$/,""),l=e._navigator?e._navigator.userAgent:"",a=l.match(/OPR\/(\d+)/g),p=a&&parseInt(a[0].split("/")[1],10)<33,g=l.indexOf("Safari")!==-1&&l.indexOf("Chrome")===-1,w=l.match(/Version\/(.*?) /),T=g&&w&&parseInt(w[1],10)<15;return e._codecs={mp3:!!(!p&&(t||i.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!t,opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(i.canPlayType('audio/wav; codecs="1"')||i.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!i.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!i.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(i.canPlayType("audio/x-m4b;")||i.canPlayType("audio/m4b;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(i.canPlayType("audio/x-mp4;")||i.canPlayType("audio/mp4;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!T&&i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!T&&i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!i.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(i.canPlayType("audio/x-flac;")||i.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||r;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var i=function(t){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var l=new Audio;l._unlocked=!0,e._releaseHtml5Audio(l)}catch{e.noAudio=!0;break}for(var a=0;a<e._howls.length;a++)if(!e._howls[a]._webAudio)for(var p=e._howls[a]._getSoundIds(),g=0;g<p.length;g++){var w=e._howls[a]._soundById(p[g]);w&&w._node&&!w._node._unlocked&&(w._node._unlocked=!0,w._node.load())}e._autoResume();var T=e.ctx.createBufferSource();T.buffer=e._scratchBuffer,T.connect(e.ctx.destination),typeof T.start>"u"?T.noteOn(0):T.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),T.onended=function(){T.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",i,!0),document.removeEventListener("touchend",i,!0),document.removeEventListener("click",i,!0),document.removeEventListener("keydown",i,!0);for(var C=0;C<e._howls.length;C++)e._howls[C]._emit("unlock")}};return document.addEventListener("touchstart",i,!0),document.addEventListener("touchend",i,!0),document.addEventListener("click",i,!0),document.addEventListener("keydown",i,!0),e}},_obtainHtml5Audio:function(){var e=this||r;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var i=new Audio().play();return i&&typeof Promise<"u"&&(i instanceof Promise||typeof i.then=="function")&&i.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var i=this||r;return e._unlocked&&i._html5AudioPool.push(e),i},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!r.usingWebAudio)){for(var i=0;i<e._howls.length;i++)if(e._howls[i]._webAudio){for(var t=0;t<e._howls[i]._sounds.length;t++)if(!e._howls[i]._sounds[t]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var l=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(l,l)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!r.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var i=0;i<e._howls.length;i++)e._howls[i]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var r=new v,m=function(e){var i=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}i.init(e)};m.prototype={init:function(e){var i=this;return r.ctx||f(),i._autoplay=e.autoplay||!1,i._format=typeof e.format!="string"?e.format:[e.format],i._html5=e.html5||!1,i._muted=e.mute||!1,i._loop=e.loop||!1,i._pool=e.pool||5,i._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,i._rate=e.rate||1,i._sprite=e.sprite||{},i._src=typeof e.src!="string"?e.src:[e.src],i._volume=e.volume!==void 0?e.volume:1,i._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},i._duration=0,i._state="unloaded",i._sounds=[],i._endTimers={},i._queue=[],i._playLock=!1,i._onend=e.onend?[{fn:e.onend}]:[],i._onfade=e.onfade?[{fn:e.onfade}]:[],i._onload=e.onload?[{fn:e.onload}]:[],i._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],i._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],i._onpause=e.onpause?[{fn:e.onpause}]:[],i._onplay=e.onplay?[{fn:e.onplay}]:[],i._onstop=e.onstop?[{fn:e.onstop}]:[],i._onmute=e.onmute?[{fn:e.onmute}]:[],i._onvolume=e.onvolume?[{fn:e.onvolume}]:[],i._onrate=e.onrate?[{fn:e.onrate}]:[],i._onseek=e.onseek?[{fn:e.onseek}]:[],i._onunlock=e.onunlock?[{fn:e.onunlock}]:[],i._onresume=[],i._webAudio=r.usingWebAudio&&!i._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(i),i._autoplay&&i._queue.push({event:"play",action:function(){i.play()}}),i._preload&&i._preload!=="none"&&i.load(),i},load:function(){var e=this,i=null;if(r.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var t=0;t<e._src.length;t++){var l,a;if(e._format&&e._format[t])l=e._format[t];else{if(a=e._src[t],typeof a!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}l=/^data:audio\/([^;,]+);/i.exec(a),l||(l=/\.([^.]+)$/.exec(a.split("?",1)[0])),l&&(l=l[1].toLowerCase())}if(l||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),l&&r.codecs(l)){i=e._src[t];break}}if(!i){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=i,e._state="loading",window.location.protocol==="https:"&&i.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new u(e),e._webAudio&&o(e),e},play:function(e,i){var t=this,l=null;if(typeof e=="number")l=e,e=null;else{if(typeof e=="string"&&t._state==="loaded"&&!t._sprite[e])return null;if(typeof e>"u"&&(e="__default",!t._playLock)){for(var a=0,p=0;p<t._sounds.length;p++)t._sounds[p]._paused&&!t._sounds[p]._ended&&(a++,l=t._sounds[p]._id);a===1?e=null:l=null}}var g=l?t._soundById(l):t._inactiveSound();if(!g)return null;if(l&&!e&&(e=g._sprite||"__default"),t._state!=="loaded"){g._sprite=e,g._ended=!1;var w=g._id;return t._queue.push({event:"play",action:function(){t.play(w)}}),w}if(l&&!g._paused)return i||t._loadQueue("play"),g._id;t._webAudio&&r._autoResume();var T=Math.max(0,g._seek>0?g._seek:t._sprite[e][0]/1e3),C=Math.max(0,(t._sprite[e][0]+t._sprite[e][1])/1e3-T),_=C*1e3/Math.abs(g._rate),S=t._sprite[e][0]/1e3,x=(t._sprite[e][0]+t._sprite[e][1])/1e3;g._sprite=e,g._ended=!1;var y=function(){g._paused=!1,g._seek=T,g._start=S,g._stop=x,g._loop=!!(g._loop||t._sprite[e][2])};if(T>=x){t._ended(g);return}var b=g._node;if(t._webAudio){var A=function(){t._playLock=!1,y(),t._refreshBuffer(g);var I=g._muted||t._muted?0:g._volume;b.gain.setValueAtTime(I,r.ctx.currentTime),g._playStart=r.ctx.currentTime,typeof b.bufferSource.start>"u"?g._loop?b.bufferSource.noteGrainOn(0,T,86400):b.bufferSource.noteGrainOn(0,T,C):g._loop?b.bufferSource.start(0,T,86400):b.bufferSource.start(0,T,C),_!==1/0&&(t._endTimers[g._id]=setTimeout(t._ended.bind(t,g),_)),i||setTimeout(function(){t._emit("play",g._id),t._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?A():(t._playLock=!0,t.once("resume",A),t._clearTimer(g._id))}else{var M=function(){b.currentTime=T,b.muted=g._muted||t._muted||r._muted||b.muted,b.volume=g._volume*r.volume(),b.playbackRate=g._rate;try{var I=b.play();if(I&&typeof Promise<"u"&&(I instanceof Promise||typeof I.then=="function")?(t._playLock=!0,y(),I.then(function(){t._playLock=!1,b._unlocked=!0,i?t._loadQueue():t._emit("play",g._id)}).catch(function(){t._playLock=!1,t._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),g._ended=!0,g._paused=!0})):i||(t._playLock=!1,y(),t._emit("play",g._id)),b.playbackRate=g._rate,b.paused){t._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||g._loop?t._endTimers[g._id]=setTimeout(t._ended.bind(t,g),_):(t._endTimers[g._id]=function(){t._ended(g),b.removeEventListener("ended",t._endTimers[g._id],!1)},b.addEventListener("ended",t._endTimers[g._id],!1))}catch(D){t._emit("playerror",g._id,D)}};b.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(b.src=t._src,b.load());var P=window&&window.ejecta||!b.readyState&&r._navigator.isCocoonJS;if(b.readyState>=3||P)M();else{t._playLock=!0,t._state="loading";var k=function(){t._state="loaded",M(),b.removeEventListener(r._canPlayEvent,k,!1)};b.addEventListener(r._canPlayEvent,k,!1),t._clearTimer(g._id)}}return g._id},pause:function(e){var i=this;if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"pause",action:function(){i.pause(e)}}),i;for(var t=i._getSoundIds(e),l=0;l<t.length;l++){i._clearTimer(t[l]);var a=i._soundById(t[l]);if(a&&!a._paused&&(a._seek=i.seek(t[l]),a._rateSeek=0,a._paused=!0,i._stopFade(t[l]),a._node))if(i._webAudio){if(!a._node.bufferSource)continue;typeof a._node.bufferSource.stop>"u"?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),i._cleanBuffer(a._node)}else(!isNaN(a._node.duration)||a._node.duration===1/0)&&a._node.pause();arguments[1]||i._emit("pause",a?a._id:null)}return i},stop:function(e,i){var t=this;if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"stop",action:function(){t.stop(e)}}),t;for(var l=t._getSoundIds(e),a=0;a<l.length;a++){t._clearTimer(l[a]);var p=t._soundById(l[a]);p&&(p._seek=p._start||0,p._rateSeek=0,p._paused=!0,p._ended=!0,t._stopFade(l[a]),p._node&&(t._webAudio?p._node.bufferSource&&(typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),t._cleanBuffer(p._node)):(!isNaN(p._node.duration)||p._node.duration===1/0)&&(p._node.currentTime=p._start||0,p._node.pause(),p._node.duration===1/0&&t._clearSound(p._node))),i||t._emit("stop",p._id))}return t},mute:function(e,i){var t=this;if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"mute",action:function(){t.mute(e,i)}}),t;if(typeof i>"u")if(typeof e=="boolean")t._muted=e;else return t._muted;for(var l=t._getSoundIds(i),a=0;a<l.length;a++){var p=t._soundById(l[a]);p&&(p._muted=e,p._interval&&t._stopFade(p._id),t._webAudio&&p._node?p._node.gain.setValueAtTime(e?0:p._volume,r.ctx.currentTime):p._node&&(p._node.muted=r._muted?!0:e),t._emit("mute",p._id))}return t},volume:function(){var e=this,i=arguments,t,l;if(i.length===0)return e._volume;if(i.length===1||i.length===2&&typeof i[1]>"u"){var a=e._getSoundIds(),p=a.indexOf(i[0]);p>=0?l=parseInt(i[0],10):t=parseFloat(i[0])}else i.length>=2&&(t=parseFloat(i[0]),l=parseInt(i[1],10));var g;if(typeof t<"u"&&t>=0&&t<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,i)}}),e;typeof l>"u"&&(e._volume=t),l=e._getSoundIds(l);for(var w=0;w<l.length;w++)g=e._soundById(l[w]),g&&(g._volume=t,i[2]||e._stopFade(l[w]),e._webAudio&&g._node&&!g._muted?g._node.gain.setValueAtTime(t,r.ctx.currentTime):g._node&&!g._muted&&(g._node.volume=t*r.volume()),e._emit("volume",g._id))}else return g=l?e._soundById(l):e._sounds[0],g?g._volume:0;return e},fade:function(e,i,t,l){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"fade",action:function(){a.fade(e,i,t,l)}}),a;e=Math.min(Math.max(0,parseFloat(e)),1),i=Math.min(Math.max(0,parseFloat(i)),1),t=parseFloat(t),a.volume(e,l);for(var p=a._getSoundIds(l),g=0;g<p.length;g++){var w=a._soundById(p[g]);if(w){if(l||a._stopFade(p[g]),a._webAudio&&!w._muted){var T=r.ctx.currentTime,C=T+t/1e3;w._volume=e,w._node.gain.setValueAtTime(e,T),w._node.gain.linearRampToValueAtTime(i,C)}a._startFadeInterval(w,e,i,t,p[g],typeof l>"u")}}return a},_startFadeInterval:function(e,i,t,l,a,p){var g=this,w=i,T=t-i,C=Math.abs(T/.01),_=Math.max(4,C>0?l/C:l),S=Date.now();e._fadeTo=t,e._interval=setInterval(function(){var x=(Date.now()-S)/l;S=Date.now(),w+=T*x,w=Math.round(w*100)/100,T<0?w=Math.max(t,w):w=Math.min(t,w),g._webAudio?e._volume=w:g.volume(w,e._id,!0),p&&(g._volume=w),(t<i&&w<=t||t>i&&w>=t)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,g.volume(t,e._id),g._emit("fade",e._id))},_)},_stopFade:function(e){var i=this,t=i._soundById(e);return t&&t._interval&&(i._webAudio&&t._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(t._interval),t._interval=null,i.volume(t._fadeTo,e),t._fadeTo=null,i._emit("fade",e)),i},loop:function(){var e=this,i=arguments,t,l,a;if(i.length===0)return e._loop;if(i.length===1)if(typeof i[0]=="boolean")t=i[0],e._loop=t;else return a=e._soundById(parseInt(i[0],10)),a?a._loop:!1;else i.length===2&&(t=i[0],l=parseInt(i[1],10));for(var p=e._getSoundIds(l),g=0;g<p.length;g++)a=e._soundById(p[g]),a&&(a._loop=t,e._webAudio&&a._node&&a._node.bufferSource&&(a._node.bufferSource.loop=t,t&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop,e.playing(p[g])&&(e.pause(p[g],!0),e.play(p[g],!0)))));return e},rate:function(){var e=this,i=arguments,t,l;if(i.length===0)l=e._sounds[0]._id;else if(i.length===1){var a=e._getSoundIds(),p=a.indexOf(i[0]);p>=0?l=parseInt(i[0],10):t=parseFloat(i[0])}else i.length===2&&(t=parseFloat(i[0]),l=parseInt(i[1],10));var g;if(typeof t=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,i)}}),e;typeof l>"u"&&(e._rate=t),l=e._getSoundIds(l);for(var w=0;w<l.length;w++)if(g=e._soundById(l[w]),g){e.playing(l[w])&&(g._rateSeek=e.seek(l[w]),g._playStart=e._webAudio?r.ctx.currentTime:g._playStart),g._rate=t,e._webAudio&&g._node&&g._node.bufferSource?g._node.bufferSource.playbackRate.setValueAtTime(t,r.ctx.currentTime):g._node&&(g._node.playbackRate=t);var T=e.seek(l[w]),C=(e._sprite[g._sprite][0]+e._sprite[g._sprite][1])/1e3-T,_=C*1e3/Math.abs(g._rate);(e._endTimers[l[w]]||!g._paused)&&(e._clearTimer(l[w]),e._endTimers[l[w]]=setTimeout(e._ended.bind(e,g),_)),e._emit("rate",g._id)}}else return g=e._soundById(l),g?g._rate:e._rate;return e},seek:function(){var e=this,i=arguments,t,l;if(i.length===0)e._sounds.length&&(l=e._sounds[0]._id);else if(i.length===1){var a=e._getSoundIds(),p=a.indexOf(i[0]);p>=0?l=parseInt(i[0],10):e._sounds.length&&(l=e._sounds[0]._id,t=parseFloat(i[0]))}else i.length===2&&(t=parseFloat(i[0]),l=parseInt(i[1],10));if(typeof l>"u")return 0;if(typeof t=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,i)}}),e;var g=e._soundById(l);if(g)if(typeof t=="number"&&t>=0){var w=e.playing(l);w&&e.pause(l,!0),g._seek=t,g._ended=!1,e._clearTimer(l),!e._webAudio&&g._node&&!isNaN(g._node.duration)&&(g._node.currentTime=t);var T=function(){w&&e.play(l,!0),e._emit("seek",l)};if(w&&!e._webAudio){var C=function(){e._playLock?setTimeout(C,0):T()};setTimeout(C,0)}else T()}else if(e._webAudio){var _=e.playing(l)?r.ctx.currentTime-g._playStart:0,S=g._rateSeek?g._rateSeek-g._seek:0;return g._seek+(S+_*Math.abs(g._rate))}else return g._node.currentTime;return e},playing:function(e){var i=this;if(typeof e=="number"){var t=i._soundById(e);return t?!t._paused:!1}for(var l=0;l<i._sounds.length;l++)if(!i._sounds[l]._paused)return!0;return!1},duration:function(e){var i=this,t=i._duration,l=i._soundById(e);return l&&(t=i._sprite[l._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,i=e._sounds,t=0;t<i.length;t++)i[t]._paused||e.stop(i[t]._id),e._webAudio||(e._clearSound(i[t]._node),i[t]._node.removeEventListener("error",i[t]._errorFn,!1),i[t]._node.removeEventListener(r._canPlayEvent,i[t]._loadFn,!1),i[t]._node.removeEventListener("ended",i[t]._endFn,!1),r._releaseHtml5Audio(i[t]._node)),delete i[t]._node,e._clearTimer(i[t]._id);var l=r._howls.indexOf(e);l>=0&&r._howls.splice(l,1);var a=!0;for(t=0;t<r._howls.length;t++)if(r._howls[t]._src===e._src||e._src.indexOf(r._howls[t]._src)>=0){a=!1;break}return n&&a&&delete n[e._src],r.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,i,t,l){var a=this,p=a["_on"+e];return typeof i=="function"&&p.push(l?{id:t,fn:i,once:l}:{id:t,fn:i}),a},off:function(e,i,t){var l=this,a=l["_on"+e],p=0;if(typeof i=="number"&&(t=i,i=null),i||t)for(p=0;p<a.length;p++){var g=t===a[p].id;if(i===a[p].fn&&g||!i&&g){a.splice(p,1);break}}else if(e)l["_on"+e]=[];else{var w=Object.keys(l);for(p=0;p<w.length;p++)w[p].indexOf("_on")===0&&Array.isArray(l[w[p]])&&(l[w[p]]=[])}return l},once:function(e,i,t){var l=this;return l.on(e,i,t,1),l},_emit:function(e,i,t){for(var l=this,a=l["_on"+e],p=a.length-1;p>=0;p--)(!a[p].id||a[p].id===i||e==="load")&&(setTimeout((function(g){g.call(this,i,t)}).bind(l,a[p].fn),0),a[p].once&&l.off(e,a[p].fn,a[p].id));return l._loadQueue(e),l},_loadQueue:function(e){var i=this;if(i._queue.length>0){var t=i._queue[0];t.event===e&&(i._queue.shift(),i._loadQueue()),e||t.action()}return i},_ended:function(e){var i=this,t=e._sprite;if(!i._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(i._ended.bind(i,e),100),i;var l=!!(e._loop||i._sprite[t][2]);if(i._emit("end",e._id),!i._webAudio&&l&&i.stop(e._id,!0).play(e._id),i._webAudio&&l){i._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=r.ctx.currentTime;var a=(e._stop-e._start)*1e3/Math.abs(e._rate);i._endTimers[e._id]=setTimeout(i._ended.bind(i,e),a)}return i._webAudio&&!l&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,i._clearTimer(e._id),i._cleanBuffer(e._node),r._autoSuspend()),!i._webAudio&&!l&&i.stop(e._id,!0),i},_clearTimer:function(e){var i=this;if(i._endTimers[e]){if(typeof i._endTimers[e]!="function")clearTimeout(i._endTimers[e]);else{var t=i._soundById(e);t&&t._node&&t._node.removeEventListener("ended",i._endTimers[e],!1)}delete i._endTimers[e]}return i},_soundById:function(e){for(var i=this,t=0;t<i._sounds.length;t++)if(e===i._sounds[t]._id)return i._sounds[t];return null},_inactiveSound:function(){var e=this;e._drain();for(var i=0;i<e._sounds.length;i++)if(e._sounds[i]._ended)return e._sounds[i].reset();return new u(e)},_drain:function(){var e=this,i=e._pool,t=0,l=0;if(!(e._sounds.length<i)){for(l=0;l<e._sounds.length;l++)e._sounds[l]._ended&&t++;for(l=e._sounds.length-1;l>=0;l--){if(t<=i)return;e._sounds[l]._ended&&(e._webAudio&&e._sounds[l]._node&&e._sounds[l]._node.disconnect(0),e._sounds.splice(l,1),t--)}}},_getSoundIds:function(e){var i=this;if(typeof e>"u"){for(var t=[],l=0;l<i._sounds.length;l++)t.push(i._sounds[l]._id);return t}else return[e]},_refreshBuffer:function(e){var i=this;return e._node.bufferSource=r.ctx.createBufferSource(),e._node.bufferSource.buffer=n[i._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,r.ctx.currentTime),i},_cleanBuffer:function(e){var i=this,t=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return i;if(r._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=r._scratchBuffer}catch{}return e.bufferSource=null,i},_clearSound:function(e){var i=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);i||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var u=function(e){this._parent=e,this.init()};u.prototype={init:function(){var e=this,i=e._parent;return e._muted=i._muted,e._loop=i._loop,e._volume=i._volume,e._rate=i._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,i._sounds.push(e),e.create(),e},create:function(){var e=this,i=e._parent,t=r._muted||e._muted||e._parent._muted?0:e._volume;return i._webAudio?(e._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),e._node.gain.setValueAtTime(t,r.ctx.currentTime),e._node.paused=!0,e._node.connect(r.masterGain)):r.noAudio||(e._node=r._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(r._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=i._src,e._node.preload=i._preload===!0?"auto":i._preload,e._node.volume=t*r.volume(),e._node.load()),e},reset:function(){var e=this,i=e._parent;return e._muted=i._muted,e._loop=i._loop,e._volume=i._volume,e._rate=i._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,i=e._parent;i._duration=Math.ceil(e._node.duration*10)/10,Object.keys(i._sprite).length===0&&(i._sprite={__default:[0,i._duration*1e3]}),i._state!=="loaded"&&(i._state="loaded",i._emit("load"),i._loadQueue()),e._node.removeEventListener(r._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,i=e._parent;i._duration===1/0&&(i._duration=Math.ceil(e._node.duration*10)/10,i._sprite.__default[1]===1/0&&(i._sprite.__default[1]=i._duration*1e3),i._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var n={},o=function(e){var i=e._src;if(n[i]){e._duration=n[i].duration,d(e);return}if(/^data:[^;]+;base64,/.test(i)){for(var t=atob(i.split(",")[1]),l=new Uint8Array(t.length),a=0;a<t.length;++a)l[a]=t.charCodeAt(a);s(l.buffer,e)}else{var p=new XMLHttpRequest;p.open(e._xhr.method,i,!0),p.withCredentials=e._xhr.withCredentials,p.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(g){p.setRequestHeader(g,e._xhr.headers[g])}),p.onload=function(){var g=(p.status+"")[0];if(g!=="0"&&g!=="2"&&g!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+p.status+".");return}s(p.response,e)},p.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete n[i],e.load())},c(p)}},c=function(e){try{e.send()}catch{e.onerror()}},s=function(e,i){var t=function(){i._emit("loaderror",null,"Decoding audio data failed.")},l=function(a){a&&i._sounds.length>0?(n[i._src]=a,d(i,a)):t()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(e).then(l).catch(t):r.ctx.decodeAudioData(e,l,t)},d=function(e,i){i&&!e._duration&&(e._duration=i.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},f=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),i=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),t=i?parseInt(i[1],10):null;if(e&&t&&t<9){var l=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!l&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};h.Howler=r,h.Howl=m,typeof Ne<"u"?(Ne.HowlerGlobal=v,Ne.Howler=r,Ne.Howl=m,Ne.Sound=u):typeof window<"u"&&(window.HowlerGlobal=v,window.Howler=r,window.Howl=m,window.Sound=u)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var m=this;if(!m.ctx||!m.ctx.listener)return m;for(var u=m._howls.length-1;u>=0;u--)m._howls[u].stereo(r);return m},HowlerGlobal.prototype.pos=function(r,m,u){var n=this;if(!n.ctx||!n.ctx.listener)return n;if(m=typeof m!="number"?n._pos[1]:m,u=typeof u!="number"?n._pos[2]:u,typeof r=="number")n._pos=[r,m,u],typeof n.ctx.listener.positionX<"u"?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]);else return n._pos;return n},HowlerGlobal.prototype.orientation=function(r,m,u,n,o,c){var s=this;if(!s.ctx||!s.ctx.listener)return s;var d=s._orientation;if(m=typeof m!="number"?d[1]:m,u=typeof u!="number"?d[2]:u,n=typeof n!="number"?d[3]:n,o=typeof o!="number"?d[4]:o,c=typeof c!="number"?d[5]:c,typeof r=="number")s._orientation=[r,m,u,n,o,c],typeof s.ctx.listener.forwardX<"u"?(s.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),s.ctx.listener.forwardY.setTargetAtTime(m,Howler.ctx.currentTime,.1),s.ctx.listener.forwardZ.setTargetAtTime(u,Howler.ctx.currentTime,.1),s.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),s.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),s.ctx.listener.upZ.setTargetAtTime(c,Howler.ctx.currentTime,.1)):s.ctx.listener.setOrientation(r,m,u,n,o,c);else return d;return s},Howl.prototype.init=function(r){return function(m){var u=this;return u._orientation=m.orientation||[1,0,0],u._stereo=m.stereo||null,u._pos=m.pos||null,u._pannerAttr={coneInnerAngle:typeof m.coneInnerAngle<"u"?m.coneInnerAngle:360,coneOuterAngle:typeof m.coneOuterAngle<"u"?m.coneOuterAngle:360,coneOuterGain:typeof m.coneOuterGain<"u"?m.coneOuterGain:0,distanceModel:typeof m.distanceModel<"u"?m.distanceModel:"inverse",maxDistance:typeof m.maxDistance<"u"?m.maxDistance:1e4,panningModel:typeof m.panningModel<"u"?m.panningModel:"HRTF",refDistance:typeof m.refDistance<"u"?m.refDistance:1,rolloffFactor:typeof m.rolloffFactor<"u"?m.rolloffFactor:1},u._onstereo=m.onstereo?[{fn:m.onstereo}]:[],u._onpos=m.onpos?[{fn:m.onpos}]:[],u._onorientation=m.onorientation?[{fn:m.onorientation}]:[],r.call(this,m)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,m){var u=this;if(!u._webAudio)return u;if(u._state!=="loaded")return u._queue.push({event:"stereo",action:function(){u.stereo(r,m)}}),u;var n=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof m>"u")if(typeof r=="number")u._stereo=r,u._pos=[r,0,0];else return u._stereo;for(var o=u._getSoundIds(m),c=0;c<o.length;c++){var s=u._soundById(o[c]);if(s)if(typeof r=="number")s._stereo=r,s._pos=[r,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",(!s._panner||!s._panner.pan)&&v(s,n),n==="spatial"?typeof s._panner.positionX<"u"?(s._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(r,0,0):s._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),u._emit("stereo",s._id);else return s._stereo}return u},Howl.prototype.pos=function(r,m,u,n){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(r,m,u,n)}}),o;if(m=typeof m!="number"?0:m,u=typeof u!="number"?-.5:u,typeof n>"u")if(typeof r=="number")o._pos=[r,m,u];else return o._pos;for(var c=o._getSoundIds(n),s=0;s<c.length;s++){var d=o._soundById(c[s]);if(d)if(typeof r=="number")d._pos=[r,m,u],d._node&&((!d._panner||d._panner.pan)&&v(d,"spatial"),typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(m,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(u,Howler.ctx.currentTime)):d._panner.setPosition(r,m,u)),o._emit("pos",d._id);else return d._pos}return o},Howl.prototype.orientation=function(r,m,u,n){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(r,m,u,n)}}),o;if(m=typeof m!="number"?o._orientation[1]:m,u=typeof u!="number"?o._orientation[2]:u,typeof n>"u")if(typeof r=="number")o._orientation=[r,m,u];else return o._orientation;for(var c=o._getSoundIds(n),s=0;s<c.length;s++){var d=o._soundById(c[s]);if(d)if(typeof r=="number")d._orientation=[r,m,u],d._node&&(d._panner||(d._pos||(d._pos=o._pos||[0,0,-.5]),v(d,"spatial")),typeof d._panner.orientationX<"u"?(d._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),d._panner.orientationY.setValueAtTime(m,Howler.ctx.currentTime),d._panner.orientationZ.setValueAtTime(u,Howler.ctx.currentTime)):d._panner.setOrientation(r,m,u)),o._emit("orientation",d._id);else return d._orientation}return o},Howl.prototype.pannerAttr=function(){var r=this,m=arguments,u,n,o;if(!r._webAudio)return r;if(m.length===0)return r._pannerAttr;if(m.length===1)if(typeof m[0]=="object")u=m[0],typeof n>"u"&&(u.pannerAttr||(u.pannerAttr={coneInnerAngle:u.coneInnerAngle,coneOuterAngle:u.coneOuterAngle,coneOuterGain:u.coneOuterGain,distanceModel:u.distanceModel,maxDistance:u.maxDistance,refDistance:u.refDistance,rolloffFactor:u.rolloffFactor,panningModel:u.panningModel}),r._pannerAttr={coneInnerAngle:typeof u.pannerAttr.coneInnerAngle<"u"?u.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof u.pannerAttr.coneOuterAngle<"u"?u.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof u.pannerAttr.coneOuterGain<"u"?u.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof u.pannerAttr.distanceModel<"u"?u.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof u.pannerAttr.maxDistance<"u"?u.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof u.pannerAttr.refDistance<"u"?u.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof u.pannerAttr.rolloffFactor<"u"?u.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof u.pannerAttr.panningModel<"u"?u.pannerAttr.panningModel:r._panningModel});else return o=r._soundById(parseInt(m[0],10)),o?o._pannerAttr:r._pannerAttr;else m.length===2&&(u=m[0],n=parseInt(m[1],10));for(var c=r._getSoundIds(n),s=0;s<c.length;s++)if(o=r._soundById(c[s]),o){var d=o._pannerAttr;d={coneInnerAngle:typeof u.coneInnerAngle<"u"?u.coneInnerAngle:d.coneInnerAngle,coneOuterAngle:typeof u.coneOuterAngle<"u"?u.coneOuterAngle:d.coneOuterAngle,coneOuterGain:typeof u.coneOuterGain<"u"?u.coneOuterGain:d.coneOuterGain,distanceModel:typeof u.distanceModel<"u"?u.distanceModel:d.distanceModel,maxDistance:typeof u.maxDistance<"u"?u.maxDistance:d.maxDistance,refDistance:typeof u.refDistance<"u"?u.refDistance:d.refDistance,rolloffFactor:typeof u.rolloffFactor<"u"?u.rolloffFactor:d.rolloffFactor,panningModel:typeof u.panningModel<"u"?u.panningModel:d.panningModel};var f=o._panner;f||(o._pos||(o._pos=r._pos||[0,0,-.5]),v(o,"spatial"),f=o._panner),f.coneInnerAngle=d.coneInnerAngle,f.coneOuterAngle=d.coneOuterAngle,f.coneOuterGain=d.coneOuterGain,f.distanceModel=d.distanceModel,f.maxDistance=d.maxDistance,f.refDistance=d.refDistance,f.rolloffFactor=d.rolloffFactor,f.panningModel=d.panningModel}return r},Sound.prototype.init=function(r){return function(){var m=this,u=m._parent;m._orientation=u._orientation,m._stereo=u._stereo,m._pos=u._pos,m._pannerAttr=u._pannerAttr,r.call(this),m._stereo?u.stereo(m._stereo):m._pos&&u.pos(m._pos[0],m._pos[1],m._pos[2],m._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var m=this,u=m._parent;return m._orientation=u._orientation,m._stereo=u._stereo,m._pos=u._pos,m._pannerAttr=u._pannerAttr,m._stereo?u.stereo(m._stereo):m._pos?u.pos(m._pos[0],m._pos[1],m._pos[2],m._id):m._panner&&(m._panner.disconnect(0),m._panner=void 0,u._refreshBuffer(m)),r.call(this)}}(Sound.prototype.reset);var v=function(r,m){m=m||"spatial",m==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}})()})(kt);const vi=ot(!1),je=1,Ot=2,mn=4,Ft=8,hn=16,mi=1,hi=.05,gi=.05,_i=1,yi=.2,Vt={player1:Bt.color["pink-aa"],player2:Bt.color["teal-aa"],active:Bt.color.black,vector:Bt.color.black};let qe=!1,At;const xi=new kt.Howl({src:[`${Kt}/assets/audio/disc.mp3`]}),Si=new kt.Howl({src:[`${Kt}/assets/audio/rim.mp3`]}),wi=new kt.Howl({src:[`${Kt}/assets/audio/flick.mp3`]}),bi=new kt.Howl({src:[`${Kt}/assets/audio/hole.mp3`]});vi.subscribe(h=>{At=h});class Ai{constructor(){this.events={}}on(v,r){this.events[v]||(this.events[v]=[]),this.events[v].push(r)}emit(v,r){this.events[v]&&this.events[v].forEach(m=>m(r))}}function Ti(){const h=new Ai;let v,r,m,u,n,o,c,s,d,f,e,i,t=[],l,a;function p(E){const F=i/(fe*2);return E*F}function g(){const E=q.Bodies.circle(ne,ne,fe,{isStatic:!0,isSensor:!0,render:{visible:qe,fillStyle:"rgba(0,0,0,0)",lineWidth:1},label:"surface"},64),F=q.Bodies.circle(ne,ne,fe-nt,{isStatic:!0,isSensor:!0,render:{visible:qe,fillStyle:"rgba(0,0,0,0)",lineWidth:1},label:"surface"},64),H=q.Bodies.circle(ne,ne,pt,{isStatic:!0,isSensor:!0,render:{visible:qe,fillStyle:"rgba(0,0,0,0)",lineWidth:1},label:"surface"},64),L=q.Bodies.circle(ne,ne,Xe,{isStatic:!0,isSensor:!0,render:{visible:qe,fillStyle:"rgba(0,0,0,0)",lineWidth:1},label:"20"},64),U=q.Bodies.circle(ne,ne,et,{isStatic:!0,isSensor:!0,render:{visible:qe,fillStyle:"rgba(0,0,0,0)",lineWidth:1},label:"15"},64),B=q.Bodies.circle(ne,ne,at,{isStatic:!0,isSensor:!0,render:{visible:qe,fillStyle:"rgba(0,0,0,0)",lineWidth:1},label:"10"},64),K=q.Bodies.circle(ne,ne,Be,{isStatic:!0,isSensor:!0,render:{visible:qe,fillStyle:"rgba(0,0,0,0)",lineWidth:1},label:"5"},64);q.Composite.add(r,[F,E,H,L,U,B,K])}function w(){const F=Math.max(2,Xe),H=Xe+F/2-1,L=[];for(let U=0;U<16;U++){const B=U/16*2*Math.PI,K=ne+Math.cos(B)*H,te=ne+Math.sin(B)*H,X=2*Math.PI*H/16,Z=q.Bodies.rectangle(K,te,F,X,{isStatic:!0,isSensor:!1,angle:B,render:{visible:!1},label:"trap 20",collisionFilter:{category:mn,mask:je}});L.push(Z)}q.Composite.add(r,L)}function T(){const F=Xe*4,H=Ct-nt+F/2-1,L=[];for(let U=0;U<32;U++){const B=U/32*2*Math.PI,K=ne+Math.cos(B)*H,te=ne+Math.sin(B)*H,X=2*Math.PI*H/32,Z=q.Bodies.rectangle(K,te,F,X,{isStatic:!0,isSensor:!1,angle:B,render:{visible:!1},label:"trap rim",collisionFilter:{category:Ft,mask:je}});L.push(Z)}q.Composite.add(r,L)}function C(){const F=Xe,H=pt-F/2+1,L=[];for(let U=0;U<32;U++){const B=U/32*2*Math.PI,K=ne+Math.cos(B)*H,te=ne+Math.sin(B)*H,X=2*Math.PI*H/32,Z=q.Bodies.rectangle(K,te,F,X,{isStatic:!0,isSensor:!1,angle:B,render:{visible:!1},label:"trap surface",collisionFilter:{category:hn,mask:je}});L.push(Z)}q.Composite.add(r,L)}function _(){const E=[],F=lt;for(let H=0;H<8;H++){const L=.375+H/8*Math.PI*2,U=ne+Math.cos(L)*et,B=ne+Math.sin(L)*et,K=q.Bodies.circle(U,B,F,{isStatic:!0,restitution:_i,render:{visible:qe},collisionFilter:{category:Ot,mask:je}},32);E.push(K)}q.Composite.add(r,E)}function S(E,F,H,L,U,B){const K=Math.atan2(U-H,L-F),te=L-B*Math.cos(K-Math.PI/4),X=U-B*Math.sin(K-Math.PI/4),Z=L-B*Math.cos(K+Math.PI/4),ge=U-B*Math.sin(K+Math.PI/4);E.moveTo(L,U),E.lineTo(te,X),E.moveTo(L,U),E.lineTo(Z,ge)}function x(E){if(!a)return;const F=a.circleRadius,H=a.position;if(l==="shoot"&&s&&d){const L=q.Vector.normalise(s),U=p(H.x+L.x*F*1.25),B=p(H.y+L.y*F*1.25),K=p(H.x+L.x*F*1.5+s.x),te=p(H.y+L.y*F*1.5+s.y);E.beginPath(),E.strokeStyle=Vt.vector,E.lineWidth=i<480?1:2,E.moveTo(U,B),E.lineTo(K,te),E.stroke();const X=p(F*.75),Z=Math.PI/4,ge=Math.atan2(s.y,s.x),ye=K-X*Math.cos(ge-Z),ve=te-X*Math.sin(ge-Z),ke=K-X*Math.cos(ge+Z),_e=te-X*Math.sin(ge+Z);E.beginPath(),E.moveTo(K,te),E.lineTo(ye,ve),E.moveTo(K,te),E.lineTo(ke,_e),E.stroke(),E.closePath()}else if(l==="position"){E.beginPath(),E.strokeStyle=Vt.vector,E.stroke(),E.beginPath(),E.strokeStyle=Vt.vector,E.lineWidth=i<480?1:2;const L=p(H.x-F*2.5),U=p(H.x-F*1.25),B=p(H.x+F*2.5),K=p(H.x+F*1.25),te=p(H.y),X=p(F*.75);E.moveTo(L,te),E.lineTo(U,te),E.moveTo(B,te),E.lineTo(K,te),E.stroke(),E.closePath(),E.beginPath(),S(E,U,te,L,te,X),S(E,K,te,B,te,X),E.stroke(),E.closePath()}}function y(){const E=u.context;x(E)}function b(E){E.pairs.forEach(({bodyA:F,bodyB:H})=>{const L=F.label==="disc"?F:H.label==="disc"?H:null,U=F.label==="20"?F:H.label==="20"?H:null;if(L&&U&&!L.in20){const B=q.Vector.magnitude(q.Vector.sub(L.position,U.position)),te=L.circleRadius*.75,X=10,Z=B<te,ge=L.speed<X;Z&&ge&&(!At&&!e&&bi.play(),L.in20=!0,L.collisionFilter.mask=je|Ot|Ft|mn,L.restitution=.4)}})}function A(E){E.pairs.forEach(({bodyA:F,bodyB:H})=>{const L=F.label==="disc"?F:H.label==="disc"?H:null,U=F.label==="disc"&&F.id!==L.id?F:H.label==="disc"&&H.id!==L.id?H:null,B=F.label==="trap rim"?F:H.label==="trap rim"?H:null;if(L&&B)!At&&!e&&Si.play(),L.frictionAir=.3,L.collisionFilter.mask=je|Ot|Ft|hn;else if(L&&U){!At&&!e&&xi.play(),L.collided=!0,U.collided=!0;const K=L.player!==U.player;L.collidedOpp=K,U.collidedOpp=K}})}function M(E){if(!a)return;const F={x:E.x-a.position.x,y:E.y-a.position.y},H=q.Vector.normalise(F),L=q.Vector.magnitude(F),U=Math.min(L,o),B=U/o*n;c=q.Vector.mult(H,B),s=q.Vector.mult(H,U)}function P(E){const F=E.circleRadius,H=E.position,L=Math.sqrt(Math.pow(H.x-ne,2)+Math.pow(H.y-ne,2)),B=[{r:Xe,score:20},{r:et,score:15},{r:at,score:10},{r:Be,score:5}].find(K=>L+F<K.r);return(B==null?void 0:B.score)||0}function k(E){const F=E.circleRadius,H=E.position,L=Math.sqrt(Math.pow(H.x-ne,2)+Math.pow(H.y-ne,2)),U=et;if(L-F<U)return!0}function I(){if(t.every(F=>F.isSleeping)){t.forEach(B=>{B.score=P(B),B.intersect15=k(B)});const F=t.some(B=>B.player!==a.player),H=t.some(B=>B.collidedOpp),L=t.filter(B=>B.player===a.player).some(B=>B.intersect15);t.forEach(B=>{F?B.player===a.player?B.id===a.id?B.valid=H:B.valid=B.collided?H:!0:B.valid=!0:B.id===a.id?B.valid=B.collided?L:B.intersect15:B.valid=B.collided?L:!0,(!B.valid||!B.score)&&q.Composite.remove(r,B)});const U=t.find(B=>B.id===a.id).valid;if(t=t.filter(B=>B.score>0&&B.valid),f)h.emit("shotCompleteManual",{discs:t,valid:U});else{const B=t.map(K=>({id:K.id,player:K.player,score:K.score}));t.forEach(K=>{K.score===20&&q.Composite.remove(r,K)}),t=t.filter(K=>K.score!==20),h.emit("shotComplete",{discs:B,valid:U}),t.forEach(K=>{K.valid=void 0,K.collided=void 0,K.collidedOpp=void 0,K.intersect15=void 0,K.in20=void 0})}a=null,ee("idle")}}function D(){q.Matter.Composite.clear(r,!1),q.Events.off(v),q.Render.stop(u),u.canvas.remove(),u.context=null,u.textures={},q.Runner.stop(m)}function V(){t.forEach(E=>{q.Composite.remove(r,E)}),t=[],a=null,d=!1,s=void 0,c=void 0}function R(E={}){const F=E.player||"player1",H=E.state||"position",L=E.x?E.x:ne,U=E.y?E.y:F==="player1"?ne+Be:ne-Be,B=Qn,K=hi,te=mi,X=gi,Z=q.Bodies.circle(L,U,B,{density:K,restitution:te,frictionAir:X,render:{fillStyle:Vt[F]},label:"disc",collisionFilter:{category:je,mask:je|Ot|Ft},sleepThreshold:60,isSleeping:!0},64);Z.player=F,t.push(Z),a=Z,q.Events.on(Z,"sleepStart",I),q.Composite.add(r,Z),n=a.mass*yi,ee(H)}function N(E){if(!a||l!=="position")return;const F=2,H=[45-F,135+F],L=Math.max(-Be,Math.min(Be,E-ne)),U=a.player==="player1",B=U?-1:1,K=H[U?0:1]*B*-1,te=H[U?1:0]*B*-1,X=ne-Math.sqrt(Math.max(0,Math.pow(Be,2)-Math.pow(L,2)))*B,Z={x:ne+L,y:X},ye=q.Vector.angle({x:ne,y:ne},Z)*180/Math.PI;if(ye>K&&ye<te)q.Body.setPosition(a,Z);else if(ye<=K){const ve=K*Math.PI/180,ke=Math.cos(ve)*Be,_e=Math.sin(ve)*Be,me=ne+ke,Fe=ne+_e;q.Body.setPosition(a,{x:me,y:Fe})}else if(ye>=te){const ve=te*Math.PI/180,ke=Math.cos(ve)*Be,_e=Math.sin(ve)*Be,me=ne+ke,Fe=ne+_e;q.Body.setPosition(a,{x:me,y:Fe})}}function Y({degrees:E,speed:F}){const H=(E-90)*Math.PI/180,L=a.position.x+Math.cos(H),U=a.position.y+Math.sin(H);return{x:a.position.x+(L-a.position.x)*F,y:a.position.y+(U-a.position.y)*F}}function G({degrees:E,power:F,visible:H}){if(!a||l!=="shoot")return;he(H===void 0?!0:H);const U=Math.max(.01,F)*o,B=Y({degrees:E,speed:U});M(B)}function j(){!a||l!=="shoot"||(ee("play"),he(!1),q.Body.applyForce(a,a.position,c),!At&&!e&&wi.play())}function ee(E){l=E}function ie(E){e=E}function he(E){d=E}function ae(E){u&&(i=E,u.canvas.width=E,u.canvas.height=E,q.Render.setSize(u,E,E),q.Render,q.Render.lookAt(u,{min:{x:0,y:0},max:{x:fe*2,y:fe*2}}))}function z({element:E,width:F,tutorial:H}){f=!!H,v?D():ee("idle"),o=ne*.2,v=q.Engine.create({enableSleeping:!0}),r=v.world,v.gravity.y=0,m=q.Runner.create(),u=q.Render.create({element:E,engine:v,options:{width:fe*2,height:fe*2,wireframes:!1,pixelRatio:"auto",background:"transparent",showSleeping:!1,hasBounds:!0}}),g(),_(),w(),T(),C(),q.Runner.run(m,v),q.Render.run(u),ae(F),q.Events.on(u,"afterRender",y),q.Events.on(v,"collisionActive",b),q.Events.on(v,"collisionStart",A),h.emit("ready")}return{removeDiscs:V,addDisc:R,positionDisc:N,aimDisc:G,flickDisc:j,setState:ee,setIndicatorVisible:he,autoMute:ie,resize:ae,init:z,on:(E,F)=>h.on(E,F)}}function Nt(h){return Object.keys(h).reduce((v,r)=>h[r]===void 0?v:v+`${r}:${h[r]};`,"")}function Jt(h){return h?!0:void 0}Nt({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function gn(h){function v(r){return r(h),()=>{}}return{subscribe:v}}function jt(h){if(!Zn)return null;const v=document.querySelector(`[data-melt-id="${h}"]`);return Mt(v)?v:null}const Tt=h=>new Proxy(h,{get(v,r,m){return Reflect.get(v,r,m)},ownKeys(v){return Reflect.ownKeys(v).filter(r=>r!=="action")}}),_n=h=>typeof h=="function";tn("empty");function tn(h,v){const{stores:r,action:m,returned:u}=v??{},n=(()=>{if(r&&u)return zt(r,c=>{const s=u(c);if(_n(s)){const d=(...f)=>Tt({...s(...f),[`data-melt-${h}`]:"",action:m??$e});return d.action=m??$e,d}return Tt({...s,[`data-melt-${h}`]:"",action:m??$e})});{const c=u,s=c==null?void 0:c();if(_n(s)){const d=(...f)=>Tt({...s(...f),[`data-melt-${h}`]:"",action:m??$e});return d.action=m??$e,gn(d)}return gn(Tt({...s,[`data-melt-${h}`]:"",action:m??$e}))}})(),o=m??(()=>{});return o.subscribe=n.subscribe,o}function yn(h,v){const{stores:r,returned:m,action:u}=v,{subscribe:n}=zt(r,c=>m(c).map(s=>Tt({...s,[`data-melt-${h}`]:"",action:u??$e}))),o=u??(()=>{});return o.subscribe=n,o}function Pi(h){const v=n=>n?`${h}-${n}`:h,r=n=>`data-melt-${h}${n?`-${n}`:""}`,m=n=>`[data-melt-${h}${n?`-${n}`:""}]`;return{name:v,attribute:r,selector:m,getEl:n=>document.querySelector(m(n))}}const Zn=typeof document<"u";function Mt(h){return h instanceof HTMLElement}function Mi(...h){return(...v)=>{for(const r of h)typeof r=="function"&&r(...v)}}function $e(){}function ut(h,v,r,m){const u=Array.isArray(v)?v:[v];return u.forEach(n=>h.addEventListener(n,r,m)),()=>{u.forEach(n=>h.removeEventListener(n,r,m))}}function Ci(h,v,r,m){const u=Array.isArray(v)?v:[v];if(typeof r=="function"){const n=Ii(o=>r(o));return u.forEach(o=>h.addEventListener(o,n,m)),()=>{u.forEach(o=>h.removeEventListener(o,n,m))}}return()=>void 0}function ki(h){const v=h.currentTarget;if(!Mt(v))return null;const r=new CustomEvent(`m-${h.type}`,{detail:{originalEvent:h},cancelable:!0});return v.dispatchEvent(r),r}function Ii(h){return v=>{const r=ki(v);if(!(r!=null&&r.defaultPrevented))return h(v)}}const Ei=h=>{try{$n(h)}catch{return h}};function Kn(h,...v){const r={};for(const m of Object.keys(h))v.includes(m)||(r[m]=h[m]);return r}function it(h){return{...h,get:()=>ei(h)}}it.writable=function(h){const v=ot(h);let r=h;return{subscribe:v.subscribe,set(m){v.set(m),r=m},update(m){const u=m(r);v.set(u),r=u},get(){return r}}};it.derived=function(h,v){const r=new Map,m=()=>{const n=Array.isArray(h)?h.map(o=>o.get()):h.get();return v(n)};return{get:m,subscribe:n=>{const o=[];return(Array.isArray(h)?h:[h]).forEach(s=>{o.push(s.subscribe(()=>{n(m())}))}),n(m()),r.set(n,o),()=>{const s=r.get(n);if(s)for(const d of s)d();r.delete(n)}}}};const Di=(h,v)=>{const r=it(h),m=(n,o)=>{r.update(c=>{const s=n(c);let d=s;return v&&(d=v({curr:c,next:s})),o==null||o(d),d})};return{...r,update:m,set:n=>{m(()=>n)}}};let Ri="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Bi=(h=21)=>{let v="",r=h;for(;r--;)v+=Ri[Math.random()*64|0];return v};function Oi(){return Bi(10)}function Fi(h){return h.reduce((v,r)=>(v[r]=Oi(),v),{})}const Ve={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};function xn(h,v){let r;const m=zt(h,n=>{r==null||r(),r=v(n)}).subscribe($e),u=()=>{m(),r==null||r()};return Ei(u),u}function Vi(h){const v={};return Object.keys(h).forEach(r=>{const m=r,u=h[m];v[m]=it(ot(u))}),v}function qt(h,v,r,m){const u=(h-(isNaN(v)?0:v))%m;let n=Math.abs(u)*2>=m?h+Math.sign(u)*(m-Math.abs(u)):h-u;isNaN(v)?!isNaN(r)&&n>r&&(n=Math.floor(r/m)*m):n<v?n=v:!isNaN(r)&&n>r&&(n=v+Math.floor((r-v)/m)*m);const o=m.toString(),c=o.indexOf("."),s=c>=0?o.length-c:0;if(s>0){const d=Math.pow(10,s);n=Math.round(n*d)/d}return n}ft(void 0,h=>{function v(m){h(m),h(void 0)}return ut(document,"pointerup",v,{passive:!1,capture:!0})});ft(void 0,h=>{function v(m){m&&m.key===Ve.ESCAPE&&h(m),h(void 0)}return ut(document,"keydown",v,{passive:!1})});ft(!1),ft(!1),ft(void 0);const Li={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...Kn(Li,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const Hi={defaultValue:[],min:0,max:100,step:1,orientation:"horizontal",dir:"ltr",disabled:!1},{name:Lt}=Pi("slider"),Wi=h=>{const v={...Hi,...h},r=Vi(Kn(v,"value","onValueChange","defaultValue")),{min:m,max:u,step:n,orientation:o,dir:c,disabled:s}=r,d=v.value??ot(v.defaultValue),f=Di(d,v==null?void 0:v.onValueChange),e=it(ot(!1)),i=it(ot(0)),t=it(ot(null)),l=Fi(["root"]),a=(x,y)=>{f.update(b=>{if(!b)return[x];if(b[y]===x)return b;const A=[...b],M=A[y]>x?-1:1;function P(){A[y]=A[y+M],A[y+M]=x;const V=p();V&&(V[y+M].focus(),t.set({thumb:V[y+M],index:y+M}))}if(M===-1&&x<A[y-1])return P(),A;if(M===1&&x>A[y+1])return P(),A;const k=m.get(),I=u.get(),D=n.get();return A[y]=qt(x,k,I,D),A})},p=()=>{const x=jt(l.root);return x?Array.from(x.querySelectorAll('[data-melt-part="thumb"]')).filter(y=>Mt(y)):null},g=zt([m,u],([x,y])=>b=>(b-x)/(y-x)*100),w=it.derived([o,c],([x,y])=>x==="horizontal"?y==="rtl"?"rl":"lr":y==="rtl"?"tb":"bt"),T=tn(Lt(),{stores:[s,o,c],returned:([x,y,b])=>({dir:b,disabled:Jt(x),"data-disabled":Jt(x),"data-orientation":y,style:x?void 0:`touch-action: ${y==="horizontal"?"pan-y":"pan-x"}`,"data-melt-id":l.root})}),C=tn(Lt("range"),{stores:[f,w,g],returned:([x,y,b])=>{const A=x.length>1?b(Math.min(...x)??0):0,M=100-b(Math.max(...x)??0),P={position:"absolute"};switch(y){case"lr":{P.left=`${A}%`,P.right=`${M}%`;break}case"rl":{P.right=`${A}%`,P.left=`${M}%`;break}case"bt":{P.bottom=`${A}%`,P.top=`${M}%`;break}case"tb":{P.top=`${A}%`,P.bottom=`${M}%`;break}}return{style:Nt(P)}}}),_=yn(Lt("thumb"),{stores:[f,g,m,u,s,o,w],returned:([x,y,b,A,M,P,k])=>Array.from({length:x.length||1},(D,V)=>{i.get()<x.length&&i.update(j=>j+1);const N=x[V],Y=`${y(N)}%`,G={position:"absolute"};switch(k){case"lr":{G.left=Y,G.translate="-50% 0";break}case"rl":{G.right=Y,G.translate="50% 0";break}case"bt":{G.bottom=Y,G.translate="0 50%";break}case"tb":{G.top=Y,G.translate="0 -50%";break}}return{role:"slider","aria-valuemin":b,"aria-valuemax":A,"aria-valuenow":N,"aria-disabled":Jt(M),"aria-orientation":P,"data-melt-part":"thumb","data-value":N,style:Nt(G),tabindex:M?-1:0}}),action:x=>({destroy:Ci(x,"keydown",b=>{if(s.get())return;const A=b.currentTarget;if(!Mt(A))return;const M=p();if(!(M!=null&&M.length))return;const P=M.indexOf(A);if(i.set(P),![Ve.ARROW_LEFT,Ve.ARROW_RIGHT,Ve.ARROW_UP,Ve.ARROW_DOWN,Ve.HOME,Ve.END].includes(b.key))return;b.preventDefault();const k=m.get(),I=u.get(),D=n.get(),V=f.get(),R=o.get(),N=w.get(),Y=V[P];switch(b.key){case Ve.HOME:{a(k,P);break}case Ve.END:{a(I,P);break}case Ve.ARROW_LEFT:{if(R!=="horizontal")break;b.metaKey?a(N==="rl"?I:k,P):N==="rl"&&Y<I?a(Y+D,P):N==="lr"&&Y>k&&a(Y-D,P);break}case Ve.ARROW_RIGHT:{if(R!=="horizontal")break;b.metaKey?a(N==="rl"?k:I,P):N==="rl"&&Y>k?a(Y-D,P):N==="lr"&&Y<I&&a(Y+D,P);break}case Ve.ARROW_UP:{b.metaKey?a(N==="tb"?k:I,P):N==="tb"&&Y>k?a(Y-D,P):N!=="tb"&&Y<I&&a(Y+D,P);break}case Ve.ARROW_DOWN:{b.metaKey?a(N==="tb"?I:k,P):N==="tb"&&Y<I?a(Y+D,P):N!=="tb"&&Y>k&&a(Y-D,P);break}}})})}),S=yn(Lt("tick"),{stores:[f,m,u,n,w],returned:([x,y,b,A,M])=>{const P=b-y;let k=Math.ceil(P/A);return P%A==0&&k++,Array.from({length:k},(I,D)=>{const V=`${D*(A/(b-y))*100}%`,R=D===0,N=D===k-1,Y=R?0:N?-100:-50,G={position:"absolute"};switch(M){case"lr":{G.left=V,G.translate=`${Y}% 0`;break}case"rl":{G.right=V,G.translate=`${-Y}% 0`;break}case"bt":{G.bottom=V,G.translate=`0 ${-Y}%`;break}case"tb":{G.top=V,G.translate=`0 ${Y}%`;break}}const j=y+D*A;return{"data-bounded":(x.length===1?j<=x[0]:x[0]<=j&&j<=x[x.length-1])?!0:void 0,"data-value":j,style:Nt(G)}})}});return xn([T,m,u,s,o,w,n],([x,y,b,A,M,P,k])=>{if(!Zn||A)return;const I=(G,j,ee,ie)=>{const ae=(G-ee)/(ie-ee)*(b-y)+y;if(ae<y)a(y,j);else if(ae>b)a(b,j);else{const z=k,E=y,F=Math.floor((ae-E)/z),H=E+F*z+z/2,L=E+(F+1)*z+z/2,U=ae>=H&&ae<L?(F+1)*z+E:F*z+E;U<=b&&a(U,j)}},D=G=>{const j=p();if(!j)return;j.forEach(ae=>ae.blur());const ee=j.map(ae=>{if(M==="horizontal"){const{left:z,right:E}=ae.getBoundingClientRect();return Math.abs(G.clientX-(z+E)/2)}else{const{top:z,bottom:E}=ae.getBoundingClientRect();return Math.abs(G.clientY-(z+E)/2)}}),ie=j[ee.indexOf(Math.min(...ee))],he=j.indexOf(ie);return{thumb:ie,index:he}},V=G=>{if(!e.get())return;G.preventDefault(),G.stopPropagation();const j=jt(x["data-melt-id"]),ee=t.get();if(!j||!ee)return;ee.thumb.focus();const{left:ie,right:he,top:ae,bottom:z}=j.getBoundingClientRect();switch(P){case"lr":{I(G.clientX,ee.index,ie,he);break}case"rl":{I(G.clientX,ee.index,he,ie);break}case"bt":{I(G.clientY,ee.index,z,ae);break}case"tb":{I(G.clientY,ee.index,ae,z);break}}},R=G=>{if(G.button!==0)return;const j=jt(x["data-melt-id"]),ee=D(G);if(!ee||!j)return;const ie=G.target;!Mt(ie)||!j.contains(ie)||(G.preventDefault(),t.set(ee),ee.thumb.focus(),e.set(!0),V(G))},N=()=>{e.set(!1)},Y=Mi(ut(document,"pointerdown",R),ut(document,"pointerup",N),ut(document,"pointerleave",N),ut(document,"pointermove",V));return()=>{Y()}}),xn([n,m,u,f],function([y,b,A,M]){const P=I=>qt(I,b,A,y)===I,k=I=>qt(I,b,A,y);M.some(I=>!P(I))&&f.update(I=>I.map(k))}),{elements:{root:T,thumbs:_,range:C,ticks:S},states:{value:f},options:r}};function Ni(h,v){const r={};return v.forEach(m=>{r[m]={[`data-${h}-${m}`]:""}}),m=>r[m]}function Gi(){const h=Nn();return v=>{const{originalEvent:r}=v.detail,{cancelable:m}=v,u=r.type;h(u,{originalEvent:r,currentTarget:r.currentTarget},{cancelable:m})||v.preventDefault()}}function Ui(h){const v={};for(const r in h){const m=h[r];m!==void 0&&(v[r]=m)}return v}function Xi(h){return function(v,r){if(r===void 0)return;const m=h[v];m&&m.set(r)}}function zn(){return{NAME:"slider",PARTS:["root","input","range","thumb","tick"]}}function Yi(h){const{NAME:v,PARTS:r}=zn(),m=Ni(v,r),u={...Wi(Ui(h)),getAttrs:m};return ti(v,u),{...u,updateOption:Xi(u.options)}}function Jn(){const{NAME:h}=zn();return ni(h)}const Qi=h=>({builder:h&4,ticks:h&8,thumbs:h&16}),Sn=h=>({builder:h[2],ticks:h[3],thumbs:h[4]}),Zi=h=>({builder:h&4,ticks:h&8,thumbs:h&16}),wn=h=>({builder:h[2],ticks:h[3],thumbs:h[4]});function Ki(h){let v,r,m,u;const n=h[19].default,o=Gt(n,h,h[18],Sn);let c=[h[2],h[8]],s={};for(let d=0;d<c.length;d+=1)s=ze(s,c[d]);return{c(){v=re("span"),o&&o.c(),this.h()},l(d){v=oe(d,"SPAN",{});var f=se(v);o&&o.l(f),f.forEach(Q),this.h()},h(){dt(v,s)},m(d,f){de(d,v,f),o&&o.m(v,null),h[20](v),r=!0,m||(u=on(h[2].action(v)),m=!0)},p(d,f){o&&o.p&&(!r||f&262172)&&Ut(o,n,d,d[18],r?Yt(n,d[18],f,Qi):Xt(d[18]),Sn),dt(v,s=an(c,[f&4&&d[2],f&256&&d[8]]))},i(d){r||(ue(o,d),r=!0)},o(d){pe(o,d),r=!1},d(d){d&&Q(v),o&&o.d(d),h[20](null),m=!1,u()}}}function zi(h){let v;const r=h[19].default,m=Gt(r,h,h[18],wn);return{c(){m&&m.c()},l(u){m&&m.l(u)},m(u,n){m&&m.m(u,n),v=!0},p(u,n){m&&m.p&&(!v||n&262172)&&Ut(m,r,u,u[18],v?Yt(r,u[18],n,Zi):Xt(u[18]),wn)},i(u){v||(ue(m,u),v=!0)},o(u){pe(m,u),v=!1},d(u){m&&m.d(u)}}}function Ji(h){let v,r,m,u;const n=[zi,Ki],o=[];function c(s,d){return s[1]?0:1}return v=c(h),r=o[v]=n[v](h),{c(){r.c(),m=Oe()},l(s){r.l(s),m=Oe()},m(s,d){o[v].m(s,d),de(s,m,d),u=!0},p(s,[d]){let f=v;v=c(s),v===f?o[v].p(s,d):(Ze(),pe(o[f],1,1,()=>{o[f]=null}),Ke(),r=o[v],r?r.p(s,d):(r=o[v]=n[v](s),r.c()),ue(r,1),r.m(m.parentNode,m))},i(s){u||(ue(r),u=!0)},o(s){pe(r),u=!1},d(s){s&&Q(m),o[v].d(s)}}}function ji(h,v,r){let m;const u=["disabled","min","max","step","orientation","dir","value","onValueChange","asChild","el"];let n=ct(v,u),o,c,s,{$$slots:d={},$$scope:f}=v,{disabled:e=void 0}=v,{min:i=void 0}=v,{max:t=void 0}=v,{step:l=void 0}=v,{orientation:a=void 0}=v,{dir:p=void 0}=v,{value:g=void 0}=v,{onValueChange:w=void 0}=v,{asChild:T=!1}=v,{el:C=void 0}=v;const{elements:{root:_,ticks:S,thumbs:x},states:{value:y},updateOption:b,getAttrs:A}=Yi({disabled:e,dir:p,min:i,max:t,step:l,orientation:a,defaultValue:g,onValueChange:({next:k})=>(g!==k&&(w==null||w(k),r(9,g=k)),k)});Ht(h,_,k=>r(17,o=k)),Ht(h,S,k=>r(3,c=k)),Ht(h,x,k=>r(4,s=k));const M=A("root");function P(k){rt[k?"unshift":"push"](()=>{C=k,r(0,C)})}return h.$$set=k=>{v=ze(ze({},v),rn(k)),r(8,n=ct(v,u)),"disabled"in k&&r(10,e=k.disabled),"min"in k&&r(11,i=k.min),"max"in k&&r(12,t=k.max),"step"in k&&r(13,l=k.step),"orientation"in k&&r(14,a=k.orientation),"dir"in k&&r(15,p=k.dir),"value"in k&&r(9,g=k.value),"onValueChange"in k&&r(16,w=k.onValueChange),"asChild"in k&&r(1,T=k.asChild),"el"in k&&r(0,C=k.el),"$$scope"in k&&r(18,f=k.$$scope)},h.$$.update=()=>{h.$$.dirty&512&&g!==void 0&&y.set(g),h.$$.dirty&1024&&b("disabled",e),h.$$.dirty&2048&&b("min",i),h.$$.dirty&4096&&b("max",t),h.$$.dirty&8192&&b("step",l),h.$$.dirty&16384&&b("orientation",a),h.$$.dirty&32768&&b("dir",p),h.$$.dirty&131072&&r(2,m=o),h.$$.dirty&4&&Object.assign(m,M)},[C,T,m,c,s,_,S,x,n,g,e,i,t,l,a,p,w,o,f,d,P]}class qi extends mt{constructor(v){super(),ht(this,v,ji,Ji,vt,{disabled:10,min:11,max:12,step:13,orientation:14,dir:15,value:9,onValueChange:16,asChild:1,el:0})}}const $i=h=>({builder:h&4}),bn=h=>({builder:h[2]});function er(h){let v,r,m,u=[h[2],h[4]],n={};for(let o=0;o<u.length;o+=1)n=ze(n,u[o]);return{c(){v=re("span"),this.h()},l(o){v=oe(o,"SPAN",{}),se(v).forEach(Q),this.h()},h(){dt(v,n)},m(o,c){de(o,v,c),h[8](v),r||(m=on(h[2].action(v)),r=!0)},p(o,c){dt(v,n=an(u,[c&4&&o[2],c&16&&o[4]]))},i:Qe,o:Qe,d(o){o&&Q(v),h[8](null),r=!1,m()}}}function tr(h){let v;const r=h[7].default,m=Gt(r,h,h[6],bn);return{c(){m&&m.c()},l(u){m&&m.l(u)},m(u,n){m&&m.m(u,n),v=!0},p(u,n){m&&m.p&&(!v||n&68)&&Ut(m,r,u,u[6],v?Yt(r,u[6],n,$i):Xt(u[6]),bn)},i(u){v||(ue(m,u),v=!0)},o(u){pe(m,u),v=!1},d(u){m&&m.d(u)}}}function nr(h){let v,r,m,u;const n=[tr,er],o=[];function c(s,d){return s[1]?0:1}return v=c(h),r=o[v]=n[v](h),{c(){r.c(),m=Oe()},l(s){r.l(s),m=Oe()},m(s,d){o[v].m(s,d),de(s,m,d),u=!0},p(s,[d]){let f=v;v=c(s),v===f?o[v].p(s,d):(Ze(),pe(o[f],1,1,()=>{o[f]=null}),Ke(),r=o[v],r?r.p(s,d):(r=o[v]=n[v](s),r.c()),ue(r,1),r.m(m.parentNode,m))},i(s){u||(ue(r),u=!0)},o(s){pe(r),u=!1},d(s){s&&Q(m),o[v].d(s)}}}function ir(h,v,r){let m;const u=["asChild","el"];let n=ct(v,u),o,{$$slots:c={},$$scope:s}=v,{asChild:d=!1}=v,{el:f=void 0}=v;const{elements:{range:e},getAttrs:i}=Jn();Ht(h,e,a=>r(5,o=a));const t=i("range");function l(a){rt[a?"unshift":"push"](()=>{f=a,r(0,f)})}return h.$$set=a=>{v=ze(ze({},v),rn(a)),r(4,n=ct(v,u)),"asChild"in a&&r(1,d=a.asChild),"el"in a&&r(0,f=a.el),"$$scope"in a&&r(6,s=a.$$scope)},h.$$.update=()=>{h.$$.dirty&32&&r(2,m=o),h.$$.dirty&4&&Object.assign(m,t)},[f,d,m,e,n,o,s,c,l]}class rr extends mt{constructor(v){super(),ht(this,v,ir,nr,vt,{asChild:1,el:0})}}const or=h=>({builder:h&4}),An=h=>({builder:h[2]});function ar(h){let v,r,m,u=[h[2],h[4]],n={};for(let o=0;o<u.length;o+=1)n=ze(n,u[o]);return{c(){v=re("span"),this.h()},l(o){v=oe(o,"SPAN",{}),se(v).forEach(Q),this.h()},h(){dt(v,n)},m(o,c){de(o,v,c),h[8](v),r||(m=[on(h[2].action(v)),Pt(v,"m-keydown",h[3])],r=!0)},p(o,c){dt(v,n=an(u,[c&4&&o[2],c&16&&o[4]]))},i:Qe,o:Qe,d(o){o&&Q(v),h[8](null),r=!1,Gn(m)}}}function sr(h){let v;const r=h[7].default,m=Gt(r,h,h[6],An);return{c(){m&&m.c()},l(u){m&&m.l(u)},m(u,n){m&&m.m(u,n),v=!0},p(u,n){m&&m.p&&(!v||n&68)&&Ut(m,r,u,u[6],v?Yt(r,u[6],n,or):Xt(u[6]),An)},i(u){v||(ue(m,u),v=!0)},o(u){pe(m,u),v=!1},d(u){m&&m.d(u)}}}function lr(h){let v,r,m,u;const n=[sr,ar],o=[];function c(s,d){return s[1]?0:1}return v=c(h),r=o[v]=n[v](h),{c(){r.c(),m=Oe()},l(s){r.l(s),m=Oe()},m(s,d){o[v].m(s,d),de(s,m,d),u=!0},p(s,[d]){let f=v;v=c(s),v===f?o[v].p(s,d):(Ze(),pe(o[f],1,1,()=>{o[f]=null}),Ke(),r=o[v],r?r.p(s,d):(r=o[v]=n[v](s),r.c()),ue(r,1),r.m(m.parentNode,m))},i(s){u||(ue(r),u=!0)},o(s){pe(r),u=!1},d(s){s&&Q(m),o[v].d(s)}}}function ur(h,v,r){let m;const u=["asChild","el","thumb"];let n=ct(v,u),{$$slots:o={},$$scope:c}=v,{asChild:s=!1}=v,{el:d=void 0}=v,{thumb:f}=v;const{getAttrs:e}=Jn(),i=Gi(),t=e("thumb");function l(a){rt[a?"unshift":"push"](()=>{d=a,r(0,d)})}return h.$$set=a=>{v=ze(ze({},v),rn(a)),r(4,n=ct(v,u)),"asChild"in a&&r(1,s=a.asChild),"el"in a&&r(0,d=a.el),"thumb"in a&&r(5,f=a.thumb),"$$scope"in a&&r(6,c=a.$$scope)},h.$$.update=()=>{h.$$.dirty&32&&r(2,m=f),h.$$.dirty&4&&Object.assign(m,t)},[d,s,m,i,n,f,c,o,l]}class fr extends mt{constructor(v){super(),ht(this,v,ur,lr,vt,{asChild:1,el:0,thumb:5})}}function Tn(h,v,r){const m=h.slice();return m[10]=v[r],m}function Pn(h){let v,r;return v=new fr({props:{thumb:h[10],class:h[6]}}),{c(){gt(v.$$.fragment)},l(m){_t(v.$$.fragment,m)},m(m,u){yt(v,m,u),r=!0},p(m,u){const n={};u&512&&(n.thumb=m[10]),u&64&&(n.class=m[6]),v.$set(n)},i(m){r||(ue(v.$$.fragment,m),r=!0)},o(m){pe(v.$$.fragment,m),r=!1},d(m){xt(v,m)}}}function cr(h){let v,r,m,u,n;r=new rr({});let o=Ue(h[9]),c=[];for(let d=0;d<o.length;d+=1)c[d]=Pn(Tn(h,o,d));const s=d=>pe(c[d],1,1,()=>{c[d]=null});return{c(){v=re("span"),gt(r.$$.fragment),m=Pe();for(let d=0;d<c.length;d+=1)c[d].c();u=Oe(),this.h()},l(d){v=oe(d,"SPAN",{class:!0});var f=se(v);_t(r.$$.fragment,f),f.forEach(Q),m=Me(d);for(let e=0;e<c.length;e+=1)c[e].l(d);u=Oe(),this.h()},h(){ce(v,"class","bg svelte-q9ia7x")},m(d,f){de(d,v,f),yt(r,v,null),de(d,m,f);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(d,f);de(d,u,f),n=!0},p(d,f){if(f&576){o=Ue(d[9]);let e;for(e=0;e<o.length;e+=1){const i=Tn(d,o,e);c[e]?(c[e].p(i,f),ue(c[e],1)):(c[e]=Pn(i),c[e].c(),ue(c[e],1),c[e].m(u.parentNode,u))}for(Ze(),e=o.length;e<c.length;e+=1)s(e);Ke()}},i(d){if(!n){ue(r.$$.fragment,d);for(let f=0;f<o.length;f+=1)ue(c[f]);n=!0}},o(d){pe(r.$$.fragment,d),c=c.filter(Boolean);for(let f=0;f<c.length;f+=1)pe(c[f]);n=!1},d(d){d&&(Q(v),Q(m),Q(u)),xt(r),wt(c,d)}}}function dr(h){let v,r,m,u,n,o,c;function s(f){h[8](f)}let d={min:h[2],max:h[3],step:h[5],disabled:h[4],$$slots:{default:[cr,({thumbs:f})=>({9:f}),({thumbs:f})=>f?512:0]},$$scope:{ctx:h}};return h[0]!==void 0&&(d.value=h[0]),n=new qi({props:d}),rt.push(()=>Zt(n,"value",s)),{c(){v=re("div"),r=re("p"),m=Le(h[1]),u=Pe(),gt(n.$$.fragment),this.h()},l(f){v=oe(f,"DIV",{class:!0});var e=se(v);r=oe(e,"P",{class:!0});var i=se(r);m=He(i,h[1]),i.forEach(Q),u=Me(e),_t(n.$$.fragment,e),e.forEach(Q),this.h()},h(){ce(r,"class","label svelte-q9ia7x"),ce(v,"class","c svelte-q9ia7x")},m(f,e){de(f,v,e),$(v,r),$(r,m),$(v,u),yt(n,v,null),c=!0},p(f,[e]){(!c||e&2)&&tt(m,f[1]);const i={};e&4&&(i.min=f[2]),e&8&&(i.max=f[3]),e&32&&(i.step=f[5]),e&16&&(i.disabled=f[4]),e&8768&&(i.$$scope={dirty:e,ctx:f}),!o&&e&1&&(o=!0,i.value=f[0],Qt(()=>o=!1)),n.$set(i)},i(f){c||(ue(n.$$.fragment,f),c=!0)},o(f){pe(n.$$.fragment,f),c=!1},d(f){f&&Q(v),xt(n)}}}function pr(h,v,r){let m,{label:u}=v,{value:n}=v,{min:o}=v,{max:c}=v,{disabled:s}=v,{step:d}=v,{animate:f}=v;function e(i){n=i,r(0,n)}return h.$$set=i=>{"label"in i&&r(1,u=i.label),"value"in i&&r(0,n=i.value),"min"in i&&r(2,o=i.min),"max"in i&&r(3,c=i.max),"disabled"in i&&r(4,s=i.disabled),"step"in i&&r(5,d=i.step),"animate"in i&&r(7,f=i.animate)},h.$$.update=()=>{h.$$.dirty&128&&r(6,m=f?"animate":"")},[n,u,o,c,s,d,m,f,e]}class jn extends mt{constructor(v){super(),ht(this,v,pr,dr,vt,{label:1,value:0,min:2,max:3,disabled:4,step:5,animate:7})}}function vr(h){let v,r,m,u;return{c(){v=re("button"),r=Le("Shoot"),this.h()},l(n){v=oe(n,"BUTTON",{});var o=se(v);r=He(o,"Shoot"),o.forEach(Q),this.h()},h(){v.disabled=h[0]},m(n,o){de(n,v,o),$(v,r),m||(u=[Pt(v,"pointerdown",h[1]),Pt(v,"pointerup",h[2]),Pt(v,"pointerleave",h[2])],m=!0)},p(n,[o]){o&1&&(v.disabled=n[0])},i:Qe,o:Qe,d(n){n&&Q(v),m=!1,Gn(u)}}}function mr(h,v,r){let{value:m}=v,{disabled:u}=v;const n=Nn();let o,c;function s(){let f=-1;c=!0,o=setInterval(()=>{m>=1?f=-1:m<=0&&(f=1),r(3,m+=.01*f),r(3,m=+m.toFixed(2))},17)}function d(){c&&(clearInterval(o),n("release",m),r(3,m=0),c=!1)}return h.$$set=f=>{"value"in f&&r(3,m=f.value),"disabled"in f&&r(0,u=f.disabled)},[u,s,d,m]}class hr extends mt{constructor(v){super(),ht(this,v,mr,vr,vt,{value:3,disabled:0})}}const gr=[{state:"shoot",player:"player2",power:.32,degrees:176}],_r=[{x:411.7843742508332,y:436.43306454273926,player:"player2",score:15},{x:341.53999999999996,y:688.5930841382143,state:"shoot",player:"player1",power:.38,degrees:15}],yr=[{x:411.7843742508332,y:436.43306454273926,player:"player2",score:15},{state:"position",player:"player1"}],xr=[{x:150,y:300,player:"player2",score:5},{state:"shoot",player:"player1",power:.21,degrees:1}],Sr=[{state:"shoot",player:"player1",random:!0,power:.3,degrees:0}],wr=[{x:480,y:250,player:"player1",score:10},{state:"position",player:"player1"}],br=[{x:350,y:342,player:"player1",score:15,valid:!0},{x:545,y:311,player:"player1",score:10,valid:!0},{x:622,y:310,player:"player2",score:5,valid:!0},{x:150,y:305,player:"player2",score:5,valid:!0},{x:233,y:466,player:"player2",score:10,valid:!0,state:"idle"}],Ar=[{x:420,y:460,player:"player2"},{player:"player1",state:"position"}],Tr={fifteen:gr,opponent:_r,opponenttry:yr,invalid:xr,open:Sr,opentry:wr,score:br,ricochettry:Ar};function Mn(h,v,r){const m=h.slice();return m[51]=v[r],m}function Cn(h,v,r){const m=h.slice();return m[54]=v[r],m}function kn(h,v,r){const m=h.slice();m[57]=v[r];const u=m[21][m[57]];m[58]=u;const n=(m[0]-en[`${m[57]}R`]/fe*m[0])/2;m[59]=n;const o=m[57]==="twenty"?Xe/fe*m[0]:0;return m[60]=o,m}function In(h,v,r){const m=h.slice();m[57]=v[r],m[68]=r;const u=en[`${m[57]}R`];m[63]=u;const n=en[`${m[20][m[68]+1]}R`];m[64]=n;const o=m[63]/fe*m[0];m[65]=o;const c=m[64]/fe*m[0];return m[66]=c,m}function En(h){let v;return{c(){v=re("div"),this.h()},l(r){v=oe(r,"DIV",{class:!0,style:!0}),se(v).forEach(Q),this.h()},h(){ce(v,"class",ri(h[57])+" svelte-187pgu4"),le(v,"--w",h[65]+"px"),le(v,"--b",(h[65]-h[66])/2+"px")},m(r,m){de(r,v,m)},p(r,m){m[0]&1&&le(v,"--w",r[65]+"px"),m[0]&1&&le(v,"--b",(r[65]-r[66])/2+"px")},d(r){r&&Q(v)}}}function Dn(h){let v,r=h[58]+"",m;return{c(){v=re("span"),m=Le(r),this.h()},l(u){v=oe(u,"SPAN",{class:!0,style:!0});var n=se(v);m=He(n,r),n.forEach(Q),this.h()},h(){ce(v,"class","text text-"+h[57]+" svelte-187pgu4"),le(v,"--y",h[59]+h[60]+"px")},m(u,n){de(u,v,n),$(v,m)},p(u,n){n[0]&1&&le(v,"--y",u[59]+u[60]+"px")},d(u){u&&Q(v)}}}function Rn(h){let v;return{c(){v=re("div"),this.h()},l(r){v=oe(r,"DIV",{class:!0,style:!0}),se(v).forEach(Q),this.h()},h(){ce(v,"class","quadrant-line svelte-187pgu4"),le(v,"--w",(Be-at)/fe*h[0]/2+"px"),le(v,"--x",at/fe*h[0]/2+"px"),le(v,"--angle",h[54]+"deg")},m(r,m){de(r,v,m)},p(r,m){m[0]&1&&le(v,"--w",(Be-at)/fe*r[0]/2+"px"),m[0]&1&&le(v,"--x",at/fe*r[0]/2+"px")},d(r){r&&Q(v)}}}function Bn(h){let v;return{c(){v=re("div"),this.h()},l(r){v=oe(r,"DIV",{class:!0,style:!0}),se(v).forEach(Q),this.h()},h(){ce(v,"class","peg svelte-187pgu4"),le(v,"--w",lt/fe*h[0]+"px"),le(v,"--x",(et-lt)/fe*h[0]/2+"px"),le(v,"--angle",h[51]-1+"deg")},m(r,m){de(r,v,m)},p(r,m){m[0]&1&&le(v,"--w",lt/fe*r[0]+"px"),m[0]&1&&le(v,"--x",(et-lt)/fe*r[0]/2+"px")},d(r){r&&Q(v)}}}function On(h){let v,r,m,u,n;return{c(){v=re("p"),r=re("strong"),m=Le(h[16]),this.h()},l(o){v=oe(o,"P",{class:!0});var c=se(v);r=oe(c,"STRONG",{});var s=se(r);m=He(s,h[16]),s.forEach(Q),c.forEach(Q),this.h()},h(){ce(v,"class","text-outline svelte-187pgu4")},m(o,c){de(o,v,c),$(v,r),$(r,m),n=!0},p(o,c){(!n||c[0]&65536)&&tt(m,o[16])},i(o){n||(o&&oi(()=>{n&&(u||(u=pn(v,vn,{},!0)),u.run(1))}),n=!0)},o(o){o&&(u||(u=pn(v,vn,{},!1)),u.run(0)),n=!1},d(o){o&&Q(v),o&&u&&u.end()}}}function Fn(h){let v,r,m,u;const n=[Mr,Pr],o=[];function c(s,d){return s[10]==="shoot"?0:1}return v=c(h),r=o[v]=n[v](h),{c(){r.c(),m=Oe()},l(s){r.l(s),m=Oe()},m(s,d){o[v].m(s,d),de(s,m,d),u=!0},p(s,d){let f=v;v=c(s),v===f?o[v].p(s,d):(Ze(),pe(o[f],1,1,()=>{o[f]=null}),Ke(),r=o[v],r?r.p(s,d):(r=o[v]=n[v](s),r.c()),ue(r,1),r.m(m.parentNode,m))},i(s){u||(ue(r),u=!0)},o(s){pe(r),u=!1},d(s){s&&Q(m),o[v].d(s)}}}function Pr(h){let v,r="Place Disc",m,u;return{c(){v=re("button"),v.textContent=r},l(n){v=oe(n,"BUTTON",{"data-svelte-h":!0}),Wt(v)!=="svelte-18imge0"&&(v.textContent=r)},m(n,o){de(n,v,o),m||(u=Pt(v,"click",h[24]),m=!0)},p:Qe,i:Qe,o:Qe,d(n){n&&Q(v),m=!1,u()}}}function Mr(h){let v,r,m;function u(o){h[28](o)}let n={disabled:h[11]};return h[5]!==void 0&&(n.value=h[5]),v=new hr({props:n}),rt.push(()=>Zt(v,"value",u)),v.$on("release",h[23]),{c(){gt(v.$$.fragment)},l(o){_t(v.$$.fragment,o)},m(o,c){yt(v,o,c),m=!0},p(o,c){const s={};c[0]&2048&&(s.disabled=o[11]),!r&&c[0]&32&&(r=!0,s.value=o[5],Qt(()=>r=!1)),v.$set(s)},i(o){m||(ue(v.$$.fragment,o),m=!0)},o(o){pe(v.$$.fragment,o),m=!1},d(o){xt(v,o)}}}function Vn(h){let v,r,m,u;const n=[kr,Cr],o=[];function c(s,d){return s[10]==="position"?0:s[10]==="shoot"?1:-1}return~(v=c(h))&&(r=o[v]=n[v](h)),{c(){r&&r.c(),m=Oe()},l(s){r&&r.l(s),m=Oe()},m(s,d){~v&&o[v].m(s,d),de(s,m,d),u=!0},p(s,d){let f=v;v=c(s),v===f?~v&&o[v].p(s,d):(r&&(Ze(),pe(o[f],1,1,()=>{o[f]=null}),Ke()),~v?(r=o[v],r?r.p(s,d):(r=o[v]=n[v](s),r.c()),ue(r,1),r.m(m.parentNode,m)):r=null)},i(s){u||(ue(r),u=!0)},o(s){pe(r),u=!1},d(s){s&&Q(m),~v&&o[v].d(s)}}}function Cr(h){let v,r,m;function u(o){h[30](o)}let n={label:"aim",min:h[22].shoot.min,max:h[22].shoot.max,step:h[22].shoot.step,disabled:h[11]};return h[4]!==void 0&&(n.value=h[4]),v=new jn({props:n}),rt.push(()=>Zt(v,"value",u)),{c(){gt(v.$$.fragment)},l(o){_t(v.$$.fragment,o)},m(o,c){yt(v,o,c),m=!0},p(o,c){const s={};c[0]&2048&&(s.disabled=o[11]),!r&&c[0]&16&&(r=!0,s.value=o[4],Qt(()=>r=!1)),v.$set(s)},i(o){m||(ue(v.$$.fragment,o),m=!0)},o(o){pe(v.$$.fragment,o),m=!1},d(o){xt(v,o)}}}function kr(h){let v,r,m;function u(o){h[29](o)}let n={label:"position",min:h[22].position.min,max:h[22].position.max,step:h[22].position.step,disabled:h[11]};return h[3]!==void 0&&(n.value=h[3]),v=new jn({props:n}),rt.push(()=>Zt(v,"value",u)),{c(){gt(v.$$.fragment)},l(o){_t(v.$$.fragment,o)},m(o,c){yt(v,o,c),m=!0},p(o,c){const s={};c[0]&2048&&(s.disabled=o[11]),!r&&c[0]&8&&(r=!0,s.value=o[3],Qt(()=>r=!1)),v.$set(s)},i(o){m||(ue(v.$$.fragment,o),m=!0)},o(o){pe(v.$$.fragment,o),m=!1},d(o){xt(v,o)}}}function Ln(h){let v,r,m=h[3][0]+"",u,n,o,c,s=h[4][0]+"",d;return{c(){v=re("p"),r=Le("sliderPosition: "),u=Le(m),n=Pe(),o=re("p"),c=Le("sliderShoot: "),d=Le(s),this.h()},l(f){v=oe(f,"P",{class:!0});var e=se(v);r=He(e,"sliderPosition: "),u=He(e,m),e.forEach(Q),n=Me(f),o=oe(f,"P",{class:!0});var i=se(o);c=He(i,"sliderShoot: "),d=He(i,s),i.forEach(Q),this.h()},h(){ce(v,"class","svelte-187pgu4"),ce(o,"class","svelte-187pgu4")},m(f,e){de(f,v,e),$(v,r),$(v,u),de(f,n,e),de(f,o,e),$(o,c),$(o,d)},p(f,e){e[0]&8&&m!==(m=f[3][0]+"")&&tt(u,m),e[0]&16&&s!==(s=f[4][0]+"")&&tt(d,s)},d(f){f&&(Q(v),Q(n),Q(o))}}}function Ir(h){let v,r,m,u="20s",n,o,c=h[6].player1+"",s,d,f,e,i="POINTS",t,l,a,p=h[7].player1+"",g,w,T,C=h[7].player2+"",_,S,x,y,b="20s",A,M,P=h[6].player2+"",k,I=`${h[0]}px`,D,V,R,N,Y,G,j,ee,ie,he,ae,z,E=`${h[0]}px`,F=`${h[0]}px`,H,L,U,B,K,te,X,Z,ge,ye,ve=`${h[0]}px`,ke,_e,me,Fe=Ue(h[20].slice(0,3)),we=[];for(let O=0;O<Fe.length;O+=1)we[O]=En(In(h,Fe,O));let Ye=Ue(h[20]),xe=[];for(let O=0;O<Ye.length;O+=1)xe[O]=Dn(kn(h,Ye,O));let Je=Ue(h[18]),Ce=[];for(let O=0;O<Je.length;O+=1)Ce[O]=Rn(Cn(h,Je,O));let Ge=Ue(h[19]),Se=[];for(let O=0;O<Ge.length;O+=1)Se[O]=Bn(Mn(h,Ge,O));let be=h[16]&&On(h),Ae=!h[12]&&Fn(h),Te=!h[12]&&Vn(h),Ie=h[1]&&Ln(h);return{c(){v=re("div"),r=re("p"),m=re("span"),m.textContent=u,n=Pe(),o=re("strong"),s=Le(c),d=Pe(),f=re("p"),e=re("span"),e.textContent=i,t=Pe(),l=re("strong"),a=re("span"),g=Le(p),w=Le(` -
			`),T=re("span"),_=Le(C),S=Pe(),x=re("p"),y=re("span"),y.textContent=b,A=Pe(),M=re("strong"),k=Le(P),D=Pe(),V=re("div"),R=re("div"),N=re("div"),Y=Pe(),G=re("div"),j=Pe();for(let O=0;O<we.length;O+=1)we[O].c();ee=Pe(),ie=re("div"),he=Pe();for(let O=0;O<xe.length;O+=1)xe[O].c();ae=Pe();for(let O=0;O<Ce.length;O+=1)Ce[O].c();z=Pe();for(let O=0;O<Se.length;O+=1)Se[O].c();H=Pe(),L=re("div"),U=Pe(),B=re("div"),be&&be.c(),te=Pe(),X=re("div"),Z=re("div"),Ae&&Ae.c(),ge=Pe(),ye=re("div"),Te&&Te.c(),ke=Pe(),Ie&&Ie.c(),_e=Oe(),this.h()},l(O){v=oe(O,"DIV",{class:!0});var J=se(v);r=oe(J,"P",{class:!0});var W=se(r);m=oe(W,"SPAN",{class:!0,"data-svelte-h":!0}),Wt(m)!=="svelte-26pqx6"&&(m.textContent=u),n=Me(W),o=oe(W,"STRONG",{});var De=se(o);s=He(De,c),De.forEach(Q),W.forEach(Q),d=Me(J),f=oe(J,"P",{class:!0});var It=se(f);e=oe(It,"SPAN",{class:!0,"data-svelte-h":!0}),Wt(e)!=="svelte-8p7j2g"&&(e.textContent=i),t=Me(It),l=oe(It,"STRONG",{});var Et=se(l);a=oe(Et,"SPAN",{class:!0});var sn=se(a);g=He(sn,p),sn.forEach(Q),w=He(Et,` -
			`),T=oe(Et,"SPAN",{class:!0});var ln=se(T);_=He(ln,C),ln.forEach(Q),Et.forEach(Q),It.forEach(Q),S=Me(J),x=oe(J,"P",{class:!0});var Dt=se(x);y=oe(Dt,"SPAN",{class:!0,"data-svelte-h":!0}),Wt(y)!=="svelte-26pqx6"&&(y.textContent=b),A=Me(Dt),M=oe(Dt,"STRONG",{});var un=se(M);k=He(un,P),un.forEach(Q),Dt.forEach(Q),J.forEach(Q),D=Me(O),V=oe(O,"DIV",{class:!0});var st=se(V);R=oe(st,"DIV",{class:!0});var Re=se(R);N=oe(Re,"DIV",{class:!0,style:!0}),se(N).forEach(Q),Y=Me(Re),G=oe(Re,"DIV",{class:!0,style:!0}),se(G).forEach(Q),j=Me(Re);for(let Ee=0;Ee<we.length;Ee+=1)we[Ee].l(Re);ee=Me(Re),ie=oe(Re,"DIV",{class:!0,style:!0}),se(ie).forEach(Q),he=Me(Re);for(let Ee=0;Ee<xe.length;Ee+=1)xe[Ee].l(Re);ae=Me(Re);for(let Ee=0;Ee<Ce.length;Ee+=1)Ce[Ee].l(Re);z=Me(Re);for(let Ee=0;Ee<Se.length;Ee+=1)Se[Ee].l(Re);Re.forEach(Q),H=Me(st),L=oe(st,"DIV",{class:!0}),se(L).forEach(Q),U=Me(st),B=oe(st,"DIV",{class:!0});var fn=se(B);be&&be.l(fn),fn.forEach(Q),st.forEach(Q),te=Me(O),X=oe(O,"DIV",{class:!0});var Rt=se(X);Z=oe(Rt,"DIV",{class:!0});var cn=se(Z);Ae&&Ae.l(cn),cn.forEach(Q),ge=Me(Rt),ye=oe(Rt,"DIV",{class:!0});var dn=se(ye);Te&&Te.l(dn),dn.forEach(Q),Rt.forEach(Q),ke=Me(O),Ie&&Ie.l(O),_e=Oe(),this.h()},h(){ce(m,"class","label svelte-187pgu4"),ce(r,"class","holder you svelte-187pgu4"),We(r,"animate",h[8].player1),We(r,"visible",h[15]),ce(e,"class","label svelte-187pgu4"),ce(a,"class","you"),ce(T,"class","opp"),ce(f,"class","points svelte-187pgu4"),We(f,"visible",h[14]),ce(y,"class","label svelte-187pgu4"),ce(x,"class","holder opp svelte-187pgu4"),We(x,"animate",h[8].player2),We(x,"visible",h[15]),ce(v,"class","score svelte-187pgu4"),le(v,"width",I),ce(N,"class","base svelte-187pgu4"),le(N,"--w",(Ct-nt)/fe*h[0]+"px"),le(N,"--b",nt/fe*h[0]+"px"),ce(G,"class","surface svelte-187pgu4"),le(G,"--w",pt/fe*h[0]+"px"),ce(ie,"class","twenty svelte-187pgu4"),le(ie,"--w",Xe/fe*h[0]+"px"),ce(R,"class","bg svelte-187pgu4"),le(R,"width",E),le(R,"height",F),ce(L,"class","fg svelte-187pgu4"),ce(B,"class","message svelte-187pgu4"),ce(V,"class",K="c "+h[17]+" svelte-187pgu4"),ce(Z,"class","top svelte-187pgu4"),ce(ye,"class","bottom svelte-187pgu4"),ce(X,"class","ui svelte-187pgu4"),We(X,"visible",h[13]||!h[2]),le(X,"width",ve)},m(O,J){de(O,v,J),$(v,r),$(r,m),$(r,n),$(r,o),$(o,s),$(v,d),$(v,f),$(f,e),$(f,t),$(f,l),$(l,a),$(a,g),$(l,w),$(l,T),$(T,_),$(v,S),$(v,x),$(x,y),$(x,A),$(x,M),$(M,k),de(O,D,J),de(O,V,J),$(V,R),$(R,N),$(R,Y),$(R,G),$(R,j);for(let W=0;W<we.length;W+=1)we[W]&&we[W].m(R,null);$(R,ee),$(R,ie),$(R,he);for(let W=0;W<xe.length;W+=1)xe[W]&&xe[W].m(R,null);$(R,ae);for(let W=0;W<Ce.length;W+=1)Ce[W]&&Ce[W].m(R,null);$(R,z);for(let W=0;W<Se.length;W+=1)Se[W]&&Se[W].m(R,null);$(V,H),$(V,L),h[27](L),$(V,U),$(V,B),be&&be.m(B,null),de(O,te,J),de(O,X,J),$(X,Z),Ae&&Ae.m(Z,null),$(X,ge),$(X,ye),Te&&Te.m(ye,null),de(O,ke,J),Ie&&Ie.m(O,J),de(O,_e,J),me=!0},p(O,J){if((!me||J[0]&64)&&c!==(c=O[6].player1+"")&&tt(s,c),(!me||J[0]&256)&&We(r,"animate",O[8].player1),(!me||J[0]&32768)&&We(r,"visible",O[15]),(!me||J[0]&128)&&p!==(p=O[7].player1+"")&&tt(g,p),(!me||J[0]&128)&&C!==(C=O[7].player2+"")&&tt(_,C),(!me||J[0]&16384)&&We(f,"visible",O[14]),(!me||J[0]&64)&&P!==(P=O[6].player2+"")&&tt(k,P),(!me||J[0]&256)&&We(x,"animate",O[8].player2),(!me||J[0]&32768)&&We(x,"visible",O[15]),J[0]&1&&I!==(I=`${O[0]}px`)&&le(v,"width",I),(!me||J[0]&1)&&le(N,"--w",(Ct-nt)/fe*O[0]+"px"),(!me||J[0]&1)&&le(N,"--b",nt/fe*O[0]+"px"),(!me||J[0]&1)&&le(G,"--w",pt/fe*O[0]+"px"),J[0]&1048577){Fe=Ue(O[20].slice(0,3));let W;for(W=0;W<Fe.length;W+=1){const De=In(O,Fe,W);we[W]?we[W].p(De,J):(we[W]=En(De),we[W].c(),we[W].m(R,ee))}for(;W<we.length;W+=1)we[W].d(1);we.length=Fe.length}if((!me||J[0]&1)&&le(ie,"--w",Xe/fe*O[0]+"px"),J[0]&3145729){Ye=Ue(O[20]);let W;for(W=0;W<Ye.length;W+=1){const De=kn(O,Ye,W);xe[W]?xe[W].p(De,J):(xe[W]=Dn(De),xe[W].c(),xe[W].m(R,ae))}for(;W<xe.length;W+=1)xe[W].d(1);xe.length=Ye.length}if(J[0]&262145){Je=Ue(O[18]);let W;for(W=0;W<Je.length;W+=1){const De=Cn(O,Je,W);Ce[W]?Ce[W].p(De,J):(Ce[W]=Rn(De),Ce[W].c(),Ce[W].m(R,z))}for(;W<Ce.length;W+=1)Ce[W].d(1);Ce.length=Je.length}if(J[0]&524289){Ge=Ue(O[19]);let W;for(W=0;W<Ge.length;W+=1){const De=Mn(O,Ge,W);Se[W]?Se[W].p(De,J):(Se[W]=Bn(De),Se[W].c(),Se[W].m(R,null))}for(;W<Se.length;W+=1)Se[W].d(1);Se.length=Ge.length}J[0]&1&&E!==(E=`${O[0]}px`)&&le(R,"width",E),J[0]&1&&F!==(F=`${O[0]}px`)&&le(R,"height",F),O[16]?be?(be.p(O,J),J[0]&65536&&ue(be,1)):(be=On(O),be.c(),ue(be,1),be.m(B,null)):be&&(Ze(),pe(be,1,1,()=>{be=null}),Ke()),(!me||J[0]&131072&&K!==(K="c "+O[17]+" svelte-187pgu4"))&&ce(V,"class",K),O[12]?Ae&&(Ze(),pe(Ae,1,1,()=>{Ae=null}),Ke()):Ae?(Ae.p(O,J),J[0]&4096&&ue(Ae,1)):(Ae=Fn(O),Ae.c(),ue(Ae,1),Ae.m(Z,null)),O[12]?Te&&(Ze(),pe(Te,1,1,()=>{Te=null}),Ke()):Te?(Te.p(O,J),J[0]&4096&&ue(Te,1)):(Te=Vn(O),Te.c(),ue(Te,1),Te.m(ye,null)),(!me||J[0]&8196)&&We(X,"visible",O[13]||!O[2]),J[0]&1&&ve!==(ve=`${O[0]}px`)&&le(X,"width",ve),O[1]?Ie?Ie.p(O,J):(Ie=Ln(O),Ie.c(),Ie.m(_e.parentNode,_e)):Ie&&(Ie.d(1),Ie=null)},i(O){me||(ue(be),ue(Ae),ue(Te),me=!0)},o(O){pe(be),pe(Ae),pe(Te),me=!1},d(O){O&&(Q(v),Q(D),Q(V),Q(te),Q(X),Q(ke),Q(_e)),wt(we,O),wt(xe,O),wt(Ce,O),wt(Se,O),h[27](null),be&&be.d(),Ae&&Ae.d(),Te&&Te.d(),Ie&&Ie.d(O)}}}const St=0;function Er(h,v,r){let m,{width:u}=v,{dev:n}=v,{tutorial:o}=v,{autoMute:c}=v;const s=Ti(),d=[45,135,225,315],f=[15,60,105,150,195,240,285,330],e=["five","ten","fifteen","twenty"],i={five:"5",ten:"10",fifteen:"15",twenty:"20"},t={position:{value:[.5*fe*2],min:.21*fe*2,max:.79*fe*2,step:1},shoot:{value:[0],min:-90,max:90,step:.25}},l={player1:0,player2:0},a={player1:0,player2:0,leader:""},p={player1:!1,player2:!1};let g,w,T=t.position.value,C=t.shoot.value,_=St,S="position",x=0,y,b,A,M,P,k,I=!0,D=!0,V,R;function N({discs:X,valid:Z}){r(5,_=St)}function Y({discs:X,valid:Z}){if(Z){const ge=X.some(_e=>_e.score===20);X.filter(_e=>_e.player==="player2").every(_e=>_e.score===0);const ye=o.includes("open"),ve=o.includes("ricochet");r(16,R=`Valid shot. ${ye||ve?ge?"Nice 20!":"But not a 20 :(":"Well done!"}`)}else r(16,R="Invalid shot. Try again.");clearTimeout(k),k=setTimeout(()=>{r(16,R=null),L()},2e3)}function G(){r(10,S="end"),r(16,R=`${a.player1>a.player2?"You":"Opp."} win the round`)}function j(X){X.forEach(Z=>{Z.valid&&Z.score&&r(7,a[Z.player]+=Z.score,a),Z.valid&&Z.score===20&&(r(8,p[Z.player]=!0,p),r(6,l[Z.player]++,l))})}function ee({discs:X,valid:Z}){H(),j(X),r(5,_=St),o.includes("try")?Y({discs:X,valid:Z}):o&&(P=setTimeout(L,2e3))}function ie(){r(8,p.player1=!1,p),r(8,p.player2=!1,p),s.flickDisc(),r(11,y=!0)}function he(){r(3,T=t.position.value),r(4,C=t.shoot.value)}function ae(){S==="position"&&(V||(V=T[0]!==t.position.value[0]),s.positionDisc(T[0]))}function z(){if(S!=="shoot")return;const X=o?o.includes("try"):!0;x=C[0],s.aimDisc({degrees:x,power:.25,visible:X})}function E(){const X=o?o.includes("try"):!0;s.aimDisc({degrees:x,power:_,visible:X})}async function F(){S==="position"&&(r(10,S="shoot"),r(5,_=St),he(),s.setState("shoot"))}function H(){r(6,l.player1=0,l),r(6,l.player2=0,l),r(7,a.player1=0,a),r(7,a.player2=0,a)}async function L(){if(!o)return;H(),clearTimeout(M),clearTimeout(P),clearTimeout(k),r(16,R=null),r(12,b=!o.includes("try")),r(13,A=!["regions","score"].includes(o));const X=o==="score";r(14,I=!["regions","ricochettry"].includes(o)),r(15,D=I),r(5,_=St);const Z=Tr[o];if(s.removeDiscs(),Z&&(Z.forEach(s.addDisc),Z.forEach(ge=>ge.valid=!0),j(Z)),(b||X)&&Z){const ge=Z[Z.length-1],ye=ge.random?Math.random()*3-1.5:0,ve=ge.degrees+ye,ke=ge.random?Math.random()*.07-.035:0,_e=ge.power+ke;M=setTimeout(()=>{X?G():(r(10,S=Z[Z.length-1].state),s.aimDisc({degrees:ve,power:_e}),ie())},2e3)}else M=null,Z&&r(10,S=Z[Z.length-1].state),S==="shoot"&&s.setIndicatorVisible(!0);he(),r(11,y=!1)}ii(async()=>{s.on("shotComplete",N),s.on("shotCompleteManual",ee),s.on("ready",()=>r(26,w=!0)),s.init({element:g,width:u,tutorial:o}),n&&!o&&s.addDisc()});function U(X){rt[X?"unshift":"push"](()=>{g=X,r(9,g)})}function B(X){_=X,r(5,_)}function K(X){T=X,r(3,T)}function te(X){C=X,r(4,C)}return h.$$set=X=>{"width"in X&&r(0,u=X.width),"dev"in X&&r(1,n=X.dev),"tutorial"in X&&r(2,o=X.tutorial),"autoMute"in X&&r(25,c=X.autoMute)},h.$$.update=()=>{h.$$.dirty[0]&4&&r(17,m=o?`tutorial tutorial-${o}`:""),h.$$.dirty[0]&67108865&&w&&s.resize(u),h.$$.dirty[0]&67108873&&w&&ae(),h.$$.dirty[0]&67108881&&w&&z(),h.$$.dirty[0]&67108897&&w&&E(),h.$$.dirty[0]&67108868&&w&&L(),h.$$.dirty[0]&33554432&&s.autoMute(c)},[u,n,o,T,C,_,l,a,p,g,S,y,b,A,I,D,R,m,d,f,e,i,t,ie,F,c,w,U,B,K,te]}class io extends mt{constructor(v){super(),ht(this,v,Er,Ir,vt,{width:0,dev:1,tutorial:2,autoMute:25},null,[-1,-1,-1])}}var Dr="Expected a function",Hn=NaN,Rr="[object Symbol]",Br=/^\s+|\s+$/g,Or=/^[-+]0x[0-9a-f]+$/i,Fr=/^0b[01]+$/i,Vr=/^0o[0-7]+$/i,Lr=parseInt,Hr=typeof Ne=="object"&&Ne&&Ne.Object===Object&&Ne,Wr=typeof self=="object"&&self&&self.Object===Object&&self,Nr=Hr||Wr||Function("return this")(),Gr=Object.prototype,Ur=Gr.toString,Xr=Math.max,Yr=Math.min,$t=function(){return Nr.Date.now()};function Qr(h,v,r){var m,u,n,o,c,s,d=0,f=!1,e=!1,i=!0;if(typeof h!="function")throw new TypeError(Dr);v=Wn(v)||0,nn(r)&&(f=!!r.leading,e="maxWait"in r,n=e?Xr(Wn(r.maxWait)||0,v):n,i="trailing"in r?!!r.trailing:i);function t(S){var x=m,y=u;return m=u=void 0,d=S,o=h.apply(y,x),o}function l(S){return d=S,c=setTimeout(g,v),f?t(S):o}function a(S){var x=S-s,y=S-d,b=v-x;return e?Yr(b,n-y):b}function p(S){var x=S-s,y=S-d;return s===void 0||x>=v||x<0||e&&y>=n}function g(){var S=$t();if(p(S))return w(S);c=setTimeout(g,a(S))}function w(S){return c=void 0,i&&m?t(S):(m=u=void 0,o)}function T(){c!==void 0&&clearTimeout(c),d=0,m=s=u=c=void 0}function C(){return c===void 0?o:w($t())}function _(){var S=$t(),x=p(S);if(m=arguments,u=this,s=S,x){if(c===void 0)return l(s);if(e)return c=setTimeout(g,v),t(s)}return c===void 0&&(c=setTimeout(g,v)),o}return _.cancel=T,_.flush=C,_}function nn(h){var v=typeof h;return!!h&&(v=="object"||v=="function")}function Zr(h){return!!h&&typeof h=="object"}function Kr(h){return typeof h=="symbol"||Zr(h)&&Ur.call(h)==Rr}function Wn(h){if(typeof h=="number")return h;if(Kr(h))return Hn;if(nn(h)){var v=typeof h.valueOf=="function"?h.valueOf():h;h=nn(v)?v+"":v}if(typeof h!="string")return h===0?h:+h;h=h.replace(Br,"");var r=Fr.test(h);return r||Vr.test(h)?Lr(h.slice(2),r?2:8):Or.test(h)?Hn:+h}var zr=Qr;const Jr=Un(zr),jr=()=>{var h;return((h=window==null?void 0:window.visualViewport)==null?void 0:h.width)||document.documentElement.clientWidth},qr=()=>{var h;return((h=window==null?void 0:window.visualViewport)==null?void 0:h.height)||document.documentElement.clientHeight},ro=ft({width:0,height:0},h=>{const v=()=>h({width:jr(),height:qr()});return v(),window.addEventListener("resize",Jr(v,250)),()=>{window.removeEventListener("resize",v)}});export{io as C,ci as a,no as b,fi as c,vi as d,Ue as e,an as g,ui as m,li as s,si as u,ro as v};
