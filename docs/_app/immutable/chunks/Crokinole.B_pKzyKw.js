import{a5 as gn,a6 as mn,a7 as sn,a4 as pn,a3 as xn,a as ze,m as ye,g as ee,f as K,Z as Ne,k as lt,U as we,_ as Pt,w as Re,O as ut,e as ne,c as ie,b as re,a8 as Ge,a9 as bt,P as dt,Q as ht,R as vt,n as Se,a0 as ke,r as At,u as oe,aa as kt,l as ve,o as ge,T as Ye,a2 as yn,v as j,h as se,q as Sn,ab as wn,t as Fe,d as Ve,a1 as Bt,j as wt}from"./scheduler.lxN5xj0T.js";import{S as _e,i as Xe,g as Ie,t as te,c as De,a as q,f as Et,b as je,d as qe,m as $e,e as et}from"./index.x4oV_jfq.js";import{d as gt,w as Oe,r as Qe}from"./index.Y-8zMvr6.js";function xe(m){return(m==null?void 0:m.length)!==void 0?m:Array.from(m)}function Tt(m,h){const d={},x={},f={$$scope:1};let e=m.length;for(;e--;){const s=m[e],r=h[e];if(r){for(const n in s)n in r||(x[n]=1);for(const n in r)f[n]||(d[n]=r[n],f[n]=1);m[e]=r}else for(const n in s)f[n]=1}for(const s in x)s in d||(d[s]=void 0);return d}function Di(m){return typeof m=="object"&&m!==null?m:{}}var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cn(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var rn={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(m,h){(function(x,f){m.exports=f()})(mt,function(){return function(d){var x={};function f(e){if(x[e])return x[e].exports;var s=x[e]={i:e,l:!1,exports:{}};return d[e].call(s.exports,s,s.exports,f),s.l=!0,s.exports}return f.m=d,f.c=x,f.d=function(e,s,r){f.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:r})},f.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.t=function(e,s){if(s&1&&(e=f(e)),s&8||s&4&&typeof e=="object"&&e&&e.__esModule)return e;var r=Object.create(null);if(f.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),s&2&&typeof e!="string")for(var n in e)f.d(r,n,(function(o){return e[o]}).bind(null,n));return r},f.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(s,"a",s),s},f.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},f.p="",f(f.s=20)}([function(d,x){var f={};d.exports=f,function(){f._baseDelta=1e3/60,f._nextId=0,f._seed=0,f._nowStartTime=+new Date,f._warnedOnce={},f._decomp=null,f.extend=function(s,r){var n,o;typeof r=="boolean"?(n=2,o=r):(n=1,o=!0);for(var i=n;i<arguments.length;i++){var u=arguments[i];if(u)for(var c in u)o&&u[c]&&u[c].constructor===Object&&(!s[c]||s[c].constructor===Object)?(s[c]=s[c]||{},f.extend(s[c],o,u[c])):s[c]=u[c]}return s},f.clone=function(s,r){return f.extend({},r,s)},f.keys=function(s){if(Object.keys)return Object.keys(s);var r=[];for(var n in s)r.push(n);return r},f.values=function(s){var r=[];if(Object.keys){for(var n=Object.keys(s),o=0;o<n.length;o++)r.push(s[n[o]]);return r}for(var i in s)r.push(s[i]);return r},f.get=function(s,r,n,o){r=r.split(".").slice(n,o);for(var i=0;i<r.length;i+=1)s=s[r[i]];return s},f.set=function(s,r,n,o,i){var u=r.split(".").slice(o,i);return f.get(s,r,0,-1)[u[u.length-1]]=n,n},f.shuffle=function(s){for(var r=s.length-1;r>0;r--){var n=Math.floor(f.random()*(r+1)),o=s[r];s[r]=s[n],s[n]=o}return s},f.choose=function(s){return s[Math.floor(f.random()*s.length)]},f.isElement=function(s){return typeof HTMLElement<"u"?s instanceof HTMLElement:!!(s&&s.nodeType&&s.nodeName)},f.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"},f.isFunction=function(s){return typeof s=="function"},f.isPlainObject=function(s){return typeof s=="object"&&s.constructor===Object},f.isString=function(s){return toString.call(s)==="[object String]"},f.clamp=function(s,r,n){return s<r?r:s>n?n:s},f.sign=function(s){return s<0?-1:1},f.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-f._nowStartTime},f.random=function(s,r){return s=typeof s<"u"?s:0,r=typeof r<"u"?r:1,s+e()*(r-s)};var e=function(){return f._seed=(f._seed*9301+49297)%233280,f._seed/233280};f.colorToNumber=function(s){return s=s.replace("#",""),s.length==3&&(s=s.charAt(0)+s.charAt(0)+s.charAt(1)+s.charAt(1)+s.charAt(2)+s.charAt(2)),parseInt(s,16)},f.logLevel=1,f.log=function(){console&&f.logLevel>0&&f.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.info=function(){console&&f.logLevel>0&&f.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.warn=function(){console&&f.logLevel>0&&f.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.warnOnce=function(){var s=Array.prototype.slice.call(arguments).join(" ");f._warnedOnce[s]||(f.warn(s),f._warnedOnce[s]=!0)},f.deprecated=function(s,r,n){s[r]=f.chain(function(){f.warnOnce("🔅 deprecated 🔅",n)},s[r])},f.nextId=function(){return f._nextId++},f.indexOf=function(s,r){if(s.indexOf)return s.indexOf(r);for(var n=0;n<s.length;n++)if(s[n]===r)return n;return-1},f.map=function(s,r){if(s.map)return s.map(r);for(var n=[],o=0;o<s.length;o+=1)n.push(r(s[o]));return n},f.topologicalSort=function(s){var r=[],n=[],o=[];for(var i in s)!n[i]&&!o[i]&&f._topologicalSort(i,n,o,s,r);return r},f._topologicalSort=function(s,r,n,o,i){var u=o[s]||[];n[s]=!0;for(var c=0;c<u.length;c+=1){var t=u[c];n[t]||r[t]||f._topologicalSort(t,r,n,o,i)}n[s]=!1,r[s]=!0,i.push(s)},f.chain=function(){for(var s=[],r=0;r<arguments.length;r+=1){var n=arguments[r];n._chained?s.push.apply(s,n._chained):s.push(n)}var o=function(){for(var i,u=new Array(arguments.length),c=0,t=arguments.length;c<t;c++)u[c]=arguments[c];for(c=0;c<s.length;c+=1){var l=s[c].apply(i,u);typeof l<"u"&&(i=l)}return i};return o._chained=s,o},f.chainPathBefore=function(s,r,n){return f.set(s,r,f.chain(n,f.get(s,r)))},f.chainPathAfter=function(s,r,n){return f.set(s,r,f.chain(f.get(s,r),n))},f.setDecomp=function(s){f._decomp=s},f.getDecomp=function(){var s=f._decomp;try{!s&&typeof window<"u"&&(s=window.decomp),!s&&typeof mt<"u"&&(s=mt.decomp)}catch{s=null}return s}}()},function(d,x){var f={};d.exports=f,function(){f.create=function(e){var s={min:{x:0,y:0},max:{x:0,y:0}};return e&&f.update(s,e),s},f.update=function(e,s,r){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var n=0;n<s.length;n++){var o=s[n];o.x>e.max.x&&(e.max.x=o.x),o.x<e.min.x&&(e.min.x=o.x),o.y>e.max.y&&(e.max.y=o.y),o.y<e.min.y&&(e.min.y=o.y)}r&&(r.x>0?e.max.x+=r.x:e.min.x+=r.x,r.y>0?e.max.y+=r.y:e.min.y+=r.y)},f.contains=function(e,s){return s.x>=e.min.x&&s.x<=e.max.x&&s.y>=e.min.y&&s.y<=e.max.y},f.overlaps=function(e,s){return e.min.x<=s.max.x&&e.max.x>=s.min.x&&e.max.y>=s.min.y&&e.min.y<=s.max.y},f.translate=function(e,s){e.min.x+=s.x,e.max.x+=s.x,e.min.y+=s.y,e.max.y+=s.y},f.shift=function(e,s){var r=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=s.x,e.max.x=s.x+r,e.min.y=s.y,e.max.y=s.y+n}}()},function(d,x){var f={};d.exports=f,function(){f.create=function(e,s){return{x:e||0,y:s||0}},f.clone=function(e){return{x:e.x,y:e.y}},f.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},f.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},f.rotate=function(e,s,r){var n=Math.cos(s),o=Math.sin(s);r||(r={});var i=e.x*n-e.y*o;return r.y=e.x*o+e.y*n,r.x=i,r},f.rotateAbout=function(e,s,r,n){var o=Math.cos(s),i=Math.sin(s);n||(n={});var u=r.x+((e.x-r.x)*o-(e.y-r.y)*i);return n.y=r.y+((e.x-r.x)*i+(e.y-r.y)*o),n.x=u,n},f.normalise=function(e){var s=f.magnitude(e);return s===0?{x:0,y:0}:{x:e.x/s,y:e.y/s}},f.dot=function(e,s){return e.x*s.x+e.y*s.y},f.cross=function(e,s){return e.x*s.y-e.y*s.x},f.cross3=function(e,s,r){return(s.x-e.x)*(r.y-e.y)-(s.y-e.y)*(r.x-e.x)},f.add=function(e,s,r){return r||(r={}),r.x=e.x+s.x,r.y=e.y+s.y,r},f.sub=function(e,s,r){return r||(r={}),r.x=e.x-s.x,r.y=e.y-s.y,r},f.mult=function(e,s){return{x:e.x*s,y:e.y*s}},f.div=function(e,s){return{x:e.x/s,y:e.y/s}},f.perp=function(e,s){return s=s===!0?-1:1,{x:s*-e.y,y:s*e.x}},f.neg=function(e){return{x:-e.x,y:-e.y}},f.angle=function(e,s){return Math.atan2(s.y-e.y,s.x-e.x)},f._temp=[f.create(),f.create(),f.create(),f.create(),f.create(),f.create()]}()},function(d,x,f){var e={};d.exports=e;var s=f(2),r=f(0);(function(){e.create=function(n,o){for(var i=[],u=0;u<n.length;u++){var c=n[u],t={x:c.x,y:c.y,index:u,body:o,isInternal:!1};i.push(t)}return i},e.fromPath=function(n,o){var i=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return n.replace(i,function(c,t,l){u.push({x:parseFloat(t),y:parseFloat(l)})}),e.create(u,o)},e.centre=function(n){for(var o=e.area(n,!0),i={x:0,y:0},u,c,t,l=0;l<n.length;l++)t=(l+1)%n.length,u=s.cross(n[l],n[t]),c=s.mult(s.add(n[l],n[t]),u),i=s.add(i,c);return s.div(i,6*o)},e.mean=function(n){for(var o={x:0,y:0},i=0;i<n.length;i++)o.x+=n[i].x,o.y+=n[i].y;return s.div(o,n.length)},e.area=function(n,o){for(var i=0,u=n.length-1,c=0;c<n.length;c++)i+=(n[u].x-n[c].x)*(n[u].y+n[c].y),u=c;return o?i/2:Math.abs(i)/2},e.inertia=function(n,o){for(var i=0,u=0,c=n,t,l,a=0;a<c.length;a++)l=(a+1)%c.length,t=Math.abs(s.cross(c[l],c[a])),i+=t*(s.dot(c[l],c[l])+s.dot(c[l],c[a])+s.dot(c[a],c[a])),u+=t;return o/6*(i/u)},e.translate=function(n,o,i){i=typeof i<"u"?i:1;var u=n.length,c=o.x*i,t=o.y*i,l;for(l=0;l<u;l++)n[l].x+=c,n[l].y+=t;return n},e.rotate=function(n,o,i){if(o!==0){var u=Math.cos(o),c=Math.sin(o),t=i.x,l=i.y,a=n.length,v,S,b,k;for(k=0;k<a;k++)v=n[k],S=v.x-t,b=v.y-l,v.x=t+(S*u-b*c),v.y=l+(S*c+b*u);return n}},e.contains=function(n,o){for(var i=o.x,u=o.y,c=n.length,t=n[c-1],l,a=0;a<c;a++){if(l=n[a],(i-t.x)*(l.y-t.y)+(u-t.y)*(t.x-l.x)>0)return!1;t=l}return!0},e.scale=function(n,o,i,u){if(o===1&&i===1)return n;u=u||e.centre(n);for(var c,t,l=0;l<n.length;l++)c=n[l],t=s.sub(c,u),n[l].x=u.x+t.x*o,n[l].y=u.y+t.y*i;return n},e.chamfer=function(n,o,i,u,c){typeof o=="number"?o=[o]:o=o||[8],i=typeof i<"u"?i:-1,u=u||2,c=c||14;for(var t=[],l=0;l<n.length;l++){var a=n[l-1>=0?l-1:n.length-1],v=n[l],S=n[(l+1)%n.length],b=o[l<o.length?l:o.length-1];if(b===0){t.push(v);continue}var k=s.normalise({x:v.y-a.y,y:a.x-v.x}),E=s.normalise({x:S.y-v.y,y:v.x-S.x}),g=Math.sqrt(2*Math.pow(b,2)),C=s.mult(r.clone(k),b),y=s.normalise(s.mult(s.add(k,E),.5)),p=s.sub(v,s.mult(y,g)),M=i;i===-1&&(M=Math.pow(b,.32)*1.75),M=r.clamp(M,u,c),M%2===1&&(M+=1);for(var w=Math.acos(s.dot(k,E)),A=w/M,P=0;P<M;P++)t.push(s.add(s.rotate(C,A*P),p))}return t},e.clockwiseSort=function(n){var o=e.mean(n);return n.sort(function(i,u){return s.angle(o,i)-s.angle(o,u)}),n},e.isConvex=function(n){var o=0,i=n.length,u,c,t,l;if(i<3)return null;for(u=0;u<i;u++)if(c=(u+1)%i,t=(u+2)%i,l=(n[c].x-n[u].x)*(n[t].y-n[c].y),l-=(n[c].y-n[u].y)*(n[t].x-n[c].x),l<0?o|=1:l>0&&(o|=2),o===3)return!1;return o!==0?!0:null},e.hull=function(n){var o=[],i=[],u,c;for(n=n.slice(0),n.sort(function(t,l){var a=t.x-l.x;return a!==0?a:t.y-l.y}),c=0;c<n.length;c+=1){for(u=n[c];i.length>=2&&s.cross3(i[i.length-2],i[i.length-1],u)<=0;)i.pop();i.push(u)}for(c=n.length-1;c>=0;c-=1){for(u=n[c];o.length>=2&&s.cross3(o[o.length-2],o[o.length-1],u)<=0;)o.pop();o.push(u)}return o.pop(),i.pop(),o.concat(i)}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(2),n=f(7),o=f(0),i=f(1),u=f(11);(function(){e._timeCorrection=!0,e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e._baseDelta=1e3/60,e.create=function(t){var l={id:o.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:s.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},a=o.extend(l,t);return c(a,t),a},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var c=function(t,l){l=l||{},e.set(t,{bounds:t.bounds||i.create(t.vertices),positionPrev:t.positionPrev||r.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),s.rotate(t.vertices,t.angle,t.position),u.rotate(t.axes,t.angle),i.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:l.axes||t.axes,area:l.area||t.area,mass:l.mass||t.mass,inertia:l.inertia||t.inertia});var a=t.isStatic?"#14151f":o.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=t.isStatic?"#555":"#ccc",S=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||a,t.render.strokeStyle=t.render.strokeStyle||v,t.render.lineWidth=t.render.lineWidth||S,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,l,a){var v;typeof l=="string"&&(v=l,l={},l[v]=a);for(v in l)if(Object.prototype.hasOwnProperty.call(l,v))switch(a=l[v],v){case"isStatic":e.setStatic(t,a);break;case"isSleeping":n.set(t,a);break;case"mass":e.setMass(t,a);break;case"density":e.setDensity(t,a);break;case"inertia":e.setInertia(t,a);break;case"vertices":e.setVertices(t,a);break;case"position":e.setPosition(t,a);break;case"angle":e.setAngle(t,a);break;case"velocity":e.setVelocity(t,a);break;case"angularVelocity":e.setAngularVelocity(t,a);break;case"speed":e.setSpeed(t,a);break;case"angularSpeed":e.setAngularSpeed(t,a);break;case"parts":e.setParts(t,a);break;case"centre":e.setCentre(t,a);break;default:t[v]=a}},e.setStatic=function(t,l){for(var a=0;a<t.parts.length;a++){var v=t.parts[a];l?(v.isStatic||(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia}),v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null),v.isStatic=l}},e.setMass=function(t,l){var a=t.inertia/(t.mass/6);t.inertia=a*(l/6),t.inverseInertia=1/t.inertia,t.mass=l,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,l){e.setMass(t,l*t.area),t.density=l},e.setInertia=function(t,l){t.inertia=l,t.inverseInertia=1/t.inertia},e.setVertices=function(t,l){l[0].body===t?t.vertices=l:t.vertices=s.create(l,t),t.axes=u.fromVertices(t.vertices),t.area=s.area(t.vertices),e.setMass(t,t.density*t.area);var a=s.centre(t.vertices);s.translate(t.vertices,a,-1),e.setInertia(t,e._inertiaScale*s.inertia(t.vertices,t.mass)),s.translate(t.vertices,t.position),i.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,l,a){var v;for(l=l.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,v=0;v<l.length;v++){var S=l[v];S!==t&&(S.parent=t,t.parts.push(S))}if(t.parts.length!==1){if(a=typeof a<"u"?a:!0,a){var b=[];for(v=0;v<l.length;v++)b=b.concat(l[v].vertices);s.clockwiseSort(b);var k=s.hull(b),E=s.centre(k);e.setVertices(t,k),s.translate(t.vertices,E)}var g=e._totalProperties(t);t.area=g.area,t.parent=t,t.position.x=g.centre.x,t.position.y=g.centre.y,t.positionPrev.x=g.centre.x,t.positionPrev.y=g.centre.y,e.setMass(t,g.mass),e.setInertia(t,g.inertia),e.setPosition(t,g.centre)}},e.setCentre=function(t,l,a){a?(t.positionPrev.x+=l.x,t.positionPrev.y+=l.y,t.position.x+=l.x,t.position.y+=l.y):(t.positionPrev.x=l.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=l.y-(t.position.y-t.positionPrev.y),t.position.x=l.x,t.position.y=l.y)},e.setPosition=function(t,l,a){var v=r.sub(l,t.position);a?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=v.x,t.velocity.y=v.y,t.speed=r.magnitude(v)):(t.positionPrev.x+=v.x,t.positionPrev.y+=v.y);for(var S=0;S<t.parts.length;S++){var b=t.parts[S];b.position.x+=v.x,b.position.y+=v.y,s.translate(b.vertices,v),i.update(b.bounds,b.vertices,t.velocity)}},e.setAngle=function(t,l,a){var v=l-t.angle;a?(t.anglePrev=t.angle,t.angularVelocity=v,t.angularSpeed=Math.abs(v)):t.anglePrev+=v;for(var S=0;S<t.parts.length;S++){var b=t.parts[S];b.angle+=v,s.rotate(b.vertices,v,t.position),u.rotate(b.axes,v),i.update(b.bounds,b.vertices,t.velocity),S>0&&r.rotateAbout(b.position,v,t.position,b.position)}},e.setVelocity=function(t,l){var a=t.deltaTime/e._baseDelta;t.positionPrev.x=t.position.x-l.x*a,t.positionPrev.y=t.position.y-l.y*a,t.velocity.x=(t.position.x-t.positionPrev.x)/a,t.velocity.y=(t.position.y-t.positionPrev.y)/a,t.speed=r.magnitude(t.velocity)},e.getVelocity=function(t){var l=e._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*l,y:(t.position.y-t.positionPrev.y)*l}},e.getSpeed=function(t){return r.magnitude(e.getVelocity(t))},e.setSpeed=function(t,l){e.setVelocity(t,r.mult(r.normalise(e.getVelocity(t)),l))},e.setAngularVelocity=function(t,l){var a=t.deltaTime/e._baseDelta;t.anglePrev=t.angle-l*a,t.angularVelocity=(t.angle-t.anglePrev)/a,t.angularSpeed=Math.abs(t.angularVelocity)},e.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*e._baseDelta/t.deltaTime},e.getAngularSpeed=function(t){return Math.abs(e.getAngularVelocity(t))},e.setAngularSpeed=function(t,l){e.setAngularVelocity(t,o.sign(e.getAngularVelocity(t))*l)},e.translate=function(t,l,a){e.setPosition(t,r.add(t.position,l),a)},e.rotate=function(t,l,a,v){if(!a)e.setAngle(t,t.angle+l,v);else{var S=Math.cos(l),b=Math.sin(l),k=t.position.x-a.x,E=t.position.y-a.y;e.setPosition(t,{x:a.x+(k*S-E*b),y:a.y+(k*b+E*S)},v),e.setAngle(t,t.angle+l,v)}},e.scale=function(t,l,a,v){var S=0,b=0;v=v||t.position;for(var k=0;k<t.parts.length;k++){var E=t.parts[k];s.scale(E.vertices,l,a,v),E.axes=u.fromVertices(E.vertices),E.area=s.area(E.vertices),e.setMass(E,t.density*E.area),s.translate(E.vertices,{x:-E.position.x,y:-E.position.y}),e.setInertia(E,e._inertiaScale*s.inertia(E.vertices,E.mass)),s.translate(E.vertices,{x:E.position.x,y:E.position.y}),k>0&&(S+=E.area,b+=E.inertia),E.position.x=v.x+(E.position.x-v.x)*l,E.position.y=v.y+(E.position.y-v.y)*a,i.update(E.bounds,E.vertices,t.velocity)}t.parts.length>1&&(t.area=S,t.isStatic||(e.setMass(t,t.density*S),e.setInertia(t,b))),t.circleRadius&&(l===a?t.circleRadius*=l:t.circleRadius=null)},e.update=function(t,l){l=(typeof l<"u"?l:1e3/60)*t.timeScale;var a=l*l,v=e._timeCorrection?l/(t.deltaTime||l):1,S=1-t.frictionAir*(l/o._baseDelta),b=(t.position.x-t.positionPrev.x)*v,k=(t.position.y-t.positionPrev.y)*v;t.velocity.x=b*S+t.force.x/t.mass*a,t.velocity.y=k*S+t.force.y/t.mass*a,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=l,t.angularVelocity=(t.angle-t.anglePrev)*S*v+t.torque/t.inertia*a,t.anglePrev=t.angle,t.angle+=t.angularVelocity;for(var E=0;E<t.parts.length;E++){var g=t.parts[E];s.translate(g.vertices,t.velocity),E>0&&(g.position.x+=t.velocity.x,g.position.y+=t.velocity.y),t.angularVelocity!==0&&(s.rotate(g.vertices,t.angularVelocity,t.position),u.rotate(g.axes,t.angularVelocity),E>0&&r.rotateAbout(g.position,t.angularVelocity,t.position,g.position)),i.update(g.bounds,g.vertices,t.velocity)}},e.updateVelocities=function(t){var l=e._baseDelta/t.deltaTime,a=t.velocity;a.x=(t.position.x-t.positionPrev.x)*l,a.y=(t.position.y-t.positionPrev.y)*l,t.speed=Math.sqrt(a.x*a.x+a.y*a.y),t.angularVelocity=(t.angle-t.anglePrev)*l,t.angularSpeed=Math.abs(t.angularVelocity)},e.applyForce=function(t,l,a){var v={x:l.x-t.position.x,y:l.y-t.position.y};t.force.x+=a.x,t.force.y+=a.y,t.torque+=v.x*a.y-v.y*a.x},e._totalProperties=function(t){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},a=t.parts.length===1?0:1;a<t.parts.length;a++){var v=t.parts[a],S=v.mass!==1/0?v.mass:1;l.mass+=S,l.area+=v.area,l.inertia+=v.inertia,l.centre=r.add(l.centre,r.mult(v.position,S))}return l.centre=r.div(l.centre,l.mass),l}})()},function(d,x,f){var e={};d.exports=e;var s=f(0);(function(){e.on=function(r,n,o){for(var i=n.split(" "),u,c=0;c<i.length;c++)u=i[c],r.events=r.events||{},r.events[u]=r.events[u]||[],r.events[u].push(o);return o},e.off=function(r,n,o){if(!n){r.events={};return}typeof n=="function"&&(o=n,n=s.keys(r.events).join(" "));for(var i=n.split(" "),u=0;u<i.length;u++){var c=r.events[i[u]],t=[];if(o&&c)for(var l=0;l<c.length;l++)c[l]!==o&&t.push(c[l]);r.events[i[u]]=t}},e.trigger=function(r,n,o){var i,u,c,t,l=r.events;if(l&&s.keys(l).length>0){o||(o={}),i=n.split(" ");for(var a=0;a<i.length;a++)if(u=i[a],c=l[u],c){t=s.clone(o,!1),t.name=u,t.source=r;for(var v=0;v<c.length;v++)c[v].apply(r,[t])}}}})()},function(d,x,f){var e={};d.exports=e;var s=f(5),r=f(0),n=f(1),o=f(4);(function(){e.create=function(i){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},i)},e.setModified=function(i,u,c,t){if(i.isModified=u,u&&i.cache&&(i.cache.allBodies=null,i.cache.allConstraints=null,i.cache.allComposites=null),c&&i.parent&&e.setModified(i.parent,u,c,t),t)for(var l=0;l<i.composites.length;l++){var a=i.composites[l];e.setModified(a,u,c,t)}},e.add=function(i,u){var c=[].concat(u);s.trigger(i,"beforeAdd",{object:u});for(var t=0;t<c.length;t++){var l=c[t];switch(l.type){case"body":if(l.parent!==l){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(i,l);break;case"constraint":e.addConstraint(i,l);break;case"composite":e.addComposite(i,l);break;case"mouseConstraint":e.addConstraint(i,l.constraint);break}}return s.trigger(i,"afterAdd",{object:u}),i},e.remove=function(i,u,c){var t=[].concat(u);s.trigger(i,"beforeRemove",{object:u});for(var l=0;l<t.length;l++){var a=t[l];switch(a.type){case"body":e.removeBody(i,a,c);break;case"constraint":e.removeConstraint(i,a,c);break;case"composite":e.removeComposite(i,a,c);break;case"mouseConstraint":e.removeConstraint(i,a.constraint);break}}return s.trigger(i,"afterRemove",{object:u}),i},e.addComposite=function(i,u){return i.composites.push(u),u.parent=i,e.setModified(i,!0,!0,!1),i},e.removeComposite=function(i,u,c){var t=r.indexOf(i.composites,u);if(t!==-1){var l=e.allBodies(u);e.removeCompositeAt(i,t);for(var a=0;a<l.length;a++)l[a].sleepCounter=0}if(c)for(var a=0;a<i.composites.length;a++)e.removeComposite(i.composites[a],u,!0);return i},e.removeCompositeAt=function(i,u){return i.composites.splice(u,1),e.setModified(i,!0,!0,!1),i},e.addBody=function(i,u){return i.bodies.push(u),e.setModified(i,!0,!0,!1),i},e.removeBody=function(i,u,c){var t=r.indexOf(i.bodies,u);if(t!==-1&&(e.removeBodyAt(i,t),u.sleepCounter=0),c)for(var l=0;l<i.composites.length;l++)e.removeBody(i.composites[l],u,!0);return i},e.removeBodyAt=function(i,u){return i.bodies.splice(u,1),e.setModified(i,!0,!0,!1),i},e.addConstraint=function(i,u){return i.constraints.push(u),e.setModified(i,!0,!0,!1),i},e.removeConstraint=function(i,u,c){var t=r.indexOf(i.constraints,u);if(t!==-1&&e.removeConstraintAt(i,t),c)for(var l=0;l<i.composites.length;l++)e.removeConstraint(i.composites[l],u,!0);return i},e.removeConstraintAt=function(i,u){return i.constraints.splice(u,1),e.setModified(i,!0,!0,!1),i},e.clear=function(i,u,c){if(c)for(var t=0;t<i.composites.length;t++)e.clear(i.composites[t],u,!0);return u?i.bodies=i.bodies.filter(function(l){return l.isStatic}):i.bodies.length=0,i.constraints.length=0,i.composites.length=0,e.setModified(i,!0,!0,!1),i},e.allBodies=function(i){if(i.cache&&i.cache.allBodies)return i.cache.allBodies;for(var u=[].concat(i.bodies),c=0;c<i.composites.length;c++)u=u.concat(e.allBodies(i.composites[c]));return i.cache&&(i.cache.allBodies=u),u},e.allConstraints=function(i){if(i.cache&&i.cache.allConstraints)return i.cache.allConstraints;for(var u=[].concat(i.constraints),c=0;c<i.composites.length;c++)u=u.concat(e.allConstraints(i.composites[c]));return i.cache&&(i.cache.allConstraints=u),u},e.allComposites=function(i){if(i.cache&&i.cache.allComposites)return i.cache.allComposites;for(var u=[].concat(i.composites),c=0;c<i.composites.length;c++)u=u.concat(e.allComposites(i.composites[c]));return i.cache&&(i.cache.allComposites=u),u},e.get=function(i,u,c){var t,l;switch(c){case"body":t=e.allBodies(i);break;case"constraint":t=e.allConstraints(i);break;case"composite":t=e.allComposites(i).concat(i);break}return t?(l=t.filter(function(a){return a.id.toString()===u.toString()}),l.length===0?null:l[0]):null},e.move=function(i,u,c){return e.remove(i,u),e.add(c,u),i},e.rebase=function(i){for(var u=e.allBodies(i).concat(e.allConstraints(i)).concat(e.allComposites(i)),c=0;c<u.length;c++)u[c].id=r.nextId();return i},e.translate=function(i,u,c){for(var t=c?e.allBodies(i):i.bodies,l=0;l<t.length;l++)o.translate(t[l],u);return i},e.rotate=function(i,u,c,t){for(var l=Math.cos(u),a=Math.sin(u),v=t?e.allBodies(i):i.bodies,S=0;S<v.length;S++){var b=v[S],k=b.position.x-c.x,E=b.position.y-c.y;o.setPosition(b,{x:c.x+(k*l-E*a),y:c.y+(k*a+E*l)}),o.rotate(b,u)}return i},e.scale=function(i,u,c,t,l){for(var a=l?e.allBodies(i):i.bodies,v=0;v<a.length;v++){var S=a[v],b=S.position.x-t.x,k=S.position.y-t.y;o.setPosition(S,{x:t.x+b*u,y:t.y+k*c}),o.scale(S,u,c)}return i},e.bounds=function(i){for(var u=e.allBodies(i),c=[],t=0;t<u.length;t+=1){var l=u[t];c.push(l.bounds.min,l.bounds.max)}return n.create(c)}})()},function(d,x,f){var e={};d.exports=e;var s=f(4),r=f(5),n=f(0);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(o,i){for(var u=i/n._baseDelta,c=e._motionSleepThreshold,t=0;t<o.length;t++){var l=o[t],a=s.getSpeed(l),v=s.getAngularSpeed(l),S=a*a+v*v;if(l.force.x!==0||l.force.y!==0){e.set(l,!1);continue}var b=Math.min(l.motion,S),k=Math.max(l.motion,S);l.motion=e._minBias*b+(1-e._minBias)*k,l.sleepThreshold>0&&l.motion<c?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold/u&&e.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},e.afterCollisions=function(o){for(var i=e._motionSleepThreshold,u=0;u<o.length;u++){var c=o[u];if(c.isActive){var t=c.collision,l=t.bodyA.parent,a=t.bodyB.parent;if(!(l.isSleeping&&a.isSleeping||l.isStatic||a.isStatic)&&(l.isSleeping||a.isSleeping)){var v=l.isSleeping&&!l.isStatic?l:a,S=v===l?a:l;!v.isStatic&&S.motion>i&&e.set(v,!1)}}}},e.set=function(o,i){var u=o.isSleeping;i?(o.isSleeping=!0,o.sleepCounter=o.sleepThreshold,o.positionImpulse.x=0,o.positionImpulse.y=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.speed=0,o.angularSpeed=0,o.motion=0,u||r.trigger(o,"sleepStart")):(o.isSleeping=!1,o.sleepCounter=0,u&&r.trigger(o,"sleepEnd"))}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(9);(function(){var n=[],o={overlap:0,axis:null},i={overlap:0,axis:null};e.create=function(u,c){return{pair:null,collided:!1,bodyA:u,bodyB:c,parentA:u.parent,parentB:c.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},e.collides=function(u,c,t){if(e._overlapAxes(o,u.vertices,c.vertices,u.axes),o.overlap<=0||(e._overlapAxes(i,c.vertices,u.vertices,c.axes),i.overlap<=0))return null;var l=t&&t.table[r.id(u,c)],a;l?a=l.collision:(a=e.create(u,c),a.collided=!0,a.bodyA=u.id<c.id?u:c,a.bodyB=u.id<c.id?c:u,a.parentA=a.bodyA.parent,a.parentB=a.bodyB.parent),u=a.bodyA,c=a.bodyB;var v;o.overlap<i.overlap?v=o:v=i;var S=a.normal,b=a.tangent,k=a.penetration,E=a.supports,g=v.overlap,C=v.axis,y=C.x,p=C.y,M=c.position.x-u.position.x,w=c.position.y-u.position.y;y*M+p*w>=0&&(y=-y,p=-p),S.x=y,S.y=p,b.x=-p,b.y=y,k.x=y*g,k.y=p*g,a.depth=g;var A=e._findSupports(u,c,S,1),P=0;if(s.contains(u.vertices,A[0])&&(E[P++]=A[0]),s.contains(u.vertices,A[1])&&(E[P++]=A[1]),P<2){var T=e._findSupports(c,u,S,-1);s.contains(c.vertices,T[0])&&(E[P++]=T[0]),P<2&&s.contains(c.vertices,T[1])&&(E[P++]=T[1])}return P===0&&(E[P++]=A[0]),a.supportCount=P,a},e._overlapAxes=function(u,c,t,l){var a=c.length,v=t.length,S=c[0].x,b=c[0].y,k=t[0].x,E=t[0].y,g=l.length,C=Number.MAX_VALUE,y=0,p,M,w,A,P,T;for(P=0;P<g;P++){var R=l[P],B=R.x,L=R.y,I=S*B+b*L,V=k*B+E*L,D=I,W=V;for(T=1;T<a;T+=1)A=c[T].x*B+c[T].y*L,A>D?D=A:A<I&&(I=A);for(T=1;T<v;T+=1)A=t[T].x*B+t[T].y*L,A>W?W=A:A<V&&(V=A);if(M=D-V,w=W-I,p=M<w?M:w,p<C&&(C=p,y=P,p<=0))break}u.axis=l[y],u.overlap=C},e._findSupports=function(u,c,t,l){var a=c.vertices,v=a.length,S=u.position.x,b=u.position.y,k=t.x*l,E=t.y*l,g=a[0],C=g,y=k*(S-C.x)+E*(b-C.y),p,M,w;for(w=1;w<v;w+=1)C=a[w],M=k*(S-C.x)+E*(b-C.y),M<y&&(y=M,g=C);return p=a[(v+g.index-1)%v],y=k*(S-p.x)+E*(b-p.y),C=a[(g.index+1)%v],k*(S-C.x)+E*(b-C.y)<y?(n[0]=g,n[1]=C,n):(n[0]=g,n[1]=p,n)}})()},function(d,x,f){var e={};d.exports=e;var s=f(16);(function(){e.create=function(r,n){var o=r.bodyA,i=r.bodyB,u={id:e.id(o,i),bodyA:o,bodyB:i,collision:r,contacts:[s.create(),s.create()],contactCount:0,separation:0,isActive:!0,isSensor:o.isSensor||i.isSensor,timeCreated:n,timeUpdated:n,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(u,r,n),u},e.update=function(r,n,o){var i=n.supports,u=n.supportCount,c=r.contacts,t=n.parentA,l=n.parentB;r.isActive=!0,r.timeUpdated=o,r.collision=n,r.separation=n.depth,r.inverseMass=t.inverseMass+l.inverseMass,r.friction=t.friction<l.friction?t.friction:l.friction,r.frictionStatic=t.frictionStatic>l.frictionStatic?t.frictionStatic:l.frictionStatic,r.restitution=t.restitution>l.restitution?t.restitution:l.restitution,r.slop=t.slop>l.slop?t.slop:l.slop,r.contactCount=u,n.pair=r;var a=i[0],v=c[0],S=i[1],b=c[1];(b.vertex===a||v.vertex===S)&&(c[1]=v,c[0]=v=b,b=c[1]),v.vertex=a,b.vertex=S},e.setActive=function(r,n,o){n?(r.isActive=!0,r.timeUpdated=o):(r.isActive=!1,r.contactCount=0)},e.id=function(r,n){return r.id<n.id?r.id.toString(36)+":"+n.id.toString(36):n.id.toString(36)+":"+r.id.toString(36)}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(2),n=f(7),o=f(1),i=f(11),u=f(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(c){var t=c;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var l=t.bodyA?r.add(t.bodyA.position,t.pointA):t.pointA,a=t.bodyB?r.add(t.bodyB.position,t.pointB):t.pointB,v=r.magnitude(r.sub(l,a));t.length=typeof t.length<"u"?t.length:v,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var S={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(S.type="pin",S.anchors=!1):t.stiffness<.9&&(S.type="spring"),t.render=u.extend(S,t.render),t},e.preSolveAll=function(c){for(var t=0;t<c.length;t+=1){var l=c[t],a=l.constraintImpulse;l.isStatic||a.x===0&&a.y===0&&a.angle===0||(l.position.x+=a.x,l.position.y+=a.y,l.angle+=a.angle)}},e.solveAll=function(c,t){for(var l=u.clamp(t/u._baseDelta,0,1),a=0;a<c.length;a+=1){var v=c[a],S=!v.bodyA||v.bodyA&&v.bodyA.isStatic,b=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(S||b)&&e.solve(c[a],l)}for(a=0;a<c.length;a+=1)v=c[a],S=!v.bodyA||v.bodyA&&v.bodyA.isStatic,b=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!S&&!b&&e.solve(c[a],l)},e.solve=function(c,t){var l=c.bodyA,a=c.bodyB,v=c.pointA,S=c.pointB;if(!(!l&&!a)){l&&!l.isStatic&&(r.rotate(v,l.angle-c.angleA,v),c.angleA=l.angle),a&&!a.isStatic&&(r.rotate(S,a.angle-c.angleB,S),c.angleB=a.angle);var b=v,k=S;if(l&&(b=r.add(l.position,v)),a&&(k=r.add(a.position,S)),!(!b||!k)){var E=r.sub(b,k),g=r.magnitude(E);g<e._minLength&&(g=e._minLength);var C=(g-c.length)/g,y=c.stiffness>=1||c.length===0,p=y?c.stiffness*t:c.stiffness*t*t,M=c.damping*t,w=r.mult(E,C*p),A=(l?l.inverseMass:0)+(a?a.inverseMass:0),P=(l?l.inverseInertia:0)+(a?a.inverseInertia:0),T=A+P,R,B,L,I,V;if(M>0){var D=r.create();L=r.div(E,g),V=r.sub(a&&r.sub(a.position,a.positionPrev)||D,l&&r.sub(l.position,l.positionPrev)||D),I=r.dot(L,V)}l&&!l.isStatic&&(B=l.inverseMass/A,l.constraintImpulse.x-=w.x*B,l.constraintImpulse.y-=w.y*B,l.position.x-=w.x*B,l.position.y-=w.y*B,M>0&&(l.positionPrev.x-=M*L.x*I*B,l.positionPrev.y-=M*L.y*I*B),R=r.cross(v,w)/T*e._torqueDampen*l.inverseInertia*(1-c.angularStiffness),l.constraintImpulse.angle-=R,l.angle-=R),a&&!a.isStatic&&(B=a.inverseMass/A,a.constraintImpulse.x+=w.x*B,a.constraintImpulse.y+=w.y*B,a.position.x+=w.x*B,a.position.y+=w.y*B,M>0&&(a.positionPrev.x+=M*L.x*I*B,a.positionPrev.y+=M*L.y*I*B),R=r.cross(S,w)/T*e._torqueDampen*a.inverseInertia*(1-c.angularStiffness),a.constraintImpulse.angle+=R,a.angle+=R)}}},e.postSolveAll=function(c){for(var t=0;t<c.length;t++){var l=c[t],a=l.constraintImpulse;if(!(l.isStatic||a.x===0&&a.y===0&&a.angle===0)){n.set(l,!1);for(var v=0;v<l.parts.length;v++){var S=l.parts[v];s.translate(S.vertices,a),v>0&&(S.position.x+=a.x,S.position.y+=a.y),a.angle!==0&&(s.rotate(S.vertices,a.angle,l.position),i.rotate(S.axes,a.angle),v>0&&r.rotateAbout(S.position,a.angle,l.position,S.position)),o.update(S.bounds,S.vertices,l.velocity)}a.angle*=e._warming,a.x*=e._warming,a.y*=e._warming}}},e.pointAWorld=function(c){return{x:(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),y:(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0)}},e.pointBWorld=function(c){return{x:(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),y:(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0)}},e.currentLength=function(c){var t=(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),l=(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0),a=(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),v=(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0),S=t-a,b=l-v;return Math.sqrt(S*S+b*b)}})()},function(d,x,f){var e={};d.exports=e;var s=f(2),r=f(0);(function(){e.fromVertices=function(n){for(var o={},i=0;i<n.length;i++){var u=(i+1)%n.length,c=s.normalise({x:n[u].y-n[i].y,y:n[i].x-n[u].x}),t=c.y===0?1/0:c.x/c.y;t=t.toFixed(3).toString(),o[t]=c}return r.values(o)},e.rotate=function(n,o){if(o!==0)for(var i=Math.cos(o),u=Math.sin(o),c=0;c<n.length;c++){var t=n[c],l;l=t.x*i-t.y*u,t.y=t.x*u+t.y*i,t.x=l}}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(0),n=f(4),o=f(1),i=f(2);(function(){e.rectangle=function(u,c,t,l,a){a=a||{};var v={label:"Rectangle Body",position:{x:u,y:c},vertices:s.fromPath("L 0 0 L "+t+" 0 L "+t+" "+l+" L 0 "+l)};if(a.chamfer){var S=a.chamfer;v.vertices=s.chamfer(v.vertices,S.radius,S.quality,S.qualityMin,S.qualityMax),delete a.chamfer}return n.create(r.extend({},v,a))},e.trapezoid=function(u,c,t,l,a,v){v=v||{},a>=1&&r.warn("Bodies.trapezoid: slope parameter must be < 1."),a*=.5;var S=(1-a*2)*t,b=t*a,k=b+S,E=k+b,g;a<.5?g="L 0 0 L "+b+" "+-l+" L "+k+" "+-l+" L "+E+" 0":g="L 0 0 L "+k+" "+-l+" L "+E+" 0";var C={label:"Trapezoid Body",position:{x:u,y:c},vertices:s.fromPath(g)};if(v.chamfer){var y=v.chamfer;C.vertices=s.chamfer(C.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete v.chamfer}return n.create(r.extend({},C,v))},e.circle=function(u,c,t,l,a){l=l||{};var v={label:"Circle Body",circleRadius:t};a=a||25;var S=Math.ceil(Math.max(10,Math.min(a,t)));return S%2===1&&(S+=1),e.polygon(u,c,S,t,r.extend({},v,l))},e.polygon=function(u,c,t,l,a){if(a=a||{},t<3)return e.circle(u,c,l,a);for(var v=2*Math.PI/t,S="",b=v*.5,k=0;k<t;k+=1){var E=b+k*v,g=Math.cos(E)*l,C=Math.sin(E)*l;S+="L "+g.toFixed(3)+" "+C.toFixed(3)+" "}var y={label:"Polygon Body",position:{x:u,y:c},vertices:s.fromPath(S)};if(a.chamfer){var p=a.chamfer;y.vertices=s.chamfer(y.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete a.chamfer}return n.create(r.extend({},y,a))},e.fromVertices=function(u,c,t,l,a,v,S,b){var k=r.getDecomp(),E,g,C,y,p,M,w,A,P,T,R;for(E=!!(k&&k.quickDecomp),l=l||{},C=[],a=typeof a<"u"?a:!1,v=typeof v<"u"?v:.01,S=typeof S<"u"?S:10,b=typeof b<"u"?b:.01,r.isArray(t[0])||(t=[t]),T=0;T<t.length;T+=1)if(M=t[T],y=s.isConvex(M),p=!y,p&&!E&&r.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),y||!E)y?M=s.clockwiseSort(M):M=s.hull(M),C.push({position:{x:u,y:c},vertices:M});else{var B=M.map(function(F){return[F.x,F.y]});k.makeCCW(B),v!==!1&&k.removeCollinearPoints(B,v),b!==!1&&k.removeDuplicatePoints&&k.removeDuplicatePoints(B,b);var L=k.quickDecomp(B);for(w=0;w<L.length;w++){var I=L[w],V=I.map(function(F){return{x:F[0],y:F[1]}});S>0&&s.area(V)<S||C.push({position:s.centre(V),vertices:V})}}for(w=0;w<C.length;w++)C[w]=n.create(r.extend(C[w],l));if(a){var D=5;for(w=0;w<C.length;w++){var W=C[w];for(A=w+1;A<C.length;A++){var _=C[A];if(o.overlaps(W.bounds,_.bounds)){var z=W.vertices,J=_.vertices;for(P=0;P<W.vertices.length;P++)for(R=0;R<_.vertices.length;R++){var N=i.magnitudeSquared(i.sub(z[(P+1)%z.length],J[R])),U=i.magnitudeSquared(i.sub(z[P],J[(R+1)%J.length]));N<D&&U<D&&(z[P].isInternal=!0,J[R].isInternal=!0)}}}}}return C.length>1?(g=n.create(r.extend({parts:C.slice(0)},l)),n.setPosition(g,{x:u,y:c}),g):C[0]}})()},function(d,x,f){var e={};d.exports=e;var s=f(0),r=f(8);(function(){e.create=function(n){var o={bodies:[],collisions:[],pairs:null};return s.extend(o,n)},e.setBodies=function(n,o){n.bodies=o.slice(0)},e.clear=function(n){n.bodies=[],n.collisions=[]},e.collisions=function(n){var o=n.pairs,i=n.bodies,u=i.length,c=e.canCollide,t=r.collides,l=n.collisions,a=0,v,S;for(i.sort(e._compareBoundsX),v=0;v<u;v++){var b=i[v],k=b.bounds,E=b.bounds.max.x,g=b.bounds.max.y,C=b.bounds.min.y,y=b.isStatic||b.isSleeping,p=b.parts.length,M=p===1;for(S=v+1;S<u;S++){var w=i[S],A=w.bounds;if(A.min.x>E)break;if(!(g<A.min.y||C>A.max.y)&&!(y&&(w.isStatic||w.isSleeping))&&c(b.collisionFilter,w.collisionFilter)){var P=w.parts.length;if(M&&P===1){var T=t(b,w,o);T&&(l[a++]=T)}else for(var R=p>1?1:0,B=P>1?1:0,L=R;L<p;L++)for(var I=b.parts[L],k=I.bounds,V=B;V<P;V++){var D=w.parts[V],A=D.bounds;if(!(k.min.x>A.max.x||k.max.x<A.min.x||k.max.y<A.min.y||k.min.y>A.max.y)){var T=t(I,D,o);T&&(l[a++]=T)}}}}}return l.length!==a&&(l.length=a),l},e.canCollide=function(n,o){return n.group===o.group&&n.group!==0?n.group>0:(n.mask&o.category)!==0&&(o.mask&n.category)!==0},e._compareBoundsX=function(n,o){return n.bounds.min.x-o.bounds.min.x}})()},function(d,x,f){var e={};d.exports=e;var s=f(0);(function(){e.create=function(r){var n={};return r||s.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=r||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=parseInt(n.element.getAttribute("data-pixel-ratio"),10)||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(o){var i=e._getRelativeMousePosition(o,n.element,n.pixelRatio),u=o.changedTouches;u&&(n.button=0,o.preventDefault()),n.absolute.x=i.x,n.absolute.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=o},n.mousedown=function(o){var i=e._getRelativeMousePosition(o,n.element,n.pixelRatio),u=o.changedTouches;u?(n.button=0,o.preventDefault()):n.button=o.button,n.absolute.x=i.x,n.absolute.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=o},n.mouseup=function(o){var i=e._getRelativeMousePosition(o,n.element,n.pixelRatio),u=o.changedTouches;u&&o.preventDefault(),n.button=-1,n.absolute.x=i.x,n.absolute.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=o},n.mousewheel=function(o){n.wheelDelta=Math.max(-1,Math.min(1,o.wheelDelta||-o.detail)),o.preventDefault(),n.sourceEvents.mousewheel=o},e.setElement(n,n.element),n},e.setElement=function(r,n){r.element=n,n.addEventListener("mousemove",r.mousemove,{passive:!0}),n.addEventListener("mousedown",r.mousedown,{passive:!0}),n.addEventListener("mouseup",r.mouseup,{passive:!0}),n.addEventListener("wheel",r.mousewheel,{passive:!1}),n.addEventListener("touchmove",r.mousemove,{passive:!1}),n.addEventListener("touchstart",r.mousedown,{passive:!1}),n.addEventListener("touchend",r.mouseup,{passive:!1})},e.clearSourceEvents=function(r){r.sourceEvents.mousemove=null,r.sourceEvents.mousedown=null,r.sourceEvents.mouseup=null,r.sourceEvents.mousewheel=null,r.wheelDelta=0},e.setOffset=function(r,n){r.offset.x=n.x,r.offset.y=n.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y},e.setScale=function(r,n){r.scale.x=n.x,r.scale.y=n.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y},e._getRelativeMousePosition=function(r,n,o){var i=n.getBoundingClientRect(),u=document.documentElement||document.body.parentNode||document.body,c=window.pageXOffset!==void 0?window.pageXOffset:u.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:u.scrollTop,l=r.changedTouches,a,v;return l?(a=l[0].pageX-i.left-c,v=l[0].pageY-i.top-t):(a=r.pageX-i.left-c,v=r.pageY-i.top-t),{x:a/(n.clientWidth/(n.width||n.clientWidth)*o),y:v/(n.clientHeight/(n.height||n.clientHeight)*o)}}})()},function(d,x,f){var e={};d.exports=e;var s=f(0);(function(){e._registry={},e.register=function(r){if(e.isPlugin(r)||s.warn("Plugin.register:",e.toString(r),"does not implement all required fields."),r.name in e._registry){var n=e._registry[r.name],o=e.versionParse(r.version).number,i=e.versionParse(n.version).number;o>i?(s.warn("Plugin.register:",e.toString(n),"was upgraded to",e.toString(r)),e._registry[r.name]=r):o<i?s.warn("Plugin.register:",e.toString(n),"can not be downgraded to",e.toString(r)):r!==n&&s.warn("Plugin.register:",e.toString(r),"is already registered to different plugin object")}else e._registry[r.name]=r;return r},e.resolve=function(r){return e._registry[e.dependencyParse(r).name]},e.toString=function(r){return typeof r=="string"?r:(r.name||"anonymous")+"@"+(r.version||r.range||"0.0.0")},e.isPlugin=function(r){return r&&r.name&&r.version&&r.install},e.isUsed=function(r,n){return r.used.indexOf(n)>-1},e.isFor=function(r,n){var o=r.for&&e.dependencyParse(r.for);return!r.for||n.name===o.name&&e.versionSatisfies(n.version,o.range)},e.use=function(r,n){if(r.uses=(r.uses||[]).concat(n||[]),r.uses.length===0){s.warn("Plugin.use:",e.toString(r),"does not specify any dependencies to install.");return}for(var o=e.dependencies(r),i=s.topologicalSort(o),u=[],c=0;c<i.length;c+=1)if(i[c]!==r.name){var t=e.resolve(i[c]);if(!t){u.push("❌ "+i[c]);continue}e.isUsed(r,t.name)||(e.isFor(t,r)||(s.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(r)+"."),t._warned=!0),t.install?t.install(r):(s.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(u.push("🔶 "+e.toString(t)),delete t._warned):u.push("✅ "+e.toString(t)),r.used.push(t.name))}u.length>0&&s.info(u.join("  "))},e.dependencies=function(r,n){var o=e.dependencyParse(r),i=o.name;if(n=n||{},!(i in n)){r=e.resolve(r)||r,n[i]=s.map(r.uses||[],function(c){e.isPlugin(c)&&e.register(c);var t=e.dependencyParse(c),l=e.resolve(c);return l&&!e.versionSatisfies(l.version,t.range)?(s.warn("Plugin.dependencies:",e.toString(l),"does not satisfy",e.toString(t),"used by",e.toString(o)+"."),l._warned=!0,r._warned=!0):l||(s.warn("Plugin.dependencies:",e.toString(c),"used by",e.toString(o),"could not be resolved."),r._warned=!0),t.name});for(var u=0;u<n[i].length;u+=1)e.dependencies(n[i][u],n);return n}},e.dependencyParse=function(r){if(s.isString(r)){var n=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return n.test(r)||s.warn("Plugin.dependencyParse:",r,"is not a valid dependency string."),{name:r.split("@")[0],range:r.split("@")[1]||"*"}}return{name:r.name,range:r.range||r.version}},e.versionParse=function(r){var n=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;n.test(r)||s.warn("Plugin.versionParse:",r,"is not a valid version or range.");var o=n.exec(r),i=Number(o[4]),u=Number(o[5]),c=Number(o[6]);return{isRange:!!(o[1]||o[2]),version:o[3],range:r,operator:o[1]||o[2]||"",major:i,minor:u,patch:c,parts:[i,u,c],prerelease:o[7],number:i*1e8+u*1e4+c}},e.versionSatisfies=function(r,n){n=n||"*";var o=e.versionParse(n),i=e.versionParse(r);if(o.isRange){if(o.operator==="*"||r==="*")return!0;if(o.operator===">")return i.number>o.number;if(o.operator===">=")return i.number>=o.number;if(o.operator==="~")return i.major===o.major&&i.minor===o.minor&&i.patch>=o.patch;if(o.operator==="^")return o.major>0?i.major===o.major&&i.number>=o.number:o.minor>0?i.minor===o.minor&&i.patch>=o.patch:i.patch===o.patch}return r===n||r==="*"}})()},function(d,x){var f={};d.exports=f,function(){f.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(d,x,f){var e={};d.exports=e;var s=f(7),r=f(18),n=f(13),o=f(19),i=f(5),u=f(6),c=f(10),t=f(0),l=f(4);(function(){e._deltaMax=1e3/60,e.create=function(a){a=a||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},S=t.extend(v,a);return S.world=a.world||u.create({label:"World"}),S.pairs=a.pairs||o.create(),S.detector=a.detector||n.create(),S.detector.pairs=S.pairs,S.grid={buckets:[]},S.world.gravity=S.gravity,S.broadphase=S.grid,S.metrics={},S},e.update=function(a,v){var S=t.now(),b=a.world,k=a.detector,E=a.pairs,g=a.timing,C=g.timestamp,y;v>e._deltaMax&&t.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",e._deltaMax.toFixed(3),"ms."),v=typeof v<"u"?v:t._baseDelta,v*=g.timeScale,g.timestamp+=v,g.lastDelta=v;var p={timestamp:g.timestamp,delta:v};i.trigger(a,"beforeUpdate",p);var M=u.allBodies(b),w=u.allConstraints(b);for(b.isModified&&(n.setBodies(k,M),u.setModified(b,!1,!1,!0)),a.enableSleeping&&s.update(M,v),e._bodiesApplyGravity(M,a.gravity),v>0&&e._bodiesUpdate(M,v),i.trigger(a,"beforeSolve",p),c.preSolveAll(M),y=0;y<a.constraintIterations;y++)c.solveAll(w,v);c.postSolveAll(M);var A=n.collisions(k);o.update(E,A,C),a.enableSleeping&&s.afterCollisions(E.list),E.collisionStart.length>0&&i.trigger(a,"collisionStart",{pairs:E.collisionStart,timestamp:g.timestamp,delta:v});var P=t.clamp(20/a.positionIterations,0,1);for(r.preSolvePosition(E.list),y=0;y<a.positionIterations;y++)r.solvePosition(E.list,v,P);for(r.postSolvePosition(M),c.preSolveAll(M),y=0;y<a.constraintIterations;y++)c.solveAll(w,v);for(c.postSolveAll(M),r.preSolveVelocity(E.list),y=0;y<a.velocityIterations;y++)r.solveVelocity(E.list,v);return e._bodiesUpdateVelocities(M),E.collisionActive.length>0&&i.trigger(a,"collisionActive",{pairs:E.collisionActive,timestamp:g.timestamp,delta:v}),E.collisionEnd.length>0&&i.trigger(a,"collisionEnd",{pairs:E.collisionEnd,timestamp:g.timestamp,delta:v}),e._bodiesClearForces(M),i.trigger(a,"afterUpdate",p),a.timing.lastElapsed=t.now()-S,a},e.merge=function(a,v){if(t.extend(a,v),v.world){a.world=v.world,e.clear(a);for(var S=u.allBodies(a.world),b=0;b<S.length;b++){var k=S[b];s.set(k,!1),k.id=t.nextId()}}},e.clear=function(a){o.clear(a.pairs),n.clear(a.detector)},e._bodiesClearForces=function(a){for(var v=a.length,S=0;S<v;S++){var b=a[S];b.force.x=0,b.force.y=0,b.torque=0}},e._bodiesApplyGravity=function(a,v){var S=typeof v.scale<"u"?v.scale:.001,b=a.length;if(!(v.x===0&&v.y===0||S===0))for(var k=0;k<b;k++){var E=a[k];E.isStatic||E.isSleeping||(E.force.y+=E.mass*v.y*S,E.force.x+=E.mass*v.x*S)}},e._bodiesUpdate=function(a,v){for(var S=a.length,b=0;b<S;b++){var k=a[b];k.isStatic||k.isSleeping||l.update(k,v)}},e._bodiesUpdateVelocities=function(a){for(var v=a.length,S=0;S<v;S++)l.updateVelocities(a[S])}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(0),n=f(1);(function(){e._restingThresh=2,e._restingThreshTangent=Math.sqrt(6),e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e._frictionMaxStatic=Number.MAX_VALUE,e.preSolvePosition=function(o){var i,u,c,t=o.length;for(i=0;i<t;i++)u=o[i],u.isActive&&(c=u.contactCount,u.collision.parentA.totalContacts+=c,u.collision.parentB.totalContacts+=c)},e.solvePosition=function(o,i,u){var c,t,l,a,v,S,b,k,E=e._positionDampen*(u||1),g=r.clamp(i/r._baseDelta,0,1),C=o.length;for(c=0;c<C;c++)t=o[c],!(!t.isActive||t.isSensor)&&(l=t.collision,a=l.parentA,v=l.parentB,S=l.normal,t.separation=l.depth+S.x*(v.positionImpulse.x-a.positionImpulse.x)+S.y*(v.positionImpulse.y-a.positionImpulse.y));for(c=0;c<C;c++)t=o[c],!(!t.isActive||t.isSensor)&&(l=t.collision,a=l.parentA,v=l.parentB,S=l.normal,k=t.separation-t.slop*g,(a.isStatic||v.isStatic)&&(k*=2),a.isStatic||a.isSleeping||(b=E/a.totalContacts,a.positionImpulse.x+=S.x*k*b,a.positionImpulse.y+=S.y*k*b),v.isStatic||v.isSleeping||(b=E/v.totalContacts,v.positionImpulse.x-=S.x*k*b,v.positionImpulse.y-=S.y*k*b))},e.postSolvePosition=function(o){for(var i=e._positionWarming,u=o.length,c=s.translate,t=n.update,l=0;l<u;l++){var a=o[l],v=a.positionImpulse,S=v.x,b=v.y,k=a.velocity;if(a.totalContacts=0,S!==0||b!==0){for(var E=0;E<a.parts.length;E++){var g=a.parts[E];c(g.vertices,v),t(g.bounds,g.vertices,k),g.position.x+=S,g.position.y+=b}a.positionPrev.x+=S,a.positionPrev.y+=b,S*k.x+b*k.y<0?(v.x=0,v.y=0):(v.x*=i,v.y*=i)}}},e.preSolveVelocity=function(o){var i=o.length,u,c;for(u=0;u<i;u++){var t=o[u];if(!(!t.isActive||t.isSensor)){var l=t.contacts,a=t.contactCount,v=t.collision,S=v.parentA,b=v.parentB,k=v.normal,E=v.tangent;for(c=0;c<a;c++){var g=l[c],C=g.vertex,y=g.normalImpulse,p=g.tangentImpulse;if(y!==0||p!==0){var M=k.x*y+E.x*p,w=k.y*y+E.y*p;S.isStatic||S.isSleeping||(S.positionPrev.x+=M*S.inverseMass,S.positionPrev.y+=w*S.inverseMass,S.anglePrev+=S.inverseInertia*((C.x-S.position.x)*w-(C.y-S.position.y)*M)),b.isStatic||b.isSleeping||(b.positionPrev.x-=M*b.inverseMass,b.positionPrev.y-=w*b.inverseMass,b.anglePrev-=b.inverseInertia*((C.x-b.position.x)*w-(C.y-b.position.y)*M))}}}}},e.solveVelocity=function(o,i){var u=i/r._baseDelta,c=u*u,t=c*u,l=-e._restingThresh*u,a=e._restingThreshTangent,v=e._frictionNormalMultiplier*u,S=e._frictionMaxStatic,b=o.length,k,E,g,C;for(g=0;g<b;g++){var y=o[g];if(!(!y.isActive||y.isSensor)){var p=y.collision,M=p.parentA,w=p.parentB,A=p.normal.x,P=p.normal.y,T=p.tangent.x,R=p.tangent.y,B=y.inverseMass,L=y.friction*y.frictionStatic*v,I=y.contacts,V=y.contactCount,D=1/V,W=M.position.x-M.positionPrev.x,_=M.position.y-M.positionPrev.y,z=M.angle-M.anglePrev,J=w.position.x-w.positionPrev.x,N=w.position.y-w.positionPrev.y,U=w.angle-w.anglePrev;for(C=0;C<V;C++){var F=I[C],O=F.vertex,G=O.x-M.position.x,H=O.y-M.position.y,Y=O.x-w.position.x,Q=O.y-w.position.y,Z=W-H*z,$=_+G*z,fe=J-Q*U,de=N+Y*U,Be=Z-fe,ce=$-de,le=A*Be+P*ce,ae=T*Be+R*ce,me=y.separation+le,he=Math.min(me,1);he=me<0?0:he;var pe=he*L;ae<-pe||ae>pe?(E=ae>0?ae:-ae,k=y.friction*(ae>0?1:-1)*t,k<-E?k=-E:k>E&&(k=E)):(k=ae,E=S);var It=G*P-H*A,Dt=Y*P-Q*A,Rt=D/(B+M.inverseInertia*It*It+w.inverseInertia*Dt*Dt),tt=(1+y.restitution)*le*Rt;if(k*=Rt,le<l)F.normalImpulse=0;else{var hn=F.normalImpulse;F.normalImpulse+=tt,F.normalImpulse>0&&(F.normalImpulse=0),tt=F.normalImpulse-hn}if(ae<-a||ae>a)F.tangentImpulse=0;else{var vn=F.tangentImpulse;F.tangentImpulse+=k,F.tangentImpulse<-E&&(F.tangentImpulse=-E),F.tangentImpulse>E&&(F.tangentImpulse=E),k=F.tangentImpulse-vn}var nt=A*tt+T*k,it=P*tt+R*k;M.isStatic||M.isSleeping||(M.positionPrev.x+=nt*M.inverseMass,M.positionPrev.y+=it*M.inverseMass,M.anglePrev+=(G*it-H*nt)*M.inverseInertia),w.isStatic||w.isSleeping||(w.positionPrev.x-=nt*w.inverseMass,w.positionPrev.y-=it*w.inverseMass,w.anglePrev-=(Y*it-Q*nt)*w.inverseInertia)}}}}})()},function(d,x,f){var e={};d.exports=e;var s=f(9),r=f(0);(function(){e.create=function(n){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},n)},e.update=function(n,o,i){var u=s.update,c=s.create,t=s.setActive,l=n.table,a=n.list,v=a.length,S=v,b=n.collisionStart,k=n.collisionEnd,E=n.collisionActive,g=o.length,C=0,y=0,p=0,M,w,A;for(A=0;A<g;A++)M=o[A],w=M.pair,w?(w.isActive&&(E[p++]=w),u(w,M,i)):(w=c(M,i),l[w.id]=w,b[C++]=w,a[S++]=w);for(S=0,v=a.length,A=0;A<v;A++)w=a[A],w.timeUpdated>=i?a[S++]=w:(t(w,!1,i),w.collision.bodyA.sleepCounter>0&&w.collision.bodyB.sleepCounter>0?a[S++]=w:(k[y++]=w,delete l[w.id]));a.length!==S&&(a.length=S),b.length!==C&&(b.length=C),k.length!==y&&(k.length=y),E.length!==p&&(E.length=p)},e.clear=function(n){return n.table={},n.list.length=0,n.collisionStart.length=0,n.collisionActive.length=0,n.collisionEnd.length=0,n}})()},function(d,x,f){var e=d.exports=f(21);e.Axes=f(11),e.Bodies=f(12),e.Body=f(4),e.Bounds=f(1),e.Collision=f(8),e.Common=f(0),e.Composite=f(6),e.Composites=f(22),e.Constraint=f(10),e.Contact=f(16),e.Detector=f(13),e.Engine=f(17),e.Events=f(5),e.Grid=f(23),e.Mouse=f(14),e.MouseConstraint=f(24),e.Pair=f(9),e.Pairs=f(19),e.Plugin=f(15),e.Query=f(25),e.Render=f(26),e.Resolver=f(18),e.Runner=f(27),e.SAT=f(28),e.Sleeping=f(7),e.Svg=f(29),e.Vector=f(2),e.Vertices=f(3),e.World=f(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(d,x,f){var e={};d.exports=e;var s=f(15),r=f(0);(function(){e.name="matter-js",e.version="0.20.0",e.uses=[],e.used=[],e.use=function(){s.use(e,Array.prototype.slice.call(arguments))},e.before=function(n,o){return n=n.replace(/^Matter./,""),r.chainPathBefore(e,n,o)},e.after=function(n,o){return n=n.replace(/^Matter./,""),r.chainPathAfter(e,n,o)}})()},function(d,x,f){var e={};d.exports=e;var s=f(6),r=f(10),n=f(0),o=f(4),i=f(12),u=n.deprecated;(function(){e.stack=function(c,t,l,a,v,S,b){for(var k=s.create({label:"Stack"}),E=c,g=t,C,y=0,p=0;p<a;p++){for(var M=0,w=0;w<l;w++){var A=b(E,g,w,p,C,y);if(A){var P=A.bounds.max.y-A.bounds.min.y,T=A.bounds.max.x-A.bounds.min.x;P>M&&(M=P),o.translate(A,{x:T*.5,y:P*.5}),E=A.bounds.max.x+v,s.addBody(k,A),C=A,y+=1}else E+=v}g+=M+S,E=c}return k},e.chain=function(c,t,l,a,v,S){for(var b=c.bodies,k=1;k<b.length;k++){var E=b[k-1],g=b[k],C=E.bounds.max.y-E.bounds.min.y,y=E.bounds.max.x-E.bounds.min.x,p=g.bounds.max.y-g.bounds.min.y,M=g.bounds.max.x-g.bounds.min.x,w={bodyA:E,pointA:{x:y*t,y:C*l},bodyB:g,pointB:{x:M*a,y:p*v}},A=n.extend(w,S);s.addConstraint(c,r.create(A))}return c.label+=" Chain",c},e.mesh=function(c,t,l,a,v){var S=c.bodies,b,k,E,g,C;for(b=0;b<l;b++){for(k=1;k<t;k++)E=S[k-1+b*t],g=S[k+b*t],s.addConstraint(c,r.create(n.extend({bodyA:E,bodyB:g},v)));if(b>0)for(k=0;k<t;k++)E=S[k+(b-1)*t],g=S[k+b*t],s.addConstraint(c,r.create(n.extend({bodyA:E,bodyB:g},v))),a&&k>0&&(C=S[k-1+(b-1)*t],s.addConstraint(c,r.create(n.extend({bodyA:C,bodyB:g},v)))),a&&k<t-1&&(C=S[k+1+(b-1)*t],s.addConstraint(c,r.create(n.extend({bodyA:C,bodyB:g},v))))}return c.label+=" Mesh",c},e.pyramid=function(c,t,l,a,v,S,b){return e.stack(c,t,l,a,v,S,function(k,E,g,C,y,p){var M=Math.min(a,Math.ceil(l/2)),w=y?y.bounds.max.x-y.bounds.min.x:0;if(!(C>M)){C=M-C;var A=C,P=l-1-C;if(!(g<A||g>P)){p===1&&o.translate(y,{x:(g+(l%2===1?1:-1))*w,y:0});var T=y?g*w:0;return b(c+T+g*v,E,g,C,y,p)}}})},e.newtonsCradle=function(c,t,l,a,v){for(var S=s.create({label:"Newtons Cradle"}),b=0;b<l;b++){var k=1.9,E=i.circle(c+b*(a*k),t+v,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),g=r.create({pointA:{x:c+b*(a*k),y:t},bodyB:E});s.addBody(S,E),s.addConstraint(S,g)}return S},u(e,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),e.car=function(c,t,l,a,v){var S=o.nextGroup(!0),b=20,k=-l*.5+b,E=l*.5-b,g=0,C=s.create({label:"Car"}),y=i.rectangle(c,t,l,a,{collisionFilter:{group:S},chamfer:{radius:a*.5},density:2e-4}),p=i.circle(c+k,t+g,v,{collisionFilter:{group:S},friction:.8}),M=i.circle(c+E,t+g,v,{collisionFilter:{group:S},friction:.8}),w=r.create({bodyB:y,pointB:{x:k,y:g},bodyA:p,stiffness:1,length:0}),A=r.create({bodyB:y,pointB:{x:E,y:g},bodyA:M,stiffness:1,length:0});return s.addBody(C,y),s.addBody(C,p),s.addBody(C,M),s.addConstraint(C,w),s.addConstraint(C,A),C},u(e,"car","Composites.car ➤ moved to car example"),e.softBody=function(c,t,l,a,v,S,b,k,E,g){E=n.extend({inertia:1/0},E),g=n.extend({stiffness:.2,render:{type:"line",anchors:!1}},g);var C=e.stack(c,t,l,a,v,S,function(y,p){return i.circle(y,p,k,E)});return e.mesh(C,l,a,b,g),C.label="Soft Body",C},u(e,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")})()},function(d,x,f){var e={};d.exports=e;var s=f(9),r=f(0),n=r.deprecated;(function(){e.create=function(o){var i={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return r.extend(i,o)},e.update=function(o,i,u,c){var t,l,a,v=u.world,S=o.buckets,b,k,E=!1;for(t=0;t<i.length;t++){var g=i[t];if(!(g.isSleeping&&!c)&&!(v.bounds&&(g.bounds.max.x<v.bounds.min.x||g.bounds.min.x>v.bounds.max.x||g.bounds.max.y<v.bounds.min.y||g.bounds.min.y>v.bounds.max.y))){var C=e._getRegion(o,g);if(!g.region||C.id!==g.region.id||c){(!g.region||c)&&(g.region=C);var y=e._regionUnion(C,g.region);for(l=y.startCol;l<=y.endCol;l++)for(a=y.startRow;a<=y.endRow;a++){k=e._getBucketId(l,a),b=S[k];var p=l>=C.startCol&&l<=C.endCol&&a>=C.startRow&&a<=C.endRow,M=l>=g.region.startCol&&l<=g.region.endCol&&a>=g.region.startRow&&a<=g.region.endRow;!p&&M&&M&&b&&e._bucketRemoveBody(o,b,g),(g.region===C||p&&!M||c)&&(b||(b=e._createBucket(S,k)),e._bucketAddBody(o,b,g))}g.region=C,E=!0}}}E&&(o.pairsList=e._createActivePairsList(o))},n(e,"update","Grid.update ➤ replaced by Matter.Detector"),e.clear=function(o){o.buckets={},o.pairs={},o.pairsList=[]},n(e,"clear","Grid.clear ➤ replaced by Matter.Detector"),e._regionUnion=function(o,i){var u=Math.min(o.startCol,i.startCol),c=Math.max(o.endCol,i.endCol),t=Math.min(o.startRow,i.startRow),l=Math.max(o.endRow,i.endRow);return e._createRegion(u,c,t,l)},e._getRegion=function(o,i){var u=i.bounds,c=Math.floor(u.min.x/o.bucketWidth),t=Math.floor(u.max.x/o.bucketWidth),l=Math.floor(u.min.y/o.bucketHeight),a=Math.floor(u.max.y/o.bucketHeight);return e._createRegion(c,t,l,a)},e._createRegion=function(o,i,u,c){return{id:o+","+i+","+u+","+c,startCol:o,endCol:i,startRow:u,endRow:c}},e._getBucketId=function(o,i){return"C"+o+"R"+i},e._createBucket=function(o,i){var u=o[i]=[];return u},e._bucketAddBody=function(o,i,u){var c=o.pairs,t=s.id,l=i.length,a;for(a=0;a<l;a++){var v=i[a];if(!(u.id===v.id||u.isStatic&&v.isStatic)){var S=t(u,v),b=c[S];b?b[2]+=1:c[S]=[u,v,1]}}i.push(u)},e._bucketRemoveBody=function(o,i,u){var c=o.pairs,t=s.id,l;i.splice(r.indexOf(i,u),1);var a=i.length;for(l=0;l<a;l++){var v=c[t(u,i[l])];v&&(v[2]-=1)}},e._createActivePairsList=function(o){var i,u=o.pairs,c=r.keys(u),t=c.length,l=[],a;for(a=0;a<t;a++)i=u[c[a]],i[2]>0?l.push(i):delete u[c[a]];return l}})()},function(d,x,f){var e={};d.exports=e;var s=f(3),r=f(7),n=f(14),o=f(5),i=f(13),u=f(10),c=f(6),t=f(0),l=f(1);(function(){e.create=function(a,v){var S=(a?a.mouse:null)||(v?v.mouse:null);S||(a&&a.render&&a.render.canvas?S=n.create(a.render.canvas):v&&v.element?S=n.create(v.element):(S=n.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var b=u.create({label:"Mouse Constraint",pointA:S.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),k={type:"mouseConstraint",mouse:S,element:null,body:null,constraint:b,collisionFilter:{category:1,mask:4294967295,group:0}},E=t.extend(k,v);return o.on(a,"beforeUpdate",function(){var g=c.allBodies(a.world);e.update(E,g),e._triggerEvents(E)}),E},e.update=function(a,v){var S=a.mouse,b=a.constraint,k=a.body;if(S.button===0){if(b.bodyB)r.set(b.bodyB,!1),b.pointA=S.position;else for(var E=0;E<v.length;E++)if(k=v[E],l.contains(k.bounds,S.position)&&i.canCollide(k.collisionFilter,a.collisionFilter))for(var g=k.parts.length>1?1:0;g<k.parts.length;g++){var C=k.parts[g];if(s.contains(C.vertices,S.position)){b.pointA=S.position,b.bodyB=a.body=k,b.pointB={x:S.position.x-k.position.x,y:S.position.y-k.position.y},b.angleB=k.angle,r.set(k,!1),o.trigger(a,"startdrag",{mouse:S,body:k});break}}}else b.bodyB=a.body=null,b.pointB=null,k&&o.trigger(a,"enddrag",{mouse:S,body:k})},e._triggerEvents=function(a){var v=a.mouse,S=v.sourceEvents;S.mousemove&&o.trigger(a,"mousemove",{mouse:v}),S.mousedown&&o.trigger(a,"mousedown",{mouse:v}),S.mouseup&&o.trigger(a,"mouseup",{mouse:v}),n.clearSourceEvents(v)}})()},function(d,x,f){var e={};d.exports=e;var s=f(2),r=f(8),n=f(1),o=f(12),i=f(3);(function(){e.collides=function(u,c){for(var t=[],l=c.length,a=u.bounds,v=r.collides,S=n.overlaps,b=0;b<l;b++){var k=c[b],E=k.parts.length,g=E===1?0:1;if(S(k.bounds,a))for(var C=g;C<E;C++){var y=k.parts[C];if(S(y.bounds,a)){var p=v(y,u);if(p){t.push(p);break}}}}return t},e.ray=function(u,c,t,l){l=l||1e-100;for(var a=s.angle(c,t),v=s.magnitude(s.sub(c,t)),S=(t.x+c.x)*.5,b=(t.y+c.y)*.5,k=o.rectangle(S,b,v,l,{angle:a}),E=e.collides(k,u),g=0;g<E.length;g+=1){var C=E[g];C.body=C.bodyB=C.bodyA}return E},e.region=function(u,c,t){for(var l=[],a=0;a<u.length;a++){var v=u[a],S=n.overlaps(v.bounds,c);(S&&!t||!S&&t)&&l.push(v)}return l},e.point=function(u,c){for(var t=[],l=0;l<u.length;l++){var a=u[l];if(n.contains(a.bounds,c))for(var v=a.parts.length===1?0:1;v<a.parts.length;v++){var S=a.parts[v];if(n.contains(S.bounds,c)&&i.contains(S.vertices,c)){t.push(a);break}}}return t}})()},function(d,x,f){var e={};d.exports=e;var s=f(4),r=f(0),n=f(6),o=f(1),i=f(5),u=f(2),c=f(14);(function(){var t,l;typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(g){window.setTimeout(function(){g(r.now())},1e3/60)},l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(g){var C={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!g.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},y=r.extend(C,g);return y.canvas&&(y.canvas.width=y.options.width||y.canvas.width,y.canvas.height=y.options.height||y.canvas.height),y.mouse=g.mouse,y.engine=g.engine,y.canvas=y.canvas||S(y.options.width,y.options.height),y.context=y.canvas.getContext("2d"),y.textures={},y.bounds=y.bounds||{min:{x:0,y:0},max:{x:y.canvas.width,y:y.canvas.height}},y.controller=e,y.options.showBroadphase=!1,y.options.pixelRatio!==1&&e.setPixelRatio(y,y.options.pixelRatio),r.isElement(y.element)&&y.element.appendChild(y.canvas),y},e.run=function(g){(function C(y){g.frameRequestId=t(C),a(g,y),e.world(g,y),g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0),(g.options.showStats||g.options.showDebug)&&e.stats(g,g.context,y),(g.options.showPerformance||g.options.showDebug)&&e.performance(g,g.context,y),g.context.setTransform(1,0,0,1,0,0)})()},e.stop=function(g){l(g.frameRequestId)},e.setPixelRatio=function(g,C){var y=g.options,p=g.canvas;C==="auto"&&(C=b(p)),y.pixelRatio=C,p.setAttribute("data-pixel-ratio",C),p.width=y.width*C,p.height=y.height*C,p.style.width=y.width+"px",p.style.height=y.height+"px"},e.setSize=function(g,C,y){g.options.width=C,g.options.height=y,g.bounds.max.x=g.bounds.min.x+C,g.bounds.max.y=g.bounds.min.y+y,g.options.pixelRatio!==1?e.setPixelRatio(g,g.options.pixelRatio):(g.canvas.width=C,g.canvas.height=y)},e.lookAt=function(g,C,y,p){p=typeof p<"u"?p:!0,C=r.isArray(C)?C:[C],y=y||{x:0,y:0};for(var M={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},w=0;w<C.length;w+=1){var A=C[w],P=A.bounds?A.bounds.min:A.min||A.position||A,T=A.bounds?A.bounds.max:A.max||A.position||A;P&&T&&(P.x<M.min.x&&(M.min.x=P.x),T.x>M.max.x&&(M.max.x=T.x),P.y<M.min.y&&(M.min.y=P.y),T.y>M.max.y&&(M.max.y=T.y))}var R=M.max.x-M.min.x+2*y.x,B=M.max.y-M.min.y+2*y.y,L=g.canvas.height,I=g.canvas.width,V=I/L,D=R/B,W=1,_=1;D>V?_=D/V:W=V/D,g.options.hasBounds=!0,g.bounds.min.x=M.min.x,g.bounds.max.x=M.min.x+R*W,g.bounds.min.y=M.min.y,g.bounds.max.y=M.min.y+B*_,p&&(g.bounds.min.x+=R*.5-R*W*.5,g.bounds.max.x+=R*.5-R*W*.5,g.bounds.min.y+=B*.5-B*_*.5,g.bounds.max.y+=B*.5-B*_*.5),g.bounds.min.x-=y.x,g.bounds.max.x-=y.x,g.bounds.min.y-=y.y,g.bounds.max.y-=y.y,g.mouse&&(c.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.canvas.width,y:(g.bounds.max.y-g.bounds.min.y)/g.canvas.height}),c.setOffset(g.mouse,g.bounds.min))},e.startViewTransform=function(g){var C=g.bounds.max.x-g.bounds.min.x,y=g.bounds.max.y-g.bounds.min.y,p=C/g.options.width,M=y/g.options.height;g.context.setTransform(g.options.pixelRatio/p,0,0,g.options.pixelRatio/M,0,0),g.context.translate(-g.bounds.min.x,-g.bounds.min.y)},e.endViewTransform=function(g){g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0)},e.world=function(g,C){var y=r.now(),p=g.engine,M=p.world,w=g.canvas,A=g.context,P=g.options,T=g.timing,R=n.allBodies(M),B=n.allConstraints(M),L=P.wireframes?P.wireframeBackground:P.background,I=[],V=[],D,W={timestamp:p.timing.timestamp};if(i.trigger(g,"beforeRender",W),g.currentBackground!==L&&E(g,L),A.globalCompositeOperation="source-in",A.fillStyle="transparent",A.fillRect(0,0,w.width,w.height),A.globalCompositeOperation="source-over",P.hasBounds){for(D=0;D<R.length;D++){var _=R[D];o.overlaps(_.bounds,g.bounds)&&I.push(_)}for(D=0;D<B.length;D++){var z=B[D],J=z.bodyA,N=z.bodyB,U=z.pointA,F=z.pointB;J&&(U=u.add(J.position,z.pointA)),N&&(F=u.add(N.position,z.pointB)),!(!U||!F)&&(o.contains(g.bounds,U)||o.contains(g.bounds,F))&&V.push(z)}e.startViewTransform(g),g.mouse&&(c.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.options.width,y:(g.bounds.max.y-g.bounds.min.y)/g.options.height}),c.setOffset(g.mouse,g.bounds.min))}else V=B,I=R,g.options.pixelRatio!==1&&g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0);!P.wireframes||p.enableSleeping&&P.showSleeping?e.bodies(g,I,A):(P.showConvexHulls&&e.bodyConvexHulls(g,I,A),e.bodyWireframes(g,I,A)),P.showBounds&&e.bodyBounds(g,I,A),(P.showAxes||P.showAngleIndicator)&&e.bodyAxes(g,I,A),P.showPositions&&e.bodyPositions(g,I,A),P.showVelocity&&e.bodyVelocity(g,I,A),P.showIds&&e.bodyIds(g,I,A),P.showSeparations&&e.separations(g,p.pairs.list,A),P.showCollisions&&e.collisions(g,p.pairs.list,A),P.showVertexNumbers&&e.vertexNumbers(g,I,A),P.showMousePosition&&e.mousePosition(g,g.mouse,A),e.constraints(V,A),P.hasBounds&&e.endViewTransform(g),i.trigger(g,"afterRender",W),T.lastElapsed=r.now()-y},e.stats=function(g,C,y){for(var p=g.engine,M=p.world,w=n.allBodies(M),A=0,P=55,T=44,R=0,B=0,L=0;L<w.length;L+=1)A+=w[L].parts.length;var I={Part:A,Body:w.length,Cons:n.allConstraints(M).length,Comp:n.allComposites(M).length,Pair:p.pairs.list.length};C.fillStyle="#0e0f19",C.fillRect(R,B,P*5.5,T),C.font="12px Arial",C.textBaseline="top",C.textAlign="right";for(var V in I){var D=I[V];C.fillStyle="#aaa",C.fillText(V,R+P,B+8),C.fillStyle="#eee",C.fillText(D,R+P,B+26),R+=P}},e.performance=function(g,C){var y=g.engine,p=g.timing,M=p.deltaHistory,w=p.elapsedHistory,A=p.timestampElapsedHistory,P=p.engineDeltaHistory,T=p.engineUpdatesHistory,R=p.engineElapsedHistory,B=y.timing.lastUpdatesPerFrame,L=y.timing.lastDelta,I=v(M),V=v(w),D=v(P),W=v(T),_=v(R),z=v(A),J=z/I||0,N=Math.round(I/L),U=1e3/I||0,F=4,O=12,G=60,H=34,Y=10,Q=69;C.fillStyle="#0e0f19",C.fillRect(0,50,O*5+G*6+22,H),e.status(C,Y,Q,G,F,M.length,Math.round(U)+" fps",U/e._goodFps,function(Z){return M[Z]/I-1}),e.status(C,Y+O+G,Q,G,F,P.length,L.toFixed(2)+" dt",e._goodDelta/L,function(Z){return P[Z]/D-1}),e.status(C,Y+(O+G)*2,Q,G,F,T.length,B+" upf",Math.pow(r.clamp(W/N||1,0,1),4),function(Z){return T[Z]/W-1}),e.status(C,Y+(O+G)*3,Q,G,F,R.length,_.toFixed(2)+" ut",1-B*_/e._goodFps,function(Z){return R[Z]/_-1}),e.status(C,Y+(O+G)*4,Q,G,F,w.length,V.toFixed(2)+" rt",1-V/e._goodFps,function(Z){return w[Z]/V-1}),e.status(C,Y+(O+G)*5,Q,G,F,A.length,J.toFixed(2)+" x",J*J*J,function(Z){return(A[Z]/M[Z]/J||0)-1})},e.status=function(g,C,y,p,M,w,A,P,T){g.strokeStyle="#888",g.fillStyle="#444",g.lineWidth=1,g.fillRect(C,y+7,p,1),g.beginPath(),g.moveTo(C,y+7-M*r.clamp(.4*T(0),-2,2));for(var R=0;R<p;R+=1)g.lineTo(C+R,y+7-(R<w?M*r.clamp(.4*T(R),-2,2):0));g.stroke(),g.fillStyle="hsl("+r.clamp(25+95*P,0,120)+",100%,60%)",g.fillRect(C,y-7,4,4),g.font="12px Arial",g.textBaseline="middle",g.textAlign="right",g.fillStyle="#eee",g.fillText(A,C+p,y-5)},e.constraints=function(g,C){for(var y=C,p=0;p<g.length;p++){var M=g[p];if(!(!M.render.visible||!M.pointA||!M.pointB)){var w=M.bodyA,A=M.bodyB,P,T;if(w?P=u.add(w.position,M.pointA):P=M.pointA,M.render.type==="pin")y.beginPath(),y.arc(P.x,P.y,3,0,2*Math.PI),y.closePath();else{if(A?T=u.add(A.position,M.pointB):T=M.pointB,y.beginPath(),y.moveTo(P.x,P.y),M.render.type==="spring")for(var R=u.sub(T,P),B=u.perp(u.normalise(R)),L=Math.ceil(r.clamp(M.length/5,12,20)),I,V=1;V<L;V+=1)I=V%2===0?1:-1,y.lineTo(P.x+R.x*(V/L)+B.x*I*4,P.y+R.y*(V/L)+B.y*I*4);y.lineTo(T.x,T.y)}M.render.lineWidth&&(y.lineWidth=M.render.lineWidth,y.strokeStyle=M.render.strokeStyle,y.stroke()),M.render.anchors&&(y.fillStyle=M.render.strokeStyle,y.beginPath(),y.arc(P.x,P.y,3,0,2*Math.PI),y.arc(T.x,T.y,3,0,2*Math.PI),y.closePath(),y.fill())}}},e.bodies=function(g,C,y){var p=y;g.engine;var M=g.options,w=M.showInternalEdges||!M.wireframes,A,P,T,R;for(T=0;T<C.length;T++)if(A=C[T],!!A.render.visible){for(R=A.parts.length>1?1:0;R<A.parts.length;R++)if(P=A.parts[R],!!P.render.visible){if(M.showSleeping&&A.isSleeping?p.globalAlpha=.5*P.render.opacity:P.render.opacity!==1&&(p.globalAlpha=P.render.opacity),P.render.sprite&&P.render.sprite.texture&&!M.wireframes){var B=P.render.sprite,L=k(g,B.texture);p.translate(P.position.x,P.position.y),p.rotate(P.angle),p.drawImage(L,L.width*-B.xOffset*B.xScale,L.height*-B.yOffset*B.yScale,L.width*B.xScale,L.height*B.yScale),p.rotate(-P.angle),p.translate(-P.position.x,-P.position.y)}else{if(P.circleRadius)p.beginPath(),p.arc(P.position.x,P.position.y,P.circleRadius,0,2*Math.PI);else{p.beginPath(),p.moveTo(P.vertices[0].x,P.vertices[0].y);for(var I=1;I<P.vertices.length;I++)!P.vertices[I-1].isInternal||w?p.lineTo(P.vertices[I].x,P.vertices[I].y):p.moveTo(P.vertices[I].x,P.vertices[I].y),P.vertices[I].isInternal&&!w&&p.moveTo(P.vertices[(I+1)%P.vertices.length].x,P.vertices[(I+1)%P.vertices.length].y);p.lineTo(P.vertices[0].x,P.vertices[0].y),p.closePath()}M.wireframes?(p.lineWidth=1,p.strokeStyle=g.options.wireframeStrokeStyle,p.stroke()):(p.fillStyle=P.render.fillStyle,P.render.lineWidth&&(p.lineWidth=P.render.lineWidth,p.strokeStyle=P.render.strokeStyle,p.stroke()),p.fill())}p.globalAlpha=1}}},e.bodyWireframes=function(g,C,y){var p=y,M=g.options.showInternalEdges,w,A,P,T,R;for(p.beginPath(),P=0;P<C.length;P++)if(w=C[P],!!w.render.visible)for(R=w.parts.length>1?1:0;R<w.parts.length;R++){for(A=w.parts[R],p.moveTo(A.vertices[0].x,A.vertices[0].y),T=1;T<A.vertices.length;T++)!A.vertices[T-1].isInternal||M?p.lineTo(A.vertices[T].x,A.vertices[T].y):p.moveTo(A.vertices[T].x,A.vertices[T].y),A.vertices[T].isInternal&&!M&&p.moveTo(A.vertices[(T+1)%A.vertices.length].x,A.vertices[(T+1)%A.vertices.length].y);p.lineTo(A.vertices[0].x,A.vertices[0].y)}p.lineWidth=1,p.strokeStyle=g.options.wireframeStrokeStyle,p.stroke()},e.bodyConvexHulls=function(g,C,y){var p=y,M,w,A;for(p.beginPath(),w=0;w<C.length;w++)if(M=C[w],!(!M.render.visible||M.parts.length===1)){for(p.moveTo(M.vertices[0].x,M.vertices[0].y),A=1;A<M.vertices.length;A++)p.lineTo(M.vertices[A].x,M.vertices[A].y);p.lineTo(M.vertices[0].x,M.vertices[0].y)}p.lineWidth=1,p.strokeStyle="rgba(255,255,255,0.2)",p.stroke()},e.vertexNumbers=function(g,C,y){var p=y,M,w,A;for(M=0;M<C.length;M++){var P=C[M].parts;for(A=P.length>1?1:0;A<P.length;A++){var T=P[A];for(w=0;w<T.vertices.length;w++)p.fillStyle="rgba(255,255,255,0.2)",p.fillText(M+"_"+w,T.position.x+(T.vertices[w].x-T.position.x)*.8,T.position.y+(T.vertices[w].y-T.position.y)*.8)}}},e.mousePosition=function(g,C,y){var p=y;p.fillStyle="rgba(255,255,255,0.8)",p.fillText(C.position.x+"  "+C.position.y,C.position.x+5,C.position.y-5)},e.bodyBounds=function(g,C,y){var p=y;g.engine;var M=g.options;p.beginPath();for(var w=0;w<C.length;w++){var A=C[w];if(A.render.visible)for(var P=C[w].parts,T=P.length>1?1:0;T<P.length;T++){var R=P[T];p.rect(R.bounds.min.x,R.bounds.min.y,R.bounds.max.x-R.bounds.min.x,R.bounds.max.y-R.bounds.min.y)}}M.wireframes?p.strokeStyle="rgba(255,255,255,0.08)":p.strokeStyle="rgba(0,0,0,0.1)",p.lineWidth=1,p.stroke()},e.bodyAxes=function(g,C,y){var p=y;g.engine;var M=g.options,w,A,P,T;for(p.beginPath(),A=0;A<C.length;A++){var R=C[A],B=R.parts;if(R.render.visible)if(M.showAxes)for(P=B.length>1?1:0;P<B.length;P++)for(w=B[P],T=0;T<w.axes.length;T++){var L=w.axes[T];p.moveTo(w.position.x,w.position.y),p.lineTo(w.position.x+L.x*20,w.position.y+L.y*20)}else for(P=B.length>1?1:0;P<B.length;P++)for(w=B[P],T=0;T<w.axes.length;T++)p.moveTo(w.position.x,w.position.y),p.lineTo((w.vertices[0].x+w.vertices[w.vertices.length-1].x)/2,(w.vertices[0].y+w.vertices[w.vertices.length-1].y)/2)}M.wireframes?(p.strokeStyle="indianred",p.lineWidth=1):(p.strokeStyle="rgba(255, 255, 255, 0.4)",p.globalCompositeOperation="overlay",p.lineWidth=2),p.stroke(),p.globalCompositeOperation="source-over"},e.bodyPositions=function(g,C,y){var p=y;g.engine;var M=g.options,w,A,P,T;for(p.beginPath(),P=0;P<C.length;P++)if(w=C[P],!!w.render.visible)for(T=0;T<w.parts.length;T++)A=w.parts[T],p.arc(A.position.x,A.position.y,3,0,2*Math.PI,!1),p.closePath();for(M.wireframes?p.fillStyle="indianred":p.fillStyle="rgba(0,0,0,0.5)",p.fill(),p.beginPath(),P=0;P<C.length;P++)w=C[P],w.render.visible&&(p.arc(w.positionPrev.x,w.positionPrev.y,2,0,2*Math.PI,!1),p.closePath());p.fillStyle="rgba(255,165,0,0.8)",p.fill()},e.bodyVelocity=function(g,C,y){var p=y;p.beginPath();for(var M=0;M<C.length;M++){var w=C[M];if(w.render.visible){var A=s.getVelocity(w);p.moveTo(w.position.x,w.position.y),p.lineTo(w.position.x+A.x,w.position.y+A.y)}}p.lineWidth=3,p.strokeStyle="cornflowerblue",p.stroke()},e.bodyIds=function(g,C,y){var p=y,M,w;for(M=0;M<C.length;M++)if(C[M].render.visible){var A=C[M].parts;for(w=A.length>1?1:0;w<A.length;w++){var P=A[w];p.font="12px Arial",p.fillStyle="rgba(255,255,255,0.5)",p.fillText(P.id,P.position.x+10,P.position.y-10)}}},e.collisions=function(g,C,y){var p=y,M=g.options,w,A,P,T;for(p.beginPath(),P=0;P<C.length;P++)if(w=C[P],!!w.isActive)for(A=w.collision,T=0;T<w.contactCount;T++){var R=w.contacts[T],B=R.vertex;p.rect(B.x-1.5,B.y-1.5,3.5,3.5)}for(M.wireframes?p.fillStyle="rgba(255,255,255,0.7)":p.fillStyle="orange",p.fill(),p.beginPath(),P=0;P<C.length;P++)if(w=C[P],!!w.isActive&&(A=w.collision,w.contactCount>0)){var L=w.contacts[0].vertex.x,I=w.contacts[0].vertex.y;w.contactCount===2&&(L=(w.contacts[0].vertex.x+w.contacts[1].vertex.x)/2,I=(w.contacts[0].vertex.y+w.contacts[1].vertex.y)/2),A.bodyB===A.supports[0].body||A.bodyA.isStatic===!0?p.moveTo(L-A.normal.x*8,I-A.normal.y*8):p.moveTo(L+A.normal.x*8,I+A.normal.y*8),p.lineTo(L,I)}M.wireframes?p.strokeStyle="rgba(255,165,0,0.7)":p.strokeStyle="orange",p.lineWidth=1,p.stroke()},e.separations=function(g,C,y){var p=y,M=g.options,w,A,P,T,R;for(p.beginPath(),R=0;R<C.length;R++)if(w=C[R],!!w.isActive){A=w.collision,P=A.bodyA,T=A.bodyB;var B=1;!T.isStatic&&!P.isStatic&&(B=.5),T.isStatic&&(B=0),p.moveTo(T.position.x,T.position.y),p.lineTo(T.position.x-A.penetration.x*B,T.position.y-A.penetration.y*B),B=1,!T.isStatic&&!P.isStatic&&(B=.5),P.isStatic&&(B=0),p.moveTo(P.position.x,P.position.y),p.lineTo(P.position.x+A.penetration.x*B,P.position.y+A.penetration.y*B)}M.wireframes?p.strokeStyle="rgba(255,165,0,0.5)":p.strokeStyle="orange",p.stroke()},e.inspector=function(g,C){g.engine;var y=g.selected,p=g.render,M=p.options,w;if(M.hasBounds){var A=p.bounds.max.x-p.bounds.min.x,P=p.bounds.max.y-p.bounds.min.y,T=A/p.options.width,R=P/p.options.height;C.scale(1/T,1/R),C.translate(-p.bounds.min.x,-p.bounds.min.y)}for(var B=0;B<y.length;B++){var L=y[B].data;switch(C.translate(.5,.5),C.lineWidth=1,C.strokeStyle="rgba(255,165,0,0.9)",C.setLineDash([1,2]),L.type){case"body":w=L.bounds,C.beginPath(),C.rect(Math.floor(w.min.x-3),Math.floor(w.min.y-3),Math.floor(w.max.x-w.min.x+6),Math.floor(w.max.y-w.min.y+6)),C.closePath(),C.stroke();break;case"constraint":var I=L.pointA;L.bodyA&&(I=L.pointB),C.beginPath(),C.arc(I.x,I.y,10,0,2*Math.PI),C.closePath(),C.stroke();break}C.setLineDash([]),C.translate(-.5,-.5)}g.selectStart!==null&&(C.translate(.5,.5),C.lineWidth=1,C.strokeStyle="rgba(255,165,0,0.6)",C.fillStyle="rgba(255,165,0,0.1)",w=g.selectBounds,C.beginPath(),C.rect(Math.floor(w.min.x),Math.floor(w.min.y),Math.floor(w.max.x-w.min.x),Math.floor(w.max.y-w.min.y)),C.closePath(),C.stroke(),C.fill(),C.translate(-.5,-.5)),M.hasBounds&&C.setTransform(1,0,0,1,0,0)};var a=function(g,C){var y=g.engine,p=g.timing,M=p.historySize,w=y.timing.timestamp;p.delta=C-p.lastTime||e._goodDelta,p.lastTime=C,p.timestampElapsed=w-p.lastTimestamp||0,p.lastTimestamp=w,p.deltaHistory.unshift(p.delta),p.deltaHistory.length=Math.min(p.deltaHistory.length,M),p.engineDeltaHistory.unshift(y.timing.lastDelta),p.engineDeltaHistory.length=Math.min(p.engineDeltaHistory.length,M),p.timestampElapsedHistory.unshift(p.timestampElapsed),p.timestampElapsedHistory.length=Math.min(p.timestampElapsedHistory.length,M),p.engineUpdatesHistory.unshift(y.timing.lastUpdatesPerFrame),p.engineUpdatesHistory.length=Math.min(p.engineUpdatesHistory.length,M),p.engineElapsedHistory.unshift(y.timing.lastElapsed),p.engineElapsedHistory.length=Math.min(p.engineElapsedHistory.length,M),p.elapsedHistory.unshift(p.lastElapsed),p.elapsedHistory.length=Math.min(p.elapsedHistory.length,M)},v=function(g){for(var C=0,y=0;y<g.length;y+=1)C+=g[y];return C/g.length||0},S=function(g,C){var y=document.createElement("canvas");return y.width=g,y.height=C,y.oncontextmenu=function(){return!1},y.onselectstart=function(){return!1},y},b=function(g){var C=g.getContext("2d"),y=window.devicePixelRatio||1,p=C.webkitBackingStorePixelRatio||C.mozBackingStorePixelRatio||C.msBackingStorePixelRatio||C.oBackingStorePixelRatio||C.backingStorePixelRatio||1;return y/p},k=function(g,C){var y=g.textures[C];return y||(y=g.textures[C]=new Image,y.src=C,y)},E=function(g,C){var y=C;/(jpg|gif|png)$/.test(C)&&(y="url("+C+")"),g.canvas.style.background=y,g.canvas.style.backgroundSize="contain",g.currentBackground=C}})()},function(d,x,f){var e={};d.exports=e;var s=f(5),r=f(17),n=f(0);(function(){e._maxFrameDelta=1e3/15,e._frameDeltaFallback=1e3/60,e._timeBufferMargin=1.5,e._elapsedNextEstimate=1,e._smoothingLowerBound=.1,e._smoothingUpperBound=.9,e.create=function(i){var u={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},c=n.extend(u,i);return c.fps=0,c},e.run=function(i,u){return i.timeBuffer=e._frameDeltaFallback,function c(t){i.frameRequestId=e._onNextFrame(i,c),t&&i.enabled&&e.tick(i,u,t)}(),i},e.tick=function(i,u,c){var t=n.now(),l=i.delta,a=0,v=c-i.timeLastTick;if((!v||!i.timeLastTick||v>Math.max(e._maxFrameDelta,i.maxFrameTime))&&(v=i.frameDelta||e._frameDeltaFallback),i.frameDeltaSmoothing){i.frameDeltaHistory.push(v),i.frameDeltaHistory=i.frameDeltaHistory.slice(-i.frameDeltaHistorySize);var S=i.frameDeltaHistory.slice(0).sort(),b=i.frameDeltaHistory.slice(S.length*e._smoothingLowerBound,S.length*e._smoothingUpperBound),k=o(b);v=k||v}i.frameDeltaSnapping&&(v=1e3/Math.round(1e3/v)),i.frameDelta=v,i.timeLastTick=c,i.timeBuffer+=i.frameDelta,i.timeBuffer=n.clamp(i.timeBuffer,0,i.frameDelta+l*e._timeBufferMargin),i.lastUpdatesDeferred=0;var E=i.maxUpdates||Math.ceil(i.maxFrameTime/l),g={timestamp:u.timing.timestamp};s.trigger(i,"beforeTick",g),s.trigger(i,"tick",g);for(var C=n.now();l>0&&i.timeBuffer>=l*e._timeBufferMargin;){s.trigger(i,"beforeUpdate",g),r.update(u,l),s.trigger(i,"afterUpdate",g),i.timeBuffer-=l,a+=1;var y=n.now()-t,p=n.now()-C,M=y+e._elapsedNextEstimate*p/a;if(a>=E||M>i.maxFrameTime){i.lastUpdatesDeferred=Math.round(Math.max(0,i.timeBuffer/l-e._timeBufferMargin));break}}u.timing.lastUpdatesPerFrame=a,s.trigger(i,"afterTick",g),i.frameDeltaHistory.length>=100&&(i.lastUpdatesDeferred&&Math.round(i.frameDelta/l)>E?n.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):i.lastUpdatesDeferred&&n.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof i.isFixed<"u"&&n.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(i.deltaMin||i.deltaMax)&&n.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),i.fps!==0&&n.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},e.stop=function(i){e._cancelNextFrame(i)},e._onNextFrame=function(i,u){if(typeof window<"u"&&window.requestAnimationFrame)i.frameRequestId=window.requestAnimationFrame(u);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return i.frameRequestId},e._cancelNextFrame=function(i){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(i.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var o=function(i){for(var u=0,c=i.length,t=0;t<c;t+=1)u+=i[t];return u/c||0}})()},function(d,x,f){var e={};d.exports=e;var s=f(8),r=f(0),n=r.deprecated;(function(){e.collides=function(o,i){return s.collides(o,i)},n(e,"collides","SAT.collides ➤ replaced by Collision.collides")})()},function(d,x,f){var e={};d.exports=e,f(1);var s=f(0);(function(){e.pathToVertices=function(r,n){typeof window<"u"&&!("SVGPathSeg"in window)&&s.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var o,i,u,c,t,l,a,v,S,b,k=[],E,g,C=0,y=0,p=0;n=n||15;var M=function(A,P,T){var R=T%2===1&&T>1;if(!S||A!=S.x||P!=S.y){S&&R?(E=S.x,g=S.y):(E=0,g=0);var B={x:E+A,y:g+P};(R||!S)&&(S=B),k.push(B),y=E+A,p=g+P}},w=function(A){var P=A.pathSegTypeAsLetter.toUpperCase();if(P!=="Z"){switch(P){case"M":case"L":case"T":case"C":case"S":case"Q":y=A.x,p=A.y;break;case"H":y=A.x;break;case"V":p=A.y;break}M(y,p,A.pathSegType)}};for(e._svgPathToAbsolute(r),u=r.getTotalLength(),l=[],o=0;o<r.pathSegList.numberOfItems;o+=1)l.push(r.pathSegList.getItem(o));for(a=l.concat();C<u;){if(b=r.getPathSegAtLength(C),t=l[b],t!=v){for(;a.length&&a[0]!=t;)w(a.shift());v=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":c=r.getPointAtLength(C),M(c.x,c.y,0);break}C+=n}for(o=0,i=a.length;o<i;++o)w(a[o]);return k},e._svgPathToAbsolute=function(r){for(var n,o,i,u,c,t,l=r.pathSegList,a=0,v=0,S=l.numberOfItems,b=0;b<S;++b){var k=l.getItem(b),E=k.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(E))"x"in k&&(a=k.x),"y"in k&&(v=k.y);else switch("x1"in k&&(i=a+k.x1),"x2"in k&&(c=a+k.x2),"y1"in k&&(u=v+k.y1),"y2"in k&&(t=v+k.y2),"x"in k&&(a+=k.x),"y"in k&&(v+=k.y),E){case"m":l.replaceItem(r.createSVGPathSegMovetoAbs(a,v),b);break;case"l":l.replaceItem(r.createSVGPathSegLinetoAbs(a,v),b);break;case"h":l.replaceItem(r.createSVGPathSegLinetoHorizontalAbs(a),b);break;case"v":l.replaceItem(r.createSVGPathSegLinetoVerticalAbs(v),b);break;case"c":l.replaceItem(r.createSVGPathSegCurvetoCubicAbs(a,v,i,u,c,t),b);break;case"s":l.replaceItem(r.createSVGPathSegCurvetoCubicSmoothAbs(a,v,c,t),b);break;case"q":l.replaceItem(r.createSVGPathSegCurvetoQuadraticAbs(a,v,i,u),b);break;case"t":l.replaceItem(r.createSVGPathSegCurvetoQuadraticSmoothAbs(a,v),b);break;case"a":l.replaceItem(r.createSVGPathSegArcAbs(a,v,k.r1,k.r2,k.angle,k.largeArcFlag,k.sweepFlag),b);break;case"z":case"Z":a=n,v=o;break}(E=="M"||E=="m")&&(n=a,o=v)}}})()},function(d,x,f){var e={};d.exports=e;var s=f(6);f(0),function(){e.create=s.create,e.add=s.add,e.remove=s.remove,e.clear=s.clear,e.addComposite=s.addComposite,e.addBody=s.addBody,e.addConstraint=s.addConstraint}()}])})})(rn);var Mn=rn.exports;const X=Cn(Mn),an=8,Ce=381+an,Ct=an/Ce,Je=330/Ce,on=51/Ce,ct=Je+on,Le=4.7625/Ce,Ue=17.5/Ce,Te=102/Ce,We=203/Ce,Ae=305/Ce,ln=15/Ce,Pe=Object.freeze(Object.defineProperty({__proto__:null,base:ct,disc:ln,ditchWidth:on,fifteen:Te,five:Ae,peg:Le,rimWidth:Ct,surface:Je,ten:We,twenty:Ue},Symbol.toStringTag,{value:"Module"})),Pn={blue:"#4477AA",red:"#EE6677",green:"#228833",yellow:"#CCBB44",cyan:"#66CCEE",purple:"#AA3377",gray:"#BBBBBB"},bn={black:"#000000",white:"#ffffff","gray-50":"rgb(247, 247, 247)","gray-100":"rgb(239, 239, 239)","gray-200":"rgb(223, 223, 223)","gray-300":"rgb(202, 202, 202)","gray-400":"rgb(168, 168, 168)","gray-500":"rgb(135, 135, 135)","gray-600":"rgb(109, 109, 109)","gray-700":"rgb(78, 78, 78)","gray-800":"rgb(55, 55, 55)","gray-900":"rgb(38, 38, 38)","gray-1000":"rgb(25, 25, 25)","pink-aa":"#FF24FF","pink-aaa":"#D100D1","teal-aa":"#00A3A3","teal-aaa":"#008080","red-aa":"#FE5F55","red-aaa":"#E91101","purple-aaa":"#564592"},st={category:Pn,color:bn,"":{"12px":"0.75rem","14px":"0.875rem","16px":"1rem","18px":"1.125rem","20px":"1.25rem","22px":"1.375rem","24px":"1.5rem","28px":"1.75rem","32px":"2rem","36px":"2.25rem","40px":"2.5rem","44px":"2.75rem","48px":"3rem","56px":"3.5rem","64px":"4rem","80px":"5rem","96px":"6rem","112px":"7rem","128px":"8rem"}},Me=1,rt=2,Ft=4,at=8,Vt=16,An=.9,kn=.05,En=.05,pt={player1:st.color["pink-aa"],player2:st.color["teal-aa"],active:st.color.black,vector:st.color.black};class Tn{constructor(){this.events={}}on(h,d){this.events[h]||(this.events[h]=[]),this.events[h].push(d)}emit(h,d){this.events[h]&&this.events[h].forEach(x=>x(d))}}function In(){const m=new Tn;let h,d,x,f,e,s,r,n,o,i,u=[],c,t;function l(){const N=X.Bodies.circle(e,e,e*Ue,{isStatic:!0,isSensor:!0,render:{visible:!1},label:"20"},64);X.World.add(d,[N])}function a(){const U=Math.max(2,e*.05),F=Ue*e+U/2-1,O=[];for(let G=0;G<16;G++){const H=G/16*2*Math.PI,Y=e+Math.cos(H)*F,Q=e+Math.sin(H)*F,Z=2*Math.PI*F/16,$=X.Bodies.rectangle(Y,Q,U,Z,{isStatic:!0,isSensor:!1,angle:H,render:{visible:!1},label:"trap 20",collisionFilter:{category:Ft,mask:Me}});O.push($)}X.World.add(d,O)}function v(){const U=Math.max(8,e*.2),F=ct*e+U/2-1,O=[];for(let G=0;G<32;G++){const H=G/32*2*Math.PI,Y=e+Math.cos(H)*F,Q=e+Math.sin(H)*F,Z=2*Math.PI*F/32,$=X.Bodies.rectangle(Y,Q,U,Z,{isStatic:!0,isSensor:!1,angle:H,render:{visible:!1},label:"trap rim",collisionFilter:{category:at,mask:Me}});O.push($)}X.World.add(d,O)}function S(){const U=Math.max(8,e*.1),F=Je*e-U/2+1,O=[];for(let G=0;G<32;G++){const H=G/32*2*Math.PI,Y=e+Math.cos(H)*F,Q=e+Math.sin(H)*F,Z=2*Math.PI*F/32,$=X.Bodies.rectangle(Y,Q,U,Z,{isStatic:!0,isSensor:!1,angle:H,render:{visible:!1},label:"trap surface",collisionFilter:{category:Vt,mask:Me}});O.push($)}X.World.add(d,O)}function b(){const N=[],U=Le*e;for(let F=0;F<8;F++){const O=.375+F/8*Math.PI*2,G=e+Math.cos(O)*e*Te,H=e+Math.sin(O)*e*Te,Y=X.Bodies.circle(G,H,U,{isStatic:!0,restitution:.9,render:{visible:!1},collisionFilter:{category:rt,mask:Me}});N.push(Y)}X.World.add(d,N)}function k(N){if(!t||!o)return;const U=t.circleRadius,F=X.Vector.normalise(o),O=t.position.x+F.x,G=t.position.y+F.y,H=t.position.x+o.x,Y=t.position.y+o.y,Q=t.position.x-o.x,Z=t.position.y-o.y;N.beginPath(),N.strokeStyle=pt.vector,N.lineWidth=2,N.moveTo(O,G),N.lineTo(H,Y),N.stroke();const $=e*.03,fe=Math.PI/4,de=Math.atan2(o.y,o.x);N.beginPath(),N.moveTo(H,Y),N.lineTo(H-$*Math.cos(de-fe),Y-$*Math.sin(de-fe)),N.moveTo(H,Y),N.lineTo(H-$*Math.cos(de+fe),Y-$*Math.sin(de+fe)),N.stroke();const Be=t.position.x-F.x*U,ce=t.position.y-F.y*U;N.setLineDash([5,5]),N.beginPath(),N.moveTo(Be,ce),N.lineTo(Q,Z),N.stroke(),N.setLineDash([]),N.closePath()}function E(){const N=f.context;i&&k(N)}function g(N){N.pairs.forEach(({bodyA:U,bodyB:F})=>{const O=U.label==="disc"?U:F.label==="disc"?F:null,G=U.label==="20"?U:F.label==="20"?F:null;if(O&&G&&!O.in20){const H=X.Vector.magnitude(X.Vector.sub(O.position,G.position)),Q=O.circleRadius*.75,Z=10,$=H<Q,fe=O.speed<Z;$&&fe&&(O.in20=!0,O.collisionFilter.mask=Me|rt|at|Ft,O.restitution=.4)}})}function C(N){N.pairs.forEach(({bodyA:U,bodyB:F})=>{const O=U.label==="disc"?U:F.label==="disc"?F:null,G=U.label==="disc"&&U.id!==O.id?U:F.label==="disc"&&F.id!==O.id?F:null,H=U.label==="trap rim"?U:F.label==="trap rim"?F:null;if(O&&H)O.frictionAir=.3,O.collisionFilter.mask=Me|rt|at|Vt;else if(O&&G){O.collided=!0,G.collided=!0;const Y=O.player!==G.player;O.collidedOpp=Y,G.collidedOpp=Y}})}function y({target:N,speed:U}){if(!t)return;const F={x:N.x-t.position.x,y:N.y-t.position.y},O=X.Vector.normalise(F);if(U){const G=U*s;n=X.Vector.mult(O,G)}else{const G=X.Vector.magnitude(F),H=Math.min(G,r),Y=H/r*s;n=X.Vector.mult(O,Y),o=X.Vector.mult(O,H)}}function p(N){const U={x:e,y:e},F=N.circleRadius,O=N.position,G=Math.sqrt(Math.pow(O.x-U.x,2)+Math.pow(O.y-U.y,2)),Y=[{r:e*Ue,score:20},{r:e*Te,score:15},{r:e*We,score:10},{r:e*Ae,score:5}].find(Q=>G+F<Q.r);return(Y==null?void 0:Y.score)||0}function M(N){const U={x:e,y:e},F=N.circleRadius,O=N.position,G=Math.sqrt(Math.pow(O.x-U.x,2)+Math.pow(O.y-U.y,2)),H=e*Te;if(G-F<H)return!0}function w(){if(u.every(U=>U.isSleeping)){u.forEach(H=>{H.score=p(H),H.intersect15=M(H)});const U=u.some(H=>H.player!==t.player),F=u.some(H=>H.collidedOpp),O=u.filter(H=>H.player===t.player).some(H=>H.intersect15);u.forEach(H=>{U.length?H.player===t.player?H.id===t.id?H.valid=F:H.valid=H.collided?F:!0:H.valid=!0:H.id===t.id?H.valid=H.collided?O:H.intersect15:H.valid=H.collided?O:!0,(!H.valid||!H.score)&&X.World.remove(d,H)}),u=u.filter(H=>H.score>0&&H.valid);const G=u.map(H=>({player:H.player,score:H.score}));u.forEach(H=>{H.score===20&&X.World.remove(d,H)}),u=u.filter(H=>H.score!==20),t=null,u.forEach(H=>{H.valid=void 0,H.collided=void 0,H.collidedOpp=void 0,H.intersect15=void 0,H.in20=void 0}),m.emit("shotComplete",G),_("idle")}}function A(){X.Composite.clear(d,!1),X.Events.off(h),X.Render.stop(f),f.canvas.remove(),f.context=null,f.textures={},X.Runner.stop(x)}function P(N){u.forEach(U=>{const F=e/N,O=U.position.x*F,G=U.position.y*F;X.Body.setPosition(U,{x:O,y:G}),X.Body.scale(U,F,F),X.World.add(d,U)})}function T(){u.forEach(N=>{X.World.remove(d,N)}),u=[],t=null,i=!1,o=void 0,n=void 0}function R(N={}){const U=N.player||"player1",F=N.state||"place",O=N.x?N.x*e*2:e,G=N.y?N.y*e*2:U==="player1"?e+e*Ae:e-e*Ae,H=e*ln,Y=kn,Q=An,Z=En,$=X.Bodies.circle(O,G,H,{density:Y,restitution:Q,frictionAir:Z,render:{fillStyle:pt[U],strokeStyle:pt.active},label:"disc",collisionFilter:{category:Me,mask:Me|rt|at},sleepThreshold:60,isSleeping:!0},64);$.player=U,u.push($),t=$,X.Events.on($,"sleepStart",w),X.World.add(d,$),s=t.mass*e*7e-4,_(F)}function B(N){if(!(!t||c==="idle"||c==="play")){if(c==="place"){const F=[43,137],O=e*Ae;let G=N.x-e;G=Math.max(-O,Math.min(O,G));const H=t.player==="player1",Y=H?-1:1,Q=F[H?0:1]*Y*-1,Z=F[H?1:0]*Y*-1,$=e-Math.sqrt(Math.max(0,Math.pow(O,2)-Math.pow(G,2)))*Y,fe={x:e+G,y:$},de={x:e,y:e},ce=X.Vector.angle(de,fe)*180/Math.PI;if(ce>Q&&ce<Z)X.Body.setPosition(t,fe);else if(ce<=Q){const le=Q*Math.PI/180,ae=Math.cos(le)*O,me=Math.sin(le)*O,he=e+ae,pe=e+me;X.Body.setPosition(t,{x:he,y:pe})}else if(ce>=Z){const le=Z*Math.PI/180,ae=Math.cos(le)*O,me=Math.sin(le)*O,he=e+ae,pe=e+me;X.Body.setPosition(t,{x:he,y:pe})}}else if(c==="aim")console.log(N);else if(c==="shoot"){z(!0);const U=t.position.x-N.x,F=t.position.y-N.y,O=t.position.x+U,G=t.position.y+F;y({target:{x:O,y:G}})}}}function L(N){if(!t||c!=="place")return;const U=2,F=[45-U,135+U],O=e*Ae;let G=N-e;G=Math.max(-O,Math.min(O,G));const H=t.player==="player1",Y=H?-1:1,Q=F[H?0:1]*Y*-1,Z=F[H?1:0]*Y*-1,$=e-Math.sqrt(Math.max(0,Math.pow(O,2)-Math.pow(G,2)))*Y,fe={x:e+G,y:$},de={x:e,y:e},ce=X.Vector.angle(de,fe)*180/Math.PI;if(ce>Q&&ce<Z)X.Body.setPosition(t,fe);else if(ce<=Q){const le=Q*Math.PI/180,ae=Math.cos(le)*O,me=Math.sin(le)*O,he=e+ae,pe=e+me;X.Body.setPosition(t,{x:he,y:pe})}else if(ce>=Z){const le=Z*Math.PI/180,ae=Math.cos(le)*O,me=Math.sin(le)*O,he=e+ae,pe=e+me;X.Body.setPosition(t,{x:he,y:pe})}}function I({degrees:N,speed:U}){const F=(N-90)*Math.PI/180,O=t.position.x+Math.cos(F),G=t.position.y+Math.sin(F);return{x:t.position.x+(O-t.position.x)*U,y:t.position.y+(G-t.position.y)*U}}function V({degrees:N,power:U}){if(!t||!["aim","shoot"].includes(c))return;z(!0);const F=U*r,O=I({degrees:N,speed:F});y({target:O})}function D(){!t||c!=="shoot"||(_("play"),z(!1),X.Body.applyForce(t,t.position,n))}function W(){!t||c!=="shoot"||D()}function _(N){c=N}function z(N){i=N}function J({element:N,width:U}){let F;h?(A(),F=e):_("idle");const O=U;e=U/2,r=e*.2,h=X.Engine.create({enableSleeping:!0}),d=h.world,h.gravity.y=0,x=X.Runner.create(),f=X.Render.create({element:N,engine:h,options:{width:U,height:O,wireframes:!1,pixelRatio:"auto",background:"transparent",hasBounds:!0,showSleeping:!1}}),P(F),l(),b(),a(),v(),S(),X.Events.on(f,"afterRender",E),X.Runner.run(x,h),X.Render.run(f),X.Events.on(h,"collisionActive",g),X.Events.on(h,"collisionStart",C),u.length||m.emit("ready")}return{removeDiscs:T,addDisc:R,placeDisc:L,aimDisc:V,drag:B,release:W,flickDisc:D,setState:_,setIndicatorVisible:z,init:J,on:(N,U)=>m.on(N,U)}}function ft(m){return Object.keys(m).reduce((h,d)=>m[d]===void 0?h:h+`${d}:${m[d]};`,"")}function xt(m){return m?!0:void 0}ft({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function Ot(m){function h(d){return d(m),()=>{}}return{subscribe:h}}function yt(m){if(!fn)return null;const h=document.querySelector(`[data-melt-id="${m}"]`);return Ze(h)?h:null}const Ke=m=>new Proxy(m,{get(h,d,x){return Reflect.get(h,d,x)},ownKeys(h){return Reflect.ownKeys(h).filter(d=>d!=="action")}}),Lt=m=>typeof m=="function";Mt("empty");function Mt(m,h){const{stores:d,action:x,returned:f}=h??{},e=(()=>{if(d&&f)return gt(d,r=>{const n=f(r);if(Lt(n)){const o=(...i)=>Ke({...n(...i),[`data-melt-${m}`]:"",action:x??be});return o.action=x??be,o}return Ke({...n,[`data-melt-${m}`]:"",action:x??be})});{const r=f,n=r==null?void 0:r();if(Lt(n)){const o=(...i)=>Ke({...n(...i),[`data-melt-${m}`]:"",action:x??be});return o.action=x??be,Ot(o)}return Ot(Ke({...n,[`data-melt-${m}`]:"",action:x??be}))}})(),s=x??(()=>{});return s.subscribe=e.subscribe,s}function Wt(m,h){const{stores:d,returned:x,action:f}=h,{subscribe:e}=gt(d,r=>x(r).map(n=>Ke({...n,[`data-melt-${m}`]:"",action:f??be}))),s=f??(()=>{});return s.subscribe=e,s}function Dn(m){const h=e=>e?`${m}-${e}`:m,d=e=>`data-melt-${m}${e?`-${e}`:""}`,x=e=>`[data-melt-${m}${e?`-${e}`:""}]`;return{name:h,attribute:d,selector:x,getEl:e=>document.querySelector(x(e))}}const fn=typeof document<"u";function Ze(m){return m instanceof HTMLElement}function Rn(...m){return(...h)=>{for(const d of m)typeof d=="function"&&d(...h)}}function be(){}function He(m,h,d,x){const f=Array.isArray(h)?h:[h];return f.forEach(e=>m.addEventListener(e,d,x)),()=>{f.forEach(e=>m.removeEventListener(e,d,x))}}function Bn(m,h,d,x){const f=Array.isArray(h)?h:[h];if(typeof d=="function"){const e=Vn(s=>d(s));return f.forEach(s=>m.addEventListener(s,e,x)),()=>{f.forEach(s=>m.removeEventListener(s,e,x))}}return()=>void 0}function Fn(m){const h=m.currentTarget;if(!Ze(h))return null;const d=new CustomEvent(`m-${m.type}`,{detail:{originalEvent:m},cancelable:!0});return h.dispatchEvent(d),d}function Vn(m){return h=>{const d=Fn(h);if(!(d!=null&&d.defaultPrevented))return m(h)}}const On=m=>{try{gn(m)}catch{return m}};function cn(m,...h){const d={};for(const x of Object.keys(m))h.includes(x)||(d[x]=m[x]);return d}function Ee(m){return{...m,get:()=>mn(m)}}Ee.writable=function(m){const h=Oe(m);let d=m;return{subscribe:h.subscribe,set(x){h.set(x),d=x},update(x){const f=x(d);h.set(f),d=f},get(){return d}}};Ee.derived=function(m,h){const d=new Map,x=()=>{const e=Array.isArray(m)?m.map(s=>s.get()):m.get();return h(e)};return{get:x,subscribe:e=>{const s=[];return(Array.isArray(m)?m:[m]).forEach(n=>{s.push(n.subscribe(()=>{e(x())}))}),e(x()),d.set(e,s),()=>{const n=d.get(e);if(n)for(const o of n)o();d.delete(e)}}}};const Ln=(m,h)=>{const d=Ee(m),x=(e,s)=>{d.update(r=>{const n=e(r);let o=n;return h&&(o=h({curr:r,next:n})),s==null||s(o),o})};return{...d,update:x,set:e=>{x(()=>e)}}};let Wn="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Hn=(m=21)=>{let h="",d=m;for(;d--;)h+=Wn[Math.random()*64|0];return h};function Un(){return Hn(10)}function Nn(m){return m.reduce((h,d)=>(h[d]=Un(),h),{})}const ue={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};function Ht(m,h){let d;const x=gt(m,e=>{d==null||d(),d=h(e)}).subscribe(be),f=()=>{x(),d==null||d()};return On(f),f}function Gn(m){const h={};return Object.keys(m).forEach(d=>{const x=d,f=m[x];h[x]=Ee(Oe(f))}),h}function St(m,h,d,x){const f=(m-(isNaN(h)?0:h))%x;let e=Math.abs(f)*2>=x?m+Math.sign(f)*(x-Math.abs(f)):m-f;isNaN(h)?!isNaN(d)&&e>d&&(e=Math.floor(d/x)*x):e<h?e=h:!isNaN(d)&&e>d&&(e=h+Math.floor((d-h)/x)*x);const s=x.toString(),r=s.indexOf("."),n=r>=0?s.length-r:0;if(n>0){const o=Math.pow(10,n);e=Math.round(e*o)/o}return e}Qe(void 0,m=>{function h(x){m(x),m(void 0)}return He(document,"pointerup",h,{passive:!1,capture:!0})});Qe(void 0,m=>{function h(x){x&&x.key===ue.ESCAPE&&m(x),m(void 0)}return He(document,"keydown",h,{passive:!1})});Qe(!1),Qe(!1),Qe(void 0);const zn={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...cn(zn,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const _n={defaultValue:[],min:0,max:100,step:1,orientation:"horizontal",dir:"ltr",disabled:!1},{name:ot}=Dn("slider"),Xn=m=>{const h={..._n,...m},d=Gn(cn(h,"value","onValueChange","defaultValue")),{min:x,max:f,step:e,orientation:s,dir:r,disabled:n}=d,o=h.value??Oe(h.defaultValue),i=Ln(o,h==null?void 0:h.onValueChange),u=Ee(Oe(!1)),c=Ee(Oe(0)),t=Ee(Oe(null)),l=Nn(["root"]),a=(y,p)=>{i.update(M=>{if(!M)return[y];if(M[p]===y)return M;const w=[...M],A=w[p]>y?-1:1;function P(){w[p]=w[p+A],w[p+A]=y;const L=v();L&&(L[p+A].focus(),t.set({thumb:L[p+A],index:p+A}))}if(A===-1&&y<w[p-1])return P(),w;if(A===1&&y>w[p+1])return P(),w;const T=x.get(),R=f.get(),B=e.get();return w[p]=St(y,T,R,B),w})},v=()=>{const y=yt(l.root);return y?Array.from(y.querySelectorAll('[data-melt-part="thumb"]')).filter(p=>Ze(p)):null},S=gt([x,f],([y,p])=>M=>(M-y)/(p-y)*100),b=Ee.derived([s,r],([y,p])=>y==="horizontal"?p==="rtl"?"rl":"lr":p==="rtl"?"tb":"bt"),k=Mt(ot(),{stores:[n,s,r],returned:([y,p,M])=>({dir:M,disabled:xt(y),"data-disabled":xt(y),"data-orientation":p,style:y?void 0:`touch-action: ${p==="horizontal"?"pan-y":"pan-x"}`,"data-melt-id":l.root})}),E=Mt(ot("range"),{stores:[i,b,S],returned:([y,p,M])=>{const w=y.length>1?M(Math.min(...y)??0):0,A=100-M(Math.max(...y)??0),P={position:"absolute"};switch(p){case"lr":{P.left=`${w}%`,P.right=`${A}%`;break}case"rl":{P.right=`${w}%`,P.left=`${A}%`;break}case"bt":{P.bottom=`${w}%`,P.top=`${A}%`;break}case"tb":{P.top=`${w}%`,P.bottom=`${A}%`;break}}return{style:ft(P)}}}),g=Wt(ot("thumb"),{stores:[i,S,x,f,n,s,b],returned:([y,p,M,w,A,P,T])=>Array.from({length:y.length||1},(B,L)=>{c.get()<y.length&&c.update(_=>_+1);const V=y[L],D=`${p(V)}%`,W={position:"absolute"};switch(T){case"lr":{W.left=D,W.translate="-50% 0";break}case"rl":{W.right=D,W.translate="50% 0";break}case"bt":{W.bottom=D,W.translate="0 50%";break}case"tb":{W.top=D,W.translate="0 -50%";break}}return{role:"slider","aria-valuemin":M,"aria-valuemax":w,"aria-valuenow":V,"aria-disabled":xt(A),"aria-orientation":P,"data-melt-part":"thumb","data-value":V,style:ft(W),tabindex:A?-1:0}}),action:y=>({destroy:Bn(y,"keydown",M=>{if(n.get())return;const w=M.currentTarget;if(!Ze(w))return;const A=v();if(!(A!=null&&A.length))return;const P=A.indexOf(w);if(c.set(P),![ue.ARROW_LEFT,ue.ARROW_RIGHT,ue.ARROW_UP,ue.ARROW_DOWN,ue.HOME,ue.END].includes(M.key))return;M.preventDefault();const T=x.get(),R=f.get(),B=e.get(),L=i.get(),I=s.get(),V=b.get(),D=L[P];switch(M.key){case ue.HOME:{a(T,P);break}case ue.END:{a(R,P);break}case ue.ARROW_LEFT:{if(I!=="horizontal")break;M.metaKey?a(V==="rl"?R:T,P):V==="rl"&&D<R?a(D+B,P):V==="lr"&&D>T&&a(D-B,P);break}case ue.ARROW_RIGHT:{if(I!=="horizontal")break;M.metaKey?a(V==="rl"?T:R,P):V==="rl"&&D>T?a(D-B,P):V==="lr"&&D<R&&a(D+B,P);break}case ue.ARROW_UP:{M.metaKey?a(V==="tb"?T:R,P):V==="tb"&&D>T?a(D-B,P):V!=="tb"&&D<R&&a(D+B,P);break}case ue.ARROW_DOWN:{M.metaKey?a(V==="tb"?R:T,P):V==="tb"&&D<R?a(D+B,P):V!=="tb"&&D>T&&a(D-B,P);break}}})})}),C=Wt(ot("tick"),{stores:[i,x,f,e,b],returned:([y,p,M,w,A])=>{const P=M-p;let T=Math.ceil(P/w);return P%w==0&&T++,Array.from({length:T},(R,B)=>{const L=`${B*(w/(M-p))*100}%`,I=B===0,V=B===T-1,D=I?0:V?-100:-50,W={position:"absolute"};switch(A){case"lr":{W.left=L,W.translate=`${D}% 0`;break}case"rl":{W.right=L,W.translate=`${-D}% 0`;break}case"bt":{W.bottom=L,W.translate=`0 ${-D}%`;break}case"tb":{W.top=L,W.translate=`0 ${D}%`;break}}const _=p+B*w;return{"data-bounded":(y.length===1?_<=y[0]:y[0]<=_&&_<=y[y.length-1])?!0:void 0,"data-value":_,style:ft(W)}})}});return Ht([k,x,f,n,s,b,e],([y,p,M,w,A,P,T])=>{if(!fn||w)return;const R=(W,_,z,J)=>{const U=(W-z)/(J-z)*(M-p)+p;if(U<p)a(p,_);else if(U>M)a(M,_);else{const F=T,O=p,G=Math.floor((U-O)/F),H=O+G*F+F/2,Y=O+(G+1)*F+F/2,Q=U>=H&&U<Y?(G+1)*F+O:G*F+O;Q<=M&&a(Q,_)}},B=W=>{const _=v();if(!_)return;_.forEach(U=>U.blur());const z=_.map(U=>{if(A==="horizontal"){const{left:F,right:O}=U.getBoundingClientRect();return Math.abs(W.clientX-(F+O)/2)}else{const{top:F,bottom:O}=U.getBoundingClientRect();return Math.abs(W.clientY-(F+O)/2)}}),J=_[z.indexOf(Math.min(...z))],N=_.indexOf(J);return{thumb:J,index:N}},L=W=>{if(!u.get())return;W.preventDefault(),W.stopPropagation();const _=yt(y["data-melt-id"]),z=t.get();if(!_||!z)return;z.thumb.focus();const{left:J,right:N,top:U,bottom:F}=_.getBoundingClientRect();switch(P){case"lr":{R(W.clientX,z.index,J,N);break}case"rl":{R(W.clientX,z.index,N,J);break}case"bt":{R(W.clientY,z.index,F,U);break}case"tb":{R(W.clientY,z.index,U,F);break}}},I=W=>{if(W.button!==0)return;const _=yt(y["data-melt-id"]),z=B(W);if(!z||!_)return;const J=W.target;!Ze(J)||!_.contains(J)||(W.preventDefault(),t.set(z),z.thumb.focus(),u.set(!0),L(W))},V=()=>{u.set(!1)},D=Rn(He(document,"pointerdown",I),He(document,"pointerup",V),He(document,"pointerleave",V),He(document,"pointermove",L));return()=>{D()}}),Ht([e,x,f,i],function([p,M,w,A]){const P=R=>St(R,M,w,p)===R,T=R=>St(R,M,w,p);A.some(R=>!P(R))&&i.update(R=>R.map(T))}),{elements:{root:k,thumbs:g,range:E,ticks:C},states:{value:i},options:d}};function Yn(m,h){const d={};return h.forEach(x=>{d[x]={[`data-${m}-${x}`]:""}}),x=>d[x]}function Kn(){const m=sn();return h=>{const{originalEvent:d}=h.detail,{cancelable:x}=h,f=d.type;m(f,{originalEvent:d,currentTarget:d.currentTarget},{cancelable:x})||h.preventDefault()}}function Qn(m){const h={};for(const d in m){const x=m[d];x!==void 0&&(h[d]=x)}return h}function Zn(m){return function(h,d){if(d===void 0)return;const x=m[h];x&&x.set(d)}}function un(){return{NAME:"slider",PARTS:["root","input","range","thumb","tick"]}}function Jn(m){const{NAME:h,PARTS:d}=un(),x=Yn(h,d),f={...Xn(Qn(m)),getAttrs:x};return pn(h,f),{...f,updateOption:Zn(f.options)}}function dn(){const{NAME:m}=un();return xn(m)}const jn=m=>({builder:m&4,ticks:m&8,thumbs:m&16}),Ut=m=>({builder:m[2],ticks:m[3],thumbs:m[4]}),qn=m=>({builder:m&4,ticks:m&8,thumbs:m&16}),Nt=m=>({builder:m[2],ticks:m[3],thumbs:m[4]});function $n(m){let h,d,x,f;const e=m[19].default,s=ut(e,m,m[18],Ut);let r=[m[2],m[8]],n={};for(let o=0;o<r.length;o+=1)n=we(n,r[o]);return{c(){h=ne("span"),s&&s.c(),this.h()},l(o){h=ie(o,"SPAN",{});var i=re(h);s&&s.l(i),i.forEach(K),this.h()},h(){Ge(h,n)},m(o,i){ee(o,h,i),s&&s.m(h,null),m[20](h),d=!0,x||(f=bt(m[2].action(h)),x=!0)},p(o,i){s&&s.p&&(!d||i&262172)&&dt(s,e,o,o[18],d?vt(e,o[18],i,jn):ht(o[18]),Ut),Ge(h,n=Tt(r,[i&4&&o[2],i&256&&o[8]]))},i(o){d||(q(s,o),d=!0)},o(o){te(s,o),d=!1},d(o){o&&K(h),s&&s.d(o),m[20](null),x=!1,f()}}}function ei(m){let h;const d=m[19].default,x=ut(d,m,m[18],Nt);return{c(){x&&x.c()},l(f){x&&x.l(f)},m(f,e){x&&x.m(f,e),h=!0},p(f,e){x&&x.p&&(!h||e&262172)&&dt(x,d,f,f[18],h?vt(d,f[18],e,qn):ht(f[18]),Nt)},i(f){h||(q(x,f),h=!0)},o(f){te(x,f),h=!1},d(f){x&&x.d(f)}}}function ti(m){let h,d,x,f;const e=[ei,$n],s=[];function r(n,o){return n[1]?0:1}return h=r(m),d=s[h]=e[h](m),{c(){d.c(),x=ye()},l(n){d.l(n),x=ye()},m(n,o){s[h].m(n,o),ee(n,x,o),f=!0},p(n,[o]){let i=h;h=r(n),h===i?s[h].p(n,o):(Ie(),te(s[i],1,1,()=>{s[i]=null}),De(),d=s[h],d?d.p(n,o):(d=s[h]=e[h](n),d.c()),q(d,1),d.m(x.parentNode,x))},i(n){f||(q(d),f=!0)},o(n){te(d),f=!1},d(n){n&&K(x),s[h].d(n)}}}function ni(m,h,d){let x;const f=["disabled","min","max","step","orientation","dir","value","onValueChange","asChild","el"];let e=Ne(h,f),s,r,n,{$$slots:o={},$$scope:i}=h,{disabled:u=void 0}=h,{min:c=void 0}=h,{max:t=void 0}=h,{step:l=void 0}=h,{orientation:a=void 0}=h,{dir:v=void 0}=h,{value:S=void 0}=h,{onValueChange:b=void 0}=h,{asChild:k=!1}=h,{el:E=void 0}=h;const{elements:{root:g,ticks:C,thumbs:y},states:{value:p},updateOption:M,getAttrs:w}=Jn({disabled:u,dir:v,min:c,max:t,step:l,orientation:a,defaultValue:S,onValueChange:({next:T})=>(S!==T&&(b==null||b(T),d(9,S=T)),T)});lt(m,g,T=>d(17,s=T)),lt(m,C,T=>d(3,r=T)),lt(m,y,T=>d(4,n=T));const A=w("root");function P(T){Re[T?"unshift":"push"](()=>{E=T,d(0,E)})}return m.$$set=T=>{h=we(we({},h),Pt(T)),d(8,e=Ne(h,f)),"disabled"in T&&d(10,u=T.disabled),"min"in T&&d(11,c=T.min),"max"in T&&d(12,t=T.max),"step"in T&&d(13,l=T.step),"orientation"in T&&d(14,a=T.orientation),"dir"in T&&d(15,v=T.dir),"value"in T&&d(9,S=T.value),"onValueChange"in T&&d(16,b=T.onValueChange),"asChild"in T&&d(1,k=T.asChild),"el"in T&&d(0,E=T.el),"$$scope"in T&&d(18,i=T.$$scope)},m.$$.update=()=>{m.$$.dirty&512&&S!==void 0&&p.set(S),m.$$.dirty&1024&&M("disabled",u),m.$$.dirty&2048&&M("min",c),m.$$.dirty&4096&&M("max",t),m.$$.dirty&8192&&M("step",l),m.$$.dirty&16384&&M("orientation",a),m.$$.dirty&32768&&M("dir",v),m.$$.dirty&131072&&d(2,x=s),m.$$.dirty&4&&Object.assign(x,A)},[E,k,x,r,n,g,C,y,e,S,u,c,t,l,a,v,b,s,i,o,P]}class ii extends _e{constructor(h){super(),Xe(this,h,ni,ti,ze,{disabled:10,min:11,max:12,step:13,orientation:14,dir:15,value:9,onValueChange:16,asChild:1,el:0})}}const si=m=>({builder:m&4}),Gt=m=>({builder:m[2]});function ri(m){let h,d,x,f=[m[2],m[4]],e={};for(let s=0;s<f.length;s+=1)e=we(e,f[s]);return{c(){h=ne("span"),this.h()},l(s){h=ie(s,"SPAN",{}),re(h).forEach(K),this.h()},h(){Ge(h,e)},m(s,r){ee(s,h,r),m[8](h),d||(x=bt(m[2].action(h)),d=!0)},p(s,r){Ge(h,e=Tt(f,[r&4&&s[2],r&16&&s[4]]))},i:Se,o:Se,d(s){s&&K(h),m[8](null),d=!1,x()}}}function ai(m){let h;const d=m[7].default,x=ut(d,m,m[6],Gt);return{c(){x&&x.c()},l(f){x&&x.l(f)},m(f,e){x&&x.m(f,e),h=!0},p(f,e){x&&x.p&&(!h||e&68)&&dt(x,d,f,f[6],h?vt(d,f[6],e,si):ht(f[6]),Gt)},i(f){h||(q(x,f),h=!0)},o(f){te(x,f),h=!1},d(f){x&&x.d(f)}}}function oi(m){let h,d,x,f;const e=[ai,ri],s=[];function r(n,o){return n[1]?0:1}return h=r(m),d=s[h]=e[h](m),{c(){d.c(),x=ye()},l(n){d.l(n),x=ye()},m(n,o){s[h].m(n,o),ee(n,x,o),f=!0},p(n,[o]){let i=h;h=r(n),h===i?s[h].p(n,o):(Ie(),te(s[i],1,1,()=>{s[i]=null}),De(),d=s[h],d?d.p(n,o):(d=s[h]=e[h](n),d.c()),q(d,1),d.m(x.parentNode,x))},i(n){f||(q(d),f=!0)},o(n){te(d),f=!1},d(n){n&&K(x),s[h].d(n)}}}function li(m,h,d){let x;const f=["asChild","el"];let e=Ne(h,f),s,{$$slots:r={},$$scope:n}=h,{asChild:o=!1}=h,{el:i=void 0}=h;const{elements:{range:u},getAttrs:c}=dn();lt(m,u,a=>d(5,s=a));const t=c("range");function l(a){Re[a?"unshift":"push"](()=>{i=a,d(0,i)})}return m.$$set=a=>{h=we(we({},h),Pt(a)),d(4,e=Ne(h,f)),"asChild"in a&&d(1,o=a.asChild),"el"in a&&d(0,i=a.el),"$$scope"in a&&d(6,n=a.$$scope)},m.$$.update=()=>{m.$$.dirty&32&&d(2,x=s),m.$$.dirty&4&&Object.assign(x,t)},[i,o,x,u,e,s,n,r,l]}class fi extends _e{constructor(h){super(),Xe(this,h,li,oi,ze,{asChild:1,el:0})}}const ci=m=>({builder:m&4}),zt=m=>({builder:m[2]});function ui(m){let h,d,x,f=[m[2],m[4]],e={};for(let s=0;s<f.length;s+=1)e=we(e,f[s]);return{c(){h=ne("span"),this.h()},l(s){h=ie(s,"SPAN",{}),re(h).forEach(K),this.h()},h(){Ge(h,e)},m(s,r){ee(s,h,r),m[8](h),d||(x=[bt(m[2].action(h)),ke(h,"m-keydown",m[3])],d=!0)},p(s,r){Ge(h,e=Tt(f,[r&4&&s[2],r&16&&s[4]]))},i:Se,o:Se,d(s){s&&K(h),m[8](null),d=!1,At(x)}}}function di(m){let h;const d=m[7].default,x=ut(d,m,m[6],zt);return{c(){x&&x.c()},l(f){x&&x.l(f)},m(f,e){x&&x.m(f,e),h=!0},p(f,e){x&&x.p&&(!h||e&68)&&dt(x,d,f,f[6],h?vt(d,f[6],e,ci):ht(f[6]),zt)},i(f){h||(q(x,f),h=!0)},o(f){te(x,f),h=!1},d(f){x&&x.d(f)}}}function hi(m){let h,d,x,f;const e=[di,ui],s=[];function r(n,o){return n[1]?0:1}return h=r(m),d=s[h]=e[h](m),{c(){d.c(),x=ye()},l(n){d.l(n),x=ye()},m(n,o){s[h].m(n,o),ee(n,x,o),f=!0},p(n,[o]){let i=h;h=r(n),h===i?s[h].p(n,o):(Ie(),te(s[i],1,1,()=>{s[i]=null}),De(),d=s[h],d?d.p(n,o):(d=s[h]=e[h](n),d.c()),q(d,1),d.m(x.parentNode,x))},i(n){f||(q(d),f=!0)},o(n){te(d),f=!1},d(n){n&&K(x),s[h].d(n)}}}function vi(m,h,d){let x;const f=["asChild","el","thumb"];let e=Ne(h,f),{$$slots:s={},$$scope:r}=h,{asChild:n=!1}=h,{el:o=void 0}=h,{thumb:i}=h;const{getAttrs:u}=dn(),c=Kn(),t=u("thumb");function l(a){Re[a?"unshift":"push"](()=>{o=a,d(0,o)})}return m.$$set=a=>{h=we(we({},h),Pt(a)),d(4,e=Ne(h,f)),"asChild"in a&&d(1,n=a.asChild),"el"in a&&d(0,o=a.el),"thumb"in a&&d(5,i=a.thumb),"$$scope"in a&&d(6,r=a.$$scope)},m.$$.update=()=>{m.$$.dirty&32&&d(2,x=i),m.$$.dirty&4&&Object.assign(x,t)},[o,n,x,c,e,i,r,s,l]}class gi extends _e{constructor(h){super(),Xe(this,h,vi,hi,ze,{asChild:1,el:0,thumb:5})}}function _t(m,h,d){const x=m.slice();return x[6]=h[d],x}function Xt(m){let h,d;return h=new gi({props:{thumb:m[6]}}),{c(){je(h.$$.fragment)},l(x){qe(h.$$.fragment,x)},m(x,f){$e(h,x,f),d=!0},p(x,f){const e={};f&32&&(e.thumb=x[6]),h.$set(e)},i(x){d||(q(h.$$.fragment,x),d=!0)},o(x){te(h.$$.fragment,x),d=!1},d(x){et(h,x)}}}function mi(m){let h,d,x,f,e;d=new fi({});let s=xe(m[5]),r=[];for(let o=0;o<s.length;o+=1)r[o]=Xt(_t(m,s,o));const n=o=>te(r[o],1,1,()=>{r[o]=null});return{c(){h=ne("span"),je(d.$$.fragment),x=ve();for(let o=0;o<r.length;o+=1)r[o].c();f=ye(),this.h()},l(o){h=ie(o,"SPAN",{class:!0});var i=re(h);qe(d.$$.fragment,i),i.forEach(K),x=ge(o);for(let u=0;u<r.length;u+=1)r[u].l(o);f=ye(),this.h()},h(){oe(h,"class","bg svelte-i92862")},m(o,i){ee(o,h,i),$e(d,h,null),ee(o,x,i);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,i);ee(o,f,i),e=!0},p(o,i){if(i&32){s=xe(o[5]);let u;for(u=0;u<s.length;u+=1){const c=_t(o,s,u);r[u]?(r[u].p(c,i),q(r[u],1)):(r[u]=Xt(c),r[u].c(),q(r[u],1),r[u].m(f.parentNode,f))}for(Ie(),u=s.length;u<r.length;u+=1)n(u);De()}},i(o){if(!e){q(d.$$.fragment,o);for(let i=0;i<s.length;i+=1)q(r[i]);e=!0}},o(o){te(d.$$.fragment,o),r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)te(r[i]);e=!1},d(o){o&&(K(h),K(x),K(f)),et(d),Ye(r,o)}}}function pi(m){let h,d,x,f;function e(r){m[4](r)}let s={min:m[1],max:m[2],step:m[3],$$slots:{default:[mi,({thumbs:r})=>({5:r}),({thumbs:r})=>r?32:0]},$$scope:{ctx:m}};return m[0]!==void 0&&(s.value=m[0]),d=new ii({props:s}),Re.push(()=>Et(d,"value",e)),{c(){h=ne("div"),je(d.$$.fragment),this.h()},l(r){h=ie(r,"DIV",{class:!0});var n=re(h);qe(d.$$.fragment,n),n.forEach(K),this.h()},h(){oe(h,"class","c svelte-i92862")},m(r,n){ee(r,h,n),$e(d,h,null),f=!0},p(r,[n]){const o={};n&2&&(o.min=r[1]),n&4&&(o.max=r[2]),n&8&&(o.step=r[3]),n&544&&(o.$$scope={dirty:n,ctx:r}),!x&&n&1&&(x=!0,o.value=r[0],kt(()=>x=!1)),d.$set(o)},i(r){f||(q(d.$$.fragment,r),f=!0)},o(r){te(d.$$.fragment,r),f=!1},d(r){r&&K(h),et(d)}}}function xi(m,h,d){let{value:x}=h,{min:f}=h,{max:e}=h,{step:s}=h;function r(n){x=n,d(0,x)}return m.$$set=n=>{"value"in n&&d(0,x=n.value),"min"in n&&d(1,f=n.min),"max"in n&&d(2,e=n.max),"step"in n&&d(3,s=n.step)},[x,f,e,s,r]}class yi extends _e{constructor(h){super(),Xe(this,h,xi,pi,ze,{value:0,min:1,max:2,step:3})}}function Si(m){let h,d="Hold & Release",x,f;return{c(){h=ne("button"),h.textContent=d},l(e){h=ie(e,"BUTTON",{"data-svelte-h":!0}),yn(h)!=="svelte-19xqiqu"&&(h.textContent=d)},m(e,s){ee(e,h,s),x||(f=[ke(h,"mousedown",m[0]),ke(h,"mouseup",m[1])],x=!0)},p:Se,i:Se,o:Se,d(e){e&&K(h),x=!1,At(f)}}}function wi(m,h,d){let{value:x}=h;const f=sn();let e;function s(){let n=1;e=setInterval(()=>{x>=1?n=-1:x<=0&&(n=1),d(2,x+=.01*n),d(2,x=+x.toFixed(2))},17)}function r(){clearInterval(e),f("release",x),d(2,x=0)}return m.$$set=n=>{"value"in n&&d(2,x=n.value)},[s,r,x]}class Ci extends _e{constructor(h){super(),Xe(this,h,wi,Si,ze,{value:2})}}function Yt(m,h,d){const x=m.slice();return x[38]=h[d],x}function Kt(m,h,d){const x=m.slice();return x[41]=h[d],x}function Qt(m,h,d){const x=m.slice();x[44]=h[d];const f=x[15][x[44]];return x[45]=f,x}function Zt(m,h,d){const x=m.slice();return x[44]=h[d],x[49]=d,x}function Jt(m){let h;return{c(){h=ne("div"),this.h()},l(d){h=ie(d,"DIV",{class:!0,style:!0}),re(h).forEach(K),this.h()},h(){oe(h,"class",wn(m[44])+" svelte-r2hjrv"),j(h,"--w",Math.floor(Pe[m[44]]*m[0])+"px"),j(h,"--b",(Pe[m[44]]-Pe[m[14][m[49]+1]])/2*m[0]+"px")},m(d,x){ee(d,h,x)},p(d,x){x[0]&1&&j(h,"--w",Math.floor(Pe[d[44]]*d[0])+"px"),x[0]&1&&j(h,"--b",(Pe[d[44]]-Pe[d[14][d[49]+1]])/2*d[0]+"px")},d(d){d&&K(h)}}}function jt(m){let h,d=m[45]+"",x;return{c(){h=ne("span"),x=Fe(d),this.h()},l(f){h=ie(f,"SPAN",{class:!0,style:!0});var e=re(h);x=Ve(e,d),e.forEach(K),this.h()},h(){oe(h,"class","text-"+m[44]+" svelte-r2hjrv"),j(h,"--w",Math.floor(m[0]/2-Pe[m[44]]*m[0]/2)+"px")},m(f,e){ee(f,h,e),se(h,x)},p(f,e){e[0]&1&&j(h,"--w",Math.floor(f[0]/2-Pe[f[44]]*f[0]/2)+"px")},d(f){f&&K(h)}}}function qt(m){let h;return{c(){h=ne("div"),this.h()},l(d){h=ie(d,"DIV",{class:!0,style:!0}),re(h).forEach(K),this.h()},h(){oe(h,"class","quadrant-line svelte-r2hjrv"),j(h,"--w",(Ae-We)*m[0]/2+"px"),j(h,"--x",We*m[0]/2+"px"),j(h,"--angle",m[41]+"deg")},m(d,x){ee(d,h,x)},p(d,x){x[0]&1&&j(h,"--w",(Ae-We)*d[0]/2+"px"),x[0]&1&&j(h,"--x",We*d[0]/2+"px")},d(d){d&&K(h)}}}function $t(m){let h;return{c(){h=ne("div"),this.h()},l(d){h=ie(d,"DIV",{class:!0,style:!0}),re(h).forEach(K),this.h()},h(){oe(h,"class","peg svelte-r2hjrv"),j(h,"--w",Le*m[0]+"px"),j(h,"--x",(Te-Le)*m[0]/2+"px"),j(h,"--angle",m[38]+"deg")},m(d,x){ee(d,h,x)},p(d,x){x[0]&1&&j(h,"--w",Le*d[0]+"px"),x[0]&1&&j(h,"--x",(Te-Le)*d[0]/2+"px")},d(d){d&&K(h)}}}function en(m){let h,d,x,f,e,s=["place","aim"].includes(m[6]),r;const n=[Pi,Mi],o=[];function i(c,t){return c[6]==="shoot"?0:1}x=i(m),f=o[x]=n[x](m);let u=s&&tn(m);return{c(){h=ne("div"),d=ne("div"),f.c(),e=ve(),u&&u.c(),this.h()},l(c){h=ie(c,"DIV",{class:!0});var t=re(h);d=ie(t,"DIV",{class:!0});var l=re(d);f.l(l),l.forEach(K),e=ge(t),u&&u.l(t),t.forEach(K),this.h()},h(){oe(d,"class","top svelte-r2hjrv"),oe(h,"class","ui svelte-r2hjrv"),Bt(h,"visible",m[9])},m(c,t){ee(c,h,t),se(h,d),o[x].m(d,null),se(h,e),u&&u.m(h,null),r=!0},p(c,t){let l=x;x=i(c),x===l?o[x].p(c,t):(Ie(),te(o[l],1,1,()=>{o[l]=null}),De(),f=o[x],f?f.p(c,t):(f=o[x]=n[x](c),f.c()),q(f,1),f.m(d,null)),t[0]&64&&(s=["place","aim"].includes(c[6])),s?u?(u.p(c,t),t[0]&64&&q(u,1)):(u=tn(c),u.c(),q(u,1),u.m(h,null)):u&&(Ie(),te(u,1,1,()=>{u=null}),De()),(!r||t[0]&512)&&Bt(h,"visible",c[9])},i(c){r||(q(f),q(u),r=!0)},o(c){te(f),te(u),r=!1},d(c){c&&K(h),o[x].d(),u&&u.d()}}}function Mi(m){let h,d,x,f;return{c(){h=ne("button"),d=Fe(m[11])},l(e){h=ie(e,"BUTTON",{});var s=re(h);d=Ve(s,m[11]),s.forEach(K)},m(e,s){ee(e,h,s),se(h,d),x||(f=ke(h,"click",m[22]),x=!0)},p(e,s){s[0]&2048&&wt(d,e[11])},i:Se,o:Se,d(e){e&&K(h),x=!1,f()}}}function Pi(m){let h,d,x;function f(s){m[26](s)}let e={};return m[5]!==void 0&&(e.value=m[5]),h=new Ci({props:e}),Re.push(()=>Et(h,"value",f)),h.$on("release",m[21]),{c(){je(h.$$.fragment)},l(s){qe(h.$$.fragment,s)},m(s,r){$e(h,s,r),x=!0},p(s,r){const n={};!d&&r[0]&32&&(d=!0,n.value=s[5],kt(()=>d=!1)),h.$set(n)},i(s){x||(q(h.$$.fragment,s),x=!0)},o(s){te(h.$$.fragment,s),x=!1},d(s){et(h,s)}}}function tn(m){var r,n,o;let h,d,x,f;function e(i){m[27](i)}let s={phase:m[6],min:(r=m[16][m[6]])==null?void 0:r.min,max:(n=m[16][m[6]])==null?void 0:n.max,step:(o=m[16][m[6]])==null?void 0:o.step};return m[4]!==void 0&&(s.value=m[4]),d=new yi({props:s}),Re.push(()=>Et(d,"value",e)),{c(){h=ne("div"),je(d.$$.fragment),this.h()},l(i){h=ie(i,"DIV",{class:!0});var u=re(h);qe(d.$$.fragment,u),u.forEach(K),this.h()},h(){oe(h,"class","bottom svelte-r2hjrv")},m(i,u){ee(i,h,u),$e(d,h,null),f=!0},p(i,u){var t,l,a;const c={};u[0]&64&&(c.phase=i[6]),u[0]&64&&(c.min=(t=i[16][i[6]])==null?void 0:t.min),u[0]&64&&(c.max=(l=i[16][i[6]])==null?void 0:l.max),u[0]&64&&(c.step=(a=i[16][i[6]])==null?void 0:a.step),!x&&u[0]&16&&(x=!0,c.value=i[4],kt(()=>x=!1)),d.$set(c)},i(i){f||(q(d.$$.fragment,i),f=!0)},o(i){te(d.$$.fragment,i),f=!1},d(i){i&&K(h),et(d)}}}function nn(m){let h,d,x,f,e;return{c(){h=ne("p"),d=Fe("x: "),x=Fe(m[7]),f=Fe(", y: "),e=Fe(m[8]),this.h()},l(s){h=ie(s,"P",{class:!0});var r=re(h);d=Ve(r,"x: "),x=Ve(r,m[7]),f=Ve(r,", y: "),e=Ve(r,m[8]),r.forEach(K),this.h()},h(){oe(h,"class","svelte-r2hjrv")},m(s,r){ee(s,h,r),se(h,d),se(h,x),se(h,f),se(h,e)},p(s,r){r[0]&128&&wt(x,s[7]),r[0]&256&&wt(e,s[8])},d(s){s&&K(h)}}}function bi(m){let h,d,x,f,e,s,r,n,o,i,u,c=`${m[0]}px`,t=`${m[0]}px`,l,a,v,S,b,k,E,g,C,y=xe(m[14].slice(0,3)),p=[];for(let I=0;I<y.length;I+=1)p[I]=Jt(Zt(m,y,I));let M=xe(m[14]),w=[];for(let I=0;I<M.length;I+=1)w[I]=jt(Qt(m,M,I));let A=xe(m[12]),P=[];for(let I=0;I<A.length;I+=1)P[I]=qt(Kt(m,A,I));let T=xe(m[13]),R=[];for(let I=0;I<T.length;I+=1)R[I]=$t(Yt(m,T,I));let B=m[1]&&en(m),L=m[2]&&nn(m);return{c(){h=ne("div"),d=ne("div"),x=ne("div"),f=ve(),e=ne("div"),s=ve();for(let I=0;I<p.length;I+=1)p[I].c();r=ve(),n=ne("div"),o=ve();for(let I=0;I<w.length;I+=1)w[I].c();i=ve();for(let I=0;I<P.length;I+=1)P[I].c();u=ve();for(let I=0;I<R.length;I+=1)R[I].c();l=ve(),a=ne("div"),S=ve(),B&&B.c(),b=ve(),L&&L.c(),k=ye(),this.h()},l(I){h=ie(I,"DIV",{class:!0});var V=re(h);d=ie(V,"DIV",{class:!0});var D=re(d);x=ie(D,"DIV",{class:!0,style:!0}),re(x).forEach(K),f=ge(D),e=ie(D,"DIV",{class:!0,style:!0}),re(e).forEach(K),s=ge(D);for(let W=0;W<p.length;W+=1)p[W].l(D);r=ge(D),n=ie(D,"DIV",{class:!0,style:!0}),re(n).forEach(K),o=ge(D);for(let W=0;W<w.length;W+=1)w[W].l(D);i=ge(D);for(let W=0;W<P.length;W+=1)P[W].l(D);u=ge(D);for(let W=0;W<R.length;W+=1)R[W].l(D);D.forEach(K),l=ge(V),a=ie(V,"DIV",{class:!0}),re(a).forEach(K),V.forEach(K),S=ge(I),B&&B.l(I),b=ge(I),L&&L.l(I),k=ye(),this.h()},h(){oe(x,"class","base svelte-r2hjrv"),j(x,"--w",ct*m[0]+"px"),j(x,"--b",Ct/2*m[0]+"px"),oe(e,"class","surface svelte-r2hjrv"),j(e,"--w",Je*m[0]+"px"),oe(n,"class","twenty svelte-r2hjrv"),j(n,"--w",Math.floor(Ue*m[0])+"px"),oe(d,"class","bg svelte-r2hjrv"),j(d,"width",c),j(d,"height",t),oe(a,"class","fg svelte-r2hjrv"),oe(h,"class",v="c "+m[10]+" svelte-r2hjrv")},m(I,V){ee(I,h,V),se(h,d),se(d,x),se(d,f),se(d,e),se(d,s);for(let D=0;D<p.length;D+=1)p[D]&&p[D].m(d,null);se(d,r),se(d,n),se(d,o);for(let D=0;D<w.length;D+=1)w[D]&&w[D].m(d,null);se(d,i);for(let D=0;D<P.length;D+=1)P[D]&&P[D].m(d,null);se(d,u);for(let D=0;D<R.length;D+=1)R[D]&&R[D].m(d,null);se(h,l),se(h,a),m[25](a),ee(I,S,V),B&&B.m(I,V),ee(I,b,V),L&&L.m(I,V),ee(I,k,V),E=!0,g||(C=[ke(a,"click",m[20]),ke(a,"mousedown",m[17]),ke(a,"mousemove",m[18]),ke(a,"mouseup",m[19])],g=!0)},p(I,V){if((!E||V[0]&1)&&j(x,"--w",ct*I[0]+"px"),(!E||V[0]&1)&&j(x,"--b",Ct/2*I[0]+"px"),(!E||V[0]&1)&&j(e,"--w",Je*I[0]+"px"),V[0]&16385){y=xe(I[14].slice(0,3));let D;for(D=0;D<y.length;D+=1){const W=Zt(I,y,D);p[D]?p[D].p(W,V):(p[D]=Jt(W),p[D].c(),p[D].m(d,r))}for(;D<p.length;D+=1)p[D].d(1);p.length=y.length}if((!E||V[0]&1)&&j(n,"--w",Math.floor(Ue*I[0])+"px"),V[0]&49153){M=xe(I[14]);let D;for(D=0;D<M.length;D+=1){const W=Qt(I,M,D);w[D]?w[D].p(W,V):(w[D]=jt(W),w[D].c(),w[D].m(d,i))}for(;D<w.length;D+=1)w[D].d(1);w.length=M.length}if(V[0]&4097){A=xe(I[12]);let D;for(D=0;D<A.length;D+=1){const W=Kt(I,A,D);P[D]?P[D].p(W,V):(P[D]=qt(W),P[D].c(),P[D].m(d,u))}for(;D<P.length;D+=1)P[D].d(1);P.length=A.length}if(V[0]&8193){T=xe(I[13]);let D;for(D=0;D<T.length;D+=1){const W=Yt(I,T,D);R[D]?R[D].p(W,V):(R[D]=$t(W),R[D].c(),R[D].m(d,null))}for(;D<R.length;D+=1)R[D].d(1);R.length=T.length}V[0]&1&&c!==(c=`${I[0]}px`)&&j(d,"width",c),V[0]&1&&t!==(t=`${I[0]}px`)&&j(d,"height",t),(!E||V[0]&1024&&v!==(v="c "+I[10]+" svelte-r2hjrv"))&&oe(h,"class",v),I[1]?B?(B.p(I,V),V[0]&2&&q(B,1)):(B=en(I),B.c(),q(B,1),B.m(b.parentNode,b)):B&&(Ie(),te(B,1,1,()=>{B=null}),De()),I[2]?L?L.p(I,V):(L=nn(I),L.c(),L.m(k.parentNode,k)):L&&(L.d(1),L=null)},i(I){E||(q(B),E=!0)},o(I){te(B),E=!1},d(I){I&&(K(h),K(S),K(b),K(k)),Ye(p,I),Ye(w,I),Ye(P,I),Ye(R,I),m[25](null),B&&B.d(I),L&&L.d(I),g=!1,At(C)}}}function Ai(m){console.log(m)}function ki(m,h,d){let x,f,{width:e}=h,{ui:s}=h,{dev:r}=h,{tutorial:n}=h;const o=In(),i=[45,135,225,315],u=[15,60,105,150,195,240,285,330],c=["five","ten","fifteen","twenty"],t={five:"5",ten:"10",fifteen:"15",twenty:"20"},l={place:{value:[.5],min:.22,max:.78,step:.01},aim:{value:[0],min:-90,max:90,step:1}};let a,v,S,b=0,k=0,E,g=l.place.value,C=.5,y="place",p;function M(z){r&&(v=!0)}function w(z){v&&(d(24,S={x:z.offsetX,y:z.offsetY}),o.drag(S))}function A(){v=!1,o.flickDisc()}function P(z){r&&(z.offsetX,z.offsetY)}function T(){o.addDisc({player:"player1",state:"place"})}function R(){o.flickDisc({degrees:p,power:C})}function B(){y==="place"?o.placeDisc(g[0]*e):y==="aim"&&(p=Math.round(g[0]),o.aimDisc({degrees:p,power:.5}))}function L(){o.aimDisc({degrees:p,power:C})}function I(){y==="place"?(d(6,y="aim"),d(4,g=l.aim.value),o.setState("aim")):y==="aim"&&(d(6,y="shoot"),o.setState("shoot"))}function V(){o.removeDiscs(),d(9,E=!0),n!=="regions"?T():d(9,E=!1)}Sn(()=>{o.on("shotComplete",Ai)});function D(z){Re[z?"unshift":"push"](()=>{a=z,d(3,a)})}function W(z){C=z,d(5,C)}function _(z){g=z,d(4,g)}return m.$$set=z=>{"width"in z&&d(0,e=z.width),"ui"in z&&d(1,s=z.ui),"dev"in z&&d(2,r=z.dev),"tutorial"in z&&d(23,n=z.tutorial)},m.$$.update=()=>{m.$$.dirty[0]&64&&d(11,x=y==="place"?"Place":"Aim"),m.$$.dirty[0]&16777217&&d(7,b=S?(S.x/e).toFixed(2):0),m.$$.dirty[0]&16777217&&d(8,k=S?(S.y/e).toFixed(2):0),m.$$.dirty[0]&9&&e&&o.init({element:a,width:e}),m.$$.dirty[0]&17&&e&&B(),m.$$.dirty[0]&33&&e&&L(),m.$$.dirty[0]&8388609&&e&&V(),m.$$.dirty[0]&8388608&&d(10,f=n?`tutorial-${n}`:"")},[e,s,r,a,g,C,y,b,k,E,f,x,i,u,c,t,l,M,w,A,P,R,I,n,S,D,W,_]}class Ri extends _e{constructor(h){super(),Xe(this,h,ki,bi,ze,{width:0,ui:1,dev:2,tutorial:23},null,[-1,-1])}}export{Ri as C,Tt as a,Di as b,mt as c,xe as e,Cn as g};
